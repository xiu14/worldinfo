import { renderStoryString as $1, persona_description_positions as Vg } from "../../../../power-user.js";
import { parseMesExamples as V1, baseChatReplace as Y1, chat_metadata as Ms, getMaxContextSize as F1, name1 as wa, name2 as Kr, this_chid as mn, extension_prompt_types as Ea, depth_prompt_role_default as X1, depth_prompt_depth_default as K1 } from "../../../../../script.js";
import { createWorldInfoEntry as Q1, world_info_include_names as J1, wi_anchor_position as W1, selected_world_info as e2, METADATA_KEY as t2, world_info as n2, world_names as r2 } from "../../../../world-info.js";
import "../../../../slash-commands.js";
import "../../../../personas.js";
import { formatInstructModeExamples as a2, formatInstructModeSystemPrompt as i2 } from "../../../../instruct-mode.js";
import { appendFileContent as s2 } from "../../../../chats.js";
import { setOpenAIMessages as o2, setOpenAIMessageExamples as u2, formatWorldInfo as l2, getPromptPosition as c2, getPromptRole as d2, prepareOpenAIMessages as f2 } from "../../../../openai.js";
import { metadata_keys as Rs } from "../../../../authors-note.js";
import { getGroupDepthPrompts as h2, selected_group as an, groups as Yg } from "../../../../group-chats.js";
import { runRegexScript as p2, getRegexedString as m2, regex_placement as Fg } from "../../../regex/engine.js";
import { getCharaFilename as g2, removeFromArray as Xg, runAfterAnimation as v2 } from "../../../../utils.js";
import { commonEnumProviders as y2 } from "../../../../slash-commands/SlashCommandCommonEnumsProvider.js";
import "../../../../slash-commands/SlashCommandEnumValue.js";
import { Popup as Si, fixToastrForDialogs as qd } from "../../../../popup.js";
import Kg from "../../../../../lib/dialog-polyfill.esm.js";
function Uf(t) {
  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t;
}
var Gd = { exports: {} }, js = {};
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Qg;
function b2() {
  if (Qg) return js;
  Qg = 1;
  var t = Symbol.for("react.transitional.element"), r = Symbol.for("react.fragment");
  function s(a, u, l) {
    var h = null;
    if (l !== void 0 && (h = "" + l), u.key !== void 0 && (h = "" + u.key), "key" in u) {
      l = {};
      for (var m in u)
        m !== "key" && (l[m] = u[m]);
    } else l = u;
    return u = l.ref, {
      $$typeof: t,
      type: a,
      key: h,
      ref: u !== void 0 ? u : null,
      props: l
    };
  }
  return js.Fragment = r, js.jsx = s, js.jsxs = s, js;
}
var Jg;
function _2() {
  return Jg || (Jg = 1, Gd.exports = b2()), Gd.exports;
}
var T = _2(), Zd = { exports: {} }, Be = {};
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Wg;
function S2() {
  if (Wg) return Be;
  Wg = 1;
  var t = Symbol.for("react.transitional.element"), r = Symbol.for("react.portal"), s = Symbol.for("react.fragment"), a = Symbol.for("react.strict_mode"), u = Symbol.for("react.profiler"), l = Symbol.for("react.consumer"), h = Symbol.for("react.context"), m = Symbol.for("react.forward_ref"), f = Symbol.for("react.suspense"), g = Symbol.for("react.memo"), v = Symbol.for("react.lazy"), E = Symbol.iterator;
  function _(z) {
    return z === null || typeof z != "object" ? null : (z = E && z[E] || z["@@iterator"], typeof z == "function" ? z : null);
  }
  var b = {
    isMounted: function() {
      return !1;
    },
    enqueueForceUpdate: function() {
    },
    enqueueReplaceState: function() {
    },
    enqueueSetState: function() {
    }
  }, p = Object.assign, C = {};
  function k(z, Z, re) {
    this.props = z, this.context = Z, this.refs = C, this.updater = re || b;
  }
  k.prototype.isReactComponent = {}, k.prototype.setState = function(z, Z) {
    if (typeof z != "object" && typeof z != "function" && z != null)
      throw Error(
        "takes an object of state variables to update or a function which returns an object of state variables."
      );
    this.updater.enqueueSetState(this, z, Z, "setState");
  }, k.prototype.forceUpdate = function(z) {
    this.updater.enqueueForceUpdate(this, z, "forceUpdate");
  };
  function j() {
  }
  j.prototype = k.prototype;
  function O(z, Z, re) {
    this.props = z, this.context = Z, this.refs = C, this.updater = re || b;
  }
  var I = O.prototype = new j();
  I.constructor = O, p(I, k.prototype), I.isPureReactComponent = !0;
  var c = Array.isArray, S = { H: null, A: null, T: null, S: null, V: null }, w = Object.prototype.hasOwnProperty;
  function A(z, Z, re, ce, fe, we) {
    return re = we.ref, {
      $$typeof: t,
      type: z,
      key: Z,
      ref: re !== void 0 ? re : null,
      props: we
    };
  }
  function N(z, Z) {
    return A(
      z.type,
      Z,
      void 0,
      void 0,
      void 0,
      z.props
    );
  }
  function D(z) {
    return typeof z == "object" && z !== null && z.$$typeof === t;
  }
  function M(z) {
    var Z = { "=": "=0", ":": "=2" };
    return "$" + z.replace(/[=:]/g, function(re) {
      return Z[re];
    });
  }
  var P = /\/+/g;
  function H(z, Z) {
    return typeof z == "object" && z !== null && z.key != null ? M("" + z.key) : Z.toString(36);
  }
  function X() {
  }
  function F(z) {
    switch (z.status) {
      case "fulfilled":
        return z.value;
      case "rejected":
        throw z.reason;
      default:
        switch (typeof z.status == "string" ? z.then(X, X) : (z.status = "pending", z.then(
          function(Z) {
            z.status === "pending" && (z.status = "fulfilled", z.value = Z);
          },
          function(Z) {
            z.status === "pending" && (z.status = "rejected", z.reason = Z);
          }
        )), z.status) {
          case "fulfilled":
            return z.value;
          case "rejected":
            throw z.reason;
        }
    }
    throw z;
  }
  function Q(z, Z, re, ce, fe) {
    var we = typeof z;
    (we === "undefined" || we === "boolean") && (z = null);
    var te = !1;
    if (z === null) te = !0;
    else
      switch (we) {
        case "bigint":
        case "string":
        case "number":
          te = !0;
          break;
        case "object":
          switch (z.$$typeof) {
            case t:
            case r:
              te = !0;
              break;
            case v:
              return te = z._init, Q(
                te(z._payload),
                Z,
                re,
                ce,
                fe
              );
          }
      }
    if (te)
      return fe = fe(z), te = ce === "" ? "." + H(z, 0) : ce, c(fe) ? (re = "", te != null && (re = te.replace(P, "$&/") + "/"), Q(fe, Z, re, "", function(Ze) {
        return Ze;
      })) : fe != null && (D(fe) && (fe = N(
        fe,
        re + (fe.key == null || z && z.key === fe.key ? "" : ("" + fe.key).replace(
          P,
          "$&/"
        ) + "/") + te
      )), Z.push(fe)), 1;
    te = 0;
    var _e = ce === "" ? "." : ce + ":";
    if (c(z))
      for (var be = 0; be < z.length; be++)
        ce = z[be], we = _e + H(ce, be), te += Q(
          ce,
          Z,
          re,
          we,
          fe
        );
    else if (be = _(z), typeof be == "function")
      for (z = be.call(z), be = 0; !(ce = z.next()).done; )
        ce = ce.value, we = _e + H(ce, be++), te += Q(
          ce,
          Z,
          re,
          we,
          fe
        );
    else if (we === "object") {
      if (typeof z.then == "function")
        return Q(
          F(z),
          Z,
          re,
          ce,
          fe
        );
      throw Z = String(z), Error(
        "Objects are not valid as a React child (found: " + (Z === "[object Object]" ? "object with keys {" + Object.keys(z).join(", ") + "}" : Z) + "). If you meant to render a collection of children, use an array instead."
      );
    }
    return te;
  }
  function R(z, Z, re) {
    if (z == null) return z;
    var ce = [], fe = 0;
    return Q(z, ce, "", "", function(we) {
      return Z.call(re, we, fe++);
    }), ce;
  }
  function q(z) {
    if (z._status === -1) {
      var Z = z._result;
      Z = Z(), Z.then(
        function(re) {
          (z._status === 0 || z._status === -1) && (z._status = 1, z._result = re);
        },
        function(re) {
          (z._status === 0 || z._status === -1) && (z._status = 2, z._result = re);
        }
      ), z._status === -1 && (z._status = 0, z._result = Z);
    }
    if (z._status === 1) return z._result.default;
    throw z._result;
  }
  var $ = typeof reportError == "function" ? reportError : function(z) {
    if (typeof window == "object" && typeof window.ErrorEvent == "function") {
      var Z = new window.ErrorEvent("error", {
        bubbles: !0,
        cancelable: !0,
        message: typeof z == "object" && z !== null && typeof z.message == "string" ? String(z.message) : String(z),
        error: z
      });
      if (!window.dispatchEvent(Z)) return;
    } else if (typeof process == "object" && typeof process.emit == "function") {
      process.emit("uncaughtException", z);
      return;
    }
    console.error(z);
  };
  function oe() {
  }
  return Be.Children = {
    map: R,
    forEach: function(z, Z, re) {
      R(
        z,
        function() {
          Z.apply(this, arguments);
        },
        re
      );
    },
    count: function(z) {
      var Z = 0;
      return R(z, function() {
        Z++;
      }), Z;
    },
    toArray: function(z) {
      return R(z, function(Z) {
        return Z;
      }) || [];
    },
    only: function(z) {
      if (!D(z))
        throw Error(
          "React.Children.only expected to receive a single React element child."
        );
      return z;
    }
  }, Be.Component = k, Be.Fragment = s, Be.Profiler = u, Be.PureComponent = O, Be.StrictMode = a, Be.Suspense = f, Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE = S, Be.__COMPILER_RUNTIME = {
    __proto__: null,
    c: function(z) {
      return S.H.useMemoCache(z);
    }
  }, Be.cache = function(z) {
    return function() {
      return z.apply(null, arguments);
    };
  }, Be.cloneElement = function(z, Z, re) {
    if (z == null)
      throw Error(
        "The argument must be a React element, but you passed " + z + "."
      );
    var ce = p({}, z.props), fe = z.key, we = void 0;
    if (Z != null)
      for (te in Z.ref !== void 0 && (we = void 0), Z.key !== void 0 && (fe = "" + Z.key), Z)
        !w.call(Z, te) || te === "key" || te === "__self" || te === "__source" || te === "ref" && Z.ref === void 0 || (ce[te] = Z[te]);
    var te = arguments.length - 2;
    if (te === 1) ce.children = re;
    else if (1 < te) {
      for (var _e = Array(te), be = 0; be < te; be++)
        _e[be] = arguments[be + 2];
      ce.children = _e;
    }
    return A(z.type, fe, void 0, void 0, we, ce);
  }, Be.createContext = function(z) {
    return z = {
      $$typeof: h,
      _currentValue: z,
      _currentValue2: z,
      _threadCount: 0,
      Provider: null,
      Consumer: null
    }, z.Provider = z, z.Consumer = {
      $$typeof: l,
      _context: z
    }, z;
  }, Be.createElement = function(z, Z, re) {
    var ce, fe = {}, we = null;
    if (Z != null)
      for (ce in Z.key !== void 0 && (we = "" + Z.key), Z)
        w.call(Z, ce) && ce !== "key" && ce !== "__self" && ce !== "__source" && (fe[ce] = Z[ce]);
    var te = arguments.length - 2;
    if (te === 1) fe.children = re;
    else if (1 < te) {
      for (var _e = Array(te), be = 0; be < te; be++)
        _e[be] = arguments[be + 2];
      fe.children = _e;
    }
    if (z && z.defaultProps)
      for (ce in te = z.defaultProps, te)
        fe[ce] === void 0 && (fe[ce] = te[ce]);
    return A(z, we, void 0, void 0, null, fe);
  }, Be.createRef = function() {
    return { current: null };
  }, Be.forwardRef = function(z) {
    return { $$typeof: m, render: z };
  }, Be.isValidElement = D, Be.lazy = function(z) {
    return {
      $$typeof: v,
      _payload: { _status: -1, _result: z },
      _init: q
    };
  }, Be.memo = function(z, Z) {
    return {
      $$typeof: g,
      type: z,
      compare: Z === void 0 ? null : Z
    };
  }, Be.startTransition = function(z) {
    var Z = S.T, re = {};
    S.T = re;
    try {
      var ce = z(), fe = S.S;
      fe !== null && fe(re, ce), typeof ce == "object" && ce !== null && typeof ce.then == "function" && ce.then(oe, $);
    } catch (we) {
      $(we);
    } finally {
      S.T = Z;
    }
  }, Be.unstable_useCacheRefresh = function() {
    return S.H.useCacheRefresh();
  }, Be.use = function(z) {
    return S.H.use(z);
  }, Be.useActionState = function(z, Z, re) {
    return S.H.useActionState(z, Z, re);
  }, Be.useCallback = function(z, Z) {
    return S.H.useCallback(z, Z);
  }, Be.useContext = function(z) {
    return S.H.useContext(z);
  }, Be.useDebugValue = function() {
  }, Be.useDeferredValue = function(z, Z) {
    return S.H.useDeferredValue(z, Z);
  }, Be.useEffect = function(z, Z, re) {
    var ce = S.H;
    if (typeof re == "function")
      throw Error(
        "useEffect CRUD overload is not enabled in this build of React."
      );
    return ce.useEffect(z, Z);
  }, Be.useId = function() {
    return S.H.useId();
  }, Be.useImperativeHandle = function(z, Z, re) {
    return S.H.useImperativeHandle(z, Z, re);
  }, Be.useInsertionEffect = function(z, Z) {
    return S.H.useInsertionEffect(z, Z);
  }, Be.useLayoutEffect = function(z, Z) {
    return S.H.useLayoutEffect(z, Z);
  }, Be.useMemo = function(z, Z) {
    return S.H.useMemo(z, Z);
  }, Be.useOptimistic = function(z, Z) {
    return S.H.useOptimistic(z, Z);
  }, Be.useReducer = function(z, Z, re) {
    return S.H.useReducer(z, Z, re);
  }, Be.useRef = function(z) {
    return S.H.useRef(z);
  }, Be.useState = function(z) {
    return S.H.useState(z);
  }, Be.useSyncExternalStore = function(z, Z, re) {
    return S.H.useSyncExternalStore(
      z,
      Z,
      re
    );
  }, Be.useTransition = function() {
    return S.H.useTransition();
  }, Be.version = "19.1.1", Be;
}
var ev;
function Hf() {
  return ev || (ev = 1, Zd.exports = S2()), Zd.exports;
}
var se = Hf();
const cl = /* @__PURE__ */ Uf(se);
var $d = { exports: {} }, Ds = {}, Vd = { exports: {} }, Yd = {};
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var tv;
function w2() {
  return tv || (tv = 1, (function(t) {
    function r(R, q) {
      var $ = R.length;
      R.push(q);
      e: for (; 0 < $; ) {
        var oe = $ - 1 >>> 1, z = R[oe];
        if (0 < u(z, q))
          R[oe] = q, R[$] = z, $ = oe;
        else break e;
      }
    }
    function s(R) {
      return R.length === 0 ? null : R[0];
    }
    function a(R) {
      if (R.length === 0) return null;
      var q = R[0], $ = R.pop();
      if ($ !== q) {
        R[0] = $;
        e: for (var oe = 0, z = R.length, Z = z >>> 1; oe < Z; ) {
          var re = 2 * (oe + 1) - 1, ce = R[re], fe = re + 1, we = R[fe];
          if (0 > u(ce, $))
            fe < z && 0 > u(we, ce) ? (R[oe] = we, R[fe] = $, oe = fe) : (R[oe] = ce, R[re] = $, oe = re);
          else if (fe < z && 0 > u(we, $))
            R[oe] = we, R[fe] = $, oe = fe;
          else break e;
        }
      }
      return q;
    }
    function u(R, q) {
      var $ = R.sortIndex - q.sortIndex;
      return $ !== 0 ? $ : R.id - q.id;
    }
    if (t.unstable_now = void 0, typeof performance == "object" && typeof performance.now == "function") {
      var l = performance;
      t.unstable_now = function() {
        return l.now();
      };
    } else {
      var h = Date, m = h.now();
      t.unstable_now = function() {
        return h.now() - m;
      };
    }
    var f = [], g = [], v = 1, E = null, _ = 3, b = !1, p = !1, C = !1, k = !1, j = typeof setTimeout == "function" ? setTimeout : null, O = typeof clearTimeout == "function" ? clearTimeout : null, I = typeof setImmediate < "u" ? setImmediate : null;
    function c(R) {
      for (var q = s(g); q !== null; ) {
        if (q.callback === null) a(g);
        else if (q.startTime <= R)
          a(g), q.sortIndex = q.expirationTime, r(f, q);
        else break;
        q = s(g);
      }
    }
    function S(R) {
      if (C = !1, c(R), !p)
        if (s(f) !== null)
          p = !0, w || (w = !0, H());
        else {
          var q = s(g);
          q !== null && Q(S, q.startTime - R);
        }
    }
    var w = !1, A = -1, N = 5, D = -1;
    function M() {
      return k ? !0 : !(t.unstable_now() - D < N);
    }
    function P() {
      if (k = !1, w) {
        var R = t.unstable_now();
        D = R;
        var q = !0;
        try {
          e: {
            p = !1, C && (C = !1, O(A), A = -1), b = !0;
            var $ = _;
            try {
              t: {
                for (c(R), E = s(f); E !== null && !(E.expirationTime > R && M()); ) {
                  var oe = E.callback;
                  if (typeof oe == "function") {
                    E.callback = null, _ = E.priorityLevel;
                    var z = oe(
                      E.expirationTime <= R
                    );
                    if (R = t.unstable_now(), typeof z == "function") {
                      E.callback = z, c(R), q = !0;
                      break t;
                    }
                    E === s(f) && a(f), c(R);
                  } else a(f);
                  E = s(f);
                }
                if (E !== null) q = !0;
                else {
                  var Z = s(g);
                  Z !== null && Q(
                    S,
                    Z.startTime - R
                  ), q = !1;
                }
              }
              break e;
            } finally {
              E = null, _ = $, b = !1;
            }
            q = void 0;
          }
        } finally {
          q ? H() : w = !1;
        }
      }
    }
    var H;
    if (typeof I == "function")
      H = function() {
        I(P);
      };
    else if (typeof MessageChannel < "u") {
      var X = new MessageChannel(), F = X.port2;
      X.port1.onmessage = P, H = function() {
        F.postMessage(null);
      };
    } else
      H = function() {
        j(P, 0);
      };
    function Q(R, q) {
      A = j(function() {
        R(t.unstable_now());
      }, q);
    }
    t.unstable_IdlePriority = 5, t.unstable_ImmediatePriority = 1, t.unstable_LowPriority = 4, t.unstable_NormalPriority = 3, t.unstable_Profiling = null, t.unstable_UserBlockingPriority = 2, t.unstable_cancelCallback = function(R) {
      R.callback = null;
    }, t.unstable_forceFrameRate = function(R) {
      0 > R || 125 < R ? console.error(
        "forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"
      ) : N = 0 < R ? Math.floor(1e3 / R) : 5;
    }, t.unstable_getCurrentPriorityLevel = function() {
      return _;
    }, t.unstable_next = function(R) {
      switch (_) {
        case 1:
        case 2:
        case 3:
          var q = 3;
          break;
        default:
          q = _;
      }
      var $ = _;
      _ = q;
      try {
        return R();
      } finally {
        _ = $;
      }
    }, t.unstable_requestPaint = function() {
      k = !0;
    }, t.unstable_runWithPriority = function(R, q) {
      switch (R) {
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
          break;
        default:
          R = 3;
      }
      var $ = _;
      _ = R;
      try {
        return q();
      } finally {
        _ = $;
      }
    }, t.unstable_scheduleCallback = function(R, q, $) {
      var oe = t.unstable_now();
      switch (typeof $ == "object" && $ !== null ? ($ = $.delay, $ = typeof $ == "number" && 0 < $ ? oe + $ : oe) : $ = oe, R) {
        case 1:
          var z = -1;
          break;
        case 2:
          z = 250;
          break;
        case 5:
          z = 1073741823;
          break;
        case 4:
          z = 1e4;
          break;
        default:
          z = 5e3;
      }
      return z = $ + z, R = {
        id: v++,
        callback: q,
        priorityLevel: R,
        startTime: $,
        expirationTime: z,
        sortIndex: -1
      }, $ > oe ? (R.sortIndex = $, r(g, R), s(f) === null && R === s(g) && (C ? (O(A), A = -1) : C = !0, Q(S, $ - oe))) : (R.sortIndex = z, r(f, R), p || b || (p = !0, w || (w = !0, H()))), R;
    }, t.unstable_shouldYield = M, t.unstable_wrapCallback = function(R) {
      var q = _;
      return function() {
        var $ = _;
        _ = q;
        try {
          return R.apply(this, arguments);
        } finally {
          _ = $;
        }
      };
    };
  })(Yd)), Yd;
}
var nv;
function E2() {
  return nv || (nv = 1, Vd.exports = w2()), Vd.exports;
}
var Fd = { exports: {} }, Kt = {};
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var rv;
function C2() {
  if (rv) return Kt;
  rv = 1;
  var t = Hf();
  function r(f) {
    var g = "https://react.dev/errors/" + f;
    if (1 < arguments.length) {
      g += "?args[]=" + encodeURIComponent(arguments[1]);
      for (var v = 2; v < arguments.length; v++)
        g += "&args[]=" + encodeURIComponent(arguments[v]);
    }
    return "Minified React error #" + f + "; visit " + g + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
  }
  function s() {
  }
  var a = {
    d: {
      f: s,
      r: function() {
        throw Error(r(522));
      },
      D: s,
      C: s,
      L: s,
      m: s,
      X: s,
      S: s,
      M: s
    },
    p: 0,
    findDOMNode: null
  }, u = Symbol.for("react.portal");
  function l(f, g, v) {
    var E = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : null;
    return {
      $$typeof: u,
      key: E == null ? null : "" + E,
      children: f,
      containerInfo: g,
      implementation: v
    };
  }
  var h = t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;
  function m(f, g) {
    if (f === "font") return "";
    if (typeof g == "string")
      return g === "use-credentials" ? g : "";
  }
  return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE = a, Kt.createPortal = function(f, g) {
    var v = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : null;
    if (!g || g.nodeType !== 1 && g.nodeType !== 9 && g.nodeType !== 11)
      throw Error(r(299));
    return l(f, g, null, v);
  }, Kt.flushSync = function(f) {
    var g = h.T, v = a.p;
    try {
      if (h.T = null, a.p = 2, f) return f();
    } finally {
      h.T = g, a.p = v, a.d.f();
    }
  }, Kt.preconnect = function(f, g) {
    typeof f == "string" && (g ? (g = g.crossOrigin, g = typeof g == "string" ? g === "use-credentials" ? g : "" : void 0) : g = null, a.d.C(f, g));
  }, Kt.prefetchDNS = function(f) {
    typeof f == "string" && a.d.D(f);
  }, Kt.preinit = function(f, g) {
    if (typeof f == "string" && g && typeof g.as == "string") {
      var v = g.as, E = m(v, g.crossOrigin), _ = typeof g.integrity == "string" ? g.integrity : void 0, b = typeof g.fetchPriority == "string" ? g.fetchPriority : void 0;
      v === "style" ? a.d.S(
        f,
        typeof g.precedence == "string" ? g.precedence : void 0,
        {
          crossOrigin: E,
          integrity: _,
          fetchPriority: b
        }
      ) : v === "script" && a.d.X(f, {
        crossOrigin: E,
        integrity: _,
        fetchPriority: b,
        nonce: typeof g.nonce == "string" ? g.nonce : void 0
      });
    }
  }, Kt.preinitModule = function(f, g) {
    if (typeof f == "string")
      if (typeof g == "object" && g !== null) {
        if (g.as == null || g.as === "script") {
          var v = m(
            g.as,
            g.crossOrigin
          );
          a.d.M(f, {
            crossOrigin: v,
            integrity: typeof g.integrity == "string" ? g.integrity : void 0,
            nonce: typeof g.nonce == "string" ? g.nonce : void 0
          });
        }
      } else g == null && a.d.M(f);
  }, Kt.preload = function(f, g) {
    if (typeof f == "string" && typeof g == "object" && g !== null && typeof g.as == "string") {
      var v = g.as, E = m(v, g.crossOrigin);
      a.d.L(f, v, {
        crossOrigin: E,
        integrity: typeof g.integrity == "string" ? g.integrity : void 0,
        nonce: typeof g.nonce == "string" ? g.nonce : void 0,
        type: typeof g.type == "string" ? g.type : void 0,
        fetchPriority: typeof g.fetchPriority == "string" ? g.fetchPriority : void 0,
        referrerPolicy: typeof g.referrerPolicy == "string" ? g.referrerPolicy : void 0,
        imageSrcSet: typeof g.imageSrcSet == "string" ? g.imageSrcSet : void 0,
        imageSizes: typeof g.imageSizes == "string" ? g.imageSizes : void 0,
        media: typeof g.media == "string" ? g.media : void 0
      });
    }
  }, Kt.preloadModule = function(f, g) {
    if (typeof f == "string")
      if (g) {
        var v = m(g.as, g.crossOrigin);
        a.d.m(f, {
          as: typeof g.as == "string" && g.as !== "script" ? g.as : void 0,
          crossOrigin: v,
          integrity: typeof g.integrity == "string" ? g.integrity : void 0
        });
      } else a.d.m(f);
  }, Kt.requestFormReset = function(f) {
    a.d.r(f);
  }, Kt.unstable_batchedUpdates = function(f, g) {
    return f(g);
  }, Kt.useFormState = function(f, g, v) {
    return h.H.useFormState(f, g, v);
  }, Kt.useFormStatus = function() {
    return h.H.useHostTransitionStatus();
  }, Kt.version = "19.1.1", Kt;
}
var av;
function f0() {
  if (av) return Fd.exports;
  av = 1;
  function t() {
    if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function"))
      try {
        __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t);
      } catch (r) {
        console.error(r);
      }
  }
  return t(), Fd.exports = C2(), Fd.exports;
}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var iv;
function A2() {
  if (iv) return Ds;
  iv = 1;
  var t = E2(), r = Hf(), s = f0();
  function a(e) {
    var n = "https://react.dev/errors/" + e;
    if (1 < arguments.length) {
      n += "?args[]=" + encodeURIComponent(arguments[1]);
      for (var i = 2; i < arguments.length; i++)
        n += "&args[]=" + encodeURIComponent(arguments[i]);
    }
    return "Minified React error #" + e + "; visit " + n + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
  }
  function u(e) {
    return !(!e || e.nodeType !== 1 && e.nodeType !== 9 && e.nodeType !== 11);
  }
  function l(e) {
    var n = e, i = e;
    if (e.alternate) for (; n.return; ) n = n.return;
    else {
      e = n;
      do
        n = e, (n.flags & 4098) !== 0 && (i = n.return), e = n.return;
      while (e);
    }
    return n.tag === 3 ? i : null;
  }
  function h(e) {
    if (e.tag === 13) {
      var n = e.memoizedState;
      if (n === null && (e = e.alternate, e !== null && (n = e.memoizedState)), n !== null) return n.dehydrated;
    }
    return null;
  }
  function m(e) {
    if (l(e) !== e)
      throw Error(a(188));
  }
  function f(e) {
    var n = e.alternate;
    if (!n) {
      if (n = l(e), n === null) throw Error(a(188));
      return n !== e ? null : e;
    }
    for (var i = e, o = n; ; ) {
      var d = i.return;
      if (d === null) break;
      var y = d.alternate;
      if (y === null) {
        if (o = d.return, o !== null) {
          i = o;
          continue;
        }
        break;
      }
      if (d.child === y.child) {
        for (y = d.child; y; ) {
          if (y === i) return m(d), e;
          if (y === o) return m(d), n;
          y = y.sibling;
        }
        throw Error(a(188));
      }
      if (i.return !== o.return) i = d, o = y;
      else {
        for (var x = !1, L = d.child; L; ) {
          if (L === i) {
            x = !0, i = d, o = y;
            break;
          }
          if (L === o) {
            x = !0, o = d, i = y;
            break;
          }
          L = L.sibling;
        }
        if (!x) {
          for (L = y.child; L; ) {
            if (L === i) {
              x = !0, i = y, o = d;
              break;
            }
            if (L === o) {
              x = !0, o = y, i = d;
              break;
            }
            L = L.sibling;
          }
          if (!x) throw Error(a(189));
        }
      }
      if (i.alternate !== o) throw Error(a(190));
    }
    if (i.tag !== 3) throw Error(a(188));
    return i.stateNode.current === i ? e : n;
  }
  function g(e) {
    var n = e.tag;
    if (n === 5 || n === 26 || n === 27 || n === 6) return e;
    for (e = e.child; e !== null; ) {
      if (n = g(e), n !== null) return n;
      e = e.sibling;
    }
    return null;
  }
  var v = Object.assign, E = Symbol.for("react.element"), _ = Symbol.for("react.transitional.element"), b = Symbol.for("react.portal"), p = Symbol.for("react.fragment"), C = Symbol.for("react.strict_mode"), k = Symbol.for("react.profiler"), j = Symbol.for("react.provider"), O = Symbol.for("react.consumer"), I = Symbol.for("react.context"), c = Symbol.for("react.forward_ref"), S = Symbol.for("react.suspense"), w = Symbol.for("react.suspense_list"), A = Symbol.for("react.memo"), N = Symbol.for("react.lazy"), D = Symbol.for("react.activity"), M = Symbol.for("react.memo_cache_sentinel"), P = Symbol.iterator;
  function H(e) {
    return e === null || typeof e != "object" ? null : (e = P && e[P] || e["@@iterator"], typeof e == "function" ? e : null);
  }
  var X = Symbol.for("react.client.reference");
  function F(e) {
    if (e == null) return null;
    if (typeof e == "function")
      return e.$$typeof === X ? null : e.displayName || e.name || null;
    if (typeof e == "string") return e;
    switch (e) {
      case p:
        return "Fragment";
      case k:
        return "Profiler";
      case C:
        return "StrictMode";
      case S:
        return "Suspense";
      case w:
        return "SuspenseList";
      case D:
        return "Activity";
    }
    if (typeof e == "object")
      switch (e.$$typeof) {
        case b:
          return "Portal";
        case I:
          return (e.displayName || "Context") + ".Provider";
        case O:
          return (e._context.displayName || "Context") + ".Consumer";
        case c:
          var n = e.render;
          return e = e.displayName, e || (e = n.displayName || n.name || "", e = e !== "" ? "ForwardRef(" + e + ")" : "ForwardRef"), e;
        case A:
          return n = e.displayName || null, n !== null ? n : F(e.type) || "Memo";
        case N:
          n = e._payload, e = e._init;
          try {
            return F(e(n));
          } catch {
          }
      }
    return null;
  }
  var Q = Array.isArray, R = r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, q = s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, $ = {
    pending: !1,
    data: null,
    method: null,
    action: null
  }, oe = [], z = -1;
  function Z(e) {
    return { current: e };
  }
  function re(e) {
    0 > z || (e.current = oe[z], oe[z] = null, z--);
  }
  function ce(e, n) {
    z++, oe[z] = e.current, e.current = n;
  }
  var fe = Z(null), we = Z(null), te = Z(null), _e = Z(null);
  function be(e, n) {
    switch (ce(te, n), ce(we, e), ce(fe, null), n.nodeType) {
      case 9:
      case 11:
        e = (e = n.documentElement) && (e = e.namespaceURI) ? _g(e) : 0;
        break;
      default:
        if (e = n.tagName, n = n.namespaceURI)
          n = _g(n), e = Sg(n, e);
        else
          switch (e) {
            case "svg":
              e = 1;
              break;
            case "math":
              e = 2;
              break;
            default:
              e = 0;
          }
    }
    re(fe), ce(fe, e);
  }
  function Ze() {
    re(fe), re(we), re(te);
  }
  function $e(e) {
    e.memoizedState !== null && ce(_e, e);
    var n = fe.current, i = Sg(n, e.type);
    n !== i && (ce(we, e), ce(fe, i));
  }
  function Je(e) {
    we.current === e && (re(fe), re(we)), _e.current === e && (re(_e), Ts._currentValue = $);
  }
  var et = Object.prototype.hasOwnProperty, Ht = t.unstable_scheduleCallback, qt = t.unstable_cancelCallback, Wt = t.unstable_shouldYield, en = t.unstable_requestPaint, vt = t.unstable_now, vn = t.unstable_getCurrentPriorityLevel, St = t.unstable_ImmediatePriority, me = t.unstable_UserBlockingPriority, B = t.unstable_NormalPriority, V = t.unstable_LowPriority, ae = t.unstable_IdlePriority, ne = t.log, he = t.unstable_setDisableYieldValue, ve = null, Ee = null;
  function Le(e) {
    if (typeof ne == "function" && he(e), Ee && typeof Ee.setStrictMode == "function")
      try {
        Ee.setStrictMode(ve, e);
      } catch {
      }
  }
  var ge = Math.clz32 ? Math.clz32 : ut, Te = Math.log, Ye = Math.LN2;
  function ut(e) {
    return e >>>= 0, e === 0 ? 32 : 31 - (Te(e) / Ye | 0) | 0;
  }
  var at = 256, Ie = 4194304;
  function Xe(e) {
    var n = e & 42;
    if (n !== 0) return n;
    switch (e & -e) {
      case 1:
        return 1;
      case 2:
        return 2;
      case 4:
        return 4;
      case 8:
        return 8;
      case 16:
        return 16;
      case 32:
        return 32;
      case 64:
        return 64;
      case 128:
        return 128;
      case 256:
      case 512:
      case 1024:
      case 2048:
      case 4096:
      case 8192:
      case 16384:
      case 32768:
      case 65536:
      case 131072:
      case 262144:
      case 524288:
      case 1048576:
      case 2097152:
        return e & 4194048;
      case 4194304:
      case 8388608:
      case 16777216:
      case 33554432:
        return e & 62914560;
      case 67108864:
        return 67108864;
      case 134217728:
        return 134217728;
      case 268435456:
        return 268435456;
      case 536870912:
        return 536870912;
      case 1073741824:
        return 0;
      default:
        return e;
    }
  }
  function Ke(e, n, i) {
    var o = e.pendingLanes;
    if (o === 0) return 0;
    var d = 0, y = e.suspendedLanes, x = e.pingedLanes;
    e = e.warmLanes;
    var L = o & 134217727;
    return L !== 0 ? (o = L & ~y, o !== 0 ? d = Xe(o) : (x &= L, x !== 0 ? d = Xe(x) : i || (i = L & ~e, i !== 0 && (d = Xe(i))))) : (L = o & ~y, L !== 0 ? d = Xe(L) : x !== 0 ? d = Xe(x) : i || (i = o & ~e, i !== 0 && (d = Xe(i)))), d === 0 ? 0 : n !== 0 && n !== d && (n & y) === 0 && (y = d & -d, i = n & -n, y >= i || y === 32 && (i & 4194048) !== 0) ? n : d;
  }
  function ct(e, n) {
    return (e.pendingLanes & ~(e.suspendedLanes & ~e.pingedLanes) & n) === 0;
  }
  function qn(e, n) {
    switch (e) {
      case 1:
      case 2:
      case 4:
      case 8:
      case 64:
        return n + 250;
      case 16:
      case 32:
      case 128:
      case 256:
      case 512:
      case 1024:
      case 2048:
      case 4096:
      case 8192:
      case 16384:
      case 32768:
      case 65536:
      case 131072:
      case 262144:
      case 524288:
      case 1048576:
      case 2097152:
        return n + 5e3;
      case 4194304:
      case 8388608:
      case 16777216:
      case 33554432:
        return -1;
      case 67108864:
      case 134217728:
      case 268435456:
      case 536870912:
      case 1073741824:
        return -1;
      default:
        return -1;
    }
  }
  function On() {
    var e = at;
    return at <<= 1, (at & 4194048) === 0 && (at = 256), e;
  }
  function ah() {
    var e = Ie;
    return Ie <<= 1, (Ie & 62914560) === 0 && (Ie = 4194304), e;
  }
  function Ml(e) {
    for (var n = [], i = 0; 31 > i; i++) n.push(e);
    return n;
  }
  function Pi(e, n) {
    e.pendingLanes |= n, n !== 268435456 && (e.suspendedLanes = 0, e.pingedLanes = 0, e.warmLanes = 0);
  }
  function jb(e, n, i, o, d, y) {
    var x = e.pendingLanes;
    e.pendingLanes = i, e.suspendedLanes = 0, e.pingedLanes = 0, e.warmLanes = 0, e.expiredLanes &= i, e.entangledLanes &= i, e.errorRecoveryDisabledLanes &= i, e.shellSuspendCounter = 0;
    var L = e.entanglements, U = e.expirationTimes, J = e.hiddenUpdates;
    for (i = x & ~i; 0 < i; ) {
      var ie = 31 - ge(i), le = 1 << ie;
      L[ie] = 0, U[ie] = -1;
      var W = J[ie];
      if (W !== null)
        for (J[ie] = null, ie = 0; ie < W.length; ie++) {
          var ee = W[ie];
          ee !== null && (ee.lane &= -536870913);
        }
      i &= ~le;
    }
    o !== 0 && ih(e, o, 0), y !== 0 && d === 0 && e.tag !== 0 && (e.suspendedLanes |= y & ~(x & ~n));
  }
  function ih(e, n, i) {
    e.pendingLanes |= n, e.suspendedLanes &= ~n;
    var o = 31 - ge(n);
    e.entangledLanes |= n, e.entanglements[o] = e.entanglements[o] | 1073741824 | i & 4194090;
  }
  function sh(e, n) {
    var i = e.entangledLanes |= n;
    for (e = e.entanglements; i; ) {
      var o = 31 - ge(i), d = 1 << o;
      d & n | e[o] & n && (e[o] |= n), i &= ~d;
    }
  }
  function Rl(e) {
    switch (e) {
      case 2:
        e = 1;
        break;
      case 8:
        e = 4;
        break;
      case 32:
        e = 16;
        break;
      case 256:
      case 512:
      case 1024:
      case 2048:
      case 4096:
      case 8192:
      case 16384:
      case 32768:
      case 65536:
      case 131072:
      case 262144:
      case 524288:
      case 1048576:
      case 2097152:
      case 4194304:
      case 8388608:
      case 16777216:
      case 33554432:
        e = 128;
        break;
      case 268435456:
        e = 134217728;
        break;
      default:
        e = 0;
    }
    return e;
  }
  function jl(e) {
    return e &= -e, 2 < e ? 8 < e ? (e & 134217727) !== 0 ? 32 : 268435456 : 8 : 2;
  }
  function oh() {
    var e = q.p;
    return e !== 0 ? e : (e = window.event, e === void 0 ? 32 : Ug(e.type));
  }
  function Db(e, n) {
    var i = q.p;
    try {
      return q.p = e, n();
    } finally {
      q.p = i;
    }
  }
  var kr = Math.random().toString(36).slice(2), Ft = "__reactFiber$" + kr, sn = "__reactProps$" + kr, Pa = "__reactContainer$" + kr, Dl = "__reactEvents$" + kr, Lb = "__reactListeners$" + kr, Pb = "__reactHandles$" + kr, uh = "__reactResources$" + kr, zi = "__reactMarker$" + kr;
  function Ll(e) {
    delete e[Ft], delete e[sn], delete e[Dl], delete e[Lb], delete e[Pb];
  }
  function za(e) {
    var n = e[Ft];
    if (n) return n;
    for (var i = e.parentNode; i; ) {
      if (n = i[Pa] || i[Ft]) {
        if (i = n.alternate, n.child !== null || i !== null && i.child !== null)
          for (e = Ag(e); e !== null; ) {
            if (i = e[Ft]) return i;
            e = Ag(e);
          }
        return n;
      }
      e = i, i = e.parentNode;
    }
    return null;
  }
  function Ia(e) {
    if (e = e[Ft] || e[Pa]) {
      var n = e.tag;
      if (n === 5 || n === 6 || n === 13 || n === 26 || n === 27 || n === 3)
        return e;
    }
    return null;
  }
  function Ii(e) {
    var n = e.tag;
    if (n === 5 || n === 26 || n === 27 || n === 6) return e.stateNode;
    throw Error(a(33));
  }
  function Ba(e) {
    var n = e[uh];
    return n || (n = e[uh] = { hoistableStyles: /* @__PURE__ */ new Map(), hoistableScripts: /* @__PURE__ */ new Map() }), n;
  }
  function Pt(e) {
    e[zi] = !0;
  }
  var lh = /* @__PURE__ */ new Set(), ch = {};
  function ia(e, n) {
    Ua(e, n), Ua(e + "Capture", n);
  }
  function Ua(e, n) {
    for (ch[e] = n, e = 0; e < n.length; e++)
      lh.add(n[e]);
  }
  var zb = RegExp(
    "^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"
  ), dh = {}, fh = {};
  function Ib(e) {
    return et.call(fh, e) ? !0 : et.call(dh, e) ? !1 : zb.test(e) ? fh[e] = !0 : (dh[e] = !0, !1);
  }
  function oo(e, n, i) {
    if (Ib(n))
      if (i === null) e.removeAttribute(n);
      else {
        switch (typeof i) {
          case "undefined":
          case "function":
          case "symbol":
            e.removeAttribute(n);
            return;
          case "boolean":
            var o = n.toLowerCase().slice(0, 5);
            if (o !== "data-" && o !== "aria-") {
              e.removeAttribute(n);
              return;
            }
        }
        e.setAttribute(n, "" + i);
      }
  }
  function uo(e, n, i) {
    if (i === null) e.removeAttribute(n);
    else {
      switch (typeof i) {
        case "undefined":
        case "function":
        case "symbol":
        case "boolean":
          e.removeAttribute(n);
          return;
      }
      e.setAttribute(n, "" + i);
    }
  }
  function sr(e, n, i, o) {
    if (o === null) e.removeAttribute(i);
    else {
      switch (typeof o) {
        case "undefined":
        case "function":
        case "symbol":
        case "boolean":
          e.removeAttribute(i);
          return;
      }
      e.setAttributeNS(n, i, "" + o);
    }
  }
  var Pl, hh;
  function Ha(e) {
    if (Pl === void 0)
      try {
        throw Error();
      } catch (i) {
        var n = i.stack.trim().match(/\n( *(at )?)/);
        Pl = n && n[1] || "", hh = -1 < i.stack.indexOf(`
    at`) ? " (<anonymous>)" : -1 < i.stack.indexOf("@") ? "@unknown:0:0" : "";
      }
    return `
` + Pl + e + hh;
  }
  var zl = !1;
  function Il(e, n) {
    if (!e || zl) return "";
    zl = !0;
    var i = Error.prepareStackTrace;
    Error.prepareStackTrace = void 0;
    try {
      var o = {
        DetermineComponentFrameRoot: function() {
          try {
            if (n) {
              var le = function() {
                throw Error();
              };
              if (Object.defineProperty(le.prototype, "props", {
                set: function() {
                  throw Error();
                }
              }), typeof Reflect == "object" && Reflect.construct) {
                try {
                  Reflect.construct(le, []);
                } catch (ee) {
                  var W = ee;
                }
                Reflect.construct(e, [], le);
              } else {
                try {
                  le.call();
                } catch (ee) {
                  W = ee;
                }
                e.call(le.prototype);
              }
            } else {
              try {
                throw Error();
              } catch (ee) {
                W = ee;
              }
              (le = e()) && typeof le.catch == "function" && le.catch(function() {
              });
            }
          } catch (ee) {
            if (ee && W && typeof ee.stack == "string")
              return [ee.stack, W.stack];
          }
          return [null, null];
        }
      };
      o.DetermineComponentFrameRoot.displayName = "DetermineComponentFrameRoot";
      var d = Object.getOwnPropertyDescriptor(
        o.DetermineComponentFrameRoot,
        "name"
      );
      d && d.configurable && Object.defineProperty(
        o.DetermineComponentFrameRoot,
        "name",
        { value: "DetermineComponentFrameRoot" }
      );
      var y = o.DetermineComponentFrameRoot(), x = y[0], L = y[1];
      if (x && L) {
        var U = x.split(`
`), J = L.split(`
`);
        for (d = o = 0; o < U.length && !U[o].includes("DetermineComponentFrameRoot"); )
          o++;
        for (; d < J.length && !J[d].includes(
          "DetermineComponentFrameRoot"
        ); )
          d++;
        if (o === U.length || d === J.length)
          for (o = U.length - 1, d = J.length - 1; 1 <= o && 0 <= d && U[o] !== J[d]; )
            d--;
        for (; 1 <= o && 0 <= d; o--, d--)
          if (U[o] !== J[d]) {
            if (o !== 1 || d !== 1)
              do
                if (o--, d--, 0 > d || U[o] !== J[d]) {
                  var ie = `
` + U[o].replace(" at new ", " at ");
                  return e.displayName && ie.includes("<anonymous>") && (ie = ie.replace("<anonymous>", e.displayName)), ie;
                }
              while (1 <= o && 0 <= d);
            break;
          }
      }
    } finally {
      zl = !1, Error.prepareStackTrace = i;
    }
    return (i = e ? e.displayName || e.name : "") ? Ha(i) : "";
  }
  function Bb(e) {
    switch (e.tag) {
      case 26:
      case 27:
      case 5:
        return Ha(e.type);
      case 16:
        return Ha("Lazy");
      case 13:
        return Ha("Suspense");
      case 19:
        return Ha("SuspenseList");
      case 0:
      case 15:
        return Il(e.type, !1);
      case 11:
        return Il(e.type.render, !1);
      case 1:
        return Il(e.type, !0);
      case 31:
        return Ha("Activity");
      default:
        return "";
    }
  }
  function ph(e) {
    try {
      var n = "";
      do
        n += Bb(e), e = e.return;
      while (e);
      return n;
    } catch (i) {
      return `
Error generating stack: ` + i.message + `
` + i.stack;
    }
  }
  function Mn(e) {
    switch (typeof e) {
      case "bigint":
      case "boolean":
      case "number":
      case "string":
      case "undefined":
        return e;
      case "object":
        return e;
      default:
        return "";
    }
  }
  function mh(e) {
    var n = e.type;
    return (e = e.nodeName) && e.toLowerCase() === "input" && (n === "checkbox" || n === "radio");
  }
  function Ub(e) {
    var n = mh(e) ? "checked" : "value", i = Object.getOwnPropertyDescriptor(
      e.constructor.prototype,
      n
    ), o = "" + e[n];
    if (!e.hasOwnProperty(n) && typeof i < "u" && typeof i.get == "function" && typeof i.set == "function") {
      var d = i.get, y = i.set;
      return Object.defineProperty(e, n, {
        configurable: !0,
        get: function() {
          return d.call(this);
        },
        set: function(x) {
          o = "" + x, y.call(this, x);
        }
      }), Object.defineProperty(e, n, {
        enumerable: i.enumerable
      }), {
        getValue: function() {
          return o;
        },
        setValue: function(x) {
          o = "" + x;
        },
        stopTracking: function() {
          e._valueTracker = null, delete e[n];
        }
      };
    }
  }
  function lo(e) {
    e._valueTracker || (e._valueTracker = Ub(e));
  }
  function gh(e) {
    if (!e) return !1;
    var n = e._valueTracker;
    if (!n) return !0;
    var i = n.getValue(), o = "";
    return e && (o = mh(e) ? e.checked ? "true" : "false" : e.value), e = o, e !== i ? (n.setValue(e), !0) : !1;
  }
  function co(e) {
    if (e = e || (typeof document < "u" ? document : void 0), typeof e > "u") return null;
    try {
      return e.activeElement || e.body;
    } catch {
      return e.body;
    }
  }
  var Hb = /[\n"\\]/g;
  function Rn(e) {
    return e.replace(
      Hb,
      function(n) {
        return "\\" + n.charCodeAt(0).toString(16) + " ";
      }
    );
  }
  function Bl(e, n, i, o, d, y, x, L) {
    e.name = "", x != null && typeof x != "function" && typeof x != "symbol" && typeof x != "boolean" ? e.type = x : e.removeAttribute("type"), n != null ? x === "number" ? (n === 0 && e.value === "" || e.value != n) && (e.value = "" + Mn(n)) : e.value !== "" + Mn(n) && (e.value = "" + Mn(n)) : x !== "submit" && x !== "reset" || e.removeAttribute("value"), n != null ? Ul(e, x, Mn(n)) : i != null ? Ul(e, x, Mn(i)) : o != null && e.removeAttribute("value"), d == null && y != null && (e.defaultChecked = !!y), d != null && (e.checked = d && typeof d != "function" && typeof d != "symbol"), L != null && typeof L != "function" && typeof L != "symbol" && typeof L != "boolean" ? e.name = "" + Mn(L) : e.removeAttribute("name");
  }
  function vh(e, n, i, o, d, y, x, L) {
    if (y != null && typeof y != "function" && typeof y != "symbol" && typeof y != "boolean" && (e.type = y), n != null || i != null) {
      if (!(y !== "submit" && y !== "reset" || n != null))
        return;
      i = i != null ? "" + Mn(i) : "", n = n != null ? "" + Mn(n) : i, L || n === e.value || (e.value = n), e.defaultValue = n;
    }
    o = o ?? d, o = typeof o != "function" && typeof o != "symbol" && !!o, e.checked = L ? e.checked : !!o, e.defaultChecked = !!o, x != null && typeof x != "function" && typeof x != "symbol" && typeof x != "boolean" && (e.name = x);
  }
  function Ul(e, n, i) {
    n === "number" && co(e.ownerDocument) === e || e.defaultValue === "" + i || (e.defaultValue = "" + i);
  }
  function qa(e, n, i, o) {
    if (e = e.options, n) {
      n = {};
      for (var d = 0; d < i.length; d++)
        n["$" + i[d]] = !0;
      for (i = 0; i < e.length; i++)
        d = n.hasOwnProperty("$" + e[i].value), e[i].selected !== d && (e[i].selected = d), d && o && (e[i].defaultSelected = !0);
    } else {
      for (i = "" + Mn(i), n = null, d = 0; d < e.length; d++) {
        if (e[d].value === i) {
          e[d].selected = !0, o && (e[d].defaultSelected = !0);
          return;
        }
        n !== null || e[d].disabled || (n = e[d]);
      }
      n !== null && (n.selected = !0);
    }
  }
  function yh(e, n, i) {
    if (n != null && (n = "" + Mn(n), n !== e.value && (e.value = n), i == null)) {
      e.defaultValue !== n && (e.defaultValue = n);
      return;
    }
    e.defaultValue = i != null ? "" + Mn(i) : "";
  }
  function bh(e, n, i, o) {
    if (n == null) {
      if (o != null) {
        if (i != null) throw Error(a(92));
        if (Q(o)) {
          if (1 < o.length) throw Error(a(93));
          o = o[0];
        }
        i = o;
      }
      i == null && (i = ""), n = i;
    }
    i = Mn(n), e.defaultValue = i, o = e.textContent, o === i && o !== "" && o !== null && (e.value = o);
  }
  function Ga(e, n) {
    if (n) {
      var i = e.firstChild;
      if (i && i === e.lastChild && i.nodeType === 3) {
        i.nodeValue = n;
        return;
      }
    }
    e.textContent = n;
  }
  var qb = new Set(
    "animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(
      " "
    )
  );
  function _h(e, n, i) {
    var o = n.indexOf("--") === 0;
    i == null || typeof i == "boolean" || i === "" ? o ? e.setProperty(n, "") : n === "float" ? e.cssFloat = "" : e[n] = "" : o ? e.setProperty(n, i) : typeof i != "number" || i === 0 || qb.has(n) ? n === "float" ? e.cssFloat = i : e[n] = ("" + i).trim() : e[n] = i + "px";
  }
  function Sh(e, n, i) {
    if (n != null && typeof n != "object")
      throw Error(a(62));
    if (e = e.style, i != null) {
      for (var o in i)
        !i.hasOwnProperty(o) || n != null && n.hasOwnProperty(o) || (o.indexOf("--") === 0 ? e.setProperty(o, "") : o === "float" ? e.cssFloat = "" : e[o] = "");
      for (var d in n)
        o = n[d], n.hasOwnProperty(d) && i[d] !== o && _h(e, d, o);
    } else
      for (var y in n)
        n.hasOwnProperty(y) && _h(e, y, n[y]);
  }
  function Hl(e) {
    if (e.indexOf("-") === -1) return !1;
    switch (e) {
      case "annotation-xml":
      case "color-profile":
      case "font-face":
      case "font-face-src":
      case "font-face-uri":
      case "font-face-format":
      case "font-face-name":
      case "missing-glyph":
        return !1;
      default:
        return !0;
    }
  }
  var Gb = /* @__PURE__ */ new Map([
    ["acceptCharset", "accept-charset"],
    ["htmlFor", "for"],
    ["httpEquiv", "http-equiv"],
    ["crossOrigin", "crossorigin"],
    ["accentHeight", "accent-height"],
    ["alignmentBaseline", "alignment-baseline"],
    ["arabicForm", "arabic-form"],
    ["baselineShift", "baseline-shift"],
    ["capHeight", "cap-height"],
    ["clipPath", "clip-path"],
    ["clipRule", "clip-rule"],
    ["colorInterpolation", "color-interpolation"],
    ["colorInterpolationFilters", "color-interpolation-filters"],
    ["colorProfile", "color-profile"],
    ["colorRendering", "color-rendering"],
    ["dominantBaseline", "dominant-baseline"],
    ["enableBackground", "enable-background"],
    ["fillOpacity", "fill-opacity"],
    ["fillRule", "fill-rule"],
    ["floodColor", "flood-color"],
    ["floodOpacity", "flood-opacity"],
    ["fontFamily", "font-family"],
    ["fontSize", "font-size"],
    ["fontSizeAdjust", "font-size-adjust"],
    ["fontStretch", "font-stretch"],
    ["fontStyle", "font-style"],
    ["fontVariant", "font-variant"],
    ["fontWeight", "font-weight"],
    ["glyphName", "glyph-name"],
    ["glyphOrientationHorizontal", "glyph-orientation-horizontal"],
    ["glyphOrientationVertical", "glyph-orientation-vertical"],
    ["horizAdvX", "horiz-adv-x"],
    ["horizOriginX", "horiz-origin-x"],
    ["imageRendering", "image-rendering"],
    ["letterSpacing", "letter-spacing"],
    ["lightingColor", "lighting-color"],
    ["markerEnd", "marker-end"],
    ["markerMid", "marker-mid"],
    ["markerStart", "marker-start"],
    ["overlinePosition", "overline-position"],
    ["overlineThickness", "overline-thickness"],
    ["paintOrder", "paint-order"],
    ["panose-1", "panose-1"],
    ["pointerEvents", "pointer-events"],
    ["renderingIntent", "rendering-intent"],
    ["shapeRendering", "shape-rendering"],
    ["stopColor", "stop-color"],
    ["stopOpacity", "stop-opacity"],
    ["strikethroughPosition", "strikethrough-position"],
    ["strikethroughThickness", "strikethrough-thickness"],
    ["strokeDasharray", "stroke-dasharray"],
    ["strokeDashoffset", "stroke-dashoffset"],
    ["strokeLinecap", "stroke-linecap"],
    ["strokeLinejoin", "stroke-linejoin"],
    ["strokeMiterlimit", "stroke-miterlimit"],
    ["strokeOpacity", "stroke-opacity"],
    ["strokeWidth", "stroke-width"],
    ["textAnchor", "text-anchor"],
    ["textDecoration", "text-decoration"],
    ["textRendering", "text-rendering"],
    ["transformOrigin", "transform-origin"],
    ["underlinePosition", "underline-position"],
    ["underlineThickness", "underline-thickness"],
    ["unicodeBidi", "unicode-bidi"],
    ["unicodeRange", "unicode-range"],
    ["unitsPerEm", "units-per-em"],
    ["vAlphabetic", "v-alphabetic"],
    ["vHanging", "v-hanging"],
    ["vIdeographic", "v-ideographic"],
    ["vMathematical", "v-mathematical"],
    ["vectorEffect", "vector-effect"],
    ["vertAdvY", "vert-adv-y"],
    ["vertOriginX", "vert-origin-x"],
    ["vertOriginY", "vert-origin-y"],
    ["wordSpacing", "word-spacing"],
    ["writingMode", "writing-mode"],
    ["xmlnsXlink", "xmlns:xlink"],
    ["xHeight", "x-height"]
  ]), Zb = /^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;
  function fo(e) {
    return Zb.test("" + e) ? "javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')" : e;
  }
  var ql = null;
  function Gl(e) {
    return e = e.target || e.srcElement || window, e.correspondingUseElement && (e = e.correspondingUseElement), e.nodeType === 3 ? e.parentNode : e;
  }
  var Za = null, $a = null;
  function wh(e) {
    var n = Ia(e);
    if (n && (e = n.stateNode)) {
      var i = e[sn] || null;
      e: switch (e = n.stateNode, n.type) {
        case "input":
          if (Bl(
            e,
            i.value,
            i.defaultValue,
            i.defaultValue,
            i.checked,
            i.defaultChecked,
            i.type,
            i.name
          ), n = i.name, i.type === "radio" && n != null) {
            for (i = e; i.parentNode; ) i = i.parentNode;
            for (i = i.querySelectorAll(
              'input[name="' + Rn(
                "" + n
              ) + '"][type="radio"]'
            ), n = 0; n < i.length; n++) {
              var o = i[n];
              if (o !== e && o.form === e.form) {
                var d = o[sn] || null;
                if (!d) throw Error(a(90));
                Bl(
                  o,
                  d.value,
                  d.defaultValue,
                  d.defaultValue,
                  d.checked,
                  d.defaultChecked,
                  d.type,
                  d.name
                );
              }
            }
            for (n = 0; n < i.length; n++)
              o = i[n], o.form === e.form && gh(o);
          }
          break e;
        case "textarea":
          yh(e, i.value, i.defaultValue);
          break e;
        case "select":
          n = i.value, n != null && qa(e, !!i.multiple, n, !1);
      }
    }
  }
  var Zl = !1;
  function Eh(e, n, i) {
    if (Zl) return e(n, i);
    Zl = !0;
    try {
      var o = e(n);
      return o;
    } finally {
      if (Zl = !1, (Za !== null || $a !== null) && (Qo(), Za && (n = Za, e = $a, $a = Za = null, wh(n), e)))
        for (n = 0; n < e.length; n++) wh(e[n]);
    }
  }
  function Bi(e, n) {
    var i = e.stateNode;
    if (i === null) return null;
    var o = i[sn] || null;
    if (o === null) return null;
    i = o[n];
    e: switch (n) {
      case "onClick":
      case "onClickCapture":
      case "onDoubleClick":
      case "onDoubleClickCapture":
      case "onMouseDown":
      case "onMouseDownCapture":
      case "onMouseMove":
      case "onMouseMoveCapture":
      case "onMouseUp":
      case "onMouseUpCapture":
      case "onMouseEnter":
        (o = !o.disabled) || (e = e.type, o = !(e === "button" || e === "input" || e === "select" || e === "textarea")), e = !o;
        break e;
      default:
        e = !1;
    }
    if (e) return null;
    if (i && typeof i != "function")
      throw Error(
        a(231, n, typeof i)
      );
    return i;
  }
  var or = !(typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u"), $l = !1;
  if (or)
    try {
      var Ui = {};
      Object.defineProperty(Ui, "passive", {
        get: function() {
          $l = !0;
        }
      }), window.addEventListener("test", Ui, Ui), window.removeEventListener("test", Ui, Ui);
    } catch {
      $l = !1;
    }
  var xr = null, Vl = null, ho = null;
  function Ch() {
    if (ho) return ho;
    var e, n = Vl, i = n.length, o, d = "value" in xr ? xr.value : xr.textContent, y = d.length;
    for (e = 0; e < i && n[e] === d[e]; e++) ;
    var x = i - e;
    for (o = 1; o <= x && n[i - o] === d[y - o]; o++) ;
    return ho = d.slice(e, 1 < o ? 1 - o : void 0);
  }
  function po(e) {
    var n = e.keyCode;
    return "charCode" in e ? (e = e.charCode, e === 0 && n === 13 && (e = 13)) : e = n, e === 10 && (e = 13), 32 <= e || e === 13 ? e : 0;
  }
  function mo() {
    return !0;
  }
  function Ah() {
    return !1;
  }
  function on(e) {
    function n(i, o, d, y, x) {
      this._reactName = i, this._targetInst = d, this.type = o, this.nativeEvent = y, this.target = x, this.currentTarget = null;
      for (var L in e)
        e.hasOwnProperty(L) && (i = e[L], this[L] = i ? i(y) : y[L]);
      return this.isDefaultPrevented = (y.defaultPrevented != null ? y.defaultPrevented : y.returnValue === !1) ? mo : Ah, this.isPropagationStopped = Ah, this;
    }
    return v(n.prototype, {
      preventDefault: function() {
        this.defaultPrevented = !0;
        var i = this.nativeEvent;
        i && (i.preventDefault ? i.preventDefault() : typeof i.returnValue != "unknown" && (i.returnValue = !1), this.isDefaultPrevented = mo);
      },
      stopPropagation: function() {
        var i = this.nativeEvent;
        i && (i.stopPropagation ? i.stopPropagation() : typeof i.cancelBubble != "unknown" && (i.cancelBubble = !0), this.isPropagationStopped = mo);
      },
      persist: function() {
      },
      isPersistent: mo
    }), n;
  }
  var sa = {
    eventPhase: 0,
    bubbles: 0,
    cancelable: 0,
    timeStamp: function(e) {
      return e.timeStamp || Date.now();
    },
    defaultPrevented: 0,
    isTrusted: 0
  }, go = on(sa), Hi = v({}, sa, { view: 0, detail: 0 }), $b = on(Hi), Yl, Fl, qi, vo = v({}, Hi, {
    screenX: 0,
    screenY: 0,
    clientX: 0,
    clientY: 0,
    pageX: 0,
    pageY: 0,
    ctrlKey: 0,
    shiftKey: 0,
    altKey: 0,
    metaKey: 0,
    getModifierState: Kl,
    button: 0,
    buttons: 0,
    relatedTarget: function(e) {
      return e.relatedTarget === void 0 ? e.fromElement === e.srcElement ? e.toElement : e.fromElement : e.relatedTarget;
    },
    movementX: function(e) {
      return "movementX" in e ? e.movementX : (e !== qi && (qi && e.type === "mousemove" ? (Yl = e.screenX - qi.screenX, Fl = e.screenY - qi.screenY) : Fl = Yl = 0, qi = e), Yl);
    },
    movementY: function(e) {
      return "movementY" in e ? e.movementY : Fl;
    }
  }), Th = on(vo), Vb = v({}, vo, { dataTransfer: 0 }), Yb = on(Vb), Fb = v({}, Hi, { relatedTarget: 0 }), Xl = on(Fb), Xb = v({}, sa, {
    animationName: 0,
    elapsedTime: 0,
    pseudoElement: 0
  }), Kb = on(Xb), Qb = v({}, sa, {
    clipboardData: function(e) {
      return "clipboardData" in e ? e.clipboardData : window.clipboardData;
    }
  }), Jb = on(Qb), Wb = v({}, sa, { data: 0 }), kh = on(Wb), e_ = {
    Esc: "Escape",
    Spacebar: " ",
    Left: "ArrowLeft",
    Up: "ArrowUp",
    Right: "ArrowRight",
    Down: "ArrowDown",
    Del: "Delete",
    Win: "OS",
    Menu: "ContextMenu",
    Apps: "ContextMenu",
    Scroll: "ScrollLock",
    MozPrintableKey: "Unidentified"
  }, t_ = {
    8: "Backspace",
    9: "Tab",
    12: "Clear",
    13: "Enter",
    16: "Shift",
    17: "Control",
    18: "Alt",
    19: "Pause",
    20: "CapsLock",
    27: "Escape",
    32: " ",
    33: "PageUp",
    34: "PageDown",
    35: "End",
    36: "Home",
    37: "ArrowLeft",
    38: "ArrowUp",
    39: "ArrowRight",
    40: "ArrowDown",
    45: "Insert",
    46: "Delete",
    112: "F1",
    113: "F2",
    114: "F3",
    115: "F4",
    116: "F5",
    117: "F6",
    118: "F7",
    119: "F8",
    120: "F9",
    121: "F10",
    122: "F11",
    123: "F12",
    144: "NumLock",
    145: "ScrollLock",
    224: "Meta"
  }, n_ = {
    Alt: "altKey",
    Control: "ctrlKey",
    Meta: "metaKey",
    Shift: "shiftKey"
  };
  function r_(e) {
    var n = this.nativeEvent;
    return n.getModifierState ? n.getModifierState(e) : (e = n_[e]) ? !!n[e] : !1;
  }
  function Kl() {
    return r_;
  }
  var a_ = v({}, Hi, {
    key: function(e) {
      if (e.key) {
        var n = e_[e.key] || e.key;
        if (n !== "Unidentified") return n;
      }
      return e.type === "keypress" ? (e = po(e), e === 13 ? "Enter" : String.fromCharCode(e)) : e.type === "keydown" || e.type === "keyup" ? t_[e.keyCode] || "Unidentified" : "";
    },
    code: 0,
    location: 0,
    ctrlKey: 0,
    shiftKey: 0,
    altKey: 0,
    metaKey: 0,
    repeat: 0,
    locale: 0,
    getModifierState: Kl,
    charCode: function(e) {
      return e.type === "keypress" ? po(e) : 0;
    },
    keyCode: function(e) {
      return e.type === "keydown" || e.type === "keyup" ? e.keyCode : 0;
    },
    which: function(e) {
      return e.type === "keypress" ? po(e) : e.type === "keydown" || e.type === "keyup" ? e.keyCode : 0;
    }
  }), i_ = on(a_), s_ = v({}, vo, {
    pointerId: 0,
    width: 0,
    height: 0,
    pressure: 0,
    tangentialPressure: 0,
    tiltX: 0,
    tiltY: 0,
    twist: 0,
    pointerType: 0,
    isPrimary: 0
  }), xh = on(s_), o_ = v({}, Hi, {
    touches: 0,
    targetTouches: 0,
    changedTouches: 0,
    altKey: 0,
    metaKey: 0,
    ctrlKey: 0,
    shiftKey: 0,
    getModifierState: Kl
  }), u_ = on(o_), l_ = v({}, sa, {
    propertyName: 0,
    elapsedTime: 0,
    pseudoElement: 0
  }), c_ = on(l_), d_ = v({}, vo, {
    deltaX: function(e) {
      return "deltaX" in e ? e.deltaX : "wheelDeltaX" in e ? -e.wheelDeltaX : 0;
    },
    deltaY: function(e) {
      return "deltaY" in e ? e.deltaY : "wheelDeltaY" in e ? -e.wheelDeltaY : "wheelDelta" in e ? -e.wheelDelta : 0;
    },
    deltaZ: 0,
    deltaMode: 0
  }), f_ = on(d_), h_ = v({}, sa, {
    newState: 0,
    oldState: 0
  }), p_ = on(h_), m_ = [9, 13, 27, 32], Ql = or && "CompositionEvent" in window, Gi = null;
  or && "documentMode" in document && (Gi = document.documentMode);
  var g_ = or && "TextEvent" in window && !Gi, Nh = or && (!Ql || Gi && 8 < Gi && 11 >= Gi), Oh = " ", Mh = !1;
  function Rh(e, n) {
    switch (e) {
      case "keyup":
        return m_.indexOf(n.keyCode) !== -1;
      case "keydown":
        return n.keyCode !== 229;
      case "keypress":
      case "mousedown":
      case "focusout":
        return !0;
      default:
        return !1;
    }
  }
  function jh(e) {
    return e = e.detail, typeof e == "object" && "data" in e ? e.data : null;
  }
  var Va = !1;
  function v_(e, n) {
    switch (e) {
      case "compositionend":
        return jh(n);
      case "keypress":
        return n.which !== 32 ? null : (Mh = !0, Oh);
      case "textInput":
        return e = n.data, e === Oh && Mh ? null : e;
      default:
        return null;
    }
  }
  function y_(e, n) {
    if (Va)
      return e === "compositionend" || !Ql && Rh(e, n) ? (e = Ch(), ho = Vl = xr = null, Va = !1, e) : null;
    switch (e) {
      case "paste":
        return null;
      case "keypress":
        if (!(n.ctrlKey || n.altKey || n.metaKey) || n.ctrlKey && n.altKey) {
          if (n.char && 1 < n.char.length)
            return n.char;
          if (n.which) return String.fromCharCode(n.which);
        }
        return null;
      case "compositionend":
        return Nh && n.locale !== "ko" ? null : n.data;
      default:
        return null;
    }
  }
  var b_ = {
    color: !0,
    date: !0,
    datetime: !0,
    "datetime-local": !0,
    email: !0,
    month: !0,
    number: !0,
    password: !0,
    range: !0,
    search: !0,
    tel: !0,
    text: !0,
    time: !0,
    url: !0,
    week: !0
  };
  function Dh(e) {
    var n = e && e.nodeName && e.nodeName.toLowerCase();
    return n === "input" ? !!b_[e.type] : n === "textarea";
  }
  function Lh(e, n, i, o) {
    Za ? $a ? $a.push(o) : $a = [o] : Za = o, n = ru(n, "onChange"), 0 < n.length && (i = new go(
      "onChange",
      "change",
      null,
      i,
      o
    ), e.push({ event: i, listeners: n }));
  }
  var Zi = null, $i = null;
  function __(e) {
    mg(e, 0);
  }
  function yo(e) {
    var n = Ii(e);
    if (gh(n)) return e;
  }
  function Ph(e, n) {
    if (e === "change") return n;
  }
  var zh = !1;
  if (or) {
    var Jl;
    if (or) {
      var Wl = "oninput" in document;
      if (!Wl) {
        var Ih = document.createElement("div");
        Ih.setAttribute("oninput", "return;"), Wl = typeof Ih.oninput == "function";
      }
      Jl = Wl;
    } else Jl = !1;
    zh = Jl && (!document.documentMode || 9 < document.documentMode);
  }
  function Bh() {
    Zi && (Zi.detachEvent("onpropertychange", Uh), $i = Zi = null);
  }
  function Uh(e) {
    if (e.propertyName === "value" && yo($i)) {
      var n = [];
      Lh(
        n,
        $i,
        e,
        Gl(e)
      ), Eh(__, n);
    }
  }
  function S_(e, n, i) {
    e === "focusin" ? (Bh(), Zi = n, $i = i, Zi.attachEvent("onpropertychange", Uh)) : e === "focusout" && Bh();
  }
  function w_(e) {
    if (e === "selectionchange" || e === "keyup" || e === "keydown")
      return yo($i);
  }
  function E_(e, n) {
    if (e === "click") return yo(n);
  }
  function C_(e, n) {
    if (e === "input" || e === "change")
      return yo(n);
  }
  function A_(e, n) {
    return e === n && (e !== 0 || 1 / e === 1 / n) || e !== e && n !== n;
  }
  var yn = typeof Object.is == "function" ? Object.is : A_;
  function Vi(e, n) {
    if (yn(e, n)) return !0;
    if (typeof e != "object" || e === null || typeof n != "object" || n === null)
      return !1;
    var i = Object.keys(e), o = Object.keys(n);
    if (i.length !== o.length) return !1;
    for (o = 0; o < i.length; o++) {
      var d = i[o];
      if (!et.call(n, d) || !yn(e[d], n[d]))
        return !1;
    }
    return !0;
  }
  function Hh(e) {
    for (; e && e.firstChild; ) e = e.firstChild;
    return e;
  }
  function qh(e, n) {
    var i = Hh(e);
    e = 0;
    for (var o; i; ) {
      if (i.nodeType === 3) {
        if (o = e + i.textContent.length, e <= n && o >= n)
          return { node: i, offset: n - e };
        e = o;
      }
      e: {
        for (; i; ) {
          if (i.nextSibling) {
            i = i.nextSibling;
            break e;
          }
          i = i.parentNode;
        }
        i = void 0;
      }
      i = Hh(i);
    }
  }
  function Gh(e, n) {
    return e && n ? e === n ? !0 : e && e.nodeType === 3 ? !1 : n && n.nodeType === 3 ? Gh(e, n.parentNode) : "contains" in e ? e.contains(n) : e.compareDocumentPosition ? !!(e.compareDocumentPosition(n) & 16) : !1 : !1;
  }
  function Zh(e) {
    e = e != null && e.ownerDocument != null && e.ownerDocument.defaultView != null ? e.ownerDocument.defaultView : window;
    for (var n = co(e.document); n instanceof e.HTMLIFrameElement; ) {
      try {
        var i = typeof n.contentWindow.location.href == "string";
      } catch {
        i = !1;
      }
      if (i) e = n.contentWindow;
      else break;
      n = co(e.document);
    }
    return n;
  }
  function ec(e) {
    var n = e && e.nodeName && e.nodeName.toLowerCase();
    return n && (n === "input" && (e.type === "text" || e.type === "search" || e.type === "tel" || e.type === "url" || e.type === "password") || n === "textarea" || e.contentEditable === "true");
  }
  var T_ = or && "documentMode" in document && 11 >= document.documentMode, Ya = null, tc = null, Yi = null, nc = !1;
  function $h(e, n, i) {
    var o = i.window === i ? i.document : i.nodeType === 9 ? i : i.ownerDocument;
    nc || Ya == null || Ya !== co(o) || (o = Ya, "selectionStart" in o && ec(o) ? o = { start: o.selectionStart, end: o.selectionEnd } : (o = (o.ownerDocument && o.ownerDocument.defaultView || window).getSelection(), o = {
      anchorNode: o.anchorNode,
      anchorOffset: o.anchorOffset,
      focusNode: o.focusNode,
      focusOffset: o.focusOffset
    }), Yi && Vi(Yi, o) || (Yi = o, o = ru(tc, "onSelect"), 0 < o.length && (n = new go(
      "onSelect",
      "select",
      null,
      n,
      i
    ), e.push({ event: n, listeners: o }), n.target = Ya)));
  }
  function oa(e, n) {
    var i = {};
    return i[e.toLowerCase()] = n.toLowerCase(), i["Webkit" + e] = "webkit" + n, i["Moz" + e] = "moz" + n, i;
  }
  var Fa = {
    animationend: oa("Animation", "AnimationEnd"),
    animationiteration: oa("Animation", "AnimationIteration"),
    animationstart: oa("Animation", "AnimationStart"),
    transitionrun: oa("Transition", "TransitionRun"),
    transitionstart: oa("Transition", "TransitionStart"),
    transitioncancel: oa("Transition", "TransitionCancel"),
    transitionend: oa("Transition", "TransitionEnd")
  }, rc = {}, Vh = {};
  or && (Vh = document.createElement("div").style, "AnimationEvent" in window || (delete Fa.animationend.animation, delete Fa.animationiteration.animation, delete Fa.animationstart.animation), "TransitionEvent" in window || delete Fa.transitionend.transition);
  function ua(e) {
    if (rc[e]) return rc[e];
    if (!Fa[e]) return e;
    var n = Fa[e], i;
    for (i in n)
      if (n.hasOwnProperty(i) && i in Vh)
        return rc[e] = n[i];
    return e;
  }
  var Yh = ua("animationend"), Fh = ua("animationiteration"), Xh = ua("animationstart"), k_ = ua("transitionrun"), x_ = ua("transitionstart"), N_ = ua("transitioncancel"), Kh = ua("transitionend"), Qh = /* @__PURE__ */ new Map(), ac = "abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(
    " "
  );
  ac.push("scrollEnd");
  function Gn(e, n) {
    Qh.set(e, n), ia(n, [e]);
  }
  var Jh = /* @__PURE__ */ new WeakMap();
  function jn(e, n) {
    if (typeof e == "object" && e !== null) {
      var i = Jh.get(e);
      return i !== void 0 ? i : (n = {
        value: e,
        source: n,
        stack: ph(n)
      }, Jh.set(e, n), n);
    }
    return {
      value: e,
      source: n,
      stack: ph(n)
    };
  }
  var Dn = [], Xa = 0, ic = 0;
  function bo() {
    for (var e = Xa, n = ic = Xa = 0; n < e; ) {
      var i = Dn[n];
      Dn[n++] = null;
      var o = Dn[n];
      Dn[n++] = null;
      var d = Dn[n];
      Dn[n++] = null;
      var y = Dn[n];
      if (Dn[n++] = null, o !== null && d !== null) {
        var x = o.pending;
        x === null ? d.next = d : (d.next = x.next, x.next = d), o.pending = d;
      }
      y !== 0 && Wh(i, d, y);
    }
  }
  function _o(e, n, i, o) {
    Dn[Xa++] = e, Dn[Xa++] = n, Dn[Xa++] = i, Dn[Xa++] = o, ic |= o, e.lanes |= o, e = e.alternate, e !== null && (e.lanes |= o);
  }
  function sc(e, n, i, o) {
    return _o(e, n, i, o), So(e);
  }
  function Ka(e, n) {
    return _o(e, null, null, n), So(e);
  }
  function Wh(e, n, i) {
    e.lanes |= i;
    var o = e.alternate;
    o !== null && (o.lanes |= i);
    for (var d = !1, y = e.return; y !== null; )
      y.childLanes |= i, o = y.alternate, o !== null && (o.childLanes |= i), y.tag === 22 && (e = y.stateNode, e === null || e._visibility & 1 || (d = !0)), e = y, y = y.return;
    return e.tag === 3 ? (y = e.stateNode, d && n !== null && (d = 31 - ge(i), e = y.hiddenUpdates, o = e[d], o === null ? e[d] = [n] : o.push(n), n.lane = i | 536870912), y) : null;
  }
  function So(e) {
    if (50 < ys)
      throw ys = 0, fd = null, Error(a(185));
    for (var n = e.return; n !== null; )
      e = n, n = e.return;
    return e.tag === 3 ? e.stateNode : null;
  }
  var Qa = {};
  function O_(e, n, i, o) {
    this.tag = e, this.key = i, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, this.index = 0, this.refCleanup = this.ref = null, this.pendingProps = n, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, this.mode = o, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, this.alternate = null;
  }
  function bn(e, n, i, o) {
    return new O_(e, n, i, o);
  }
  function oc(e) {
    return e = e.prototype, !(!e || !e.isReactComponent);
  }
  function ur(e, n) {
    var i = e.alternate;
    return i === null ? (i = bn(
      e.tag,
      n,
      e.key,
      e.mode
    ), i.elementType = e.elementType, i.type = e.type, i.stateNode = e.stateNode, i.alternate = e, e.alternate = i) : (i.pendingProps = n, i.type = e.type, i.flags = 0, i.subtreeFlags = 0, i.deletions = null), i.flags = e.flags & 65011712, i.childLanes = e.childLanes, i.lanes = e.lanes, i.child = e.child, i.memoizedProps = e.memoizedProps, i.memoizedState = e.memoizedState, i.updateQueue = e.updateQueue, n = e.dependencies, i.dependencies = n === null ? null : { lanes: n.lanes, firstContext: n.firstContext }, i.sibling = e.sibling, i.index = e.index, i.ref = e.ref, i.refCleanup = e.refCleanup, i;
  }
  function ep(e, n) {
    e.flags &= 65011714;
    var i = e.alternate;
    return i === null ? (e.childLanes = 0, e.lanes = n, e.child = null, e.subtreeFlags = 0, e.memoizedProps = null, e.memoizedState = null, e.updateQueue = null, e.dependencies = null, e.stateNode = null) : (e.childLanes = i.childLanes, e.lanes = i.lanes, e.child = i.child, e.subtreeFlags = 0, e.deletions = null, e.memoizedProps = i.memoizedProps, e.memoizedState = i.memoizedState, e.updateQueue = i.updateQueue, e.type = i.type, n = i.dependencies, e.dependencies = n === null ? null : {
      lanes: n.lanes,
      firstContext: n.firstContext
    }), e;
  }
  function wo(e, n, i, o, d, y) {
    var x = 0;
    if (o = e, typeof e == "function") oc(e) && (x = 1);
    else if (typeof e == "string")
      x = R1(
        e,
        i,
        fe.current
      ) ? 26 : e === "html" || e === "head" || e === "body" ? 27 : 5;
    else
      e: switch (e) {
        case D:
          return e = bn(31, i, n, d), e.elementType = D, e.lanes = y, e;
        case p:
          return la(i.children, d, y, n);
        case C:
          x = 8, d |= 24;
          break;
        case k:
          return e = bn(12, i, n, d | 2), e.elementType = k, e.lanes = y, e;
        case S:
          return e = bn(13, i, n, d), e.elementType = S, e.lanes = y, e;
        case w:
          return e = bn(19, i, n, d), e.elementType = w, e.lanes = y, e;
        default:
          if (typeof e == "object" && e !== null)
            switch (e.$$typeof) {
              case j:
              case I:
                x = 10;
                break e;
              case O:
                x = 9;
                break e;
              case c:
                x = 11;
                break e;
              case A:
                x = 14;
                break e;
              case N:
                x = 16, o = null;
                break e;
            }
          x = 29, i = Error(
            a(130, e === null ? "null" : typeof e, "")
          ), o = null;
      }
    return n = bn(x, i, n, d), n.elementType = e, n.type = o, n.lanes = y, n;
  }
  function la(e, n, i, o) {
    return e = bn(7, e, o, n), e.lanes = i, e;
  }
  function uc(e, n, i) {
    return e = bn(6, e, null, n), e.lanes = i, e;
  }
  function lc(e, n, i) {
    return n = bn(
      4,
      e.children !== null ? e.children : [],
      e.key,
      n
    ), n.lanes = i, n.stateNode = {
      containerInfo: e.containerInfo,
      pendingChildren: null,
      implementation: e.implementation
    }, n;
  }
  var Ja = [], Wa = 0, Eo = null, Co = 0, Ln = [], Pn = 0, ca = null, lr = 1, cr = "";
  function da(e, n) {
    Ja[Wa++] = Co, Ja[Wa++] = Eo, Eo = e, Co = n;
  }
  function tp(e, n, i) {
    Ln[Pn++] = lr, Ln[Pn++] = cr, Ln[Pn++] = ca, ca = e;
    var o = lr;
    e = cr;
    var d = 32 - ge(o) - 1;
    o &= ~(1 << d), i += 1;
    var y = 32 - ge(n) + d;
    if (30 < y) {
      var x = d - d % 5;
      y = (o & (1 << x) - 1).toString(32), o >>= x, d -= x, lr = 1 << 32 - ge(n) + d | i << d | o, cr = y + e;
    } else
      lr = 1 << y | i << d | o, cr = e;
  }
  function cc(e) {
    e.return !== null && (da(e, 1), tp(e, 1, 0));
  }
  function dc(e) {
    for (; e === Eo; )
      Eo = Ja[--Wa], Ja[Wa] = null, Co = Ja[--Wa], Ja[Wa] = null;
    for (; e === ca; )
      ca = Ln[--Pn], Ln[Pn] = null, cr = Ln[--Pn], Ln[Pn] = null, lr = Ln[--Pn], Ln[Pn] = null;
  }
  var tn = null, wt = null, tt = !1, fa = null, Kn = !1, fc = Error(a(519));
  function ha(e) {
    var n = Error(a(418, ""));
    throw Ki(jn(n, e)), fc;
  }
  function np(e) {
    var n = e.stateNode, i = e.type, o = e.memoizedProps;
    switch (n[Ft] = e, n[sn] = o, i) {
      case "dialog":
        Ge("cancel", n), Ge("close", n);
        break;
      case "iframe":
      case "object":
      case "embed":
        Ge("load", n);
        break;
      case "video":
      case "audio":
        for (i = 0; i < _s.length; i++)
          Ge(_s[i], n);
        break;
      case "source":
        Ge("error", n);
        break;
      case "img":
      case "image":
      case "link":
        Ge("error", n), Ge("load", n);
        break;
      case "details":
        Ge("toggle", n);
        break;
      case "input":
        Ge("invalid", n), vh(
          n,
          o.value,
          o.defaultValue,
          o.checked,
          o.defaultChecked,
          o.type,
          o.name,
          !0
        ), lo(n);
        break;
      case "select":
        Ge("invalid", n);
        break;
      case "textarea":
        Ge("invalid", n), bh(n, o.value, o.defaultValue, o.children), lo(n);
    }
    i = o.children, typeof i != "string" && typeof i != "number" && typeof i != "bigint" || n.textContent === "" + i || o.suppressHydrationWarning === !0 || bg(n.textContent, i) ? (o.popover != null && (Ge("beforetoggle", n), Ge("toggle", n)), o.onScroll != null && Ge("scroll", n), o.onScrollEnd != null && Ge("scrollend", n), o.onClick != null && (n.onclick = au), n = !0) : n = !1, n || ha(e);
  }
  function rp(e) {
    for (tn = e.return; tn; )
      switch (tn.tag) {
        case 5:
        case 13:
          Kn = !1;
          return;
        case 27:
        case 3:
          Kn = !0;
          return;
        default:
          tn = tn.return;
      }
  }
  function Fi(e) {
    if (e !== tn) return !1;
    if (!tt) return rp(e), tt = !0, !1;
    var n = e.tag, i;
    if ((i = n !== 3 && n !== 27) && ((i = n === 5) && (i = e.type, i = !(i !== "form" && i !== "button") || xd(e.type, e.memoizedProps)), i = !i), i && wt && ha(e), rp(e), n === 13) {
      if (e = e.memoizedState, e = e !== null ? e.dehydrated : null, !e) throw Error(a(317));
      e: {
        for (e = e.nextSibling, n = 0; e; ) {
          if (e.nodeType === 8)
            if (i = e.data, i === "/$") {
              if (n === 0) {
                wt = $n(e.nextSibling);
                break e;
              }
              n--;
            } else
              i !== "$" && i !== "$!" && i !== "$?" || n++;
          e = e.nextSibling;
        }
        wt = null;
      }
    } else
      n === 27 ? (n = wt, Zr(e.type) ? (e = Rd, Rd = null, wt = e) : wt = n) : wt = tn ? $n(e.stateNode.nextSibling) : null;
    return !0;
  }
  function Xi() {
    wt = tn = null, tt = !1;
  }
  function ap() {
    var e = fa;
    return e !== null && (cn === null ? cn = e : cn.push.apply(
      cn,
      e
    ), fa = null), e;
  }
  function Ki(e) {
    fa === null ? fa = [e] : fa.push(e);
  }
  var hc = Z(null), pa = null, dr = null;
  function Nr(e, n, i) {
    ce(hc, n._currentValue), n._currentValue = i;
  }
  function fr(e) {
    e._currentValue = hc.current, re(hc);
  }
  function pc(e, n, i) {
    for (; e !== null; ) {
      var o = e.alternate;
      if ((e.childLanes & n) !== n ? (e.childLanes |= n, o !== null && (o.childLanes |= n)) : o !== null && (o.childLanes & n) !== n && (o.childLanes |= n), e === i) break;
      e = e.return;
    }
  }
  function mc(e, n, i, o) {
    var d = e.child;
    for (d !== null && (d.return = e); d !== null; ) {
      var y = d.dependencies;
      if (y !== null) {
        var x = d.child;
        y = y.firstContext;
        e: for (; y !== null; ) {
          var L = y;
          y = d;
          for (var U = 0; U < n.length; U++)
            if (L.context === n[U]) {
              y.lanes |= i, L = y.alternate, L !== null && (L.lanes |= i), pc(
                y.return,
                i,
                e
              ), o || (x = null);
              break e;
            }
          y = L.next;
        }
      } else if (d.tag === 18) {
        if (x = d.return, x === null) throw Error(a(341));
        x.lanes |= i, y = x.alternate, y !== null && (y.lanes |= i), pc(x, i, e), x = null;
      } else x = d.child;
      if (x !== null) x.return = d;
      else
        for (x = d; x !== null; ) {
          if (x === e) {
            x = null;
            break;
          }
          if (d = x.sibling, d !== null) {
            d.return = x.return, x = d;
            break;
          }
          x = x.return;
        }
      d = x;
    }
  }
  function Qi(e, n, i, o) {
    e = null;
    for (var d = n, y = !1; d !== null; ) {
      if (!y) {
        if ((d.flags & 524288) !== 0) y = !0;
        else if ((d.flags & 262144) !== 0) break;
      }
      if (d.tag === 10) {
        var x = d.alternate;
        if (x === null) throw Error(a(387));
        if (x = x.memoizedProps, x !== null) {
          var L = d.type;
          yn(d.pendingProps.value, x.value) || (e !== null ? e.push(L) : e = [L]);
        }
      } else if (d === _e.current) {
        if (x = d.alternate, x === null) throw Error(a(387));
        x.memoizedState.memoizedState !== d.memoizedState.memoizedState && (e !== null ? e.push(Ts) : e = [Ts]);
      }
      d = d.return;
    }
    e !== null && mc(
      n,
      e,
      i,
      o
    ), n.flags |= 262144;
  }
  function Ao(e) {
    for (e = e.firstContext; e !== null; ) {
      if (!yn(
        e.context._currentValue,
        e.memoizedValue
      ))
        return !0;
      e = e.next;
    }
    return !1;
  }
  function ma(e) {
    pa = e, dr = null, e = e.dependencies, e !== null && (e.firstContext = null);
  }
  function Xt(e) {
    return ip(pa, e);
  }
  function To(e, n) {
    return pa === null && ma(e), ip(e, n);
  }
  function ip(e, n) {
    var i = n._currentValue;
    if (n = { context: n, memoizedValue: i, next: null }, dr === null) {
      if (e === null) throw Error(a(308));
      dr = n, e.dependencies = { lanes: 0, firstContext: n }, e.flags |= 524288;
    } else dr = dr.next = n;
    return i;
  }
  var M_ = typeof AbortController < "u" ? AbortController : function() {
    var e = [], n = this.signal = {
      aborted: !1,
      addEventListener: function(i, o) {
        e.push(o);
      }
    };
    this.abort = function() {
      n.aborted = !0, e.forEach(function(i) {
        return i();
      });
    };
  }, R_ = t.unstable_scheduleCallback, j_ = t.unstable_NormalPriority, Rt = {
    $$typeof: I,
    Consumer: null,
    Provider: null,
    _currentValue: null,
    _currentValue2: null,
    _threadCount: 0
  };
  function gc() {
    return {
      controller: new M_(),
      data: /* @__PURE__ */ new Map(),
      refCount: 0
    };
  }
  function Ji(e) {
    e.refCount--, e.refCount === 0 && R_(j_, function() {
      e.controller.abort();
    });
  }
  var Wi = null, vc = 0, ei = 0, ti = null;
  function D_(e, n) {
    if (Wi === null) {
      var i = Wi = [];
      vc = 0, ei = bd(), ti = {
        status: "pending",
        value: void 0,
        then: function(o) {
          i.push(o);
        }
      };
    }
    return vc++, n.then(sp, sp), n;
  }
  function sp() {
    if (--vc === 0 && Wi !== null) {
      ti !== null && (ti.status = "fulfilled");
      var e = Wi;
      Wi = null, ei = 0, ti = null;
      for (var n = 0; n < e.length; n++) (0, e[n])();
    }
  }
  function L_(e, n) {
    var i = [], o = {
      status: "pending",
      value: null,
      reason: null,
      then: function(d) {
        i.push(d);
      }
    };
    return e.then(
      function() {
        o.status = "fulfilled", o.value = n;
        for (var d = 0; d < i.length; d++) (0, i[d])(n);
      },
      function(d) {
        for (o.status = "rejected", o.reason = d, d = 0; d < i.length; d++)
          (0, i[d])(void 0);
      }
    ), o;
  }
  var op = R.S;
  R.S = function(e, n) {
    typeof n == "object" && n !== null && typeof n.then == "function" && D_(e, n), op !== null && op(e, n);
  };
  var ga = Z(null);
  function yc() {
    var e = ga.current;
    return e !== null ? e : dt.pooledCache;
  }
  function ko(e, n) {
    n === null ? ce(ga, ga.current) : ce(ga, n.pool);
  }
  function up() {
    var e = yc();
    return e === null ? null : { parent: Rt._currentValue, pool: e };
  }
  var es = Error(a(460)), lp = Error(a(474)), xo = Error(a(542)), bc = { then: function() {
  } };
  function cp(e) {
    return e = e.status, e === "fulfilled" || e === "rejected";
  }
  function No() {
  }
  function dp(e, n, i) {
    switch (i = e[i], i === void 0 ? e.push(n) : i !== n && (n.then(No, No), n = i), n.status) {
      case "fulfilled":
        return n.value;
      case "rejected":
        throw e = n.reason, hp(e), e;
      default:
        if (typeof n.status == "string") n.then(No, No);
        else {
          if (e = dt, e !== null && 100 < e.shellSuspendCounter)
            throw Error(a(482));
          e = n, e.status = "pending", e.then(
            function(o) {
              if (n.status === "pending") {
                var d = n;
                d.status = "fulfilled", d.value = o;
              }
            },
            function(o) {
              if (n.status === "pending") {
                var d = n;
                d.status = "rejected", d.reason = o;
              }
            }
          );
        }
        switch (n.status) {
          case "fulfilled":
            return n.value;
          case "rejected":
            throw e = n.reason, hp(e), e;
        }
        throw ts = n, es;
    }
  }
  var ts = null;
  function fp() {
    if (ts === null) throw Error(a(459));
    var e = ts;
    return ts = null, e;
  }
  function hp(e) {
    if (e === es || e === xo)
      throw Error(a(483));
  }
  var Or = !1;
  function _c(e) {
    e.updateQueue = {
      baseState: e.memoizedState,
      firstBaseUpdate: null,
      lastBaseUpdate: null,
      shared: { pending: null, lanes: 0, hiddenCallbacks: null },
      callbacks: null
    };
  }
  function Sc(e, n) {
    e = e.updateQueue, n.updateQueue === e && (n.updateQueue = {
      baseState: e.baseState,
      firstBaseUpdate: e.firstBaseUpdate,
      lastBaseUpdate: e.lastBaseUpdate,
      shared: e.shared,
      callbacks: null
    });
  }
  function Mr(e) {
    return { lane: e, tag: 0, payload: null, callback: null, next: null };
  }
  function Rr(e, n, i) {
    var o = e.updateQueue;
    if (o === null) return null;
    if (o = o.shared, (nt & 2) !== 0) {
      var d = o.pending;
      return d === null ? n.next = n : (n.next = d.next, d.next = n), o.pending = n, n = So(e), Wh(e, null, i), n;
    }
    return _o(e, o, n, i), So(e);
  }
  function ns(e, n, i) {
    if (n = n.updateQueue, n !== null && (n = n.shared, (i & 4194048) !== 0)) {
      var o = n.lanes;
      o &= e.pendingLanes, i |= o, n.lanes = i, sh(e, i);
    }
  }
  function wc(e, n) {
    var i = e.updateQueue, o = e.alternate;
    if (o !== null && (o = o.updateQueue, i === o)) {
      var d = null, y = null;
      if (i = i.firstBaseUpdate, i !== null) {
        do {
          var x = {
            lane: i.lane,
            tag: i.tag,
            payload: i.payload,
            callback: null,
            next: null
          };
          y === null ? d = y = x : y = y.next = x, i = i.next;
        } while (i !== null);
        y === null ? d = y = n : y = y.next = n;
      } else d = y = n;
      i = {
        baseState: o.baseState,
        firstBaseUpdate: d,
        lastBaseUpdate: y,
        shared: o.shared,
        callbacks: o.callbacks
      }, e.updateQueue = i;
      return;
    }
    e = i.lastBaseUpdate, e === null ? i.firstBaseUpdate = n : e.next = n, i.lastBaseUpdate = n;
  }
  var Ec = !1;
  function rs() {
    if (Ec) {
      var e = ti;
      if (e !== null) throw e;
    }
  }
  function as(e, n, i, o) {
    Ec = !1;
    var d = e.updateQueue;
    Or = !1;
    var y = d.firstBaseUpdate, x = d.lastBaseUpdate, L = d.shared.pending;
    if (L !== null) {
      d.shared.pending = null;
      var U = L, J = U.next;
      U.next = null, x === null ? y = J : x.next = J, x = U;
      var ie = e.alternate;
      ie !== null && (ie = ie.updateQueue, L = ie.lastBaseUpdate, L !== x && (L === null ? ie.firstBaseUpdate = J : L.next = J, ie.lastBaseUpdate = U));
    }
    if (y !== null) {
      var le = d.baseState;
      x = 0, ie = J = U = null, L = y;
      do {
        var W = L.lane & -536870913, ee = W !== L.lane;
        if (ee ? (Qe & W) === W : (o & W) === W) {
          W !== 0 && W === ei && (Ec = !0), ie !== null && (ie = ie.next = {
            lane: 0,
            tag: L.tag,
            payload: L.payload,
            callback: null,
            next: null
          });
          e: {
            var Me = e, ke = L;
            W = n;
            var ot = i;
            switch (ke.tag) {
              case 1:
                if (Me = ke.payload, typeof Me == "function") {
                  le = Me.call(ot, le, W);
                  break e;
                }
                le = Me;
                break e;
              case 3:
                Me.flags = Me.flags & -65537 | 128;
              case 0:
                if (Me = ke.payload, W = typeof Me == "function" ? Me.call(ot, le, W) : Me, W == null) break e;
                le = v({}, le, W);
                break e;
              case 2:
                Or = !0;
            }
          }
          W = L.callback, W !== null && (e.flags |= 64, ee && (e.flags |= 8192), ee = d.callbacks, ee === null ? d.callbacks = [W] : ee.push(W));
        } else
          ee = {
            lane: W,
            tag: L.tag,
            payload: L.payload,
            callback: L.callback,
            next: null
          }, ie === null ? (J = ie = ee, U = le) : ie = ie.next = ee, x |= W;
        if (L = L.next, L === null) {
          if (L = d.shared.pending, L === null)
            break;
          ee = L, L = ee.next, ee.next = null, d.lastBaseUpdate = ee, d.shared.pending = null;
        }
      } while (!0);
      ie === null && (U = le), d.baseState = U, d.firstBaseUpdate = J, d.lastBaseUpdate = ie, y === null && (d.shared.lanes = 0), Ur |= x, e.lanes = x, e.memoizedState = le;
    }
  }
  function pp(e, n) {
    if (typeof e != "function")
      throw Error(a(191, e));
    e.call(n);
  }
  function mp(e, n) {
    var i = e.callbacks;
    if (i !== null)
      for (e.callbacks = null, e = 0; e < i.length; e++)
        pp(i[e], n);
  }
  var ni = Z(null), Oo = Z(0);
  function gp(e, n) {
    e = br, ce(Oo, e), ce(ni, n), br = e | n.baseLanes;
  }
  function Cc() {
    ce(Oo, br), ce(ni, ni.current);
  }
  function Ac() {
    br = Oo.current, re(ni), re(Oo);
  }
  var jr = 0, Ue = null, it = null, xt = null, Mo = !1, ri = !1, va = !1, Ro = 0, is = 0, ai = null, P_ = 0;
  function At() {
    throw Error(a(321));
  }
  function Tc(e, n) {
    if (n === null) return !1;
    for (var i = 0; i < n.length && i < e.length; i++)
      if (!yn(e[i], n[i])) return !1;
    return !0;
  }
  function kc(e, n, i, o, d, y) {
    return jr = y, Ue = n, n.memoizedState = null, n.updateQueue = null, n.lanes = 0, R.H = e === null || e.memoizedState === null ? Wp : em, va = !1, y = i(o, d), va = !1, ri && (y = yp(
      n,
      i,
      o,
      d
    )), vp(e), y;
  }
  function vp(e) {
    R.H = Io;
    var n = it !== null && it.next !== null;
    if (jr = 0, xt = it = Ue = null, Mo = !1, is = 0, ai = null, n) throw Error(a(300));
    e === null || zt || (e = e.dependencies, e !== null && Ao(e) && (zt = !0));
  }
  function yp(e, n, i, o) {
    Ue = e;
    var d = 0;
    do {
      if (ri && (ai = null), is = 0, ri = !1, 25 <= d) throw Error(a(301));
      if (d += 1, xt = it = null, e.updateQueue != null) {
        var y = e.updateQueue;
        y.lastEffect = null, y.events = null, y.stores = null, y.memoCache != null && (y.memoCache.index = 0);
      }
      R.H = G_, y = n(i, o);
    } while (ri);
    return y;
  }
  function z_() {
    var e = R.H, n = e.useState()[0];
    return n = typeof n.then == "function" ? ss(n) : n, e = e.useState()[0], (it !== null ? it.memoizedState : null) !== e && (Ue.flags |= 1024), n;
  }
  function xc() {
    var e = Ro !== 0;
    return Ro = 0, e;
  }
  function Nc(e, n, i) {
    n.updateQueue = e.updateQueue, n.flags &= -2053, e.lanes &= ~i;
  }
  function Oc(e) {
    if (Mo) {
      for (e = e.memoizedState; e !== null; ) {
        var n = e.queue;
        n !== null && (n.pending = null), e = e.next;
      }
      Mo = !1;
    }
    jr = 0, xt = it = Ue = null, ri = !1, is = Ro = 0, ai = null;
  }
  function un() {
    var e = {
      memoizedState: null,
      baseState: null,
      baseQueue: null,
      queue: null,
      next: null
    };
    return xt === null ? Ue.memoizedState = xt = e : xt = xt.next = e, xt;
  }
  function Nt() {
    if (it === null) {
      var e = Ue.alternate;
      e = e !== null ? e.memoizedState : null;
    } else e = it.next;
    var n = xt === null ? Ue.memoizedState : xt.next;
    if (n !== null)
      xt = n, it = e;
    else {
      if (e === null)
        throw Ue.alternate === null ? Error(a(467)) : Error(a(310));
      it = e, e = {
        memoizedState: it.memoizedState,
        baseState: it.baseState,
        baseQueue: it.baseQueue,
        queue: it.queue,
        next: null
      }, xt === null ? Ue.memoizedState = xt = e : xt = xt.next = e;
    }
    return xt;
  }
  function Mc() {
    return { lastEffect: null, events: null, stores: null, memoCache: null };
  }
  function ss(e) {
    var n = is;
    return is += 1, ai === null && (ai = []), e = dp(ai, e, n), n = Ue, (xt === null ? n.memoizedState : xt.next) === null && (n = n.alternate, R.H = n === null || n.memoizedState === null ? Wp : em), e;
  }
  function jo(e) {
    if (e !== null && typeof e == "object") {
      if (typeof e.then == "function") return ss(e);
      if (e.$$typeof === I) return Xt(e);
    }
    throw Error(a(438, String(e)));
  }
  function Rc(e) {
    var n = null, i = Ue.updateQueue;
    if (i !== null && (n = i.memoCache), n == null) {
      var o = Ue.alternate;
      o !== null && (o = o.updateQueue, o !== null && (o = o.memoCache, o != null && (n = {
        data: o.data.map(function(d) {
          return d.slice();
        }),
        index: 0
      })));
    }
    if (n == null && (n = { data: [], index: 0 }), i === null && (i = Mc(), Ue.updateQueue = i), i.memoCache = n, i = n.data[n.index], i === void 0)
      for (i = n.data[n.index] = Array(e), o = 0; o < e; o++)
        i[o] = M;
    return n.index++, i;
  }
  function hr(e, n) {
    return typeof n == "function" ? n(e) : n;
  }
  function Do(e) {
    var n = Nt();
    return jc(n, it, e);
  }
  function jc(e, n, i) {
    var o = e.queue;
    if (o === null) throw Error(a(311));
    o.lastRenderedReducer = i;
    var d = e.baseQueue, y = o.pending;
    if (y !== null) {
      if (d !== null) {
        var x = d.next;
        d.next = y.next, y.next = x;
      }
      n.baseQueue = d = y, o.pending = null;
    }
    if (y = e.baseState, d === null) e.memoizedState = y;
    else {
      n = d.next;
      var L = x = null, U = null, J = n, ie = !1;
      do {
        var le = J.lane & -536870913;
        if (le !== J.lane ? (Qe & le) === le : (jr & le) === le) {
          var W = J.revertLane;
          if (W === 0)
            U !== null && (U = U.next = {
              lane: 0,
              revertLane: 0,
              action: J.action,
              hasEagerState: J.hasEagerState,
              eagerState: J.eagerState,
              next: null
            }), le === ei && (ie = !0);
          else if ((jr & W) === W) {
            J = J.next, W === ei && (ie = !0);
            continue;
          } else
            le = {
              lane: 0,
              revertLane: J.revertLane,
              action: J.action,
              hasEagerState: J.hasEagerState,
              eagerState: J.eagerState,
              next: null
            }, U === null ? (L = U = le, x = y) : U = U.next = le, Ue.lanes |= W, Ur |= W;
          le = J.action, va && i(y, le), y = J.hasEagerState ? J.eagerState : i(y, le);
        } else
          W = {
            lane: le,
            revertLane: J.revertLane,
            action: J.action,
            hasEagerState: J.hasEagerState,
            eagerState: J.eagerState,
            next: null
          }, U === null ? (L = U = W, x = y) : U = U.next = W, Ue.lanes |= le, Ur |= le;
        J = J.next;
      } while (J !== null && J !== n);
      if (U === null ? x = y : U.next = L, !yn(y, e.memoizedState) && (zt = !0, ie && (i = ti, i !== null)))
        throw i;
      e.memoizedState = y, e.baseState = x, e.baseQueue = U, o.lastRenderedState = y;
    }
    return d === null && (o.lanes = 0), [e.memoizedState, o.dispatch];
  }
  function Dc(e) {
    var n = Nt(), i = n.queue;
    if (i === null) throw Error(a(311));
    i.lastRenderedReducer = e;
    var o = i.dispatch, d = i.pending, y = n.memoizedState;
    if (d !== null) {
      i.pending = null;
      var x = d = d.next;
      do
        y = e(y, x.action), x = x.next;
      while (x !== d);
      yn(y, n.memoizedState) || (zt = !0), n.memoizedState = y, n.baseQueue === null && (n.baseState = y), i.lastRenderedState = y;
    }
    return [y, o];
  }
  function bp(e, n, i) {
    var o = Ue, d = Nt(), y = tt;
    if (y) {
      if (i === void 0) throw Error(a(407));
      i = i();
    } else i = n();
    var x = !yn(
      (it || d).memoizedState,
      i
    );
    x && (d.memoizedState = i, zt = !0), d = d.queue;
    var L = wp.bind(null, o, d, e);
    if (os(2048, 8, L, [e]), d.getSnapshot !== n || x || xt !== null && xt.memoizedState.tag & 1) {
      if (o.flags |= 2048, ii(
        9,
        Lo(),
        Sp.bind(
          null,
          o,
          d,
          i,
          n
        ),
        null
      ), dt === null) throw Error(a(349));
      y || (jr & 124) !== 0 || _p(o, n, i);
    }
    return i;
  }
  function _p(e, n, i) {
    e.flags |= 16384, e = { getSnapshot: n, value: i }, n = Ue.updateQueue, n === null ? (n = Mc(), Ue.updateQueue = n, n.stores = [e]) : (i = n.stores, i === null ? n.stores = [e] : i.push(e));
  }
  function Sp(e, n, i, o) {
    n.value = i, n.getSnapshot = o, Ep(n) && Cp(e);
  }
  function wp(e, n, i) {
    return i(function() {
      Ep(n) && Cp(e);
    });
  }
  function Ep(e) {
    var n = e.getSnapshot;
    e = e.value;
    try {
      var i = n();
      return !yn(e, i);
    } catch {
      return !0;
    }
  }
  function Cp(e) {
    var n = Ka(e, 2);
    n !== null && Cn(n, e, 2);
  }
  function Lc(e) {
    var n = un();
    if (typeof e == "function") {
      var i = e;
      if (e = i(), va) {
        Le(!0);
        try {
          i();
        } finally {
          Le(!1);
        }
      }
    }
    return n.memoizedState = n.baseState = e, n.queue = {
      pending: null,
      lanes: 0,
      dispatch: null,
      lastRenderedReducer: hr,
      lastRenderedState: e
    }, n;
  }
  function Ap(e, n, i, o) {
    return e.baseState = i, jc(
      e,
      it,
      typeof o == "function" ? o : hr
    );
  }
  function I_(e, n, i, o, d) {
    if (zo(e)) throw Error(a(485));
    if (e = n.action, e !== null) {
      var y = {
        payload: d,
        action: e,
        next: null,
        isTransition: !0,
        status: "pending",
        value: null,
        reason: null,
        listeners: [],
        then: function(x) {
          y.listeners.push(x);
        }
      };
      R.T !== null ? i(!0) : y.isTransition = !1, o(y), i = n.pending, i === null ? (y.next = n.pending = y, Tp(n, y)) : (y.next = i.next, n.pending = i.next = y);
    }
  }
  function Tp(e, n) {
    var i = n.action, o = n.payload, d = e.state;
    if (n.isTransition) {
      var y = R.T, x = {};
      R.T = x;
      try {
        var L = i(d, o), U = R.S;
        U !== null && U(x, L), kp(e, n, L);
      } catch (J) {
        Pc(e, n, J);
      } finally {
        R.T = y;
      }
    } else
      try {
        y = i(d, o), kp(e, n, y);
      } catch (J) {
        Pc(e, n, J);
      }
  }
  function kp(e, n, i) {
    i !== null && typeof i == "object" && typeof i.then == "function" ? i.then(
      function(o) {
        xp(e, n, o);
      },
      function(o) {
        return Pc(e, n, o);
      }
    ) : xp(e, n, i);
  }
  function xp(e, n, i) {
    n.status = "fulfilled", n.value = i, Np(n), e.state = i, n = e.pending, n !== null && (i = n.next, i === n ? e.pending = null : (i = i.next, n.next = i, Tp(e, i)));
  }
  function Pc(e, n, i) {
    var o = e.pending;
    if (e.pending = null, o !== null) {
      o = o.next;
      do
        n.status = "rejected", n.reason = i, Np(n), n = n.next;
      while (n !== o);
    }
    e.action = null;
  }
  function Np(e) {
    e = e.listeners;
    for (var n = 0; n < e.length; n++) (0, e[n])();
  }
  function Op(e, n) {
    return n;
  }
  function Mp(e, n) {
    if (tt) {
      var i = dt.formState;
      if (i !== null) {
        e: {
          var o = Ue;
          if (tt) {
            if (wt) {
              t: {
                for (var d = wt, y = Kn; d.nodeType !== 8; ) {
                  if (!y) {
                    d = null;
                    break t;
                  }
                  if (d = $n(
                    d.nextSibling
                  ), d === null) {
                    d = null;
                    break t;
                  }
                }
                y = d.data, d = y === "F!" || y === "F" ? d : null;
              }
              if (d) {
                wt = $n(
                  d.nextSibling
                ), o = d.data === "F!";
                break e;
              }
            }
            ha(o);
          }
          o = !1;
        }
        o && (n = i[0]);
      }
    }
    return i = un(), i.memoizedState = i.baseState = n, o = {
      pending: null,
      lanes: 0,
      dispatch: null,
      lastRenderedReducer: Op,
      lastRenderedState: n
    }, i.queue = o, i = Kp.bind(
      null,
      Ue,
      o
    ), o.dispatch = i, o = Lc(!1), y = Hc.bind(
      null,
      Ue,
      !1,
      o.queue
    ), o = un(), d = {
      state: n,
      dispatch: null,
      action: e,
      pending: null
    }, o.queue = d, i = I_.bind(
      null,
      Ue,
      d,
      y,
      i
    ), d.dispatch = i, o.memoizedState = e, [n, i, !1];
  }
  function Rp(e) {
    var n = Nt();
    return jp(n, it, e);
  }
  function jp(e, n, i) {
    if (n = jc(
      e,
      n,
      Op
    )[0], e = Do(hr)[0], typeof n == "object" && n !== null && typeof n.then == "function")
      try {
        var o = ss(n);
      } catch (x) {
        throw x === es ? xo : x;
      }
    else o = n;
    n = Nt();
    var d = n.queue, y = d.dispatch;
    return i !== n.memoizedState && (Ue.flags |= 2048, ii(
      9,
      Lo(),
      B_.bind(null, d, i),
      null
    )), [o, y, e];
  }
  function B_(e, n) {
    e.action = n;
  }
  function Dp(e) {
    var n = Nt(), i = it;
    if (i !== null)
      return jp(n, i, e);
    Nt(), n = n.memoizedState, i = Nt();
    var o = i.queue.dispatch;
    return i.memoizedState = e, [n, o, !1];
  }
  function ii(e, n, i, o) {
    return e = { tag: e, create: i, deps: o, inst: n, next: null }, n = Ue.updateQueue, n === null && (n = Mc(), Ue.updateQueue = n), i = n.lastEffect, i === null ? n.lastEffect = e.next = e : (o = i.next, i.next = e, e.next = o, n.lastEffect = e), e;
  }
  function Lo() {
    return { destroy: void 0, resource: void 0 };
  }
  function Lp() {
    return Nt().memoizedState;
  }
  function Po(e, n, i, o) {
    var d = un();
    o = o === void 0 ? null : o, Ue.flags |= e, d.memoizedState = ii(
      1 | n,
      Lo(),
      i,
      o
    );
  }
  function os(e, n, i, o) {
    var d = Nt();
    o = o === void 0 ? null : o;
    var y = d.memoizedState.inst;
    it !== null && o !== null && Tc(o, it.memoizedState.deps) ? d.memoizedState = ii(n, y, i, o) : (Ue.flags |= e, d.memoizedState = ii(
      1 | n,
      y,
      i,
      o
    ));
  }
  function Pp(e, n) {
    Po(8390656, 8, e, n);
  }
  function zp(e, n) {
    os(2048, 8, e, n);
  }
  function Ip(e, n) {
    return os(4, 2, e, n);
  }
  function Bp(e, n) {
    return os(4, 4, e, n);
  }
  function Up(e, n) {
    if (typeof n == "function") {
      e = e();
      var i = n(e);
      return function() {
        typeof i == "function" ? i() : n(null);
      };
    }
    if (n != null)
      return e = e(), n.current = e, function() {
        n.current = null;
      };
  }
  function Hp(e, n, i) {
    i = i != null ? i.concat([e]) : null, os(4, 4, Up.bind(null, n, e), i);
  }
  function zc() {
  }
  function qp(e, n) {
    var i = Nt();
    n = n === void 0 ? null : n;
    var o = i.memoizedState;
    return n !== null && Tc(n, o[1]) ? o[0] : (i.memoizedState = [e, n], e);
  }
  function Gp(e, n) {
    var i = Nt();
    n = n === void 0 ? null : n;
    var o = i.memoizedState;
    if (n !== null && Tc(n, o[1]))
      return o[0];
    if (o = e(), va) {
      Le(!0);
      try {
        e();
      } finally {
        Le(!1);
      }
    }
    return i.memoizedState = [o, n], o;
  }
  function Ic(e, n, i) {
    return i === void 0 || (jr & 1073741824) !== 0 ? e.memoizedState = n : (e.memoizedState = i, e = Vm(), Ue.lanes |= e, Ur |= e, i);
  }
  function Zp(e, n, i, o) {
    return yn(i, n) ? i : ni.current !== null ? (e = Ic(e, i, o), yn(e, n) || (zt = !0), e) : (jr & 42) === 0 ? (zt = !0, e.memoizedState = i) : (e = Vm(), Ue.lanes |= e, Ur |= e, n);
  }
  function $p(e, n, i, o, d) {
    var y = q.p;
    q.p = y !== 0 && 8 > y ? y : 8;
    var x = R.T, L = {};
    R.T = L, Hc(e, !1, n, i);
    try {
      var U = d(), J = R.S;
      if (J !== null && J(L, U), U !== null && typeof U == "object" && typeof U.then == "function") {
        var ie = L_(
          U,
          o
        );
        us(
          e,
          n,
          ie,
          En(e)
        );
      } else
        us(
          e,
          n,
          o,
          En(e)
        );
    } catch (le) {
      us(
        e,
        n,
        { then: function() {
        }, status: "rejected", reason: le },
        En()
      );
    } finally {
      q.p = y, R.T = x;
    }
  }
  function U_() {
  }
  function Bc(e, n, i, o) {
    if (e.tag !== 5) throw Error(a(476));
    var d = Vp(e).queue;
    $p(
      e,
      d,
      n,
      $,
      i === null ? U_ : function() {
        return Yp(e), i(o);
      }
    );
  }
  function Vp(e) {
    var n = e.memoizedState;
    if (n !== null) return n;
    n = {
      memoizedState: $,
      baseState: $,
      baseQueue: null,
      queue: {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: hr,
        lastRenderedState: $
      },
      next: null
    };
    var i = {};
    return n.next = {
      memoizedState: i,
      baseState: i,
      baseQueue: null,
      queue: {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: hr,
        lastRenderedState: i
      },
      next: null
    }, e.memoizedState = n, e = e.alternate, e !== null && (e.memoizedState = n), n;
  }
  function Yp(e) {
    var n = Vp(e).next.queue;
    us(e, n, {}, En());
  }
  function Uc() {
    return Xt(Ts);
  }
  function Fp() {
    return Nt().memoizedState;
  }
  function Xp() {
    return Nt().memoizedState;
  }
  function H_(e) {
    for (var n = e.return; n !== null; ) {
      switch (n.tag) {
        case 24:
        case 3:
          var i = En();
          e = Mr(i);
          var o = Rr(n, e, i);
          o !== null && (Cn(o, n, i), ns(o, n, i)), n = { cache: gc() }, e.payload = n;
          return;
      }
      n = n.return;
    }
  }
  function q_(e, n, i) {
    var o = En();
    i = {
      lane: o,
      revertLane: 0,
      action: i,
      hasEagerState: !1,
      eagerState: null,
      next: null
    }, zo(e) ? Qp(n, i) : (i = sc(e, n, i, o), i !== null && (Cn(i, e, o), Jp(i, n, o)));
  }
  function Kp(e, n, i) {
    var o = En();
    us(e, n, i, o);
  }
  function us(e, n, i, o) {
    var d = {
      lane: o,
      revertLane: 0,
      action: i,
      hasEagerState: !1,
      eagerState: null,
      next: null
    };
    if (zo(e)) Qp(n, d);
    else {
      var y = e.alternate;
      if (e.lanes === 0 && (y === null || y.lanes === 0) && (y = n.lastRenderedReducer, y !== null))
        try {
          var x = n.lastRenderedState, L = y(x, i);
          if (d.hasEagerState = !0, d.eagerState = L, yn(L, x))
            return _o(e, n, d, 0), dt === null && bo(), !1;
        } catch {
        } finally {
        }
      if (i = sc(e, n, d, o), i !== null)
        return Cn(i, e, o), Jp(i, n, o), !0;
    }
    return !1;
  }
  function Hc(e, n, i, o) {
    if (o = {
      lane: 2,
      revertLane: bd(),
      action: o,
      hasEagerState: !1,
      eagerState: null,
      next: null
    }, zo(e)) {
      if (n) throw Error(a(479));
    } else
      n = sc(
        e,
        i,
        o,
        2
      ), n !== null && Cn(n, e, 2);
  }
  function zo(e) {
    var n = e.alternate;
    return e === Ue || n !== null && n === Ue;
  }
  function Qp(e, n) {
    ri = Mo = !0;
    var i = e.pending;
    i === null ? n.next = n : (n.next = i.next, i.next = n), e.pending = n;
  }
  function Jp(e, n, i) {
    if ((i & 4194048) !== 0) {
      var o = n.lanes;
      o &= e.pendingLanes, i |= o, n.lanes = i, sh(e, i);
    }
  }
  var Io = {
    readContext: Xt,
    use: jo,
    useCallback: At,
    useContext: At,
    useEffect: At,
    useImperativeHandle: At,
    useLayoutEffect: At,
    useInsertionEffect: At,
    useMemo: At,
    useReducer: At,
    useRef: At,
    useState: At,
    useDebugValue: At,
    useDeferredValue: At,
    useTransition: At,
    useSyncExternalStore: At,
    useId: At,
    useHostTransitionStatus: At,
    useFormState: At,
    useActionState: At,
    useOptimistic: At,
    useMemoCache: At,
    useCacheRefresh: At
  }, Wp = {
    readContext: Xt,
    use: jo,
    useCallback: function(e, n) {
      return un().memoizedState = [
        e,
        n === void 0 ? null : n
      ], e;
    },
    useContext: Xt,
    useEffect: Pp,
    useImperativeHandle: function(e, n, i) {
      i = i != null ? i.concat([e]) : null, Po(
        4194308,
        4,
        Up.bind(null, n, e),
        i
      );
    },
    useLayoutEffect: function(e, n) {
      return Po(4194308, 4, e, n);
    },
    useInsertionEffect: function(e, n) {
      Po(4, 2, e, n);
    },
    useMemo: function(e, n) {
      var i = un();
      n = n === void 0 ? null : n;
      var o = e();
      if (va) {
        Le(!0);
        try {
          e();
        } finally {
          Le(!1);
        }
      }
      return i.memoizedState = [o, n], o;
    },
    useReducer: function(e, n, i) {
      var o = un();
      if (i !== void 0) {
        var d = i(n);
        if (va) {
          Le(!0);
          try {
            i(n);
          } finally {
            Le(!1);
          }
        }
      } else d = n;
      return o.memoizedState = o.baseState = d, e = {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: e,
        lastRenderedState: d
      }, o.queue = e, e = e.dispatch = q_.bind(
        null,
        Ue,
        e
      ), [o.memoizedState, e];
    },
    useRef: function(e) {
      var n = un();
      return e = { current: e }, n.memoizedState = e;
    },
    useState: function(e) {
      e = Lc(e);
      var n = e.queue, i = Kp.bind(null, Ue, n);
      return n.dispatch = i, [e.memoizedState, i];
    },
    useDebugValue: zc,
    useDeferredValue: function(e, n) {
      var i = un();
      return Ic(i, e, n);
    },
    useTransition: function() {
      var e = Lc(!1);
      return e = $p.bind(
        null,
        Ue,
        e.queue,
        !0,
        !1
      ), un().memoizedState = e, [!1, e];
    },
    useSyncExternalStore: function(e, n, i) {
      var o = Ue, d = un();
      if (tt) {
        if (i === void 0)
          throw Error(a(407));
        i = i();
      } else {
        if (i = n(), dt === null)
          throw Error(a(349));
        (Qe & 124) !== 0 || _p(o, n, i);
      }
      d.memoizedState = i;
      var y = { value: i, getSnapshot: n };
      return d.queue = y, Pp(wp.bind(null, o, y, e), [
        e
      ]), o.flags |= 2048, ii(
        9,
        Lo(),
        Sp.bind(
          null,
          o,
          y,
          i,
          n
        ),
        null
      ), i;
    },
    useId: function() {
      var e = un(), n = dt.identifierPrefix;
      if (tt) {
        var i = cr, o = lr;
        i = (o & ~(1 << 32 - ge(o) - 1)).toString(32) + i, n = "" + n + "R" + i, i = Ro++, 0 < i && (n += "H" + i.toString(32)), n += "";
      } else
        i = P_++, n = "" + n + "r" + i.toString(32) + "";
      return e.memoizedState = n;
    },
    useHostTransitionStatus: Uc,
    useFormState: Mp,
    useActionState: Mp,
    useOptimistic: function(e) {
      var n = un();
      n.memoizedState = n.baseState = e;
      var i = {
        pending: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: null,
        lastRenderedState: null
      };
      return n.queue = i, n = Hc.bind(
        null,
        Ue,
        !0,
        i
      ), i.dispatch = n, [e, n];
    },
    useMemoCache: Rc,
    useCacheRefresh: function() {
      return un().memoizedState = H_.bind(
        null,
        Ue
      );
    }
  }, em = {
    readContext: Xt,
    use: jo,
    useCallback: qp,
    useContext: Xt,
    useEffect: zp,
    useImperativeHandle: Hp,
    useInsertionEffect: Ip,
    useLayoutEffect: Bp,
    useMemo: Gp,
    useReducer: Do,
    useRef: Lp,
    useState: function() {
      return Do(hr);
    },
    useDebugValue: zc,
    useDeferredValue: function(e, n) {
      var i = Nt();
      return Zp(
        i,
        it.memoizedState,
        e,
        n
      );
    },
    useTransition: function() {
      var e = Do(hr)[0], n = Nt().memoizedState;
      return [
        typeof e == "boolean" ? e : ss(e),
        n
      ];
    },
    useSyncExternalStore: bp,
    useId: Fp,
    useHostTransitionStatus: Uc,
    useFormState: Rp,
    useActionState: Rp,
    useOptimistic: function(e, n) {
      var i = Nt();
      return Ap(i, it, e, n);
    },
    useMemoCache: Rc,
    useCacheRefresh: Xp
  }, G_ = {
    readContext: Xt,
    use: jo,
    useCallback: qp,
    useContext: Xt,
    useEffect: zp,
    useImperativeHandle: Hp,
    useInsertionEffect: Ip,
    useLayoutEffect: Bp,
    useMemo: Gp,
    useReducer: Dc,
    useRef: Lp,
    useState: function() {
      return Dc(hr);
    },
    useDebugValue: zc,
    useDeferredValue: function(e, n) {
      var i = Nt();
      return it === null ? Ic(i, e, n) : Zp(
        i,
        it.memoizedState,
        e,
        n
      );
    },
    useTransition: function() {
      var e = Dc(hr)[0], n = Nt().memoizedState;
      return [
        typeof e == "boolean" ? e : ss(e),
        n
      ];
    },
    useSyncExternalStore: bp,
    useId: Fp,
    useHostTransitionStatus: Uc,
    useFormState: Dp,
    useActionState: Dp,
    useOptimistic: function(e, n) {
      var i = Nt();
      return it !== null ? Ap(i, it, e, n) : (i.baseState = e, [e, i.queue.dispatch]);
    },
    useMemoCache: Rc,
    useCacheRefresh: Xp
  }, si = null, ls = 0;
  function Bo(e) {
    var n = ls;
    return ls += 1, si === null && (si = []), dp(si, e, n);
  }
  function cs(e, n) {
    n = n.props.ref, e.ref = n !== void 0 ? n : null;
  }
  function Uo(e, n) {
    throw n.$$typeof === E ? Error(a(525)) : (e = Object.prototype.toString.call(n), Error(
      a(
        31,
        e === "[object Object]" ? "object with keys {" + Object.keys(n).join(", ") + "}" : e
      )
    ));
  }
  function tm(e) {
    var n = e._init;
    return n(e._payload);
  }
  function nm(e) {
    function n(Y, G) {
      if (e) {
        var K = Y.deletions;
        K === null ? (Y.deletions = [G], Y.flags |= 16) : K.push(G);
      }
    }
    function i(Y, G) {
      if (!e) return null;
      for (; G !== null; )
        n(Y, G), G = G.sibling;
      return null;
    }
    function o(Y) {
      for (var G = /* @__PURE__ */ new Map(); Y !== null; )
        Y.key !== null ? G.set(Y.key, Y) : G.set(Y.index, Y), Y = Y.sibling;
      return G;
    }
    function d(Y, G) {
      return Y = ur(Y, G), Y.index = 0, Y.sibling = null, Y;
    }
    function y(Y, G, K) {
      return Y.index = K, e ? (K = Y.alternate, K !== null ? (K = K.index, K < G ? (Y.flags |= 67108866, G) : K) : (Y.flags |= 67108866, G)) : (Y.flags |= 1048576, G);
    }
    function x(Y) {
      return e && Y.alternate === null && (Y.flags |= 67108866), Y;
    }
    function L(Y, G, K, ue) {
      return G === null || G.tag !== 6 ? (G = uc(K, Y.mode, ue), G.return = Y, G) : (G = d(G, K), G.return = Y, G);
    }
    function U(Y, G, K, ue) {
      var Se = K.type;
      return Se === p ? ie(
        Y,
        G,
        K.props.children,
        ue,
        K.key
      ) : G !== null && (G.elementType === Se || typeof Se == "object" && Se !== null && Se.$$typeof === N && tm(Se) === G.type) ? (G = d(G, K.props), cs(G, K), G.return = Y, G) : (G = wo(
        K.type,
        K.key,
        K.props,
        null,
        Y.mode,
        ue
      ), cs(G, K), G.return = Y, G);
    }
    function J(Y, G, K, ue) {
      return G === null || G.tag !== 4 || G.stateNode.containerInfo !== K.containerInfo || G.stateNode.implementation !== K.implementation ? (G = lc(K, Y.mode, ue), G.return = Y, G) : (G = d(G, K.children || []), G.return = Y, G);
    }
    function ie(Y, G, K, ue, Se) {
      return G === null || G.tag !== 7 ? (G = la(
        K,
        Y.mode,
        ue,
        Se
      ), G.return = Y, G) : (G = d(G, K), G.return = Y, G);
    }
    function le(Y, G, K) {
      if (typeof G == "string" && G !== "" || typeof G == "number" || typeof G == "bigint")
        return G = uc(
          "" + G,
          Y.mode,
          K
        ), G.return = Y, G;
      if (typeof G == "object" && G !== null) {
        switch (G.$$typeof) {
          case _:
            return K = wo(
              G.type,
              G.key,
              G.props,
              null,
              Y.mode,
              K
            ), cs(K, G), K.return = Y, K;
          case b:
            return G = lc(
              G,
              Y.mode,
              K
            ), G.return = Y, G;
          case N:
            var ue = G._init;
            return G = ue(G._payload), le(Y, G, K);
        }
        if (Q(G) || H(G))
          return G = la(
            G,
            Y.mode,
            K,
            null
          ), G.return = Y, G;
        if (typeof G.then == "function")
          return le(Y, Bo(G), K);
        if (G.$$typeof === I)
          return le(
            Y,
            To(Y, G),
            K
          );
        Uo(Y, G);
      }
      return null;
    }
    function W(Y, G, K, ue) {
      var Se = G !== null ? G.key : null;
      if (typeof K == "string" && K !== "" || typeof K == "number" || typeof K == "bigint")
        return Se !== null ? null : L(Y, G, "" + K, ue);
      if (typeof K == "object" && K !== null) {
        switch (K.$$typeof) {
          case _:
            return K.key === Se ? U(Y, G, K, ue) : null;
          case b:
            return K.key === Se ? J(Y, G, K, ue) : null;
          case N:
            return Se = K._init, K = Se(K._payload), W(Y, G, K, ue);
        }
        if (Q(K) || H(K))
          return Se !== null ? null : ie(Y, G, K, ue, null);
        if (typeof K.then == "function")
          return W(
            Y,
            G,
            Bo(K),
            ue
          );
        if (K.$$typeof === I)
          return W(
            Y,
            G,
            To(Y, K),
            ue
          );
        Uo(Y, K);
      }
      return null;
    }
    function ee(Y, G, K, ue, Se) {
      if (typeof ue == "string" && ue !== "" || typeof ue == "number" || typeof ue == "bigint")
        return Y = Y.get(K) || null, L(G, Y, "" + ue, Se);
      if (typeof ue == "object" && ue !== null) {
        switch (ue.$$typeof) {
          case _:
            return Y = Y.get(
              ue.key === null ? K : ue.key
            ) || null, U(G, Y, ue, Se);
          case b:
            return Y = Y.get(
              ue.key === null ? K : ue.key
            ) || null, J(G, Y, ue, Se);
          case N:
            var He = ue._init;
            return ue = He(ue._payload), ee(
              Y,
              G,
              K,
              ue,
              Se
            );
        }
        if (Q(ue) || H(ue))
          return Y = Y.get(K) || null, ie(G, Y, ue, Se, null);
        if (typeof ue.then == "function")
          return ee(
            Y,
            G,
            K,
            Bo(ue),
            Se
          );
        if (ue.$$typeof === I)
          return ee(
            Y,
            G,
            K,
            To(G, ue),
            Se
          );
        Uo(G, ue);
      }
      return null;
    }
    function Me(Y, G, K, ue) {
      for (var Se = null, He = null, Ce = G, xe = G = 0, Bt = null; Ce !== null && xe < K.length; xe++) {
        Ce.index > xe ? (Bt = Ce, Ce = null) : Bt = Ce.sibling;
        var We = W(
          Y,
          Ce,
          K[xe],
          ue
        );
        if (We === null) {
          Ce === null && (Ce = Bt);
          break;
        }
        e && Ce && We.alternate === null && n(Y, Ce), G = y(We, G, xe), He === null ? Se = We : He.sibling = We, He = We, Ce = Bt;
      }
      if (xe === K.length)
        return i(Y, Ce), tt && da(Y, xe), Se;
      if (Ce === null) {
        for (; xe < K.length; xe++)
          Ce = le(Y, K[xe], ue), Ce !== null && (G = y(
            Ce,
            G,
            xe
          ), He === null ? Se = Ce : He.sibling = Ce, He = Ce);
        return tt && da(Y, xe), Se;
      }
      for (Ce = o(Ce); xe < K.length; xe++)
        Bt = ee(
          Ce,
          Y,
          xe,
          K[xe],
          ue
        ), Bt !== null && (e && Bt.alternate !== null && Ce.delete(
          Bt.key === null ? xe : Bt.key
        ), G = y(
          Bt,
          G,
          xe
        ), He === null ? Se = Bt : He.sibling = Bt, He = Bt);
      return e && Ce.forEach(function(Xr) {
        return n(Y, Xr);
      }), tt && da(Y, xe), Se;
    }
    function ke(Y, G, K, ue) {
      if (K == null) throw Error(a(151));
      for (var Se = null, He = null, Ce = G, xe = G = 0, Bt = null, We = K.next(); Ce !== null && !We.done; xe++, We = K.next()) {
        Ce.index > xe ? (Bt = Ce, Ce = null) : Bt = Ce.sibling;
        var Xr = W(Y, Ce, We.value, ue);
        if (Xr === null) {
          Ce === null && (Ce = Bt);
          break;
        }
        e && Ce && Xr.alternate === null && n(Y, Ce), G = y(Xr, G, xe), He === null ? Se = Xr : He.sibling = Xr, He = Xr, Ce = Bt;
      }
      if (We.done)
        return i(Y, Ce), tt && da(Y, xe), Se;
      if (Ce === null) {
        for (; !We.done; xe++, We = K.next())
          We = le(Y, We.value, ue), We !== null && (G = y(We, G, xe), He === null ? Se = We : He.sibling = We, He = We);
        return tt && da(Y, xe), Se;
      }
      for (Ce = o(Ce); !We.done; xe++, We = K.next())
        We = ee(Ce, Y, xe, We.value, ue), We !== null && (e && We.alternate !== null && Ce.delete(We.key === null ? xe : We.key), G = y(We, G, xe), He === null ? Se = We : He.sibling = We, He = We);
      return e && Ce.forEach(function(Z1) {
        return n(Y, Z1);
      }), tt && da(Y, xe), Se;
    }
    function ot(Y, G, K, ue) {
      if (typeof K == "object" && K !== null && K.type === p && K.key === null && (K = K.props.children), typeof K == "object" && K !== null) {
        switch (K.$$typeof) {
          case _:
            e: {
              for (var Se = K.key; G !== null; ) {
                if (G.key === Se) {
                  if (Se = K.type, Se === p) {
                    if (G.tag === 7) {
                      i(
                        Y,
                        G.sibling
                      ), ue = d(
                        G,
                        K.props.children
                      ), ue.return = Y, Y = ue;
                      break e;
                    }
                  } else if (G.elementType === Se || typeof Se == "object" && Se !== null && Se.$$typeof === N && tm(Se) === G.type) {
                    i(
                      Y,
                      G.sibling
                    ), ue = d(G, K.props), cs(ue, K), ue.return = Y, Y = ue;
                    break e;
                  }
                  i(Y, G);
                  break;
                } else n(Y, G);
                G = G.sibling;
              }
              K.type === p ? (ue = la(
                K.props.children,
                Y.mode,
                ue,
                K.key
              ), ue.return = Y, Y = ue) : (ue = wo(
                K.type,
                K.key,
                K.props,
                null,
                Y.mode,
                ue
              ), cs(ue, K), ue.return = Y, Y = ue);
            }
            return x(Y);
          case b:
            e: {
              for (Se = K.key; G !== null; ) {
                if (G.key === Se)
                  if (G.tag === 4 && G.stateNode.containerInfo === K.containerInfo && G.stateNode.implementation === K.implementation) {
                    i(
                      Y,
                      G.sibling
                    ), ue = d(G, K.children || []), ue.return = Y, Y = ue;
                    break e;
                  } else {
                    i(Y, G);
                    break;
                  }
                else n(Y, G);
                G = G.sibling;
              }
              ue = lc(K, Y.mode, ue), ue.return = Y, Y = ue;
            }
            return x(Y);
          case N:
            return Se = K._init, K = Se(K._payload), ot(
              Y,
              G,
              K,
              ue
            );
        }
        if (Q(K))
          return Me(
            Y,
            G,
            K,
            ue
          );
        if (H(K)) {
          if (Se = H(K), typeof Se != "function") throw Error(a(150));
          return K = Se.call(K), ke(
            Y,
            G,
            K,
            ue
          );
        }
        if (typeof K.then == "function")
          return ot(
            Y,
            G,
            Bo(K),
            ue
          );
        if (K.$$typeof === I)
          return ot(
            Y,
            G,
            To(Y, K),
            ue
          );
        Uo(Y, K);
      }
      return typeof K == "string" && K !== "" || typeof K == "number" || typeof K == "bigint" ? (K = "" + K, G !== null && G.tag === 6 ? (i(Y, G.sibling), ue = d(G, K), ue.return = Y, Y = ue) : (i(Y, G), ue = uc(K, Y.mode, ue), ue.return = Y, Y = ue), x(Y)) : i(Y, G);
    }
    return function(Y, G, K, ue) {
      try {
        ls = 0;
        var Se = ot(
          Y,
          G,
          K,
          ue
        );
        return si = null, Se;
      } catch (Ce) {
        if (Ce === es || Ce === xo) throw Ce;
        var He = bn(29, Ce, null, Y.mode);
        return He.lanes = ue, He.return = Y, He;
      } finally {
      }
    };
  }
  var oi = nm(!0), rm = nm(!1), zn = Z(null), Qn = null;
  function Dr(e) {
    var n = e.alternate;
    ce(jt, jt.current & 1), ce(zn, e), Qn === null && (n === null || ni.current !== null || n.memoizedState !== null) && (Qn = e);
  }
  function am(e) {
    if (e.tag === 22) {
      if (ce(jt, jt.current), ce(zn, e), Qn === null) {
        var n = e.alternate;
        n !== null && n.memoizedState !== null && (Qn = e);
      }
    } else Lr();
  }
  function Lr() {
    ce(jt, jt.current), ce(zn, zn.current);
  }
  function pr(e) {
    re(zn), Qn === e && (Qn = null), re(jt);
  }
  var jt = Z(0);
  function Ho(e) {
    for (var n = e; n !== null; ) {
      if (n.tag === 13) {
        var i = n.memoizedState;
        if (i !== null && (i = i.dehydrated, i === null || i.data === "$?" || Md(i)))
          return n;
      } else if (n.tag === 19 && n.memoizedProps.revealOrder !== void 0) {
        if ((n.flags & 128) !== 0) return n;
      } else if (n.child !== null) {
        n.child.return = n, n = n.child;
        continue;
      }
      if (n === e) break;
      for (; n.sibling === null; ) {
        if (n.return === null || n.return === e) return null;
        n = n.return;
      }
      n.sibling.return = n.return, n = n.sibling;
    }
    return null;
  }
  function qc(e, n, i, o) {
    n = e.memoizedState, i = i(o, n), i = i == null ? n : v({}, n, i), e.memoizedState = i, e.lanes === 0 && (e.updateQueue.baseState = i);
  }
  var Gc = {
    enqueueSetState: function(e, n, i) {
      e = e._reactInternals;
      var o = En(), d = Mr(o);
      d.payload = n, i != null && (d.callback = i), n = Rr(e, d, o), n !== null && (Cn(n, e, o), ns(n, e, o));
    },
    enqueueReplaceState: function(e, n, i) {
      e = e._reactInternals;
      var o = En(), d = Mr(o);
      d.tag = 1, d.payload = n, i != null && (d.callback = i), n = Rr(e, d, o), n !== null && (Cn(n, e, o), ns(n, e, o));
    },
    enqueueForceUpdate: function(e, n) {
      e = e._reactInternals;
      var i = En(), o = Mr(i);
      o.tag = 2, n != null && (o.callback = n), n = Rr(e, o, i), n !== null && (Cn(n, e, i), ns(n, e, i));
    }
  };
  function im(e, n, i, o, d, y, x) {
    return e = e.stateNode, typeof e.shouldComponentUpdate == "function" ? e.shouldComponentUpdate(o, y, x) : n.prototype && n.prototype.isPureReactComponent ? !Vi(i, o) || !Vi(d, y) : !0;
  }
  function sm(e, n, i, o) {
    e = n.state, typeof n.componentWillReceiveProps == "function" && n.componentWillReceiveProps(i, o), typeof n.UNSAFE_componentWillReceiveProps == "function" && n.UNSAFE_componentWillReceiveProps(i, o), n.state !== e && Gc.enqueueReplaceState(n, n.state, null);
  }
  function ya(e, n) {
    var i = n;
    if ("ref" in n) {
      i = {};
      for (var o in n)
        o !== "ref" && (i[o] = n[o]);
    }
    if (e = e.defaultProps) {
      i === n && (i = v({}, i));
      for (var d in e)
        i[d] === void 0 && (i[d] = e[d]);
    }
    return i;
  }
  var qo = typeof reportError == "function" ? reportError : function(e) {
    if (typeof window == "object" && typeof window.ErrorEvent == "function") {
      var n = new window.ErrorEvent("error", {
        bubbles: !0,
        cancelable: !0,
        message: typeof e == "object" && e !== null && typeof e.message == "string" ? String(e.message) : String(e),
        error: e
      });
      if (!window.dispatchEvent(n)) return;
    } else if (typeof process == "object" && typeof process.emit == "function") {
      process.emit("uncaughtException", e);
      return;
    }
    console.error(e);
  };
  function om(e) {
    qo(e);
  }
  function um(e) {
    console.error(e);
  }
  function lm(e) {
    qo(e);
  }
  function Go(e, n) {
    try {
      var i = e.onUncaughtError;
      i(n.value, { componentStack: n.stack });
    } catch (o) {
      setTimeout(function() {
        throw o;
      });
    }
  }
  function cm(e, n, i) {
    try {
      var o = e.onCaughtError;
      o(i.value, {
        componentStack: i.stack,
        errorBoundary: n.tag === 1 ? n.stateNode : null
      });
    } catch (d) {
      setTimeout(function() {
        throw d;
      });
    }
  }
  function Zc(e, n, i) {
    return i = Mr(i), i.tag = 3, i.payload = { element: null }, i.callback = function() {
      Go(e, n);
    }, i;
  }
  function dm(e) {
    return e = Mr(e), e.tag = 3, e;
  }
  function fm(e, n, i, o) {
    var d = i.type.getDerivedStateFromError;
    if (typeof d == "function") {
      var y = o.value;
      e.payload = function() {
        return d(y);
      }, e.callback = function() {
        cm(n, i, o);
      };
    }
    var x = i.stateNode;
    x !== null && typeof x.componentDidCatch == "function" && (e.callback = function() {
      cm(n, i, o), typeof d != "function" && (Hr === null ? Hr = /* @__PURE__ */ new Set([this]) : Hr.add(this));
      var L = o.stack;
      this.componentDidCatch(o.value, {
        componentStack: L !== null ? L : ""
      });
    });
  }
  function Z_(e, n, i, o, d) {
    if (i.flags |= 32768, o !== null && typeof o == "object" && typeof o.then == "function") {
      if (n = i.alternate, n !== null && Qi(
        n,
        i,
        d,
        !0
      ), i = zn.current, i !== null) {
        switch (i.tag) {
          case 13:
            return Qn === null ? pd() : i.alternate === null && Et === 0 && (Et = 3), i.flags &= -257, i.flags |= 65536, i.lanes = d, o === bc ? i.flags |= 16384 : (n = i.updateQueue, n === null ? i.updateQueue = /* @__PURE__ */ new Set([o]) : n.add(o), gd(e, o, d)), !1;
          case 22:
            return i.flags |= 65536, o === bc ? i.flags |= 16384 : (n = i.updateQueue, n === null ? (n = {
              transitions: null,
              markerInstances: null,
              retryQueue: /* @__PURE__ */ new Set([o])
            }, i.updateQueue = n) : (i = n.retryQueue, i === null ? n.retryQueue = /* @__PURE__ */ new Set([o]) : i.add(o)), gd(e, o, d)), !1;
        }
        throw Error(a(435, i.tag));
      }
      return gd(e, o, d), pd(), !1;
    }
    if (tt)
      return n = zn.current, n !== null ? ((n.flags & 65536) === 0 && (n.flags |= 256), n.flags |= 65536, n.lanes = d, o !== fc && (e = Error(a(422), { cause: o }), Ki(jn(e, i)))) : (o !== fc && (n = Error(a(423), {
        cause: o
      }), Ki(
        jn(n, i)
      )), e = e.current.alternate, e.flags |= 65536, d &= -d, e.lanes |= d, o = jn(o, i), d = Zc(
        e.stateNode,
        o,
        d
      ), wc(e, d), Et !== 4 && (Et = 2)), !1;
    var y = Error(a(520), { cause: o });
    if (y = jn(y, i), vs === null ? vs = [y] : vs.push(y), Et !== 4 && (Et = 2), n === null) return !0;
    o = jn(o, i), i = n;
    do {
      switch (i.tag) {
        case 3:
          return i.flags |= 65536, e = d & -d, i.lanes |= e, e = Zc(i.stateNode, o, e), wc(i, e), !1;
        case 1:
          if (n = i.type, y = i.stateNode, (i.flags & 128) === 0 && (typeof n.getDerivedStateFromError == "function" || y !== null && typeof y.componentDidCatch == "function" && (Hr === null || !Hr.has(y))))
            return i.flags |= 65536, d &= -d, i.lanes |= d, d = dm(d), fm(
              d,
              e,
              i,
              o
            ), wc(i, d), !1;
      }
      i = i.return;
    } while (i !== null);
    return !1;
  }
  var hm = Error(a(461)), zt = !1;
  function Gt(e, n, i, o) {
    n.child = e === null ? rm(n, null, i, o) : oi(
      n,
      e.child,
      i,
      o
    );
  }
  function pm(e, n, i, o, d) {
    i = i.render;
    var y = n.ref;
    if ("ref" in o) {
      var x = {};
      for (var L in o)
        L !== "ref" && (x[L] = o[L]);
    } else x = o;
    return ma(n), o = kc(
      e,
      n,
      i,
      x,
      y,
      d
    ), L = xc(), e !== null && !zt ? (Nc(e, n, d), mr(e, n, d)) : (tt && L && cc(n), n.flags |= 1, Gt(e, n, o, d), n.child);
  }
  function mm(e, n, i, o, d) {
    if (e === null) {
      var y = i.type;
      return typeof y == "function" && !oc(y) && y.defaultProps === void 0 && i.compare === null ? (n.tag = 15, n.type = y, gm(
        e,
        n,
        y,
        o,
        d
      )) : (e = wo(
        i.type,
        null,
        o,
        n,
        n.mode,
        d
      ), e.ref = n.ref, e.return = n, n.child = e);
    }
    if (y = e.child, !Jc(e, d)) {
      var x = y.memoizedProps;
      if (i = i.compare, i = i !== null ? i : Vi, i(x, o) && e.ref === n.ref)
        return mr(e, n, d);
    }
    return n.flags |= 1, e = ur(y, o), e.ref = n.ref, e.return = n, n.child = e;
  }
  function gm(e, n, i, o, d) {
    if (e !== null) {
      var y = e.memoizedProps;
      if (Vi(y, o) && e.ref === n.ref)
        if (zt = !1, n.pendingProps = o = y, Jc(e, d))
          (e.flags & 131072) !== 0 && (zt = !0);
        else
          return n.lanes = e.lanes, mr(e, n, d);
    }
    return $c(
      e,
      n,
      i,
      o,
      d
    );
  }
  function vm(e, n, i) {
    var o = n.pendingProps, d = o.children, y = e !== null ? e.memoizedState : null;
    if (o.mode === "hidden") {
      if ((n.flags & 128) !== 0) {
        if (o = y !== null ? y.baseLanes | i : i, e !== null) {
          for (d = n.child = e.child, y = 0; d !== null; )
            y = y | d.lanes | d.childLanes, d = d.sibling;
          n.childLanes = y & ~o;
        } else n.childLanes = 0, n.child = null;
        return ym(
          e,
          n,
          o,
          i
        );
      }
      if ((i & 536870912) !== 0)
        n.memoizedState = { baseLanes: 0, cachePool: null }, e !== null && ko(
          n,
          y !== null ? y.cachePool : null
        ), y !== null ? gp(n, y) : Cc(), am(n);
      else
        return n.lanes = n.childLanes = 536870912, ym(
          e,
          n,
          y !== null ? y.baseLanes | i : i,
          i
        );
    } else
      y !== null ? (ko(n, y.cachePool), gp(n, y), Lr(), n.memoizedState = null) : (e !== null && ko(n, null), Cc(), Lr());
    return Gt(e, n, d, i), n.child;
  }
  function ym(e, n, i, o) {
    var d = yc();
    return d = d === null ? null : { parent: Rt._currentValue, pool: d }, n.memoizedState = {
      baseLanes: i,
      cachePool: d
    }, e !== null && ko(n, null), Cc(), am(n), e !== null && Qi(e, n, o, !0), null;
  }
  function Zo(e, n) {
    var i = n.ref;
    if (i === null)
      e !== null && e.ref !== null && (n.flags |= 4194816);
    else {
      if (typeof i != "function" && typeof i != "object")
        throw Error(a(284));
      (e === null || e.ref !== i) && (n.flags |= 4194816);
    }
  }
  function $c(e, n, i, o, d) {
    return ma(n), i = kc(
      e,
      n,
      i,
      o,
      void 0,
      d
    ), o = xc(), e !== null && !zt ? (Nc(e, n, d), mr(e, n, d)) : (tt && o && cc(n), n.flags |= 1, Gt(e, n, i, d), n.child);
  }
  function bm(e, n, i, o, d, y) {
    return ma(n), n.updateQueue = null, i = yp(
      n,
      o,
      i,
      d
    ), vp(e), o = xc(), e !== null && !zt ? (Nc(e, n, y), mr(e, n, y)) : (tt && o && cc(n), n.flags |= 1, Gt(e, n, i, y), n.child);
  }
  function _m(e, n, i, o, d) {
    if (ma(n), n.stateNode === null) {
      var y = Qa, x = i.contextType;
      typeof x == "object" && x !== null && (y = Xt(x)), y = new i(o, y), n.memoizedState = y.state !== null && y.state !== void 0 ? y.state : null, y.updater = Gc, n.stateNode = y, y._reactInternals = n, y = n.stateNode, y.props = o, y.state = n.memoizedState, y.refs = {}, _c(n), x = i.contextType, y.context = typeof x == "object" && x !== null ? Xt(x) : Qa, y.state = n.memoizedState, x = i.getDerivedStateFromProps, typeof x == "function" && (qc(
        n,
        i,
        x,
        o
      ), y.state = n.memoizedState), typeof i.getDerivedStateFromProps == "function" || typeof y.getSnapshotBeforeUpdate == "function" || typeof y.UNSAFE_componentWillMount != "function" && typeof y.componentWillMount != "function" || (x = y.state, typeof y.componentWillMount == "function" && y.componentWillMount(), typeof y.UNSAFE_componentWillMount == "function" && y.UNSAFE_componentWillMount(), x !== y.state && Gc.enqueueReplaceState(y, y.state, null), as(n, o, y, d), rs(), y.state = n.memoizedState), typeof y.componentDidMount == "function" && (n.flags |= 4194308), o = !0;
    } else if (e === null) {
      y = n.stateNode;
      var L = n.memoizedProps, U = ya(i, L);
      y.props = U;
      var J = y.context, ie = i.contextType;
      x = Qa, typeof ie == "object" && ie !== null && (x = Xt(ie));
      var le = i.getDerivedStateFromProps;
      ie = typeof le == "function" || typeof y.getSnapshotBeforeUpdate == "function", L = n.pendingProps !== L, ie || typeof y.UNSAFE_componentWillReceiveProps != "function" && typeof y.componentWillReceiveProps != "function" || (L || J !== x) && sm(
        n,
        y,
        o,
        x
      ), Or = !1;
      var W = n.memoizedState;
      y.state = W, as(n, o, y, d), rs(), J = n.memoizedState, L || W !== J || Or ? (typeof le == "function" && (qc(
        n,
        i,
        le,
        o
      ), J = n.memoizedState), (U = Or || im(
        n,
        i,
        U,
        o,
        W,
        J,
        x
      )) ? (ie || typeof y.UNSAFE_componentWillMount != "function" && typeof y.componentWillMount != "function" || (typeof y.componentWillMount == "function" && y.componentWillMount(), typeof y.UNSAFE_componentWillMount == "function" && y.UNSAFE_componentWillMount()), typeof y.componentDidMount == "function" && (n.flags |= 4194308)) : (typeof y.componentDidMount == "function" && (n.flags |= 4194308), n.memoizedProps = o, n.memoizedState = J), y.props = o, y.state = J, y.context = x, o = U) : (typeof y.componentDidMount == "function" && (n.flags |= 4194308), o = !1);
    } else {
      y = n.stateNode, Sc(e, n), x = n.memoizedProps, ie = ya(i, x), y.props = ie, le = n.pendingProps, W = y.context, J = i.contextType, U = Qa, typeof J == "object" && J !== null && (U = Xt(J)), L = i.getDerivedStateFromProps, (J = typeof L == "function" || typeof y.getSnapshotBeforeUpdate == "function") || typeof y.UNSAFE_componentWillReceiveProps != "function" && typeof y.componentWillReceiveProps != "function" || (x !== le || W !== U) && sm(
        n,
        y,
        o,
        U
      ), Or = !1, W = n.memoizedState, y.state = W, as(n, o, y, d), rs();
      var ee = n.memoizedState;
      x !== le || W !== ee || Or || e !== null && e.dependencies !== null && Ao(e.dependencies) ? (typeof L == "function" && (qc(
        n,
        i,
        L,
        o
      ), ee = n.memoizedState), (ie = Or || im(
        n,
        i,
        ie,
        o,
        W,
        ee,
        U
      ) || e !== null && e.dependencies !== null && Ao(e.dependencies)) ? (J || typeof y.UNSAFE_componentWillUpdate != "function" && typeof y.componentWillUpdate != "function" || (typeof y.componentWillUpdate == "function" && y.componentWillUpdate(o, ee, U), typeof y.UNSAFE_componentWillUpdate == "function" && y.UNSAFE_componentWillUpdate(
        o,
        ee,
        U
      )), typeof y.componentDidUpdate == "function" && (n.flags |= 4), typeof y.getSnapshotBeforeUpdate == "function" && (n.flags |= 1024)) : (typeof y.componentDidUpdate != "function" || x === e.memoizedProps && W === e.memoizedState || (n.flags |= 4), typeof y.getSnapshotBeforeUpdate != "function" || x === e.memoizedProps && W === e.memoizedState || (n.flags |= 1024), n.memoizedProps = o, n.memoizedState = ee), y.props = o, y.state = ee, y.context = U, o = ie) : (typeof y.componentDidUpdate != "function" || x === e.memoizedProps && W === e.memoizedState || (n.flags |= 4), typeof y.getSnapshotBeforeUpdate != "function" || x === e.memoizedProps && W === e.memoizedState || (n.flags |= 1024), o = !1);
    }
    return y = o, Zo(e, n), o = (n.flags & 128) !== 0, y || o ? (y = n.stateNode, i = o && typeof i.getDerivedStateFromError != "function" ? null : y.render(), n.flags |= 1, e !== null && o ? (n.child = oi(
      n,
      e.child,
      null,
      d
    ), n.child = oi(
      n,
      null,
      i,
      d
    )) : Gt(e, n, i, d), n.memoizedState = y.state, e = n.child) : e = mr(
      e,
      n,
      d
    ), e;
  }
  function Sm(e, n, i, o) {
    return Xi(), n.flags |= 256, Gt(e, n, i, o), n.child;
  }
  var Vc = {
    dehydrated: null,
    treeContext: null,
    retryLane: 0,
    hydrationErrors: null
  };
  function Yc(e) {
    return { baseLanes: e, cachePool: up() };
  }
  function Fc(e, n, i) {
    return e = e !== null ? e.childLanes & ~i : 0, n && (e |= In), e;
  }
  function wm(e, n, i) {
    var o = n.pendingProps, d = !1, y = (n.flags & 128) !== 0, x;
    if ((x = y) || (x = e !== null && e.memoizedState === null ? !1 : (jt.current & 2) !== 0), x && (d = !0, n.flags &= -129), x = (n.flags & 32) !== 0, n.flags &= -33, e === null) {
      if (tt) {
        if (d ? Dr(n) : Lr(), tt) {
          var L = wt, U;
          if (U = L) {
            e: {
              for (U = L, L = Kn; U.nodeType !== 8; ) {
                if (!L) {
                  L = null;
                  break e;
                }
                if (U = $n(
                  U.nextSibling
                ), U === null) {
                  L = null;
                  break e;
                }
              }
              L = U;
            }
            L !== null ? (n.memoizedState = {
              dehydrated: L,
              treeContext: ca !== null ? { id: lr, overflow: cr } : null,
              retryLane: 536870912,
              hydrationErrors: null
            }, U = bn(
              18,
              null,
              null,
              0
            ), U.stateNode = L, U.return = n, n.child = U, tn = n, wt = null, U = !0) : U = !1;
          }
          U || ha(n);
        }
        if (L = n.memoizedState, L !== null && (L = L.dehydrated, L !== null))
          return Md(L) ? n.lanes = 32 : n.lanes = 536870912, null;
        pr(n);
      }
      return L = o.children, o = o.fallback, d ? (Lr(), d = n.mode, L = $o(
        { mode: "hidden", children: L },
        d
      ), o = la(
        o,
        d,
        i,
        null
      ), L.return = n, o.return = n, L.sibling = o, n.child = L, d = n.child, d.memoizedState = Yc(i), d.childLanes = Fc(
        e,
        x,
        i
      ), n.memoizedState = Vc, o) : (Dr(n), Xc(n, L));
    }
    if (U = e.memoizedState, U !== null && (L = U.dehydrated, L !== null)) {
      if (y)
        n.flags & 256 ? (Dr(n), n.flags &= -257, n = Kc(
          e,
          n,
          i
        )) : n.memoizedState !== null ? (Lr(), n.child = e.child, n.flags |= 128, n = null) : (Lr(), d = o.fallback, L = n.mode, o = $o(
          { mode: "visible", children: o.children },
          L
        ), d = la(
          d,
          L,
          i,
          null
        ), d.flags |= 2, o.return = n, d.return = n, o.sibling = d, n.child = o, oi(
          n,
          e.child,
          null,
          i
        ), o = n.child, o.memoizedState = Yc(i), o.childLanes = Fc(
          e,
          x,
          i
        ), n.memoizedState = Vc, n = d);
      else if (Dr(n), Md(L)) {
        if (x = L.nextSibling && L.nextSibling.dataset, x) var J = x.dgst;
        x = J, o = Error(a(419)), o.stack = "", o.digest = x, Ki({ value: o, source: null, stack: null }), n = Kc(
          e,
          n,
          i
        );
      } else if (zt || Qi(e, n, i, !1), x = (i & e.childLanes) !== 0, zt || x) {
        if (x = dt, x !== null && (o = i & -i, o = (o & 42) !== 0 ? 1 : Rl(o), o = (o & (x.suspendedLanes | i)) !== 0 ? 0 : o, o !== 0 && o !== U.retryLane))
          throw U.retryLane = o, Ka(e, o), Cn(x, e, o), hm;
        L.data === "$?" || pd(), n = Kc(
          e,
          n,
          i
        );
      } else
        L.data === "$?" ? (n.flags |= 192, n.child = e.child, n = null) : (e = U.treeContext, wt = $n(
          L.nextSibling
        ), tn = n, tt = !0, fa = null, Kn = !1, e !== null && (Ln[Pn++] = lr, Ln[Pn++] = cr, Ln[Pn++] = ca, lr = e.id, cr = e.overflow, ca = n), n = Xc(
          n,
          o.children
        ), n.flags |= 4096);
      return n;
    }
    return d ? (Lr(), d = o.fallback, L = n.mode, U = e.child, J = U.sibling, o = ur(U, {
      mode: "hidden",
      children: o.children
    }), o.subtreeFlags = U.subtreeFlags & 65011712, J !== null ? d = ur(J, d) : (d = la(
      d,
      L,
      i,
      null
    ), d.flags |= 2), d.return = n, o.return = n, o.sibling = d, n.child = o, o = d, d = n.child, L = e.child.memoizedState, L === null ? L = Yc(i) : (U = L.cachePool, U !== null ? (J = Rt._currentValue, U = U.parent !== J ? { parent: J, pool: J } : U) : U = up(), L = {
      baseLanes: L.baseLanes | i,
      cachePool: U
    }), d.memoizedState = L, d.childLanes = Fc(
      e,
      x,
      i
    ), n.memoizedState = Vc, o) : (Dr(n), i = e.child, e = i.sibling, i = ur(i, {
      mode: "visible",
      children: o.children
    }), i.return = n, i.sibling = null, e !== null && (x = n.deletions, x === null ? (n.deletions = [e], n.flags |= 16) : x.push(e)), n.child = i, n.memoizedState = null, i);
  }
  function Xc(e, n) {
    return n = $o(
      { mode: "visible", children: n },
      e.mode
    ), n.return = e, e.child = n;
  }
  function $o(e, n) {
    return e = bn(22, e, null, n), e.lanes = 0, e.stateNode = {
      _visibility: 1,
      _pendingMarkers: null,
      _retryCache: null,
      _transitions: null
    }, e;
  }
  function Kc(e, n, i) {
    return oi(n, e.child, null, i), e = Xc(
      n,
      n.pendingProps.children
    ), e.flags |= 2, n.memoizedState = null, e;
  }
  function Em(e, n, i) {
    e.lanes |= n;
    var o = e.alternate;
    o !== null && (o.lanes |= n), pc(e.return, n, i);
  }
  function Qc(e, n, i, o, d) {
    var y = e.memoizedState;
    y === null ? e.memoizedState = {
      isBackwards: n,
      rendering: null,
      renderingStartTime: 0,
      last: o,
      tail: i,
      tailMode: d
    } : (y.isBackwards = n, y.rendering = null, y.renderingStartTime = 0, y.last = o, y.tail = i, y.tailMode = d);
  }
  function Cm(e, n, i) {
    var o = n.pendingProps, d = o.revealOrder, y = o.tail;
    if (Gt(e, n, o.children, i), o = jt.current, (o & 2) !== 0)
      o = o & 1 | 2, n.flags |= 128;
    else {
      if (e !== null && (e.flags & 128) !== 0)
        e: for (e = n.child; e !== null; ) {
          if (e.tag === 13)
            e.memoizedState !== null && Em(e, i, n);
          else if (e.tag === 19)
            Em(e, i, n);
          else if (e.child !== null) {
            e.child.return = e, e = e.child;
            continue;
          }
          if (e === n) break e;
          for (; e.sibling === null; ) {
            if (e.return === null || e.return === n)
              break e;
            e = e.return;
          }
          e.sibling.return = e.return, e = e.sibling;
        }
      o &= 1;
    }
    switch (ce(jt, o), d) {
      case "forwards":
        for (i = n.child, d = null; i !== null; )
          e = i.alternate, e !== null && Ho(e) === null && (d = i), i = i.sibling;
        i = d, i === null ? (d = n.child, n.child = null) : (d = i.sibling, i.sibling = null), Qc(
          n,
          !1,
          d,
          i,
          y
        );
        break;
      case "backwards":
        for (i = null, d = n.child, n.child = null; d !== null; ) {
          if (e = d.alternate, e !== null && Ho(e) === null) {
            n.child = d;
            break;
          }
          e = d.sibling, d.sibling = i, i = d, d = e;
        }
        Qc(
          n,
          !0,
          i,
          null,
          y
        );
        break;
      case "together":
        Qc(n, !1, null, null, void 0);
        break;
      default:
        n.memoizedState = null;
    }
    return n.child;
  }
  function mr(e, n, i) {
    if (e !== null && (n.dependencies = e.dependencies), Ur |= n.lanes, (i & n.childLanes) === 0)
      if (e !== null) {
        if (Qi(
          e,
          n,
          i,
          !1
        ), (i & n.childLanes) === 0)
          return null;
      } else return null;
    if (e !== null && n.child !== e.child)
      throw Error(a(153));
    if (n.child !== null) {
      for (e = n.child, i = ur(e, e.pendingProps), n.child = i, i.return = n; e.sibling !== null; )
        e = e.sibling, i = i.sibling = ur(e, e.pendingProps), i.return = n;
      i.sibling = null;
    }
    return n.child;
  }
  function Jc(e, n) {
    return (e.lanes & n) !== 0 ? !0 : (e = e.dependencies, !!(e !== null && Ao(e)));
  }
  function $_(e, n, i) {
    switch (n.tag) {
      case 3:
        be(n, n.stateNode.containerInfo), Nr(n, Rt, e.memoizedState.cache), Xi();
        break;
      case 27:
      case 5:
        $e(n);
        break;
      case 4:
        be(n, n.stateNode.containerInfo);
        break;
      case 10:
        Nr(
          n,
          n.type,
          n.memoizedProps.value
        );
        break;
      case 13:
        var o = n.memoizedState;
        if (o !== null)
          return o.dehydrated !== null ? (Dr(n), n.flags |= 128, null) : (i & n.child.childLanes) !== 0 ? wm(e, n, i) : (Dr(n), e = mr(
            e,
            n,
            i
          ), e !== null ? e.sibling : null);
        Dr(n);
        break;
      case 19:
        var d = (e.flags & 128) !== 0;
        if (o = (i & n.childLanes) !== 0, o || (Qi(
          e,
          n,
          i,
          !1
        ), o = (i & n.childLanes) !== 0), d) {
          if (o)
            return Cm(
              e,
              n,
              i
            );
          n.flags |= 128;
        }
        if (d = n.memoizedState, d !== null && (d.rendering = null, d.tail = null, d.lastEffect = null), ce(jt, jt.current), o) break;
        return null;
      case 22:
      case 23:
        return n.lanes = 0, vm(e, n, i);
      case 24:
        Nr(n, Rt, e.memoizedState.cache);
    }
    return mr(e, n, i);
  }
  function Am(e, n, i) {
    if (e !== null)
      if (e.memoizedProps !== n.pendingProps)
        zt = !0;
      else {
        if (!Jc(e, i) && (n.flags & 128) === 0)
          return zt = !1, $_(
            e,
            n,
            i
          );
        zt = (e.flags & 131072) !== 0;
      }
    else
      zt = !1, tt && (n.flags & 1048576) !== 0 && tp(n, Co, n.index);
    switch (n.lanes = 0, n.tag) {
      case 16:
        e: {
          e = n.pendingProps;
          var o = n.elementType, d = o._init;
          if (o = d(o._payload), n.type = o, typeof o == "function")
            oc(o) ? (e = ya(o, e), n.tag = 1, n = _m(
              null,
              n,
              o,
              e,
              i
            )) : (n.tag = 0, n = $c(
              null,
              n,
              o,
              e,
              i
            ));
          else {
            if (o != null) {
              if (d = o.$$typeof, d === c) {
                n.tag = 11, n = pm(
                  null,
                  n,
                  o,
                  e,
                  i
                );
                break e;
              } else if (d === A) {
                n.tag = 14, n = mm(
                  null,
                  n,
                  o,
                  e,
                  i
                );
                break e;
              }
            }
            throw n = F(o) || o, Error(a(306, n, ""));
          }
        }
        return n;
      case 0:
        return $c(
          e,
          n,
          n.type,
          n.pendingProps,
          i
        );
      case 1:
        return o = n.type, d = ya(
          o,
          n.pendingProps
        ), _m(
          e,
          n,
          o,
          d,
          i
        );
      case 3:
        e: {
          if (be(
            n,
            n.stateNode.containerInfo
          ), e === null) throw Error(a(387));
          o = n.pendingProps;
          var y = n.memoizedState;
          d = y.element, Sc(e, n), as(n, o, null, i);
          var x = n.memoizedState;
          if (o = x.cache, Nr(n, Rt, o), o !== y.cache && mc(
            n,
            [Rt],
            i,
            !0
          ), rs(), o = x.element, y.isDehydrated)
            if (y = {
              element: o,
              isDehydrated: !1,
              cache: x.cache
            }, n.updateQueue.baseState = y, n.memoizedState = y, n.flags & 256) {
              n = Sm(
                e,
                n,
                o,
                i
              );
              break e;
            } else if (o !== d) {
              d = jn(
                Error(a(424)),
                n
              ), Ki(d), n = Sm(
                e,
                n,
                o,
                i
              );
              break e;
            } else {
              switch (e = n.stateNode.containerInfo, e.nodeType) {
                case 9:
                  e = e.body;
                  break;
                default:
                  e = e.nodeName === "HTML" ? e.ownerDocument.body : e;
              }
              for (wt = $n(e.firstChild), tn = n, tt = !0, fa = null, Kn = !0, i = rm(
                n,
                null,
                o,
                i
              ), n.child = i; i; )
                i.flags = i.flags & -3 | 4096, i = i.sibling;
            }
          else {
            if (Xi(), o === d) {
              n = mr(
                e,
                n,
                i
              );
              break e;
            }
            Gt(
              e,
              n,
              o,
              i
            );
          }
          n = n.child;
        }
        return n;
      case 26:
        return Zo(e, n), e === null ? (i = Ng(
          n.type,
          null,
          n.pendingProps,
          null
        )) ? n.memoizedState = i : tt || (i = n.type, e = n.pendingProps, o = iu(
          te.current
        ).createElement(i), o[Ft] = n, o[sn] = e, $t(o, i, e), Pt(o), n.stateNode = o) : n.memoizedState = Ng(
          n.type,
          e.memoizedProps,
          n.pendingProps,
          e.memoizedState
        ), null;
      case 27:
        return $e(n), e === null && tt && (o = n.stateNode = Tg(
          n.type,
          n.pendingProps,
          te.current
        ), tn = n, Kn = !0, d = wt, Zr(n.type) ? (Rd = d, wt = $n(
          o.firstChild
        )) : wt = d), Gt(
          e,
          n,
          n.pendingProps.children,
          i
        ), Zo(e, n), e === null && (n.flags |= 4194304), n.child;
      case 5:
        return e === null && tt && ((d = o = wt) && (o = b1(
          o,
          n.type,
          n.pendingProps,
          Kn
        ), o !== null ? (n.stateNode = o, tn = n, wt = $n(
          o.firstChild
        ), Kn = !1, d = !0) : d = !1), d || ha(n)), $e(n), d = n.type, y = n.pendingProps, x = e !== null ? e.memoizedProps : null, o = y.children, xd(d, y) ? o = null : x !== null && xd(d, x) && (n.flags |= 32), n.memoizedState !== null && (d = kc(
          e,
          n,
          z_,
          null,
          null,
          i
        ), Ts._currentValue = d), Zo(e, n), Gt(e, n, o, i), n.child;
      case 6:
        return e === null && tt && ((e = i = wt) && (i = _1(
          i,
          n.pendingProps,
          Kn
        ), i !== null ? (n.stateNode = i, tn = n, wt = null, e = !0) : e = !1), e || ha(n)), null;
      case 13:
        return wm(e, n, i);
      case 4:
        return be(
          n,
          n.stateNode.containerInfo
        ), o = n.pendingProps, e === null ? n.child = oi(
          n,
          null,
          o,
          i
        ) : Gt(
          e,
          n,
          o,
          i
        ), n.child;
      case 11:
        return pm(
          e,
          n,
          n.type,
          n.pendingProps,
          i
        );
      case 7:
        return Gt(
          e,
          n,
          n.pendingProps,
          i
        ), n.child;
      case 8:
        return Gt(
          e,
          n,
          n.pendingProps.children,
          i
        ), n.child;
      case 12:
        return Gt(
          e,
          n,
          n.pendingProps.children,
          i
        ), n.child;
      case 10:
        return o = n.pendingProps, Nr(n, n.type, o.value), Gt(
          e,
          n,
          o.children,
          i
        ), n.child;
      case 9:
        return d = n.type._context, o = n.pendingProps.children, ma(n), d = Xt(d), o = o(d), n.flags |= 1, Gt(e, n, o, i), n.child;
      case 14:
        return mm(
          e,
          n,
          n.type,
          n.pendingProps,
          i
        );
      case 15:
        return gm(
          e,
          n,
          n.type,
          n.pendingProps,
          i
        );
      case 19:
        return Cm(e, n, i);
      case 31:
        return o = n.pendingProps, i = n.mode, o = {
          mode: o.mode,
          children: o.children
        }, e === null ? (i = $o(
          o,
          i
        ), i.ref = n.ref, n.child = i, i.return = n, n = i) : (i = ur(e.child, o), i.ref = n.ref, n.child = i, i.return = n, n = i), n;
      case 22:
        return vm(e, n, i);
      case 24:
        return ma(n), o = Xt(Rt), e === null ? (d = yc(), d === null && (d = dt, y = gc(), d.pooledCache = y, y.refCount++, y !== null && (d.pooledCacheLanes |= i), d = y), n.memoizedState = {
          parent: o,
          cache: d
        }, _c(n), Nr(n, Rt, d)) : ((e.lanes & i) !== 0 && (Sc(e, n), as(n, null, null, i), rs()), d = e.memoizedState, y = n.memoizedState, d.parent !== o ? (d = { parent: o, cache: o }, n.memoizedState = d, n.lanes === 0 && (n.memoizedState = n.updateQueue.baseState = d), Nr(n, Rt, o)) : (o = y.cache, Nr(n, Rt, o), o !== d.cache && mc(
          n,
          [Rt],
          i,
          !0
        ))), Gt(
          e,
          n,
          n.pendingProps.children,
          i
        ), n.child;
      case 29:
        throw n.pendingProps;
    }
    throw Error(a(156, n.tag));
  }
  function gr(e) {
    e.flags |= 4;
  }
  function Tm(e, n) {
    if (n.type !== "stylesheet" || (n.state.loading & 4) !== 0)
      e.flags &= -16777217;
    else if (e.flags |= 16777216, !Dg(n)) {
      if (n = zn.current, n !== null && ((Qe & 4194048) === Qe ? Qn !== null : (Qe & 62914560) !== Qe && (Qe & 536870912) === 0 || n !== Qn))
        throw ts = bc, lp;
      e.flags |= 8192;
    }
  }
  function Vo(e, n) {
    n !== null && (e.flags |= 4), e.flags & 16384 && (n = e.tag !== 22 ? ah() : 536870912, e.lanes |= n, di |= n);
  }
  function ds(e, n) {
    if (!tt)
      switch (e.tailMode) {
        case "hidden":
          n = e.tail;
          for (var i = null; n !== null; )
            n.alternate !== null && (i = n), n = n.sibling;
          i === null ? e.tail = null : i.sibling = null;
          break;
        case "collapsed":
          i = e.tail;
          for (var o = null; i !== null; )
            i.alternate !== null && (o = i), i = i.sibling;
          o === null ? n || e.tail === null ? e.tail = null : e.tail.sibling = null : o.sibling = null;
      }
  }
  function yt(e) {
    var n = e.alternate !== null && e.alternate.child === e.child, i = 0, o = 0;
    if (n)
      for (var d = e.child; d !== null; )
        i |= d.lanes | d.childLanes, o |= d.subtreeFlags & 65011712, o |= d.flags & 65011712, d.return = e, d = d.sibling;
    else
      for (d = e.child; d !== null; )
        i |= d.lanes | d.childLanes, o |= d.subtreeFlags, o |= d.flags, d.return = e, d = d.sibling;
    return e.subtreeFlags |= o, e.childLanes = i, n;
  }
  function V_(e, n, i) {
    var o = n.pendingProps;
    switch (dc(n), n.tag) {
      case 31:
      case 16:
      case 15:
      case 0:
      case 11:
      case 7:
      case 8:
      case 12:
      case 9:
      case 14:
        return yt(n), null;
      case 1:
        return yt(n), null;
      case 3:
        return i = n.stateNode, o = null, e !== null && (o = e.memoizedState.cache), n.memoizedState.cache !== o && (n.flags |= 2048), fr(Rt), Ze(), i.pendingContext && (i.context = i.pendingContext, i.pendingContext = null), (e === null || e.child === null) && (Fi(n) ? gr(n) : e === null || e.memoizedState.isDehydrated && (n.flags & 256) === 0 || (n.flags |= 1024, ap())), yt(n), null;
      case 26:
        return i = n.memoizedState, e === null ? (gr(n), i !== null ? (yt(n), Tm(n, i)) : (yt(n), n.flags &= -16777217)) : i ? i !== e.memoizedState ? (gr(n), yt(n), Tm(n, i)) : (yt(n), n.flags &= -16777217) : (e.memoizedProps !== o && gr(n), yt(n), n.flags &= -16777217), null;
      case 27:
        Je(n), i = te.current;
        var d = n.type;
        if (e !== null && n.stateNode != null)
          e.memoizedProps !== o && gr(n);
        else {
          if (!o) {
            if (n.stateNode === null)
              throw Error(a(166));
            return yt(n), null;
          }
          e = fe.current, Fi(n) ? np(n) : (e = Tg(d, o, i), n.stateNode = e, gr(n));
        }
        return yt(n), null;
      case 5:
        if (Je(n), i = n.type, e !== null && n.stateNode != null)
          e.memoizedProps !== o && gr(n);
        else {
          if (!o) {
            if (n.stateNode === null)
              throw Error(a(166));
            return yt(n), null;
          }
          if (e = fe.current, Fi(n))
            np(n);
          else {
            switch (d = iu(
              te.current
            ), e) {
              case 1:
                e = d.createElementNS(
                  "http://www.w3.org/2000/svg",
                  i
                );
                break;
              case 2:
                e = d.createElementNS(
                  "http://www.w3.org/1998/Math/MathML",
                  i
                );
                break;
              default:
                switch (i) {
                  case "svg":
                    e = d.createElementNS(
                      "http://www.w3.org/2000/svg",
                      i
                    );
                    break;
                  case "math":
                    e = d.createElementNS(
                      "http://www.w3.org/1998/Math/MathML",
                      i
                    );
                    break;
                  case "script":
                    e = d.createElement("div"), e.innerHTML = "<script><\/script>", e = e.removeChild(e.firstChild);
                    break;
                  case "select":
                    e = typeof o.is == "string" ? d.createElement("select", { is: o.is }) : d.createElement("select"), o.multiple ? e.multiple = !0 : o.size && (e.size = o.size);
                    break;
                  default:
                    e = typeof o.is == "string" ? d.createElement(i, { is: o.is }) : d.createElement(i);
                }
            }
            e[Ft] = n, e[sn] = o;
            e: for (d = n.child; d !== null; ) {
              if (d.tag === 5 || d.tag === 6)
                e.appendChild(d.stateNode);
              else if (d.tag !== 4 && d.tag !== 27 && d.child !== null) {
                d.child.return = d, d = d.child;
                continue;
              }
              if (d === n) break e;
              for (; d.sibling === null; ) {
                if (d.return === null || d.return === n)
                  break e;
                d = d.return;
              }
              d.sibling.return = d.return, d = d.sibling;
            }
            n.stateNode = e;
            e: switch ($t(e, i, o), i) {
              case "button":
              case "input":
              case "select":
              case "textarea":
                e = !!o.autoFocus;
                break e;
              case "img":
                e = !0;
                break e;
              default:
                e = !1;
            }
            e && gr(n);
          }
        }
        return yt(n), n.flags &= -16777217, null;
      case 6:
        if (e && n.stateNode != null)
          e.memoizedProps !== o && gr(n);
        else {
          if (typeof o != "string" && n.stateNode === null)
            throw Error(a(166));
          if (e = te.current, Fi(n)) {
            if (e = n.stateNode, i = n.memoizedProps, o = null, d = tn, d !== null)
              switch (d.tag) {
                case 27:
                case 5:
                  o = d.memoizedProps;
              }
            e[Ft] = n, e = !!(e.nodeValue === i || o !== null && o.suppressHydrationWarning === !0 || bg(e.nodeValue, i)), e || ha(n);
          } else
            e = iu(e).createTextNode(
              o
            ), e[Ft] = n, n.stateNode = e;
        }
        return yt(n), null;
      case 13:
        if (o = n.memoizedState, e === null || e.memoizedState !== null && e.memoizedState.dehydrated !== null) {
          if (d = Fi(n), o !== null && o.dehydrated !== null) {
            if (e === null) {
              if (!d) throw Error(a(318));
              if (d = n.memoizedState, d = d !== null ? d.dehydrated : null, !d) throw Error(a(317));
              d[Ft] = n;
            } else
              Xi(), (n.flags & 128) === 0 && (n.memoizedState = null), n.flags |= 4;
            yt(n), d = !1;
          } else
            d = ap(), e !== null && e.memoizedState !== null && (e.memoizedState.hydrationErrors = d), d = !0;
          if (!d)
            return n.flags & 256 ? (pr(n), n) : (pr(n), null);
        }
        if (pr(n), (n.flags & 128) !== 0)
          return n.lanes = i, n;
        if (i = o !== null, e = e !== null && e.memoizedState !== null, i) {
          o = n.child, d = null, o.alternate !== null && o.alternate.memoizedState !== null && o.alternate.memoizedState.cachePool !== null && (d = o.alternate.memoizedState.cachePool.pool);
          var y = null;
          o.memoizedState !== null && o.memoizedState.cachePool !== null && (y = o.memoizedState.cachePool.pool), y !== d && (o.flags |= 2048);
        }
        return i !== e && i && (n.child.flags |= 8192), Vo(n, n.updateQueue), yt(n), null;
      case 4:
        return Ze(), e === null && Ed(n.stateNode.containerInfo), yt(n), null;
      case 10:
        return fr(n.type), yt(n), null;
      case 19:
        if (re(jt), d = n.memoizedState, d === null) return yt(n), null;
        if (o = (n.flags & 128) !== 0, y = d.rendering, y === null)
          if (o) ds(d, !1);
          else {
            if (Et !== 0 || e !== null && (e.flags & 128) !== 0)
              for (e = n.child; e !== null; ) {
                if (y = Ho(e), y !== null) {
                  for (n.flags |= 128, ds(d, !1), e = y.updateQueue, n.updateQueue = e, Vo(n, e), n.subtreeFlags = 0, e = i, i = n.child; i !== null; )
                    ep(i, e), i = i.sibling;
                  return ce(
                    jt,
                    jt.current & 1 | 2
                  ), n.child;
                }
                e = e.sibling;
              }
            d.tail !== null && vt() > Xo && (n.flags |= 128, o = !0, ds(d, !1), n.lanes = 4194304);
          }
        else {
          if (!o)
            if (e = Ho(y), e !== null) {
              if (n.flags |= 128, o = !0, e = e.updateQueue, n.updateQueue = e, Vo(n, e), ds(d, !0), d.tail === null && d.tailMode === "hidden" && !y.alternate && !tt)
                return yt(n), null;
            } else
              2 * vt() - d.renderingStartTime > Xo && i !== 536870912 && (n.flags |= 128, o = !0, ds(d, !1), n.lanes = 4194304);
          d.isBackwards ? (y.sibling = n.child, n.child = y) : (e = d.last, e !== null ? e.sibling = y : n.child = y, d.last = y);
        }
        return d.tail !== null ? (n = d.tail, d.rendering = n, d.tail = n.sibling, d.renderingStartTime = vt(), n.sibling = null, e = jt.current, ce(jt, o ? e & 1 | 2 : e & 1), n) : (yt(n), null);
      case 22:
      case 23:
        return pr(n), Ac(), o = n.memoizedState !== null, e !== null ? e.memoizedState !== null !== o && (n.flags |= 8192) : o && (n.flags |= 8192), o ? (i & 536870912) !== 0 && (n.flags & 128) === 0 && (yt(n), n.subtreeFlags & 6 && (n.flags |= 8192)) : yt(n), i = n.updateQueue, i !== null && Vo(n, i.retryQueue), i = null, e !== null && e.memoizedState !== null && e.memoizedState.cachePool !== null && (i = e.memoizedState.cachePool.pool), o = null, n.memoizedState !== null && n.memoizedState.cachePool !== null && (o = n.memoizedState.cachePool.pool), o !== i && (n.flags |= 2048), e !== null && re(ga), null;
      case 24:
        return i = null, e !== null && (i = e.memoizedState.cache), n.memoizedState.cache !== i && (n.flags |= 2048), fr(Rt), yt(n), null;
      case 25:
        return null;
      case 30:
        return null;
    }
    throw Error(a(156, n.tag));
  }
  function Y_(e, n) {
    switch (dc(n), n.tag) {
      case 1:
        return e = n.flags, e & 65536 ? (n.flags = e & -65537 | 128, n) : null;
      case 3:
        return fr(Rt), Ze(), e = n.flags, (e & 65536) !== 0 && (e & 128) === 0 ? (n.flags = e & -65537 | 128, n) : null;
      case 26:
      case 27:
      case 5:
        return Je(n), null;
      case 13:
        if (pr(n), e = n.memoizedState, e !== null && e.dehydrated !== null) {
          if (n.alternate === null)
            throw Error(a(340));
          Xi();
        }
        return e = n.flags, e & 65536 ? (n.flags = e & -65537 | 128, n) : null;
      case 19:
        return re(jt), null;
      case 4:
        return Ze(), null;
      case 10:
        return fr(n.type), null;
      case 22:
      case 23:
        return pr(n), Ac(), e !== null && re(ga), e = n.flags, e & 65536 ? (n.flags = e & -65537 | 128, n) : null;
      case 24:
        return fr(Rt), null;
      case 25:
        return null;
      default:
        return null;
    }
  }
  function km(e, n) {
    switch (dc(n), n.tag) {
      case 3:
        fr(Rt), Ze();
        break;
      case 26:
      case 27:
      case 5:
        Je(n);
        break;
      case 4:
        Ze();
        break;
      case 13:
        pr(n);
        break;
      case 19:
        re(jt);
        break;
      case 10:
        fr(n.type);
        break;
      case 22:
      case 23:
        pr(n), Ac(), e !== null && re(ga);
        break;
      case 24:
        fr(Rt);
    }
  }
  function fs(e, n) {
    try {
      var i = n.updateQueue, o = i !== null ? i.lastEffect : null;
      if (o !== null) {
        var d = o.next;
        i = d;
        do {
          if ((i.tag & e) === e) {
            o = void 0;
            var y = i.create, x = i.inst;
            o = y(), x.destroy = o;
          }
          i = i.next;
        } while (i !== d);
      }
    } catch (L) {
      lt(n, n.return, L);
    }
  }
  function Pr(e, n, i) {
    try {
      var o = n.updateQueue, d = o !== null ? o.lastEffect : null;
      if (d !== null) {
        var y = d.next;
        o = y;
        do {
          if ((o.tag & e) === e) {
            var x = o.inst, L = x.destroy;
            if (L !== void 0) {
              x.destroy = void 0, d = n;
              var U = i, J = L;
              try {
                J();
              } catch (ie) {
                lt(
                  d,
                  U,
                  ie
                );
              }
            }
          }
          o = o.next;
        } while (o !== y);
      }
    } catch (ie) {
      lt(n, n.return, ie);
    }
  }
  function xm(e) {
    var n = e.updateQueue;
    if (n !== null) {
      var i = e.stateNode;
      try {
        mp(n, i);
      } catch (o) {
        lt(e, e.return, o);
      }
    }
  }
  function Nm(e, n, i) {
    i.props = ya(
      e.type,
      e.memoizedProps
    ), i.state = e.memoizedState;
    try {
      i.componentWillUnmount();
    } catch (o) {
      lt(e, n, o);
    }
  }
  function hs(e, n) {
    try {
      var i = e.ref;
      if (i !== null) {
        switch (e.tag) {
          case 26:
          case 27:
          case 5:
            var o = e.stateNode;
            break;
          case 30:
            o = e.stateNode;
            break;
          default:
            o = e.stateNode;
        }
        typeof i == "function" ? e.refCleanup = i(o) : i.current = o;
      }
    } catch (d) {
      lt(e, n, d);
    }
  }
  function Jn(e, n) {
    var i = e.ref, o = e.refCleanup;
    if (i !== null)
      if (typeof o == "function")
        try {
          o();
        } catch (d) {
          lt(e, n, d);
        } finally {
          e.refCleanup = null, e = e.alternate, e != null && (e.refCleanup = null);
        }
      else if (typeof i == "function")
        try {
          i(null);
        } catch (d) {
          lt(e, n, d);
        }
      else i.current = null;
  }
  function Om(e) {
    var n = e.type, i = e.memoizedProps, o = e.stateNode;
    try {
      e: switch (n) {
        case "button":
        case "input":
        case "select":
        case "textarea":
          i.autoFocus && o.focus();
          break e;
        case "img":
          i.src ? o.src = i.src : i.srcSet && (o.srcset = i.srcSet);
      }
    } catch (d) {
      lt(e, e.return, d);
    }
  }
  function Wc(e, n, i) {
    try {
      var o = e.stateNode;
      p1(o, e.type, i, n), o[sn] = n;
    } catch (d) {
      lt(e, e.return, d);
    }
  }
  function Mm(e) {
    return e.tag === 5 || e.tag === 3 || e.tag === 26 || e.tag === 27 && Zr(e.type) || e.tag === 4;
  }
  function ed(e) {
    e: for (; ; ) {
      for (; e.sibling === null; ) {
        if (e.return === null || Mm(e.return)) return null;
        e = e.return;
      }
      for (e.sibling.return = e.return, e = e.sibling; e.tag !== 5 && e.tag !== 6 && e.tag !== 18; ) {
        if (e.tag === 27 && Zr(e.type) || e.flags & 2 || e.child === null || e.tag === 4) continue e;
        e.child.return = e, e = e.child;
      }
      if (!(e.flags & 2)) return e.stateNode;
    }
  }
  function td(e, n, i) {
    var o = e.tag;
    if (o === 5 || o === 6)
      e = e.stateNode, n ? (i.nodeType === 9 ? i.body : i.nodeName === "HTML" ? i.ownerDocument.body : i).insertBefore(e, n) : (n = i.nodeType === 9 ? i.body : i.nodeName === "HTML" ? i.ownerDocument.body : i, n.appendChild(e), i = i._reactRootContainer, i != null || n.onclick !== null || (n.onclick = au));
    else if (o !== 4 && (o === 27 && Zr(e.type) && (i = e.stateNode, n = null), e = e.child, e !== null))
      for (td(e, n, i), e = e.sibling; e !== null; )
        td(e, n, i), e = e.sibling;
  }
  function Yo(e, n, i) {
    var o = e.tag;
    if (o === 5 || o === 6)
      e = e.stateNode, n ? i.insertBefore(e, n) : i.appendChild(e);
    else if (o !== 4 && (o === 27 && Zr(e.type) && (i = e.stateNode), e = e.child, e !== null))
      for (Yo(e, n, i), e = e.sibling; e !== null; )
        Yo(e, n, i), e = e.sibling;
  }
  function Rm(e) {
    var n = e.stateNode, i = e.memoizedProps;
    try {
      for (var o = e.type, d = n.attributes; d.length; )
        n.removeAttributeNode(d[0]);
      $t(n, o, i), n[Ft] = e, n[sn] = i;
    } catch (y) {
      lt(e, e.return, y);
    }
  }
  var vr = !1, Tt = !1, nd = !1, jm = typeof WeakSet == "function" ? WeakSet : Set, It = null;
  function F_(e, n) {
    if (e = e.containerInfo, Td = du, e = Zh(e), ec(e)) {
      if ("selectionStart" in e)
        var i = {
          start: e.selectionStart,
          end: e.selectionEnd
        };
      else
        e: {
          i = (i = e.ownerDocument) && i.defaultView || window;
          var o = i.getSelection && i.getSelection();
          if (o && o.rangeCount !== 0) {
            i = o.anchorNode;
            var d = o.anchorOffset, y = o.focusNode;
            o = o.focusOffset;
            try {
              i.nodeType, y.nodeType;
            } catch {
              i = null;
              break e;
            }
            var x = 0, L = -1, U = -1, J = 0, ie = 0, le = e, W = null;
            t: for (; ; ) {
              for (var ee; le !== i || d !== 0 && le.nodeType !== 3 || (L = x + d), le !== y || o !== 0 && le.nodeType !== 3 || (U = x + o), le.nodeType === 3 && (x += le.nodeValue.length), (ee = le.firstChild) !== null; )
                W = le, le = ee;
              for (; ; ) {
                if (le === e) break t;
                if (W === i && ++J === d && (L = x), W === y && ++ie === o && (U = x), (ee = le.nextSibling) !== null) break;
                le = W, W = le.parentNode;
              }
              le = ee;
            }
            i = L === -1 || U === -1 ? null : { start: L, end: U };
          } else i = null;
        }
      i = i || { start: 0, end: 0 };
    } else i = null;
    for (kd = { focusedElem: e, selectionRange: i }, du = !1, It = n; It !== null; )
      if (n = It, e = n.child, (n.subtreeFlags & 1024) !== 0 && e !== null)
        e.return = n, It = e;
      else
        for (; It !== null; ) {
          switch (n = It, y = n.alternate, e = n.flags, n.tag) {
            case 0:
              break;
            case 11:
            case 15:
              break;
            case 1:
              if ((e & 1024) !== 0 && y !== null) {
                e = void 0, i = n, d = y.memoizedProps, y = y.memoizedState, o = i.stateNode;
                try {
                  var Me = ya(
                    i.type,
                    d,
                    i.elementType === i.type
                  );
                  e = o.getSnapshotBeforeUpdate(
                    Me,
                    y
                  ), o.__reactInternalSnapshotBeforeUpdate = e;
                } catch (ke) {
                  lt(
                    i,
                    i.return,
                    ke
                  );
                }
              }
              break;
            case 3:
              if ((e & 1024) !== 0) {
                if (e = n.stateNode.containerInfo, i = e.nodeType, i === 9)
                  Od(e);
                else if (i === 1)
                  switch (e.nodeName) {
                    case "HEAD":
                    case "HTML":
                    case "BODY":
                      Od(e);
                      break;
                    default:
                      e.textContent = "";
                  }
              }
              break;
            case 5:
            case 26:
            case 27:
            case 6:
            case 4:
            case 17:
              break;
            default:
              if ((e & 1024) !== 0) throw Error(a(163));
          }
          if (e = n.sibling, e !== null) {
            e.return = n.return, It = e;
            break;
          }
          It = n.return;
        }
  }
  function Dm(e, n, i) {
    var o = i.flags;
    switch (i.tag) {
      case 0:
      case 11:
      case 15:
        zr(e, i), o & 4 && fs(5, i);
        break;
      case 1:
        if (zr(e, i), o & 4)
          if (e = i.stateNode, n === null)
            try {
              e.componentDidMount();
            } catch (x) {
              lt(i, i.return, x);
            }
          else {
            var d = ya(
              i.type,
              n.memoizedProps
            );
            n = n.memoizedState;
            try {
              e.componentDidUpdate(
                d,
                n,
                e.__reactInternalSnapshotBeforeUpdate
              );
            } catch (x) {
              lt(
                i,
                i.return,
                x
              );
            }
          }
        o & 64 && xm(i), o & 512 && hs(i, i.return);
        break;
      case 3:
        if (zr(e, i), o & 64 && (e = i.updateQueue, e !== null)) {
          if (n = null, i.child !== null)
            switch (i.child.tag) {
              case 27:
              case 5:
                n = i.child.stateNode;
                break;
              case 1:
                n = i.child.stateNode;
            }
          try {
            mp(e, n);
          } catch (x) {
            lt(i, i.return, x);
          }
        }
        break;
      case 27:
        n === null && o & 4 && Rm(i);
      case 26:
      case 5:
        zr(e, i), n === null && o & 4 && Om(i), o & 512 && hs(i, i.return);
        break;
      case 12:
        zr(e, i);
        break;
      case 13:
        zr(e, i), o & 4 && zm(e, i), o & 64 && (e = i.memoizedState, e !== null && (e = e.dehydrated, e !== null && (i = r1.bind(
          null,
          i
        ), S1(e, i))));
        break;
      case 22:
        if (o = i.memoizedState !== null || vr, !o) {
          n = n !== null && n.memoizedState !== null || Tt, d = vr;
          var y = Tt;
          vr = o, (Tt = n) && !y ? Ir(
            e,
            i,
            (i.subtreeFlags & 8772) !== 0
          ) : zr(e, i), vr = d, Tt = y;
        }
        break;
      case 30:
        break;
      default:
        zr(e, i);
    }
  }
  function Lm(e) {
    var n = e.alternate;
    n !== null && (e.alternate = null, Lm(n)), e.child = null, e.deletions = null, e.sibling = null, e.tag === 5 && (n = e.stateNode, n !== null && Ll(n)), e.stateNode = null, e.return = null, e.dependencies = null, e.memoizedProps = null, e.memoizedState = null, e.pendingProps = null, e.stateNode = null, e.updateQueue = null;
  }
  var ht = null, ln = !1;
  function yr(e, n, i) {
    for (i = i.child; i !== null; )
      Pm(e, n, i), i = i.sibling;
  }
  function Pm(e, n, i) {
    if (Ee && typeof Ee.onCommitFiberUnmount == "function")
      try {
        Ee.onCommitFiberUnmount(ve, i);
      } catch {
      }
    switch (i.tag) {
      case 26:
        Tt || Jn(i, n), yr(
          e,
          n,
          i
        ), i.memoizedState ? i.memoizedState.count-- : i.stateNode && (i = i.stateNode, i.parentNode.removeChild(i));
        break;
      case 27:
        Tt || Jn(i, n);
        var o = ht, d = ln;
        Zr(i.type) && (ht = i.stateNode, ln = !1), yr(
          e,
          n,
          i
        ), ws(i.stateNode), ht = o, ln = d;
        break;
      case 5:
        Tt || Jn(i, n);
      case 6:
        if (o = ht, d = ln, ht = null, yr(
          e,
          n,
          i
        ), ht = o, ln = d, ht !== null)
          if (ln)
            try {
              (ht.nodeType === 9 ? ht.body : ht.nodeName === "HTML" ? ht.ownerDocument.body : ht).removeChild(i.stateNode);
            } catch (y) {
              lt(
                i,
                n,
                y
              );
            }
          else
            try {
              ht.removeChild(i.stateNode);
            } catch (y) {
              lt(
                i,
                n,
                y
              );
            }
        break;
      case 18:
        ht !== null && (ln ? (e = ht, Cg(
          e.nodeType === 9 ? e.body : e.nodeName === "HTML" ? e.ownerDocument.body : e,
          i.stateNode
        ), Os(e)) : Cg(ht, i.stateNode));
        break;
      case 4:
        o = ht, d = ln, ht = i.stateNode.containerInfo, ln = !0, yr(
          e,
          n,
          i
        ), ht = o, ln = d;
        break;
      case 0:
      case 11:
      case 14:
      case 15:
        Tt || Pr(2, i, n), Tt || Pr(4, i, n), yr(
          e,
          n,
          i
        );
        break;
      case 1:
        Tt || (Jn(i, n), o = i.stateNode, typeof o.componentWillUnmount == "function" && Nm(
          i,
          n,
          o
        )), yr(
          e,
          n,
          i
        );
        break;
      case 21:
        yr(
          e,
          n,
          i
        );
        break;
      case 22:
        Tt = (o = Tt) || i.memoizedState !== null, yr(
          e,
          n,
          i
        ), Tt = o;
        break;
      default:
        yr(
          e,
          n,
          i
        );
    }
  }
  function zm(e, n) {
    if (n.memoizedState === null && (e = n.alternate, e !== null && (e = e.memoizedState, e !== null && (e = e.dehydrated, e !== null))))
      try {
        Os(e);
      } catch (i) {
        lt(n, n.return, i);
      }
  }
  function X_(e) {
    switch (e.tag) {
      case 13:
      case 19:
        var n = e.stateNode;
        return n === null && (n = e.stateNode = new jm()), n;
      case 22:
        return e = e.stateNode, n = e._retryCache, n === null && (n = e._retryCache = new jm()), n;
      default:
        throw Error(a(435, e.tag));
    }
  }
  function rd(e, n) {
    var i = X_(e);
    n.forEach(function(o) {
      var d = a1.bind(null, e, o);
      i.has(o) || (i.add(o), o.then(d, d));
    });
  }
  function _n(e, n) {
    var i = n.deletions;
    if (i !== null)
      for (var o = 0; o < i.length; o++) {
        var d = i[o], y = e, x = n, L = x;
        e: for (; L !== null; ) {
          switch (L.tag) {
            case 27:
              if (Zr(L.type)) {
                ht = L.stateNode, ln = !1;
                break e;
              }
              break;
            case 5:
              ht = L.stateNode, ln = !1;
              break e;
            case 3:
            case 4:
              ht = L.stateNode.containerInfo, ln = !0;
              break e;
          }
          L = L.return;
        }
        if (ht === null) throw Error(a(160));
        Pm(y, x, d), ht = null, ln = !1, y = d.alternate, y !== null && (y.return = null), d.return = null;
      }
    if (n.subtreeFlags & 13878)
      for (n = n.child; n !== null; )
        Im(n, e), n = n.sibling;
  }
  var Zn = null;
  function Im(e, n) {
    var i = e.alternate, o = e.flags;
    switch (e.tag) {
      case 0:
      case 11:
      case 14:
      case 15:
        _n(n, e), Sn(e), o & 4 && (Pr(3, e, e.return), fs(3, e), Pr(5, e, e.return));
        break;
      case 1:
        _n(n, e), Sn(e), o & 512 && (Tt || i === null || Jn(i, i.return)), o & 64 && vr && (e = e.updateQueue, e !== null && (o = e.callbacks, o !== null && (i = e.shared.hiddenCallbacks, e.shared.hiddenCallbacks = i === null ? o : i.concat(o))));
        break;
      case 26:
        var d = Zn;
        if (_n(n, e), Sn(e), o & 512 && (Tt || i === null || Jn(i, i.return)), o & 4) {
          var y = i !== null ? i.memoizedState : null;
          if (o = e.memoizedState, i === null)
            if (o === null)
              if (e.stateNode === null) {
                e: {
                  o = e.type, i = e.memoizedProps, d = d.ownerDocument || d;
                  t: switch (o) {
                    case "title":
                      y = d.getElementsByTagName("title")[0], (!y || y[zi] || y[Ft] || y.namespaceURI === "http://www.w3.org/2000/svg" || y.hasAttribute("itemprop")) && (y = d.createElement(o), d.head.insertBefore(
                        y,
                        d.querySelector("head > title")
                      )), $t(y, o, i), y[Ft] = e, Pt(y), o = y;
                      break e;
                    case "link":
                      var x = Rg(
                        "link",
                        "href",
                        d
                      ).get(o + (i.href || ""));
                      if (x) {
                        for (var L = 0; L < x.length; L++)
                          if (y = x[L], y.getAttribute("href") === (i.href == null || i.href === "" ? null : i.href) && y.getAttribute("rel") === (i.rel == null ? null : i.rel) && y.getAttribute("title") === (i.title == null ? null : i.title) && y.getAttribute("crossorigin") === (i.crossOrigin == null ? null : i.crossOrigin)) {
                            x.splice(L, 1);
                            break t;
                          }
                      }
                      y = d.createElement(o), $t(y, o, i), d.head.appendChild(y);
                      break;
                    case "meta":
                      if (x = Rg(
                        "meta",
                        "content",
                        d
                      ).get(o + (i.content || ""))) {
                        for (L = 0; L < x.length; L++)
                          if (y = x[L], y.getAttribute("content") === (i.content == null ? null : "" + i.content) && y.getAttribute("name") === (i.name == null ? null : i.name) && y.getAttribute("property") === (i.property == null ? null : i.property) && y.getAttribute("http-equiv") === (i.httpEquiv == null ? null : i.httpEquiv) && y.getAttribute("charset") === (i.charSet == null ? null : i.charSet)) {
                            x.splice(L, 1);
                            break t;
                          }
                      }
                      y = d.createElement(o), $t(y, o, i), d.head.appendChild(y);
                      break;
                    default:
                      throw Error(a(468, o));
                  }
                  y[Ft] = e, Pt(y), o = y;
                }
                e.stateNode = o;
              } else
                jg(
                  d,
                  e.type,
                  e.stateNode
                );
            else
              e.stateNode = Mg(
                d,
                o,
                e.memoizedProps
              );
          else
            y !== o ? (y === null ? i.stateNode !== null && (i = i.stateNode, i.parentNode.removeChild(i)) : y.count--, o === null ? jg(
              d,
              e.type,
              e.stateNode
            ) : Mg(
              d,
              o,
              e.memoizedProps
            )) : o === null && e.stateNode !== null && Wc(
              e,
              e.memoizedProps,
              i.memoizedProps
            );
        }
        break;
      case 27:
        _n(n, e), Sn(e), o & 512 && (Tt || i === null || Jn(i, i.return)), i !== null && o & 4 && Wc(
          e,
          e.memoizedProps,
          i.memoizedProps
        );
        break;
      case 5:
        if (_n(n, e), Sn(e), o & 512 && (Tt || i === null || Jn(i, i.return)), e.flags & 32) {
          d = e.stateNode;
          try {
            Ga(d, "");
          } catch (ee) {
            lt(e, e.return, ee);
          }
        }
        o & 4 && e.stateNode != null && (d = e.memoizedProps, Wc(
          e,
          d,
          i !== null ? i.memoizedProps : d
        )), o & 1024 && (nd = !0);
        break;
      case 6:
        if (_n(n, e), Sn(e), o & 4) {
          if (e.stateNode === null)
            throw Error(a(162));
          o = e.memoizedProps, i = e.stateNode;
          try {
            i.nodeValue = o;
          } catch (ee) {
            lt(e, e.return, ee);
          }
        }
        break;
      case 3:
        if (uu = null, d = Zn, Zn = su(n.containerInfo), _n(n, e), Zn = d, Sn(e), o & 4 && i !== null && i.memoizedState.isDehydrated)
          try {
            Os(n.containerInfo);
          } catch (ee) {
            lt(e, e.return, ee);
          }
        nd && (nd = !1, Bm(e));
        break;
      case 4:
        o = Zn, Zn = su(
          e.stateNode.containerInfo
        ), _n(n, e), Sn(e), Zn = o;
        break;
      case 12:
        _n(n, e), Sn(e);
        break;
      case 13:
        _n(n, e), Sn(e), e.child.flags & 8192 && e.memoizedState !== null != (i !== null && i.memoizedState !== null) && (ld = vt()), o & 4 && (o = e.updateQueue, o !== null && (e.updateQueue = null, rd(e, o)));
        break;
      case 22:
        d = e.memoizedState !== null;
        var U = i !== null && i.memoizedState !== null, J = vr, ie = Tt;
        if (vr = J || d, Tt = ie || U, _n(n, e), Tt = ie, vr = J, Sn(e), o & 8192)
          e: for (n = e.stateNode, n._visibility = d ? n._visibility & -2 : n._visibility | 1, d && (i === null || U || vr || Tt || ba(e)), i = null, n = e; ; ) {
            if (n.tag === 5 || n.tag === 26) {
              if (i === null) {
                U = i = n;
                try {
                  if (y = U.stateNode, d)
                    x = y.style, typeof x.setProperty == "function" ? x.setProperty("display", "none", "important") : x.display = "none";
                  else {
                    L = U.stateNode;
                    var le = U.memoizedProps.style, W = le != null && le.hasOwnProperty("display") ? le.display : null;
                    L.style.display = W == null || typeof W == "boolean" ? "" : ("" + W).trim();
                  }
                } catch (ee) {
                  lt(U, U.return, ee);
                }
              }
            } else if (n.tag === 6) {
              if (i === null) {
                U = n;
                try {
                  U.stateNode.nodeValue = d ? "" : U.memoizedProps;
                } catch (ee) {
                  lt(U, U.return, ee);
                }
              }
            } else if ((n.tag !== 22 && n.tag !== 23 || n.memoizedState === null || n === e) && n.child !== null) {
              n.child.return = n, n = n.child;
              continue;
            }
            if (n === e) break e;
            for (; n.sibling === null; ) {
              if (n.return === null || n.return === e) break e;
              i === n && (i = null), n = n.return;
            }
            i === n && (i = null), n.sibling.return = n.return, n = n.sibling;
          }
        o & 4 && (o = e.updateQueue, o !== null && (i = o.retryQueue, i !== null && (o.retryQueue = null, rd(e, i))));
        break;
      case 19:
        _n(n, e), Sn(e), o & 4 && (o = e.updateQueue, o !== null && (e.updateQueue = null, rd(e, o)));
        break;
      case 30:
        break;
      case 21:
        break;
      default:
        _n(n, e), Sn(e);
    }
  }
  function Sn(e) {
    var n = e.flags;
    if (n & 2) {
      try {
        for (var i, o = e.return; o !== null; ) {
          if (Mm(o)) {
            i = o;
            break;
          }
          o = o.return;
        }
        if (i == null) throw Error(a(160));
        switch (i.tag) {
          case 27:
            var d = i.stateNode, y = ed(e);
            Yo(e, y, d);
            break;
          case 5:
            var x = i.stateNode;
            i.flags & 32 && (Ga(x, ""), i.flags &= -33);
            var L = ed(e);
            Yo(e, L, x);
            break;
          case 3:
          case 4:
            var U = i.stateNode.containerInfo, J = ed(e);
            td(
              e,
              J,
              U
            );
            break;
          default:
            throw Error(a(161));
        }
      } catch (ie) {
        lt(e, e.return, ie);
      }
      e.flags &= -3;
    }
    n & 4096 && (e.flags &= -4097);
  }
  function Bm(e) {
    if (e.subtreeFlags & 1024)
      for (e = e.child; e !== null; ) {
        var n = e;
        Bm(n), n.tag === 5 && n.flags & 1024 && n.stateNode.reset(), e = e.sibling;
      }
  }
  function zr(e, n) {
    if (n.subtreeFlags & 8772)
      for (n = n.child; n !== null; )
        Dm(e, n.alternate, n), n = n.sibling;
  }
  function ba(e) {
    for (e = e.child; e !== null; ) {
      var n = e;
      switch (n.tag) {
        case 0:
        case 11:
        case 14:
        case 15:
          Pr(4, n, n.return), ba(n);
          break;
        case 1:
          Jn(n, n.return);
          var i = n.stateNode;
          typeof i.componentWillUnmount == "function" && Nm(
            n,
            n.return,
            i
          ), ba(n);
          break;
        case 27:
          ws(n.stateNode);
        case 26:
        case 5:
          Jn(n, n.return), ba(n);
          break;
        case 22:
          n.memoizedState === null && ba(n);
          break;
        case 30:
          ba(n);
          break;
        default:
          ba(n);
      }
      e = e.sibling;
    }
  }
  function Ir(e, n, i) {
    for (i = i && (n.subtreeFlags & 8772) !== 0, n = n.child; n !== null; ) {
      var o = n.alternate, d = e, y = n, x = y.flags;
      switch (y.tag) {
        case 0:
        case 11:
        case 15:
          Ir(
            d,
            y,
            i
          ), fs(4, y);
          break;
        case 1:
          if (Ir(
            d,
            y,
            i
          ), o = y, d = o.stateNode, typeof d.componentDidMount == "function")
            try {
              d.componentDidMount();
            } catch (J) {
              lt(o, o.return, J);
            }
          if (o = y, d = o.updateQueue, d !== null) {
            var L = o.stateNode;
            try {
              var U = d.shared.hiddenCallbacks;
              if (U !== null)
                for (d.shared.hiddenCallbacks = null, d = 0; d < U.length; d++)
                  pp(U[d], L);
            } catch (J) {
              lt(o, o.return, J);
            }
          }
          i && x & 64 && xm(y), hs(y, y.return);
          break;
        case 27:
          Rm(y);
        case 26:
        case 5:
          Ir(
            d,
            y,
            i
          ), i && o === null && x & 4 && Om(y), hs(y, y.return);
          break;
        case 12:
          Ir(
            d,
            y,
            i
          );
          break;
        case 13:
          Ir(
            d,
            y,
            i
          ), i && x & 4 && zm(d, y);
          break;
        case 22:
          y.memoizedState === null && Ir(
            d,
            y,
            i
          ), hs(y, y.return);
          break;
        case 30:
          break;
        default:
          Ir(
            d,
            y,
            i
          );
      }
      n = n.sibling;
    }
  }
  function ad(e, n) {
    var i = null;
    e !== null && e.memoizedState !== null && e.memoizedState.cachePool !== null && (i = e.memoizedState.cachePool.pool), e = null, n.memoizedState !== null && n.memoizedState.cachePool !== null && (e = n.memoizedState.cachePool.pool), e !== i && (e != null && e.refCount++, i != null && Ji(i));
  }
  function id(e, n) {
    e = null, n.alternate !== null && (e = n.alternate.memoizedState.cache), n = n.memoizedState.cache, n !== e && (n.refCount++, e != null && Ji(e));
  }
  function Wn(e, n, i, o) {
    if (n.subtreeFlags & 10256)
      for (n = n.child; n !== null; )
        Um(
          e,
          n,
          i,
          o
        ), n = n.sibling;
  }
  function Um(e, n, i, o) {
    var d = n.flags;
    switch (n.tag) {
      case 0:
      case 11:
      case 15:
        Wn(
          e,
          n,
          i,
          o
        ), d & 2048 && fs(9, n);
        break;
      case 1:
        Wn(
          e,
          n,
          i,
          o
        );
        break;
      case 3:
        Wn(
          e,
          n,
          i,
          o
        ), d & 2048 && (e = null, n.alternate !== null && (e = n.alternate.memoizedState.cache), n = n.memoizedState.cache, n !== e && (n.refCount++, e != null && Ji(e)));
        break;
      case 12:
        if (d & 2048) {
          Wn(
            e,
            n,
            i,
            o
          ), e = n.stateNode;
          try {
            var y = n.memoizedProps, x = y.id, L = y.onPostCommit;
            typeof L == "function" && L(
              x,
              n.alternate === null ? "mount" : "update",
              e.passiveEffectDuration,
              -0
            );
          } catch (U) {
            lt(n, n.return, U);
          }
        } else
          Wn(
            e,
            n,
            i,
            o
          );
        break;
      case 13:
        Wn(
          e,
          n,
          i,
          o
        );
        break;
      case 23:
        break;
      case 22:
        y = n.stateNode, x = n.alternate, n.memoizedState !== null ? y._visibility & 2 ? Wn(
          e,
          n,
          i,
          o
        ) : ps(e, n) : y._visibility & 2 ? Wn(
          e,
          n,
          i,
          o
        ) : (y._visibility |= 2, ui(
          e,
          n,
          i,
          o,
          (n.subtreeFlags & 10256) !== 0
        )), d & 2048 && ad(x, n);
        break;
      case 24:
        Wn(
          e,
          n,
          i,
          o
        ), d & 2048 && id(n.alternate, n);
        break;
      default:
        Wn(
          e,
          n,
          i,
          o
        );
    }
  }
  function ui(e, n, i, o, d) {
    for (d = d && (n.subtreeFlags & 10256) !== 0, n = n.child; n !== null; ) {
      var y = e, x = n, L = i, U = o, J = x.flags;
      switch (x.tag) {
        case 0:
        case 11:
        case 15:
          ui(
            y,
            x,
            L,
            U,
            d
          ), fs(8, x);
          break;
        case 23:
          break;
        case 22:
          var ie = x.stateNode;
          x.memoizedState !== null ? ie._visibility & 2 ? ui(
            y,
            x,
            L,
            U,
            d
          ) : ps(
            y,
            x
          ) : (ie._visibility |= 2, ui(
            y,
            x,
            L,
            U,
            d
          )), d && J & 2048 && ad(
            x.alternate,
            x
          );
          break;
        case 24:
          ui(
            y,
            x,
            L,
            U,
            d
          ), d && J & 2048 && id(x.alternate, x);
          break;
        default:
          ui(
            y,
            x,
            L,
            U,
            d
          );
      }
      n = n.sibling;
    }
  }
  function ps(e, n) {
    if (n.subtreeFlags & 10256)
      for (n = n.child; n !== null; ) {
        var i = e, o = n, d = o.flags;
        switch (o.tag) {
          case 22:
            ps(i, o), d & 2048 && ad(
              o.alternate,
              o
            );
            break;
          case 24:
            ps(i, o), d & 2048 && id(o.alternate, o);
            break;
          default:
            ps(i, o);
        }
        n = n.sibling;
      }
  }
  var ms = 8192;
  function li(e) {
    if (e.subtreeFlags & ms)
      for (e = e.child; e !== null; )
        Hm(e), e = e.sibling;
  }
  function Hm(e) {
    switch (e.tag) {
      case 26:
        li(e), e.flags & ms && e.memoizedState !== null && D1(
          Zn,
          e.memoizedState,
          e.memoizedProps
        );
        break;
      case 5:
        li(e);
        break;
      case 3:
      case 4:
        var n = Zn;
        Zn = su(e.stateNode.containerInfo), li(e), Zn = n;
        break;
      case 22:
        e.memoizedState === null && (n = e.alternate, n !== null && n.memoizedState !== null ? (n = ms, ms = 16777216, li(e), ms = n) : li(e));
        break;
      default:
        li(e);
    }
  }
  function qm(e) {
    var n = e.alternate;
    if (n !== null && (e = n.child, e !== null)) {
      n.child = null;
      do
        n = e.sibling, e.sibling = null, e = n;
      while (e !== null);
    }
  }
  function gs(e) {
    var n = e.deletions;
    if ((e.flags & 16) !== 0) {
      if (n !== null)
        for (var i = 0; i < n.length; i++) {
          var o = n[i];
          It = o, Zm(
            o,
            e
          );
        }
      qm(e);
    }
    if (e.subtreeFlags & 10256)
      for (e = e.child; e !== null; )
        Gm(e), e = e.sibling;
  }
  function Gm(e) {
    switch (e.tag) {
      case 0:
      case 11:
      case 15:
        gs(e), e.flags & 2048 && Pr(9, e, e.return);
        break;
      case 3:
        gs(e);
        break;
      case 12:
        gs(e);
        break;
      case 22:
        var n = e.stateNode;
        e.memoizedState !== null && n._visibility & 2 && (e.return === null || e.return.tag !== 13) ? (n._visibility &= -3, Fo(e)) : gs(e);
        break;
      default:
        gs(e);
    }
  }
  function Fo(e) {
    var n = e.deletions;
    if ((e.flags & 16) !== 0) {
      if (n !== null)
        for (var i = 0; i < n.length; i++) {
          var o = n[i];
          It = o, Zm(
            o,
            e
          );
        }
      qm(e);
    }
    for (e = e.child; e !== null; ) {
      switch (n = e, n.tag) {
        case 0:
        case 11:
        case 15:
          Pr(8, n, n.return), Fo(n);
          break;
        case 22:
          i = n.stateNode, i._visibility & 2 && (i._visibility &= -3, Fo(n));
          break;
        default:
          Fo(n);
      }
      e = e.sibling;
    }
  }
  function Zm(e, n) {
    for (; It !== null; ) {
      var i = It;
      switch (i.tag) {
        case 0:
        case 11:
        case 15:
          Pr(8, i, n);
          break;
        case 23:
        case 22:
          if (i.memoizedState !== null && i.memoizedState.cachePool !== null) {
            var o = i.memoizedState.cachePool.pool;
            o != null && o.refCount++;
          }
          break;
        case 24:
          Ji(i.memoizedState.cache);
      }
      if (o = i.child, o !== null) o.return = i, It = o;
      else
        e: for (i = e; It !== null; ) {
          o = It;
          var d = o.sibling, y = o.return;
          if (Lm(o), o === i) {
            It = null;
            break e;
          }
          if (d !== null) {
            d.return = y, It = d;
            break e;
          }
          It = y;
        }
    }
  }
  var K_ = {
    getCacheForType: function(e) {
      var n = Xt(Rt), i = n.data.get(e);
      return i === void 0 && (i = e(), n.data.set(e, i)), i;
    }
  }, Q_ = typeof WeakMap == "function" ? WeakMap : Map, nt = 0, dt = null, qe = null, Qe = 0, rt = 0, wn = null, Br = !1, ci = !1, sd = !1, br = 0, Et = 0, Ur = 0, _a = 0, od = 0, In = 0, di = 0, vs = null, cn = null, ud = !1, ld = 0, Xo = 1 / 0, Ko = null, Hr = null, Zt = 0, qr = null, fi = null, hi = 0, cd = 0, dd = null, $m = null, ys = 0, fd = null;
  function En() {
    if ((nt & 2) !== 0 && Qe !== 0)
      return Qe & -Qe;
    if (R.T !== null) {
      var e = ei;
      return e !== 0 ? e : bd();
    }
    return oh();
  }
  function Vm() {
    In === 0 && (In = (Qe & 536870912) === 0 || tt ? On() : 536870912);
    var e = zn.current;
    return e !== null && (e.flags |= 32), In;
  }
  function Cn(e, n, i) {
    (e === dt && (rt === 2 || rt === 9) || e.cancelPendingCommit !== null) && (pi(e, 0), Gr(
      e,
      Qe,
      In,
      !1
    )), Pi(e, i), ((nt & 2) === 0 || e !== dt) && (e === dt && ((nt & 2) === 0 && (_a |= i), Et === 4 && Gr(
      e,
      Qe,
      In,
      !1
    )), er(e));
  }
  function Ym(e, n, i) {
    if ((nt & 6) !== 0) throw Error(a(327));
    var o = !i && (n & 124) === 0 && (n & e.expiredLanes) === 0 || ct(e, n), d = o ? e1(e, n) : md(e, n, !0), y = o;
    do {
      if (d === 0) {
        ci && !o && Gr(e, n, 0, !1);
        break;
      } else {
        if (i = e.current.alternate, y && !J_(i)) {
          d = md(e, n, !1), y = !1;
          continue;
        }
        if (d === 2) {
          if (y = n, e.errorRecoveryDisabledLanes & y)
            var x = 0;
          else
            x = e.pendingLanes & -536870913, x = x !== 0 ? x : x & 536870912 ? 536870912 : 0;
          if (x !== 0) {
            n = x;
            e: {
              var L = e;
              d = vs;
              var U = L.current.memoizedState.isDehydrated;
              if (U && (pi(L, x).flags |= 256), x = md(
                L,
                x,
                !1
              ), x !== 2) {
                if (sd && !U) {
                  L.errorRecoveryDisabledLanes |= y, _a |= y, d = 4;
                  break e;
                }
                y = cn, cn = d, y !== null && (cn === null ? cn = y : cn.push.apply(
                  cn,
                  y
                ));
              }
              d = x;
            }
            if (y = !1, d !== 2) continue;
          }
        }
        if (d === 1) {
          pi(e, 0), Gr(e, n, 0, !0);
          break;
        }
        e: {
          switch (o = e, y = d, y) {
            case 0:
            case 1:
              throw Error(a(345));
            case 4:
              if ((n & 4194048) !== n) break;
            case 6:
              Gr(
                o,
                n,
                In,
                !Br
              );
              break e;
            case 2:
              cn = null;
              break;
            case 3:
            case 5:
              break;
            default:
              throw Error(a(329));
          }
          if ((n & 62914560) === n && (d = ld + 300 - vt(), 10 < d)) {
            if (Gr(
              o,
              n,
              In,
              !Br
            ), Ke(o, 0, !0) !== 0) break e;
            o.timeoutHandle = wg(
              Fm.bind(
                null,
                o,
                i,
                cn,
                Ko,
                ud,
                n,
                In,
                _a,
                di,
                Br,
                y,
                2,
                -0,
                0
              ),
              d
            );
            break e;
          }
          Fm(
            o,
            i,
            cn,
            Ko,
            ud,
            n,
            In,
            _a,
            di,
            Br,
            y,
            0,
            -0,
            0
          );
        }
      }
      break;
    } while (!0);
    er(e);
  }
  function Fm(e, n, i, o, d, y, x, L, U, J, ie, le, W, ee) {
    if (e.timeoutHandle = -1, le = n.subtreeFlags, (le & 8192 || (le & 16785408) === 16785408) && (As = { stylesheets: null, count: 0, unsuspend: j1 }, Hm(n), le = L1(), le !== null)) {
      e.cancelPendingCommit = le(
        tg.bind(
          null,
          e,
          n,
          y,
          i,
          o,
          d,
          x,
          L,
          U,
          ie,
          1,
          W,
          ee
        )
      ), Gr(e, y, x, !J);
      return;
    }
    tg(
      e,
      n,
      y,
      i,
      o,
      d,
      x,
      L,
      U
    );
  }
  function J_(e) {
    for (var n = e; ; ) {
      var i = n.tag;
      if ((i === 0 || i === 11 || i === 15) && n.flags & 16384 && (i = n.updateQueue, i !== null && (i = i.stores, i !== null)))
        for (var o = 0; o < i.length; o++) {
          var d = i[o], y = d.getSnapshot;
          d = d.value;
          try {
            if (!yn(y(), d)) return !1;
          } catch {
            return !1;
          }
        }
      if (i = n.child, n.subtreeFlags & 16384 && i !== null)
        i.return = n, n = i;
      else {
        if (n === e) break;
        for (; n.sibling === null; ) {
          if (n.return === null || n.return === e) return !0;
          n = n.return;
        }
        n.sibling.return = n.return, n = n.sibling;
      }
    }
    return !0;
  }
  function Gr(e, n, i, o) {
    n &= ~od, n &= ~_a, e.suspendedLanes |= n, e.pingedLanes &= ~n, o && (e.warmLanes |= n), o = e.expirationTimes;
    for (var d = n; 0 < d; ) {
      var y = 31 - ge(d), x = 1 << y;
      o[y] = -1, d &= ~x;
    }
    i !== 0 && ih(e, i, n);
  }
  function Qo() {
    return (nt & 6) === 0 ? (bs(0), !1) : !0;
  }
  function hd() {
    if (qe !== null) {
      if (rt === 0)
        var e = qe.return;
      else
        e = qe, dr = pa = null, Oc(e), si = null, ls = 0, e = qe;
      for (; e !== null; )
        km(e.alternate, e), e = e.return;
      qe = null;
    }
  }
  function pi(e, n) {
    var i = e.timeoutHandle;
    i !== -1 && (e.timeoutHandle = -1, g1(i)), i = e.cancelPendingCommit, i !== null && (e.cancelPendingCommit = null, i()), hd(), dt = e, qe = i = ur(e.current, null), Qe = n, rt = 0, wn = null, Br = !1, ci = ct(e, n), sd = !1, di = In = od = _a = Ur = Et = 0, cn = vs = null, ud = !1, (n & 8) !== 0 && (n |= n & 32);
    var o = e.entangledLanes;
    if (o !== 0)
      for (e = e.entanglements, o &= n; 0 < o; ) {
        var d = 31 - ge(o), y = 1 << d;
        n |= e[d], o &= ~y;
      }
    return br = n, bo(), i;
  }
  function Xm(e, n) {
    Ue = null, R.H = Io, n === es || n === xo ? (n = fp(), rt = 3) : n === lp ? (n = fp(), rt = 4) : rt = n === hm ? 8 : n !== null && typeof n == "object" && typeof n.then == "function" ? 6 : 1, wn = n, qe === null && (Et = 1, Go(
      e,
      jn(n, e.current)
    ));
  }
  function Km() {
    var e = R.H;
    return R.H = Io, e === null ? Io : e;
  }
  function Qm() {
    var e = R.A;
    return R.A = K_, e;
  }
  function pd() {
    Et = 4, Br || (Qe & 4194048) !== Qe && zn.current !== null || (ci = !0), (Ur & 134217727) === 0 && (_a & 134217727) === 0 || dt === null || Gr(
      dt,
      Qe,
      In,
      !1
    );
  }
  function md(e, n, i) {
    var o = nt;
    nt |= 2;
    var d = Km(), y = Qm();
    (dt !== e || Qe !== n) && (Ko = null, pi(e, n)), n = !1;
    var x = Et;
    e: do
      try {
        if (rt !== 0 && qe !== null) {
          var L = qe, U = wn;
          switch (rt) {
            case 8:
              hd(), x = 6;
              break e;
            case 3:
            case 2:
            case 9:
            case 6:
              zn.current === null && (n = !0);
              var J = rt;
              if (rt = 0, wn = null, mi(e, L, U, J), i && ci) {
                x = 0;
                break e;
              }
              break;
            default:
              J = rt, rt = 0, wn = null, mi(e, L, U, J);
          }
        }
        W_(), x = Et;
        break;
      } catch (ie) {
        Xm(e, ie);
      }
    while (!0);
    return n && e.shellSuspendCounter++, dr = pa = null, nt = o, R.H = d, R.A = y, qe === null && (dt = null, Qe = 0, bo()), x;
  }
  function W_() {
    for (; qe !== null; ) Jm(qe);
  }
  function e1(e, n) {
    var i = nt;
    nt |= 2;
    var o = Km(), d = Qm();
    dt !== e || Qe !== n ? (Ko = null, Xo = vt() + 500, pi(e, n)) : ci = ct(
      e,
      n
    );
    e: do
      try {
        if (rt !== 0 && qe !== null) {
          n = qe;
          var y = wn;
          t: switch (rt) {
            case 1:
              rt = 0, wn = null, mi(e, n, y, 1);
              break;
            case 2:
            case 9:
              if (cp(y)) {
                rt = 0, wn = null, Wm(n);
                break;
              }
              n = function() {
                rt !== 2 && rt !== 9 || dt !== e || (rt = 7), er(e);
              }, y.then(n, n);
              break e;
            case 3:
              rt = 7;
              break e;
            case 4:
              rt = 5;
              break e;
            case 7:
              cp(y) ? (rt = 0, wn = null, Wm(n)) : (rt = 0, wn = null, mi(e, n, y, 7));
              break;
            case 5:
              var x = null;
              switch (qe.tag) {
                case 26:
                  x = qe.memoizedState;
                case 5:
                case 27:
                  var L = qe;
                  if (!x || Dg(x)) {
                    rt = 0, wn = null;
                    var U = L.sibling;
                    if (U !== null) qe = U;
                    else {
                      var J = L.return;
                      J !== null ? (qe = J, Jo(J)) : qe = null;
                    }
                    break t;
                  }
              }
              rt = 0, wn = null, mi(e, n, y, 5);
              break;
            case 6:
              rt = 0, wn = null, mi(e, n, y, 6);
              break;
            case 8:
              hd(), Et = 6;
              break e;
            default:
              throw Error(a(462));
          }
        }
        t1();
        break;
      } catch (ie) {
        Xm(e, ie);
      }
    while (!0);
    return dr = pa = null, R.H = o, R.A = d, nt = i, qe !== null ? 0 : (dt = null, Qe = 0, bo(), Et);
  }
  function t1() {
    for (; qe !== null && !Wt(); )
      Jm(qe);
  }
  function Jm(e) {
    var n = Am(e.alternate, e, br);
    e.memoizedProps = e.pendingProps, n === null ? Jo(e) : qe = n;
  }
  function Wm(e) {
    var n = e, i = n.alternate;
    switch (n.tag) {
      case 15:
      case 0:
        n = bm(
          i,
          n,
          n.pendingProps,
          n.type,
          void 0,
          Qe
        );
        break;
      case 11:
        n = bm(
          i,
          n,
          n.pendingProps,
          n.type.render,
          n.ref,
          Qe
        );
        break;
      case 5:
        Oc(n);
      default:
        km(i, n), n = qe = ep(n, br), n = Am(i, n, br);
    }
    e.memoizedProps = e.pendingProps, n === null ? Jo(e) : qe = n;
  }
  function mi(e, n, i, o) {
    dr = pa = null, Oc(n), si = null, ls = 0;
    var d = n.return;
    try {
      if (Z_(
        e,
        d,
        n,
        i,
        Qe
      )) {
        Et = 1, Go(
          e,
          jn(i, e.current)
        ), qe = null;
        return;
      }
    } catch (y) {
      if (d !== null) throw qe = d, y;
      Et = 1, Go(
        e,
        jn(i, e.current)
      ), qe = null;
      return;
    }
    n.flags & 32768 ? (tt || o === 1 ? e = !0 : ci || (Qe & 536870912) !== 0 ? e = !1 : (Br = e = !0, (o === 2 || o === 9 || o === 3 || o === 6) && (o = zn.current, o !== null && o.tag === 13 && (o.flags |= 16384))), eg(n, e)) : Jo(n);
  }
  function Jo(e) {
    var n = e;
    do {
      if ((n.flags & 32768) !== 0) {
        eg(
          n,
          Br
        );
        return;
      }
      e = n.return;
      var i = V_(
        n.alternate,
        n,
        br
      );
      if (i !== null) {
        qe = i;
        return;
      }
      if (n = n.sibling, n !== null) {
        qe = n;
        return;
      }
      qe = n = e;
    } while (n !== null);
    Et === 0 && (Et = 5);
  }
  function eg(e, n) {
    do {
      var i = Y_(e.alternate, e);
      if (i !== null) {
        i.flags &= 32767, qe = i;
        return;
      }
      if (i = e.return, i !== null && (i.flags |= 32768, i.subtreeFlags = 0, i.deletions = null), !n && (e = e.sibling, e !== null)) {
        qe = e;
        return;
      }
      qe = e = i;
    } while (e !== null);
    Et = 6, qe = null;
  }
  function tg(e, n, i, o, d, y, x, L, U) {
    e.cancelPendingCommit = null;
    do
      Wo();
    while (Zt !== 0);
    if ((nt & 6) !== 0) throw Error(a(327));
    if (n !== null) {
      if (n === e.current) throw Error(a(177));
      if (y = n.lanes | n.childLanes, y |= ic, jb(
        e,
        i,
        y,
        x,
        L,
        U
      ), e === dt && (qe = dt = null, Qe = 0), fi = n, qr = e, hi = i, cd = y, dd = d, $m = o, (n.subtreeFlags & 10256) !== 0 || (n.flags & 10256) !== 0 ? (e.callbackNode = null, e.callbackPriority = 0, i1(B, function() {
        return sg(), null;
      })) : (e.callbackNode = null, e.callbackPriority = 0), o = (n.flags & 13878) !== 0, (n.subtreeFlags & 13878) !== 0 || o) {
        o = R.T, R.T = null, d = q.p, q.p = 2, x = nt, nt |= 4;
        try {
          F_(e, n, i);
        } finally {
          nt = x, q.p = d, R.T = o;
        }
      }
      Zt = 1, ng(), rg(), ag();
    }
  }
  function ng() {
    if (Zt === 1) {
      Zt = 0;
      var e = qr, n = fi, i = (n.flags & 13878) !== 0;
      if ((n.subtreeFlags & 13878) !== 0 || i) {
        i = R.T, R.T = null;
        var o = q.p;
        q.p = 2;
        var d = nt;
        nt |= 4;
        try {
          Im(n, e);
          var y = kd, x = Zh(e.containerInfo), L = y.focusedElem, U = y.selectionRange;
          if (x !== L && L && L.ownerDocument && Gh(
            L.ownerDocument.documentElement,
            L
          )) {
            if (U !== null && ec(L)) {
              var J = U.start, ie = U.end;
              if (ie === void 0 && (ie = J), "selectionStart" in L)
                L.selectionStart = J, L.selectionEnd = Math.min(
                  ie,
                  L.value.length
                );
              else {
                var le = L.ownerDocument || document, W = le && le.defaultView || window;
                if (W.getSelection) {
                  var ee = W.getSelection(), Me = L.textContent.length, ke = Math.min(U.start, Me), ot = U.end === void 0 ? ke : Math.min(U.end, Me);
                  !ee.extend && ke > ot && (x = ot, ot = ke, ke = x);
                  var Y = qh(
                    L,
                    ke
                  ), G = qh(
                    L,
                    ot
                  );
                  if (Y && G && (ee.rangeCount !== 1 || ee.anchorNode !== Y.node || ee.anchorOffset !== Y.offset || ee.focusNode !== G.node || ee.focusOffset !== G.offset)) {
                    var K = le.createRange();
                    K.setStart(Y.node, Y.offset), ee.removeAllRanges(), ke > ot ? (ee.addRange(K), ee.extend(G.node, G.offset)) : (K.setEnd(G.node, G.offset), ee.addRange(K));
                  }
                }
              }
            }
            for (le = [], ee = L; ee = ee.parentNode; )
              ee.nodeType === 1 && le.push({
                element: ee,
                left: ee.scrollLeft,
                top: ee.scrollTop
              });
            for (typeof L.focus == "function" && L.focus(), L = 0; L < le.length; L++) {
              var ue = le[L];
              ue.element.scrollLeft = ue.left, ue.element.scrollTop = ue.top;
            }
          }
          du = !!Td, kd = Td = null;
        } finally {
          nt = d, q.p = o, R.T = i;
        }
      }
      e.current = n, Zt = 2;
    }
  }
  function rg() {
    if (Zt === 2) {
      Zt = 0;
      var e = qr, n = fi, i = (n.flags & 8772) !== 0;
      if ((n.subtreeFlags & 8772) !== 0 || i) {
        i = R.T, R.T = null;
        var o = q.p;
        q.p = 2;
        var d = nt;
        nt |= 4;
        try {
          Dm(e, n.alternate, n);
        } finally {
          nt = d, q.p = o, R.T = i;
        }
      }
      Zt = 3;
    }
  }
  function ag() {
    if (Zt === 4 || Zt === 3) {
      Zt = 0, en();
      var e = qr, n = fi, i = hi, o = $m;
      (n.subtreeFlags & 10256) !== 0 || (n.flags & 10256) !== 0 ? Zt = 5 : (Zt = 0, fi = qr = null, ig(e, e.pendingLanes));
      var d = e.pendingLanes;
      if (d === 0 && (Hr = null), jl(i), n = n.stateNode, Ee && typeof Ee.onCommitFiberRoot == "function")
        try {
          Ee.onCommitFiberRoot(
            ve,
            n,
            void 0,
            (n.current.flags & 128) === 128
          );
        } catch {
        }
      if (o !== null) {
        n = R.T, d = q.p, q.p = 2, R.T = null;
        try {
          for (var y = e.onRecoverableError, x = 0; x < o.length; x++) {
            var L = o[x];
            y(L.value, {
              componentStack: L.stack
            });
          }
        } finally {
          R.T = n, q.p = d;
        }
      }
      (hi & 3) !== 0 && Wo(), er(e), d = e.pendingLanes, (i & 4194090) !== 0 && (d & 42) !== 0 ? e === fd ? ys++ : (ys = 0, fd = e) : ys = 0, bs(0);
    }
  }
  function ig(e, n) {
    (e.pooledCacheLanes &= n) === 0 && (n = e.pooledCache, n != null && (e.pooledCache = null, Ji(n)));
  }
  function Wo(e) {
    return ng(), rg(), ag(), sg();
  }
  function sg() {
    if (Zt !== 5) return !1;
    var e = qr, n = cd;
    cd = 0;
    var i = jl(hi), o = R.T, d = q.p;
    try {
      q.p = 32 > i ? 32 : i, R.T = null, i = dd, dd = null;
      var y = qr, x = hi;
      if (Zt = 0, fi = qr = null, hi = 0, (nt & 6) !== 0) throw Error(a(331));
      var L = nt;
      if (nt |= 4, Gm(y.current), Um(
        y,
        y.current,
        x,
        i
      ), nt = L, bs(0, !1), Ee && typeof Ee.onPostCommitFiberRoot == "function")
        try {
          Ee.onPostCommitFiberRoot(ve, y);
        } catch {
        }
      return !0;
    } finally {
      q.p = d, R.T = o, ig(e, n);
    }
  }
  function og(e, n, i) {
    n = jn(i, n), n = Zc(e.stateNode, n, 2), e = Rr(e, n, 2), e !== null && (Pi(e, 2), er(e));
  }
  function lt(e, n, i) {
    if (e.tag === 3)
      og(e, e, i);
    else
      for (; n !== null; ) {
        if (n.tag === 3) {
          og(
            n,
            e,
            i
          );
          break;
        } else if (n.tag === 1) {
          var o = n.stateNode;
          if (typeof n.type.getDerivedStateFromError == "function" || typeof o.componentDidCatch == "function" && (Hr === null || !Hr.has(o))) {
            e = jn(i, e), i = dm(2), o = Rr(n, i, 2), o !== null && (fm(
              i,
              o,
              n,
              e
            ), Pi(o, 2), er(o));
            break;
          }
        }
        n = n.return;
      }
  }
  function gd(e, n, i) {
    var o = e.pingCache;
    if (o === null) {
      o = e.pingCache = new Q_();
      var d = /* @__PURE__ */ new Set();
      o.set(n, d);
    } else
      d = o.get(n), d === void 0 && (d = /* @__PURE__ */ new Set(), o.set(n, d));
    d.has(i) || (sd = !0, d.add(i), e = n1.bind(null, e, n, i), n.then(e, e));
  }
  function n1(e, n, i) {
    var o = e.pingCache;
    o !== null && o.delete(n), e.pingedLanes |= e.suspendedLanes & i, e.warmLanes &= ~i, dt === e && (Qe & i) === i && (Et === 4 || Et === 3 && (Qe & 62914560) === Qe && 300 > vt() - ld ? (nt & 2) === 0 && pi(e, 0) : od |= i, di === Qe && (di = 0)), er(e);
  }
  function ug(e, n) {
    n === 0 && (n = ah()), e = Ka(e, n), e !== null && (Pi(e, n), er(e));
  }
  function r1(e) {
    var n = e.memoizedState, i = 0;
    n !== null && (i = n.retryLane), ug(e, i);
  }
  function a1(e, n) {
    var i = 0;
    switch (e.tag) {
      case 13:
        var o = e.stateNode, d = e.memoizedState;
        d !== null && (i = d.retryLane);
        break;
      case 19:
        o = e.stateNode;
        break;
      case 22:
        o = e.stateNode._retryCache;
        break;
      default:
        throw Error(a(314));
    }
    o !== null && o.delete(n), ug(e, i);
  }
  function i1(e, n) {
    return Ht(e, n);
  }
  var eu = null, gi = null, vd = !1, tu = !1, yd = !1, Sa = 0;
  function er(e) {
    e !== gi && e.next === null && (gi === null ? eu = gi = e : gi = gi.next = e), tu = !0, vd || (vd = !0, o1());
  }
  function bs(e, n) {
    if (!yd && tu) {
      yd = !0;
      do
        for (var i = !1, o = eu; o !== null; ) {
          if (e !== 0) {
            var d = o.pendingLanes;
            if (d === 0) var y = 0;
            else {
              var x = o.suspendedLanes, L = o.pingedLanes;
              y = (1 << 31 - ge(42 | e) + 1) - 1, y &= d & ~(x & ~L), y = y & 201326741 ? y & 201326741 | 1 : y ? y | 2 : 0;
            }
            y !== 0 && (i = !0, fg(o, y));
          } else
            y = Qe, y = Ke(
              o,
              o === dt ? y : 0,
              o.cancelPendingCommit !== null || o.timeoutHandle !== -1
            ), (y & 3) === 0 || ct(o, y) || (i = !0, fg(o, y));
          o = o.next;
        }
      while (i);
      yd = !1;
    }
  }
  function s1() {
    lg();
  }
  function lg() {
    tu = vd = !1;
    var e = 0;
    Sa !== 0 && (m1() && (e = Sa), Sa = 0);
    for (var n = vt(), i = null, o = eu; o !== null; ) {
      var d = o.next, y = cg(o, n);
      y === 0 ? (o.next = null, i === null ? eu = d : i.next = d, d === null && (gi = i)) : (i = o, (e !== 0 || (y & 3) !== 0) && (tu = !0)), o = d;
    }
    bs(e);
  }
  function cg(e, n) {
    for (var i = e.suspendedLanes, o = e.pingedLanes, d = e.expirationTimes, y = e.pendingLanes & -62914561; 0 < y; ) {
      var x = 31 - ge(y), L = 1 << x, U = d[x];
      U === -1 ? ((L & i) === 0 || (L & o) !== 0) && (d[x] = qn(L, n)) : U <= n && (e.expiredLanes |= L), y &= ~L;
    }
    if (n = dt, i = Qe, i = Ke(
      e,
      e === n ? i : 0,
      e.cancelPendingCommit !== null || e.timeoutHandle !== -1
    ), o = e.callbackNode, i === 0 || e === n && (rt === 2 || rt === 9) || e.cancelPendingCommit !== null)
      return o !== null && o !== null && qt(o), e.callbackNode = null, e.callbackPriority = 0;
    if ((i & 3) === 0 || ct(e, i)) {
      if (n = i & -i, n === e.callbackPriority) return n;
      switch (o !== null && qt(o), jl(i)) {
        case 2:
        case 8:
          i = me;
          break;
        case 32:
          i = B;
          break;
        case 268435456:
          i = ae;
          break;
        default:
          i = B;
      }
      return o = dg.bind(null, e), i = Ht(i, o), e.callbackPriority = n, e.callbackNode = i, n;
    }
    return o !== null && o !== null && qt(o), e.callbackPriority = 2, e.callbackNode = null, 2;
  }
  function dg(e, n) {
    if (Zt !== 0 && Zt !== 5)
      return e.callbackNode = null, e.callbackPriority = 0, null;
    var i = e.callbackNode;
    if (Wo() && e.callbackNode !== i)
      return null;
    var o = Qe;
    return o = Ke(
      e,
      e === dt ? o : 0,
      e.cancelPendingCommit !== null || e.timeoutHandle !== -1
    ), o === 0 ? null : (Ym(e, o, n), cg(e, vt()), e.callbackNode != null && e.callbackNode === i ? dg.bind(null, e) : null);
  }
  function fg(e, n) {
    if (Wo()) return null;
    Ym(e, n, !0);
  }
  function o1() {
    v1(function() {
      (nt & 6) !== 0 ? Ht(
        St,
        s1
      ) : lg();
    });
  }
  function bd() {
    return Sa === 0 && (Sa = On()), Sa;
  }
  function hg(e) {
    return e == null || typeof e == "symbol" || typeof e == "boolean" ? null : typeof e == "function" ? e : fo("" + e);
  }
  function pg(e, n) {
    var i = n.ownerDocument.createElement("input");
    return i.name = n.name, i.value = n.value, e.id && i.setAttribute("form", e.id), n.parentNode.insertBefore(i, n), e = new FormData(e), i.parentNode.removeChild(i), e;
  }
  function u1(e, n, i, o, d) {
    if (n === "submit" && i && i.stateNode === d) {
      var y = hg(
        (d[sn] || null).action
      ), x = o.submitter;
      x && (n = (n = x[sn] || null) ? hg(n.formAction) : x.getAttribute("formAction"), n !== null && (y = n, x = null));
      var L = new go(
        "action",
        "action",
        null,
        o,
        d
      );
      e.push({
        event: L,
        listeners: [
          {
            instance: null,
            listener: function() {
              if (o.defaultPrevented) {
                if (Sa !== 0) {
                  var U = x ? pg(d, x) : new FormData(d);
                  Bc(
                    i,
                    {
                      pending: !0,
                      data: U,
                      method: d.method,
                      action: y
                    },
                    null,
                    U
                  );
                }
              } else
                typeof y == "function" && (L.preventDefault(), U = x ? pg(d, x) : new FormData(d), Bc(
                  i,
                  {
                    pending: !0,
                    data: U,
                    method: d.method,
                    action: y
                  },
                  y,
                  U
                ));
            },
            currentTarget: d
          }
        ]
      });
    }
  }
  for (var _d = 0; _d < ac.length; _d++) {
    var Sd = ac[_d], l1 = Sd.toLowerCase(), c1 = Sd[0].toUpperCase() + Sd.slice(1);
    Gn(
      l1,
      "on" + c1
    );
  }
  Gn(Yh, "onAnimationEnd"), Gn(Fh, "onAnimationIteration"), Gn(Xh, "onAnimationStart"), Gn("dblclick", "onDoubleClick"), Gn("focusin", "onFocus"), Gn("focusout", "onBlur"), Gn(k_, "onTransitionRun"), Gn(x_, "onTransitionStart"), Gn(N_, "onTransitionCancel"), Gn(Kh, "onTransitionEnd"), Ua("onMouseEnter", ["mouseout", "mouseover"]), Ua("onMouseLeave", ["mouseout", "mouseover"]), Ua("onPointerEnter", ["pointerout", "pointerover"]), Ua("onPointerLeave", ["pointerout", "pointerover"]), ia(
    "onChange",
    "change click focusin focusout input keydown keyup selectionchange".split(" ")
  ), ia(
    "onSelect",
    "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(
      " "
    )
  ), ia("onBeforeInput", [
    "compositionend",
    "keypress",
    "textInput",
    "paste"
  ]), ia(
    "onCompositionEnd",
    "compositionend focusout keydown keypress keyup mousedown".split(" ")
  ), ia(
    "onCompositionStart",
    "compositionstart focusout keydown keypress keyup mousedown".split(" ")
  ), ia(
    "onCompositionUpdate",
    "compositionupdate focusout keydown keypress keyup mousedown".split(" ")
  );
  var _s = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(
    " "
  ), d1 = new Set(
    "beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_s)
  );
  function mg(e, n) {
    n = (n & 4) !== 0;
    for (var i = 0; i < e.length; i++) {
      var o = e[i], d = o.event;
      o = o.listeners;
      e: {
        var y = void 0;
        if (n)
          for (var x = o.length - 1; 0 <= x; x--) {
            var L = o[x], U = L.instance, J = L.currentTarget;
            if (L = L.listener, U !== y && d.isPropagationStopped())
              break e;
            y = L, d.currentTarget = J;
            try {
              y(d);
            } catch (ie) {
              qo(ie);
            }
            d.currentTarget = null, y = U;
          }
        else
          for (x = 0; x < o.length; x++) {
            if (L = o[x], U = L.instance, J = L.currentTarget, L = L.listener, U !== y && d.isPropagationStopped())
              break e;
            y = L, d.currentTarget = J;
            try {
              y(d);
            } catch (ie) {
              qo(ie);
            }
            d.currentTarget = null, y = U;
          }
      }
    }
  }
  function Ge(e, n) {
    var i = n[Dl];
    i === void 0 && (i = n[Dl] = /* @__PURE__ */ new Set());
    var o = e + "__bubble";
    i.has(o) || (gg(n, e, 2, !1), i.add(o));
  }
  function wd(e, n, i) {
    var o = 0;
    n && (o |= 4), gg(
      i,
      e,
      o,
      n
    );
  }
  var nu = "_reactListening" + Math.random().toString(36).slice(2);
  function Ed(e) {
    if (!e[nu]) {
      e[nu] = !0, lh.forEach(function(i) {
        i !== "selectionchange" && (d1.has(i) || wd(i, !1, e), wd(i, !0, e));
      });
      var n = e.nodeType === 9 ? e : e.ownerDocument;
      n === null || n[nu] || (n[nu] = !0, wd("selectionchange", !1, n));
    }
  }
  function gg(e, n, i, o) {
    switch (Ug(n)) {
      case 2:
        var d = I1;
        break;
      case 8:
        d = B1;
        break;
      default:
        d = zd;
    }
    i = d.bind(
      null,
      n,
      i,
      e
    ), d = void 0, !$l || n !== "touchstart" && n !== "touchmove" && n !== "wheel" || (d = !0), o ? d !== void 0 ? e.addEventListener(n, i, {
      capture: !0,
      passive: d
    }) : e.addEventListener(n, i, !0) : d !== void 0 ? e.addEventListener(n, i, {
      passive: d
    }) : e.addEventListener(n, i, !1);
  }
  function Cd(e, n, i, o, d) {
    var y = o;
    if ((n & 1) === 0 && (n & 2) === 0 && o !== null)
      e: for (; ; ) {
        if (o === null) return;
        var x = o.tag;
        if (x === 3 || x === 4) {
          var L = o.stateNode.containerInfo;
          if (L === d) break;
          if (x === 4)
            for (x = o.return; x !== null; ) {
              var U = x.tag;
              if ((U === 3 || U === 4) && x.stateNode.containerInfo === d)
                return;
              x = x.return;
            }
          for (; L !== null; ) {
            if (x = za(L), x === null) return;
            if (U = x.tag, U === 5 || U === 6 || U === 26 || U === 27) {
              o = y = x;
              continue e;
            }
            L = L.parentNode;
          }
        }
        o = o.return;
      }
    Eh(function() {
      var J = y, ie = Gl(i), le = [];
      e: {
        var W = Qh.get(e);
        if (W !== void 0) {
          var ee = go, Me = e;
          switch (e) {
            case "keypress":
              if (po(i) === 0) break e;
            case "keydown":
            case "keyup":
              ee = i_;
              break;
            case "focusin":
              Me = "focus", ee = Xl;
              break;
            case "focusout":
              Me = "blur", ee = Xl;
              break;
            case "beforeblur":
            case "afterblur":
              ee = Xl;
              break;
            case "click":
              if (i.button === 2) break e;
            case "auxclick":
            case "dblclick":
            case "mousedown":
            case "mousemove":
            case "mouseup":
            case "mouseout":
            case "mouseover":
            case "contextmenu":
              ee = Th;
              break;
            case "drag":
            case "dragend":
            case "dragenter":
            case "dragexit":
            case "dragleave":
            case "dragover":
            case "dragstart":
            case "drop":
              ee = Yb;
              break;
            case "touchcancel":
            case "touchend":
            case "touchmove":
            case "touchstart":
              ee = u_;
              break;
            case Yh:
            case Fh:
            case Xh:
              ee = Kb;
              break;
            case Kh:
              ee = c_;
              break;
            case "scroll":
            case "scrollend":
              ee = $b;
              break;
            case "wheel":
              ee = f_;
              break;
            case "copy":
            case "cut":
            case "paste":
              ee = Jb;
              break;
            case "gotpointercapture":
            case "lostpointercapture":
            case "pointercancel":
            case "pointerdown":
            case "pointermove":
            case "pointerout":
            case "pointerover":
            case "pointerup":
              ee = xh;
              break;
            case "toggle":
            case "beforetoggle":
              ee = p_;
          }
          var ke = (n & 4) !== 0, ot = !ke && (e === "scroll" || e === "scrollend"), Y = ke ? W !== null ? W + "Capture" : null : W;
          ke = [];
          for (var G = J, K; G !== null; ) {
            var ue = G;
            if (K = ue.stateNode, ue = ue.tag, ue !== 5 && ue !== 26 && ue !== 27 || K === null || Y === null || (ue = Bi(G, Y), ue != null && ke.push(
              Ss(G, ue, K)
            )), ot) break;
            G = G.return;
          }
          0 < ke.length && (W = new ee(
            W,
            Me,
            null,
            i,
            ie
          ), le.push({ event: W, listeners: ke }));
        }
      }
      if ((n & 7) === 0) {
        e: {
          if (W = e === "mouseover" || e === "pointerover", ee = e === "mouseout" || e === "pointerout", W && i !== ql && (Me = i.relatedTarget || i.fromElement) && (za(Me) || Me[Pa]))
            break e;
          if ((ee || W) && (W = ie.window === ie ? ie : (W = ie.ownerDocument) ? W.defaultView || W.parentWindow : window, ee ? (Me = i.relatedTarget || i.toElement, ee = J, Me = Me ? za(Me) : null, Me !== null && (ot = l(Me), ke = Me.tag, Me !== ot || ke !== 5 && ke !== 27 && ke !== 6) && (Me = null)) : (ee = null, Me = J), ee !== Me)) {
            if (ke = Th, ue = "onMouseLeave", Y = "onMouseEnter", G = "mouse", (e === "pointerout" || e === "pointerover") && (ke = xh, ue = "onPointerLeave", Y = "onPointerEnter", G = "pointer"), ot = ee == null ? W : Ii(ee), K = Me == null ? W : Ii(Me), W = new ke(
              ue,
              G + "leave",
              ee,
              i,
              ie
            ), W.target = ot, W.relatedTarget = K, ue = null, za(ie) === J && (ke = new ke(
              Y,
              G + "enter",
              Me,
              i,
              ie
            ), ke.target = K, ke.relatedTarget = ot, ue = ke), ot = ue, ee && Me)
              t: {
                for (ke = ee, Y = Me, G = 0, K = ke; K; K = vi(K))
                  G++;
                for (K = 0, ue = Y; ue; ue = vi(ue))
                  K++;
                for (; 0 < G - K; )
                  ke = vi(ke), G--;
                for (; 0 < K - G; )
                  Y = vi(Y), K--;
                for (; G--; ) {
                  if (ke === Y || Y !== null && ke === Y.alternate)
                    break t;
                  ke = vi(ke), Y = vi(Y);
                }
                ke = null;
              }
            else ke = null;
            ee !== null && vg(
              le,
              W,
              ee,
              ke,
              !1
            ), Me !== null && ot !== null && vg(
              le,
              ot,
              Me,
              ke,
              !0
            );
          }
        }
        e: {
          if (W = J ? Ii(J) : window, ee = W.nodeName && W.nodeName.toLowerCase(), ee === "select" || ee === "input" && W.type === "file")
            var Se = Ph;
          else if (Dh(W))
            if (zh)
              Se = C_;
            else {
              Se = w_;
              var He = S_;
            }
          else
            ee = W.nodeName, !ee || ee.toLowerCase() !== "input" || W.type !== "checkbox" && W.type !== "radio" ? J && Hl(J.elementType) && (Se = Ph) : Se = E_;
          if (Se && (Se = Se(e, J))) {
            Lh(
              le,
              Se,
              i,
              ie
            );
            break e;
          }
          He && He(e, W, J), e === "focusout" && J && W.type === "number" && J.memoizedProps.value != null && Ul(W, "number", W.value);
        }
        switch (He = J ? Ii(J) : window, e) {
          case "focusin":
            (Dh(He) || He.contentEditable === "true") && (Ya = He, tc = J, Yi = null);
            break;
          case "focusout":
            Yi = tc = Ya = null;
            break;
          case "mousedown":
            nc = !0;
            break;
          case "contextmenu":
          case "mouseup":
          case "dragend":
            nc = !1, $h(le, i, ie);
            break;
          case "selectionchange":
            if (T_) break;
          case "keydown":
          case "keyup":
            $h(le, i, ie);
        }
        var Ce;
        if (Ql)
          e: {
            switch (e) {
              case "compositionstart":
                var xe = "onCompositionStart";
                break e;
              case "compositionend":
                xe = "onCompositionEnd";
                break e;
              case "compositionupdate":
                xe = "onCompositionUpdate";
                break e;
            }
            xe = void 0;
          }
        else
          Va ? Rh(e, i) && (xe = "onCompositionEnd") : e === "keydown" && i.keyCode === 229 && (xe = "onCompositionStart");
        xe && (Nh && i.locale !== "ko" && (Va || xe !== "onCompositionStart" ? xe === "onCompositionEnd" && Va && (Ce = Ch()) : (xr = ie, Vl = "value" in xr ? xr.value : xr.textContent, Va = !0)), He = ru(J, xe), 0 < He.length && (xe = new kh(
          xe,
          e,
          null,
          i,
          ie
        ), le.push({ event: xe, listeners: He }), Ce ? xe.data = Ce : (Ce = jh(i), Ce !== null && (xe.data = Ce)))), (Ce = g_ ? v_(e, i) : y_(e, i)) && (xe = ru(J, "onBeforeInput"), 0 < xe.length && (He = new kh(
          "onBeforeInput",
          "beforeinput",
          null,
          i,
          ie
        ), le.push({
          event: He,
          listeners: xe
        }), He.data = Ce)), u1(
          le,
          e,
          J,
          i,
          ie
        );
      }
      mg(le, n);
    });
  }
  function Ss(e, n, i) {
    return {
      instance: e,
      listener: n,
      currentTarget: i
    };
  }
  function ru(e, n) {
    for (var i = n + "Capture", o = []; e !== null; ) {
      var d = e, y = d.stateNode;
      if (d = d.tag, d !== 5 && d !== 26 && d !== 27 || y === null || (d = Bi(e, i), d != null && o.unshift(
        Ss(e, d, y)
      ), d = Bi(e, n), d != null && o.push(
        Ss(e, d, y)
      )), e.tag === 3) return o;
      e = e.return;
    }
    return [];
  }
  function vi(e) {
    if (e === null) return null;
    do
      e = e.return;
    while (e && e.tag !== 5 && e.tag !== 27);
    return e || null;
  }
  function vg(e, n, i, o, d) {
    for (var y = n._reactName, x = []; i !== null && i !== o; ) {
      var L = i, U = L.alternate, J = L.stateNode;
      if (L = L.tag, U !== null && U === o) break;
      L !== 5 && L !== 26 && L !== 27 || J === null || (U = J, d ? (J = Bi(i, y), J != null && x.unshift(
        Ss(i, J, U)
      )) : d || (J = Bi(i, y), J != null && x.push(
        Ss(i, J, U)
      ))), i = i.return;
    }
    x.length !== 0 && e.push({ event: n, listeners: x });
  }
  var f1 = /\r\n?/g, h1 = /\u0000|\uFFFD/g;
  function yg(e) {
    return (typeof e == "string" ? e : "" + e).replace(f1, `
`).replace(h1, "");
  }
  function bg(e, n) {
    return n = yg(n), yg(e) === n;
  }
  function au() {
  }
  function st(e, n, i, o, d, y) {
    switch (i) {
      case "children":
        typeof o == "string" ? n === "body" || n === "textarea" && o === "" || Ga(e, o) : (typeof o == "number" || typeof o == "bigint") && n !== "body" && Ga(e, "" + o);
        break;
      case "className":
        uo(e, "class", o);
        break;
      case "tabIndex":
        uo(e, "tabindex", o);
        break;
      case "dir":
      case "role":
      case "viewBox":
      case "width":
      case "height":
        uo(e, i, o);
        break;
      case "style":
        Sh(e, o, y);
        break;
      case "data":
        if (n !== "object") {
          uo(e, "data", o);
          break;
        }
      case "src":
      case "href":
        if (o === "" && (n !== "a" || i !== "href")) {
          e.removeAttribute(i);
          break;
        }
        if (o == null || typeof o == "function" || typeof o == "symbol" || typeof o == "boolean") {
          e.removeAttribute(i);
          break;
        }
        o = fo("" + o), e.setAttribute(i, o);
        break;
      case "action":
      case "formAction":
        if (typeof o == "function") {
          e.setAttribute(
            i,
            "javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')"
          );
          break;
        } else
          typeof y == "function" && (i === "formAction" ? (n !== "input" && st(e, n, "name", d.name, d, null), st(
            e,
            n,
            "formEncType",
            d.formEncType,
            d,
            null
          ), st(
            e,
            n,
            "formMethod",
            d.formMethod,
            d,
            null
          ), st(
            e,
            n,
            "formTarget",
            d.formTarget,
            d,
            null
          )) : (st(e, n, "encType", d.encType, d, null), st(e, n, "method", d.method, d, null), st(e, n, "target", d.target, d, null)));
        if (o == null || typeof o == "symbol" || typeof o == "boolean") {
          e.removeAttribute(i);
          break;
        }
        o = fo("" + o), e.setAttribute(i, o);
        break;
      case "onClick":
        o != null && (e.onclick = au);
        break;
      case "onScroll":
        o != null && Ge("scroll", e);
        break;
      case "onScrollEnd":
        o != null && Ge("scrollend", e);
        break;
      case "dangerouslySetInnerHTML":
        if (o != null) {
          if (typeof o != "object" || !("__html" in o))
            throw Error(a(61));
          if (i = o.__html, i != null) {
            if (d.children != null) throw Error(a(60));
            e.innerHTML = i;
          }
        }
        break;
      case "multiple":
        e.multiple = o && typeof o != "function" && typeof o != "symbol";
        break;
      case "muted":
        e.muted = o && typeof o != "function" && typeof o != "symbol";
        break;
      case "suppressContentEditableWarning":
      case "suppressHydrationWarning":
      case "defaultValue":
      case "defaultChecked":
      case "innerHTML":
      case "ref":
        break;
      case "autoFocus":
        break;
      case "xlinkHref":
        if (o == null || typeof o == "function" || typeof o == "boolean" || typeof o == "symbol") {
          e.removeAttribute("xlink:href");
          break;
        }
        i = fo("" + o), e.setAttributeNS(
          "http://www.w3.org/1999/xlink",
          "xlink:href",
          i
        );
        break;
      case "contentEditable":
      case "spellCheck":
      case "draggable":
      case "value":
      case "autoReverse":
      case "externalResourcesRequired":
      case "focusable":
      case "preserveAlpha":
        o != null && typeof o != "function" && typeof o != "symbol" ? e.setAttribute(i, "" + o) : e.removeAttribute(i);
        break;
      case "inert":
      case "allowFullScreen":
      case "async":
      case "autoPlay":
      case "controls":
      case "default":
      case "defer":
      case "disabled":
      case "disablePictureInPicture":
      case "disableRemotePlayback":
      case "formNoValidate":
      case "hidden":
      case "loop":
      case "noModule":
      case "noValidate":
      case "open":
      case "playsInline":
      case "readOnly":
      case "required":
      case "reversed":
      case "scoped":
      case "seamless":
      case "itemScope":
        o && typeof o != "function" && typeof o != "symbol" ? e.setAttribute(i, "") : e.removeAttribute(i);
        break;
      case "capture":
      case "download":
        o === !0 ? e.setAttribute(i, "") : o !== !1 && o != null && typeof o != "function" && typeof o != "symbol" ? e.setAttribute(i, o) : e.removeAttribute(i);
        break;
      case "cols":
      case "rows":
      case "size":
      case "span":
        o != null && typeof o != "function" && typeof o != "symbol" && !isNaN(o) && 1 <= o ? e.setAttribute(i, o) : e.removeAttribute(i);
        break;
      case "rowSpan":
      case "start":
        o == null || typeof o == "function" || typeof o == "symbol" || isNaN(o) ? e.removeAttribute(i) : e.setAttribute(i, o);
        break;
      case "popover":
        Ge("beforetoggle", e), Ge("toggle", e), oo(e, "popover", o);
        break;
      case "xlinkActuate":
        sr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:actuate",
          o
        );
        break;
      case "xlinkArcrole":
        sr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:arcrole",
          o
        );
        break;
      case "xlinkRole":
        sr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:role",
          o
        );
        break;
      case "xlinkShow":
        sr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:show",
          o
        );
        break;
      case "xlinkTitle":
        sr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:title",
          o
        );
        break;
      case "xlinkType":
        sr(
          e,
          "http://www.w3.org/1999/xlink",
          "xlink:type",
          o
        );
        break;
      case "xmlBase":
        sr(
          e,
          "http://www.w3.org/XML/1998/namespace",
          "xml:base",
          o
        );
        break;
      case "xmlLang":
        sr(
          e,
          "http://www.w3.org/XML/1998/namespace",
          "xml:lang",
          o
        );
        break;
      case "xmlSpace":
        sr(
          e,
          "http://www.w3.org/XML/1998/namespace",
          "xml:space",
          o
        );
        break;
      case "is":
        oo(e, "is", o);
        break;
      case "innerText":
      case "textContent":
        break;
      default:
        (!(2 < i.length) || i[0] !== "o" && i[0] !== "O" || i[1] !== "n" && i[1] !== "N") && (i = Gb.get(i) || i, oo(e, i, o));
    }
  }
  function Ad(e, n, i, o, d, y) {
    switch (i) {
      case "style":
        Sh(e, o, y);
        break;
      case "dangerouslySetInnerHTML":
        if (o != null) {
          if (typeof o != "object" || !("__html" in o))
            throw Error(a(61));
          if (i = o.__html, i != null) {
            if (d.children != null) throw Error(a(60));
            e.innerHTML = i;
          }
        }
        break;
      case "children":
        typeof o == "string" ? Ga(e, o) : (typeof o == "number" || typeof o == "bigint") && Ga(e, "" + o);
        break;
      case "onScroll":
        o != null && Ge("scroll", e);
        break;
      case "onScrollEnd":
        o != null && Ge("scrollend", e);
        break;
      case "onClick":
        o != null && (e.onclick = au);
        break;
      case "suppressContentEditableWarning":
      case "suppressHydrationWarning":
      case "innerHTML":
      case "ref":
        break;
      case "innerText":
      case "textContent":
        break;
      default:
        if (!ch.hasOwnProperty(i))
          e: {
            if (i[0] === "o" && i[1] === "n" && (d = i.endsWith("Capture"), n = i.slice(2, d ? i.length - 7 : void 0), y = e[sn] || null, y = y != null ? y[i] : null, typeof y == "function" && e.removeEventListener(n, y, d), typeof o == "function")) {
              typeof y != "function" && y !== null && (i in e ? e[i] = null : e.hasAttribute(i) && e.removeAttribute(i)), e.addEventListener(n, o, d);
              break e;
            }
            i in e ? e[i] = o : o === !0 ? e.setAttribute(i, "") : oo(e, i, o);
          }
    }
  }
  function $t(e, n, i) {
    switch (n) {
      case "div":
      case "span":
      case "svg":
      case "path":
      case "a":
      case "g":
      case "p":
      case "li":
        break;
      case "img":
        Ge("error", e), Ge("load", e);
        var o = !1, d = !1, y;
        for (y in i)
          if (i.hasOwnProperty(y)) {
            var x = i[y];
            if (x != null)
              switch (y) {
                case "src":
                  o = !0;
                  break;
                case "srcSet":
                  d = !0;
                  break;
                case "children":
                case "dangerouslySetInnerHTML":
                  throw Error(a(137, n));
                default:
                  st(e, n, y, x, i, null);
              }
          }
        d && st(e, n, "srcSet", i.srcSet, i, null), o && st(e, n, "src", i.src, i, null);
        return;
      case "input":
        Ge("invalid", e);
        var L = y = x = d = null, U = null, J = null;
        for (o in i)
          if (i.hasOwnProperty(o)) {
            var ie = i[o];
            if (ie != null)
              switch (o) {
                case "name":
                  d = ie;
                  break;
                case "type":
                  x = ie;
                  break;
                case "checked":
                  U = ie;
                  break;
                case "defaultChecked":
                  J = ie;
                  break;
                case "value":
                  y = ie;
                  break;
                case "defaultValue":
                  L = ie;
                  break;
                case "children":
                case "dangerouslySetInnerHTML":
                  if (ie != null)
                    throw Error(a(137, n));
                  break;
                default:
                  st(e, n, o, ie, i, null);
              }
          }
        vh(
          e,
          y,
          L,
          U,
          J,
          x,
          d,
          !1
        ), lo(e);
        return;
      case "select":
        Ge("invalid", e), o = x = y = null;
        for (d in i)
          if (i.hasOwnProperty(d) && (L = i[d], L != null))
            switch (d) {
              case "value":
                y = L;
                break;
              case "defaultValue":
                x = L;
                break;
              case "multiple":
                o = L;
              default:
                st(e, n, d, L, i, null);
            }
        n = y, i = x, e.multiple = !!o, n != null ? qa(e, !!o, n, !1) : i != null && qa(e, !!o, i, !0);
        return;
      case "textarea":
        Ge("invalid", e), y = d = o = null;
        for (x in i)
          if (i.hasOwnProperty(x) && (L = i[x], L != null))
            switch (x) {
              case "value":
                o = L;
                break;
              case "defaultValue":
                d = L;
                break;
              case "children":
                y = L;
                break;
              case "dangerouslySetInnerHTML":
                if (L != null) throw Error(a(91));
                break;
              default:
                st(e, n, x, L, i, null);
            }
        bh(e, o, d, y), lo(e);
        return;
      case "option":
        for (U in i)
          if (i.hasOwnProperty(U) && (o = i[U], o != null))
            switch (U) {
              case "selected":
                e.selected = o && typeof o != "function" && typeof o != "symbol";
                break;
              default:
                st(e, n, U, o, i, null);
            }
        return;
      case "dialog":
        Ge("beforetoggle", e), Ge("toggle", e), Ge("cancel", e), Ge("close", e);
        break;
      case "iframe":
      case "object":
        Ge("load", e);
        break;
      case "video":
      case "audio":
        for (o = 0; o < _s.length; o++)
          Ge(_s[o], e);
        break;
      case "image":
        Ge("error", e), Ge("load", e);
        break;
      case "details":
        Ge("toggle", e);
        break;
      case "embed":
      case "source":
      case "link":
        Ge("error", e), Ge("load", e);
      case "area":
      case "base":
      case "br":
      case "col":
      case "hr":
      case "keygen":
      case "meta":
      case "param":
      case "track":
      case "wbr":
      case "menuitem":
        for (J in i)
          if (i.hasOwnProperty(J) && (o = i[J], o != null))
            switch (J) {
              case "children":
              case "dangerouslySetInnerHTML":
                throw Error(a(137, n));
              default:
                st(e, n, J, o, i, null);
            }
        return;
      default:
        if (Hl(n)) {
          for (ie in i)
            i.hasOwnProperty(ie) && (o = i[ie], o !== void 0 && Ad(
              e,
              n,
              ie,
              o,
              i,
              void 0
            ));
          return;
        }
    }
    for (L in i)
      i.hasOwnProperty(L) && (o = i[L], o != null && st(e, n, L, o, i, null));
  }
  function p1(e, n, i, o) {
    switch (n) {
      case "div":
      case "span":
      case "svg":
      case "path":
      case "a":
      case "g":
      case "p":
      case "li":
        break;
      case "input":
        var d = null, y = null, x = null, L = null, U = null, J = null, ie = null;
        for (ee in i) {
          var le = i[ee];
          if (i.hasOwnProperty(ee) && le != null)
            switch (ee) {
              case "checked":
                break;
              case "value":
                break;
              case "defaultValue":
                U = le;
              default:
                o.hasOwnProperty(ee) || st(e, n, ee, null, o, le);
            }
        }
        for (var W in o) {
          var ee = o[W];
          if (le = i[W], o.hasOwnProperty(W) && (ee != null || le != null))
            switch (W) {
              case "type":
                y = ee;
                break;
              case "name":
                d = ee;
                break;
              case "checked":
                J = ee;
                break;
              case "defaultChecked":
                ie = ee;
                break;
              case "value":
                x = ee;
                break;
              case "defaultValue":
                L = ee;
                break;
              case "children":
              case "dangerouslySetInnerHTML":
                if (ee != null)
                  throw Error(a(137, n));
                break;
              default:
                ee !== le && st(
                  e,
                  n,
                  W,
                  ee,
                  o,
                  le
                );
            }
        }
        Bl(
          e,
          x,
          L,
          U,
          J,
          ie,
          y,
          d
        );
        return;
      case "select":
        ee = x = L = W = null;
        for (y in i)
          if (U = i[y], i.hasOwnProperty(y) && U != null)
            switch (y) {
              case "value":
                break;
              case "multiple":
                ee = U;
              default:
                o.hasOwnProperty(y) || st(
                  e,
                  n,
                  y,
                  null,
                  o,
                  U
                );
            }
        for (d in o)
          if (y = o[d], U = i[d], o.hasOwnProperty(d) && (y != null || U != null))
            switch (d) {
              case "value":
                W = y;
                break;
              case "defaultValue":
                L = y;
                break;
              case "multiple":
                x = y;
              default:
                y !== U && st(
                  e,
                  n,
                  d,
                  y,
                  o,
                  U
                );
            }
        n = L, i = x, o = ee, W != null ? qa(e, !!i, W, !1) : !!o != !!i && (n != null ? qa(e, !!i, n, !0) : qa(e, !!i, i ? [] : "", !1));
        return;
      case "textarea":
        ee = W = null;
        for (L in i)
          if (d = i[L], i.hasOwnProperty(L) && d != null && !o.hasOwnProperty(L))
            switch (L) {
              case "value":
                break;
              case "children":
                break;
              default:
                st(e, n, L, null, o, d);
            }
        for (x in o)
          if (d = o[x], y = i[x], o.hasOwnProperty(x) && (d != null || y != null))
            switch (x) {
              case "value":
                W = d;
                break;
              case "defaultValue":
                ee = d;
                break;
              case "children":
                break;
              case "dangerouslySetInnerHTML":
                if (d != null) throw Error(a(91));
                break;
              default:
                d !== y && st(e, n, x, d, o, y);
            }
        yh(e, W, ee);
        return;
      case "option":
        for (var Me in i)
          if (W = i[Me], i.hasOwnProperty(Me) && W != null && !o.hasOwnProperty(Me))
            switch (Me) {
              case "selected":
                e.selected = !1;
                break;
              default:
                st(
                  e,
                  n,
                  Me,
                  null,
                  o,
                  W
                );
            }
        for (U in o)
          if (W = o[U], ee = i[U], o.hasOwnProperty(U) && W !== ee && (W != null || ee != null))
            switch (U) {
              case "selected":
                e.selected = W && typeof W != "function" && typeof W != "symbol";
                break;
              default:
                st(
                  e,
                  n,
                  U,
                  W,
                  o,
                  ee
                );
            }
        return;
      case "img":
      case "link":
      case "area":
      case "base":
      case "br":
      case "col":
      case "embed":
      case "hr":
      case "keygen":
      case "meta":
      case "param":
      case "source":
      case "track":
      case "wbr":
      case "menuitem":
        for (var ke in i)
          W = i[ke], i.hasOwnProperty(ke) && W != null && !o.hasOwnProperty(ke) && st(e, n, ke, null, o, W);
        for (J in o)
          if (W = o[J], ee = i[J], o.hasOwnProperty(J) && W !== ee && (W != null || ee != null))
            switch (J) {
              case "children":
              case "dangerouslySetInnerHTML":
                if (W != null)
                  throw Error(a(137, n));
                break;
              default:
                st(
                  e,
                  n,
                  J,
                  W,
                  o,
                  ee
                );
            }
        return;
      default:
        if (Hl(n)) {
          for (var ot in i)
            W = i[ot], i.hasOwnProperty(ot) && W !== void 0 && !o.hasOwnProperty(ot) && Ad(
              e,
              n,
              ot,
              void 0,
              o,
              W
            );
          for (ie in o)
            W = o[ie], ee = i[ie], !o.hasOwnProperty(ie) || W === ee || W === void 0 && ee === void 0 || Ad(
              e,
              n,
              ie,
              W,
              o,
              ee
            );
          return;
        }
    }
    for (var Y in i)
      W = i[Y], i.hasOwnProperty(Y) && W != null && !o.hasOwnProperty(Y) && st(e, n, Y, null, o, W);
    for (le in o)
      W = o[le], ee = i[le], !o.hasOwnProperty(le) || W === ee || W == null && ee == null || st(e, n, le, W, o, ee);
  }
  var Td = null, kd = null;
  function iu(e) {
    return e.nodeType === 9 ? e : e.ownerDocument;
  }
  function _g(e) {
    switch (e) {
      case "http://www.w3.org/2000/svg":
        return 1;
      case "http://www.w3.org/1998/Math/MathML":
        return 2;
      default:
        return 0;
    }
  }
  function Sg(e, n) {
    if (e === 0)
      switch (n) {
        case "svg":
          return 1;
        case "math":
          return 2;
        default:
          return 0;
      }
    return e === 1 && n === "foreignObject" ? 0 : e;
  }
  function xd(e, n) {
    return e === "textarea" || e === "noscript" || typeof n.children == "string" || typeof n.children == "number" || typeof n.children == "bigint" || typeof n.dangerouslySetInnerHTML == "object" && n.dangerouslySetInnerHTML !== null && n.dangerouslySetInnerHTML.__html != null;
  }
  var Nd = null;
  function m1() {
    var e = window.event;
    return e && e.type === "popstate" ? e === Nd ? !1 : (Nd = e, !0) : (Nd = null, !1);
  }
  var wg = typeof setTimeout == "function" ? setTimeout : void 0, g1 = typeof clearTimeout == "function" ? clearTimeout : void 0, Eg = typeof Promise == "function" ? Promise : void 0, v1 = typeof queueMicrotask == "function" ? queueMicrotask : typeof Eg < "u" ? function(e) {
    return Eg.resolve(null).then(e).catch(y1);
  } : wg;
  function y1(e) {
    setTimeout(function() {
      throw e;
    });
  }
  function Zr(e) {
    return e === "head";
  }
  function Cg(e, n) {
    var i = n, o = 0, d = 0;
    do {
      var y = i.nextSibling;
      if (e.removeChild(i), y && y.nodeType === 8)
        if (i = y.data, i === "/$") {
          if (0 < o && 8 > o) {
            i = o;
            var x = e.ownerDocument;
            if (i & 1 && ws(x.documentElement), i & 2 && ws(x.body), i & 4)
              for (i = x.head, ws(i), x = i.firstChild; x; ) {
                var L = x.nextSibling, U = x.nodeName;
                x[zi] || U === "SCRIPT" || U === "STYLE" || U === "LINK" && x.rel.toLowerCase() === "stylesheet" || i.removeChild(x), x = L;
              }
          }
          if (d === 0) {
            e.removeChild(y), Os(n);
            return;
          }
          d--;
        } else
          i === "$" || i === "$?" || i === "$!" ? d++ : o = i.charCodeAt(0) - 48;
      else o = 0;
      i = y;
    } while (i);
    Os(n);
  }
  function Od(e) {
    var n = e.firstChild;
    for (n && n.nodeType === 10 && (n = n.nextSibling); n; ) {
      var i = n;
      switch (n = n.nextSibling, i.nodeName) {
        case "HTML":
        case "HEAD":
        case "BODY":
          Od(i), Ll(i);
          continue;
        case "SCRIPT":
        case "STYLE":
          continue;
        case "LINK":
          if (i.rel.toLowerCase() === "stylesheet") continue;
      }
      e.removeChild(i);
    }
  }
  function b1(e, n, i, o) {
    for (; e.nodeType === 1; ) {
      var d = i;
      if (e.nodeName.toLowerCase() !== n.toLowerCase()) {
        if (!o && (e.nodeName !== "INPUT" || e.type !== "hidden"))
          break;
      } else if (o) {
        if (!e[zi])
          switch (n) {
            case "meta":
              if (!e.hasAttribute("itemprop")) break;
              return e;
            case "link":
              if (y = e.getAttribute("rel"), y === "stylesheet" && e.hasAttribute("data-precedence"))
                break;
              if (y !== d.rel || e.getAttribute("href") !== (d.href == null || d.href === "" ? null : d.href) || e.getAttribute("crossorigin") !== (d.crossOrigin == null ? null : d.crossOrigin) || e.getAttribute("title") !== (d.title == null ? null : d.title))
                break;
              return e;
            case "style":
              if (e.hasAttribute("data-precedence")) break;
              return e;
            case "script":
              if (y = e.getAttribute("src"), (y !== (d.src == null ? null : d.src) || e.getAttribute("type") !== (d.type == null ? null : d.type) || e.getAttribute("crossorigin") !== (d.crossOrigin == null ? null : d.crossOrigin)) && y && e.hasAttribute("async") && !e.hasAttribute("itemprop"))
                break;
              return e;
            default:
              return e;
          }
      } else if (n === "input" && e.type === "hidden") {
        var y = d.name == null ? null : "" + d.name;
        if (d.type === "hidden" && e.getAttribute("name") === y)
          return e;
      } else return e;
      if (e = $n(e.nextSibling), e === null) break;
    }
    return null;
  }
  function _1(e, n, i) {
    if (n === "") return null;
    for (; e.nodeType !== 3; )
      if ((e.nodeType !== 1 || e.nodeName !== "INPUT" || e.type !== "hidden") && !i || (e = $n(e.nextSibling), e === null)) return null;
    return e;
  }
  function Md(e) {
    return e.data === "$!" || e.data === "$?" && e.ownerDocument.readyState === "complete";
  }
  function S1(e, n) {
    var i = e.ownerDocument;
    if (e.data !== "$?" || i.readyState === "complete")
      n();
    else {
      var o = function() {
        n(), i.removeEventListener("DOMContentLoaded", o);
      };
      i.addEventListener("DOMContentLoaded", o), e._reactRetry = o;
    }
  }
  function $n(e) {
    for (; e != null; e = e.nextSibling) {
      var n = e.nodeType;
      if (n === 1 || n === 3) break;
      if (n === 8) {
        if (n = e.data, n === "$" || n === "$!" || n === "$?" || n === "F!" || n === "F")
          break;
        if (n === "/$") return null;
      }
    }
    return e;
  }
  var Rd = null;
  function Ag(e) {
    e = e.previousSibling;
    for (var n = 0; e; ) {
      if (e.nodeType === 8) {
        var i = e.data;
        if (i === "$" || i === "$!" || i === "$?") {
          if (n === 0) return e;
          n--;
        } else i === "/$" && n++;
      }
      e = e.previousSibling;
    }
    return null;
  }
  function Tg(e, n, i) {
    switch (n = iu(i), e) {
      case "html":
        if (e = n.documentElement, !e) throw Error(a(452));
        return e;
      case "head":
        if (e = n.head, !e) throw Error(a(453));
        return e;
      case "body":
        if (e = n.body, !e) throw Error(a(454));
        return e;
      default:
        throw Error(a(451));
    }
  }
  function ws(e) {
    for (var n = e.attributes; n.length; )
      e.removeAttributeNode(n[0]);
    Ll(e);
  }
  var Bn = /* @__PURE__ */ new Map(), kg = /* @__PURE__ */ new Set();
  function su(e) {
    return typeof e.getRootNode == "function" ? e.getRootNode() : e.nodeType === 9 ? e : e.ownerDocument;
  }
  var _r = q.d;
  q.d = {
    f: w1,
    r: E1,
    D: C1,
    C: A1,
    L: T1,
    m: k1,
    X: N1,
    S: x1,
    M: O1
  };
  function w1() {
    var e = _r.f(), n = Qo();
    return e || n;
  }
  function E1(e) {
    var n = Ia(e);
    n !== null && n.tag === 5 && n.type === "form" ? Yp(n) : _r.r(e);
  }
  var yi = typeof document > "u" ? null : document;
  function xg(e, n, i) {
    var o = yi;
    if (o && typeof n == "string" && n) {
      var d = Rn(n);
      d = 'link[rel="' + e + '"][href="' + d + '"]', typeof i == "string" && (d += '[crossorigin="' + i + '"]'), kg.has(d) || (kg.add(d), e = { rel: e, crossOrigin: i, href: n }, o.querySelector(d) === null && (n = o.createElement("link"), $t(n, "link", e), Pt(n), o.head.appendChild(n)));
    }
  }
  function C1(e) {
    _r.D(e), xg("dns-prefetch", e, null);
  }
  function A1(e, n) {
    _r.C(e, n), xg("preconnect", e, n);
  }
  function T1(e, n, i) {
    _r.L(e, n, i);
    var o = yi;
    if (o && e && n) {
      var d = 'link[rel="preload"][as="' + Rn(n) + '"]';
      n === "image" && i && i.imageSrcSet ? (d += '[imagesrcset="' + Rn(
        i.imageSrcSet
      ) + '"]', typeof i.imageSizes == "string" && (d += '[imagesizes="' + Rn(
        i.imageSizes
      ) + '"]')) : d += '[href="' + Rn(e) + '"]';
      var y = d;
      switch (n) {
        case "style":
          y = bi(e);
          break;
        case "script":
          y = _i(e);
      }
      Bn.has(y) || (e = v(
        {
          rel: "preload",
          href: n === "image" && i && i.imageSrcSet ? void 0 : e,
          as: n
        },
        i
      ), Bn.set(y, e), o.querySelector(d) !== null || n === "style" && o.querySelector(Es(y)) || n === "script" && o.querySelector(Cs(y)) || (n = o.createElement("link"), $t(n, "link", e), Pt(n), o.head.appendChild(n)));
    }
  }
  function k1(e, n) {
    _r.m(e, n);
    var i = yi;
    if (i && e) {
      var o = n && typeof n.as == "string" ? n.as : "script", d = 'link[rel="modulepreload"][as="' + Rn(o) + '"][href="' + Rn(e) + '"]', y = d;
      switch (o) {
        case "audioworklet":
        case "paintworklet":
        case "serviceworker":
        case "sharedworker":
        case "worker":
        case "script":
          y = _i(e);
      }
      if (!Bn.has(y) && (e = v({ rel: "modulepreload", href: e }, n), Bn.set(y, e), i.querySelector(d) === null)) {
        switch (o) {
          case "audioworklet":
          case "paintworklet":
          case "serviceworker":
          case "sharedworker":
          case "worker":
          case "script":
            if (i.querySelector(Cs(y)))
              return;
        }
        o = i.createElement("link"), $t(o, "link", e), Pt(o), i.head.appendChild(o);
      }
    }
  }
  function x1(e, n, i) {
    _r.S(e, n, i);
    var o = yi;
    if (o && e) {
      var d = Ba(o).hoistableStyles, y = bi(e);
      n = n || "default";
      var x = d.get(y);
      if (!x) {
        var L = { loading: 0, preload: null };
        if (x = o.querySelector(
          Es(y)
        ))
          L.loading = 5;
        else {
          e = v(
            { rel: "stylesheet", href: e, "data-precedence": n },
            i
          ), (i = Bn.get(y)) && jd(e, i);
          var U = x = o.createElement("link");
          Pt(U), $t(U, "link", e), U._p = new Promise(function(J, ie) {
            U.onload = J, U.onerror = ie;
          }), U.addEventListener("load", function() {
            L.loading |= 1;
          }), U.addEventListener("error", function() {
            L.loading |= 2;
          }), L.loading |= 4, ou(x, n, o);
        }
        x = {
          type: "stylesheet",
          instance: x,
          count: 1,
          state: L
        }, d.set(y, x);
      }
    }
  }
  function N1(e, n) {
    _r.X(e, n);
    var i = yi;
    if (i && e) {
      var o = Ba(i).hoistableScripts, d = _i(e), y = o.get(d);
      y || (y = i.querySelector(Cs(d)), y || (e = v({ src: e, async: !0 }, n), (n = Bn.get(d)) && Dd(e, n), y = i.createElement("script"), Pt(y), $t(y, "link", e), i.head.appendChild(y)), y = {
        type: "script",
        instance: y,
        count: 1,
        state: null
      }, o.set(d, y));
    }
  }
  function O1(e, n) {
    _r.M(e, n);
    var i = yi;
    if (i && e) {
      var o = Ba(i).hoistableScripts, d = _i(e), y = o.get(d);
      y || (y = i.querySelector(Cs(d)), y || (e = v({ src: e, async: !0, type: "module" }, n), (n = Bn.get(d)) && Dd(e, n), y = i.createElement("script"), Pt(y), $t(y, "link", e), i.head.appendChild(y)), y = {
        type: "script",
        instance: y,
        count: 1,
        state: null
      }, o.set(d, y));
    }
  }
  function Ng(e, n, i, o) {
    var d = (d = te.current) ? su(d) : null;
    if (!d) throw Error(a(446));
    switch (e) {
      case "meta":
      case "title":
        return null;
      case "style":
        return typeof i.precedence == "string" && typeof i.href == "string" ? (n = bi(i.href), i = Ba(
          d
        ).hoistableStyles, o = i.get(n), o || (o = {
          type: "style",
          instance: null,
          count: 0,
          state: null
        }, i.set(n, o)), o) : { type: "void", instance: null, count: 0, state: null };
      case "link":
        if (i.rel === "stylesheet" && typeof i.href == "string" && typeof i.precedence == "string") {
          e = bi(i.href);
          var y = Ba(
            d
          ).hoistableStyles, x = y.get(e);
          if (x || (d = d.ownerDocument || d, x = {
            type: "stylesheet",
            instance: null,
            count: 0,
            state: { loading: 0, preload: null }
          }, y.set(e, x), (y = d.querySelector(
            Es(e)
          )) && !y._p && (x.instance = y, x.state.loading = 5), Bn.has(e) || (i = {
            rel: "preload",
            as: "style",
            href: i.href,
            crossOrigin: i.crossOrigin,
            integrity: i.integrity,
            media: i.media,
            hrefLang: i.hrefLang,
            referrerPolicy: i.referrerPolicy
          }, Bn.set(e, i), y || M1(
            d,
            e,
            i,
            x.state
          ))), n && o === null)
            throw Error(a(528, ""));
          return x;
        }
        if (n && o !== null)
          throw Error(a(529, ""));
        return null;
      case "script":
        return n = i.async, i = i.src, typeof i == "string" && n && typeof n != "function" && typeof n != "symbol" ? (n = _i(i), i = Ba(
          d
        ).hoistableScripts, o = i.get(n), o || (o = {
          type: "script",
          instance: null,
          count: 0,
          state: null
        }, i.set(n, o)), o) : { type: "void", instance: null, count: 0, state: null };
      default:
        throw Error(a(444, e));
    }
  }
  function bi(e) {
    return 'href="' + Rn(e) + '"';
  }
  function Es(e) {
    return 'link[rel="stylesheet"][' + e + "]";
  }
  function Og(e) {
    return v({}, e, {
      "data-precedence": e.precedence,
      precedence: null
    });
  }
  function M1(e, n, i, o) {
    e.querySelector('link[rel="preload"][as="style"][' + n + "]") ? o.loading = 1 : (n = e.createElement("link"), o.preload = n, n.addEventListener("load", function() {
      return o.loading |= 1;
    }), n.addEventListener("error", function() {
      return o.loading |= 2;
    }), $t(n, "link", i), Pt(n), e.head.appendChild(n));
  }
  function _i(e) {
    return '[src="' + Rn(e) + '"]';
  }
  function Cs(e) {
    return "script[async]" + e;
  }
  function Mg(e, n, i) {
    if (n.count++, n.instance === null)
      switch (n.type) {
        case "style":
          var o = e.querySelector(
            'style[data-href~="' + Rn(i.href) + '"]'
          );
          if (o)
            return n.instance = o, Pt(o), o;
          var d = v({}, i, {
            "data-href": i.href,
            "data-precedence": i.precedence,
            href: null,
            precedence: null
          });
          return o = (e.ownerDocument || e).createElement(
            "style"
          ), Pt(o), $t(o, "style", d), ou(o, i.precedence, e), n.instance = o;
        case "stylesheet":
          d = bi(i.href);
          var y = e.querySelector(
            Es(d)
          );
          if (y)
            return n.state.loading |= 4, n.instance = y, Pt(y), y;
          o = Og(i), (d = Bn.get(d)) && jd(o, d), y = (e.ownerDocument || e).createElement("link"), Pt(y);
          var x = y;
          return x._p = new Promise(function(L, U) {
            x.onload = L, x.onerror = U;
          }), $t(y, "link", o), n.state.loading |= 4, ou(y, i.precedence, e), n.instance = y;
        case "script":
          return y = _i(i.src), (d = e.querySelector(
            Cs(y)
          )) ? (n.instance = d, Pt(d), d) : (o = i, (d = Bn.get(y)) && (o = v({}, i), Dd(o, d)), e = e.ownerDocument || e, d = e.createElement("script"), Pt(d), $t(d, "link", o), e.head.appendChild(d), n.instance = d);
        case "void":
          return null;
        default:
          throw Error(a(443, n.type));
      }
    else
      n.type === "stylesheet" && (n.state.loading & 4) === 0 && (o = n.instance, n.state.loading |= 4, ou(o, i.precedence, e));
    return n.instance;
  }
  function ou(e, n, i) {
    for (var o = i.querySelectorAll(
      'link[rel="stylesheet"][data-precedence],style[data-precedence]'
    ), d = o.length ? o[o.length - 1] : null, y = d, x = 0; x < o.length; x++) {
      var L = o[x];
      if (L.dataset.precedence === n) y = L;
      else if (y !== d) break;
    }
    y ? y.parentNode.insertBefore(e, y.nextSibling) : (n = i.nodeType === 9 ? i.head : i, n.insertBefore(e, n.firstChild));
  }
  function jd(e, n) {
    e.crossOrigin == null && (e.crossOrigin = n.crossOrigin), e.referrerPolicy == null && (e.referrerPolicy = n.referrerPolicy), e.title == null && (e.title = n.title);
  }
  function Dd(e, n) {
    e.crossOrigin == null && (e.crossOrigin = n.crossOrigin), e.referrerPolicy == null && (e.referrerPolicy = n.referrerPolicy), e.integrity == null && (e.integrity = n.integrity);
  }
  var uu = null;
  function Rg(e, n, i) {
    if (uu === null) {
      var o = /* @__PURE__ */ new Map(), d = uu = /* @__PURE__ */ new Map();
      d.set(i, o);
    } else
      d = uu, o = d.get(i), o || (o = /* @__PURE__ */ new Map(), d.set(i, o));
    if (o.has(e)) return o;
    for (o.set(e, null), i = i.getElementsByTagName(e), d = 0; d < i.length; d++) {
      var y = i[d];
      if (!(y[zi] || y[Ft] || e === "link" && y.getAttribute("rel") === "stylesheet") && y.namespaceURI !== "http://www.w3.org/2000/svg") {
        var x = y.getAttribute(n) || "";
        x = e + x;
        var L = o.get(x);
        L ? L.push(y) : o.set(x, [y]);
      }
    }
    return o;
  }
  function jg(e, n, i) {
    e = e.ownerDocument || e, e.head.insertBefore(
      i,
      n === "title" ? e.querySelector("head > title") : null
    );
  }
  function R1(e, n, i) {
    if (i === 1 || n.itemProp != null) return !1;
    switch (e) {
      case "meta":
      case "title":
        return !0;
      case "style":
        if (typeof n.precedence != "string" || typeof n.href != "string" || n.href === "")
          break;
        return !0;
      case "link":
        if (typeof n.rel != "string" || typeof n.href != "string" || n.href === "" || n.onLoad || n.onError)
          break;
        switch (n.rel) {
          case "stylesheet":
            return e = n.disabled, typeof n.precedence == "string" && e == null;
          default:
            return !0;
        }
      case "script":
        if (n.async && typeof n.async != "function" && typeof n.async != "symbol" && !n.onLoad && !n.onError && n.src && typeof n.src == "string")
          return !0;
    }
    return !1;
  }
  function Dg(e) {
    return !(e.type === "stylesheet" && (e.state.loading & 3) === 0);
  }
  var As = null;
  function j1() {
  }
  function D1(e, n, i) {
    if (As === null) throw Error(a(475));
    var o = As;
    if (n.type === "stylesheet" && (typeof i.media != "string" || matchMedia(i.media).matches !== !1) && (n.state.loading & 4) === 0) {
      if (n.instance === null) {
        var d = bi(i.href), y = e.querySelector(
          Es(d)
        );
        if (y) {
          e = y._p, e !== null && typeof e == "object" && typeof e.then == "function" && (o.count++, o = lu.bind(o), e.then(o, o)), n.state.loading |= 4, n.instance = y, Pt(y);
          return;
        }
        y = e.ownerDocument || e, i = Og(i), (d = Bn.get(d)) && jd(i, d), y = y.createElement("link"), Pt(y);
        var x = y;
        x._p = new Promise(function(L, U) {
          x.onload = L, x.onerror = U;
        }), $t(y, "link", i), n.instance = y;
      }
      o.stylesheets === null && (o.stylesheets = /* @__PURE__ */ new Map()), o.stylesheets.set(n, e), (e = n.state.preload) && (n.state.loading & 3) === 0 && (o.count++, n = lu.bind(o), e.addEventListener("load", n), e.addEventListener("error", n));
    }
  }
  function L1() {
    if (As === null) throw Error(a(475));
    var e = As;
    return e.stylesheets && e.count === 0 && Ld(e, e.stylesheets), 0 < e.count ? function(n) {
      var i = setTimeout(function() {
        if (e.stylesheets && Ld(e, e.stylesheets), e.unsuspend) {
          var o = e.unsuspend;
          e.unsuspend = null, o();
        }
      }, 6e4);
      return e.unsuspend = n, function() {
        e.unsuspend = null, clearTimeout(i);
      };
    } : null;
  }
  function lu() {
    if (this.count--, this.count === 0) {
      if (this.stylesheets) Ld(this, this.stylesheets);
      else if (this.unsuspend) {
        var e = this.unsuspend;
        this.unsuspend = null, e();
      }
    }
  }
  var cu = null;
  function Ld(e, n) {
    e.stylesheets = null, e.unsuspend !== null && (e.count++, cu = /* @__PURE__ */ new Map(), n.forEach(P1, e), cu = null, lu.call(e));
  }
  function P1(e, n) {
    if (!(n.state.loading & 4)) {
      var i = cu.get(e);
      if (i) var o = i.get(null);
      else {
        i = /* @__PURE__ */ new Map(), cu.set(e, i);
        for (var d = e.querySelectorAll(
          "link[data-precedence],style[data-precedence]"
        ), y = 0; y < d.length; y++) {
          var x = d[y];
          (x.nodeName === "LINK" || x.getAttribute("media") !== "not all") && (i.set(x.dataset.precedence, x), o = x);
        }
        o && i.set(null, o);
      }
      d = n.instance, x = d.getAttribute("data-precedence"), y = i.get(x) || o, y === o && i.set(null, d), i.set(x, d), this.count++, o = lu.bind(this), d.addEventListener("load", o), d.addEventListener("error", o), y ? y.parentNode.insertBefore(d, y.nextSibling) : (e = e.nodeType === 9 ? e.head : e, e.insertBefore(d, e.firstChild)), n.state.loading |= 4;
    }
  }
  var Ts = {
    $$typeof: I,
    Provider: null,
    Consumer: null,
    _currentValue: $,
    _currentValue2: $,
    _threadCount: 0
  };
  function z1(e, n, i, o, d, y, x, L) {
    this.tag = 1, this.containerInfo = e, this.pingCache = this.current = this.pendingChildren = null, this.timeoutHandle = -1, this.callbackNode = this.next = this.pendingContext = this.context = this.cancelPendingCommit = null, this.callbackPriority = 0, this.expirationTimes = Ml(-1), this.entangledLanes = this.shellSuspendCounter = this.errorRecoveryDisabledLanes = this.expiredLanes = this.warmLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, this.entanglements = Ml(0), this.hiddenUpdates = Ml(null), this.identifierPrefix = o, this.onUncaughtError = d, this.onCaughtError = y, this.onRecoverableError = x, this.pooledCache = null, this.pooledCacheLanes = 0, this.formState = L, this.incompleteTransitions = /* @__PURE__ */ new Map();
  }
  function Lg(e, n, i, o, d, y, x, L, U, J, ie, le) {
    return e = new z1(
      e,
      n,
      i,
      x,
      L,
      U,
      J,
      le
    ), n = 1, y === !0 && (n |= 24), y = bn(3, null, null, n), e.current = y, y.stateNode = e, n = gc(), n.refCount++, e.pooledCache = n, n.refCount++, y.memoizedState = {
      element: o,
      isDehydrated: i,
      cache: n
    }, _c(y), e;
  }
  function Pg(e) {
    return e ? (e = Qa, e) : Qa;
  }
  function zg(e, n, i, o, d, y) {
    d = Pg(d), o.context === null ? o.context = d : o.pendingContext = d, o = Mr(n), o.payload = { element: i }, y = y === void 0 ? null : y, y !== null && (o.callback = y), i = Rr(e, o, n), i !== null && (Cn(i, e, n), ns(i, e, n));
  }
  function Ig(e, n) {
    if (e = e.memoizedState, e !== null && e.dehydrated !== null) {
      var i = e.retryLane;
      e.retryLane = i !== 0 && i < n ? i : n;
    }
  }
  function Pd(e, n) {
    Ig(e, n), (e = e.alternate) && Ig(e, n);
  }
  function Bg(e) {
    if (e.tag === 13) {
      var n = Ka(e, 67108864);
      n !== null && Cn(n, e, 67108864), Pd(e, 67108864);
    }
  }
  var du = !0;
  function I1(e, n, i, o) {
    var d = R.T;
    R.T = null;
    var y = q.p;
    try {
      q.p = 2, zd(e, n, i, o);
    } finally {
      q.p = y, R.T = d;
    }
  }
  function B1(e, n, i, o) {
    var d = R.T;
    R.T = null;
    var y = q.p;
    try {
      q.p = 8, zd(e, n, i, o);
    } finally {
      q.p = y, R.T = d;
    }
  }
  function zd(e, n, i, o) {
    if (du) {
      var d = Id(o);
      if (d === null)
        Cd(
          e,
          n,
          o,
          fu,
          i
        ), Hg(e, o);
      else if (H1(
        d,
        e,
        n,
        i,
        o
      ))
        o.stopPropagation();
      else if (Hg(e, o), n & 4 && -1 < U1.indexOf(e)) {
        for (; d !== null; ) {
          var y = Ia(d);
          if (y !== null)
            switch (y.tag) {
              case 3:
                if (y = y.stateNode, y.current.memoizedState.isDehydrated) {
                  var x = Xe(y.pendingLanes);
                  if (x !== 0) {
                    var L = y;
                    for (L.pendingLanes |= 2, L.entangledLanes |= 2; x; ) {
                      var U = 1 << 31 - ge(x);
                      L.entanglements[1] |= U, x &= ~U;
                    }
                    er(y), (nt & 6) === 0 && (Xo = vt() + 500, bs(0));
                  }
                }
                break;
              case 13:
                L = Ka(y, 2), L !== null && Cn(L, y, 2), Qo(), Pd(y, 2);
            }
          if (y = Id(o), y === null && Cd(
            e,
            n,
            o,
            fu,
            i
          ), y === d) break;
          d = y;
        }
        d !== null && o.stopPropagation();
      } else
        Cd(
          e,
          n,
          o,
          null,
          i
        );
    }
  }
  function Id(e) {
    return e = Gl(e), Bd(e);
  }
  var fu = null;
  function Bd(e) {
    if (fu = null, e = za(e), e !== null) {
      var n = l(e);
      if (n === null) e = null;
      else {
        var i = n.tag;
        if (i === 13) {
          if (e = h(n), e !== null) return e;
          e = null;
        } else if (i === 3) {
          if (n.stateNode.current.memoizedState.isDehydrated)
            return n.tag === 3 ? n.stateNode.containerInfo : null;
          e = null;
        } else n !== e && (e = null);
      }
    }
    return fu = e, null;
  }
  function Ug(e) {
    switch (e) {
      case "beforetoggle":
      case "cancel":
      case "click":
      case "close":
      case "contextmenu":
      case "copy":
      case "cut":
      case "auxclick":
      case "dblclick":
      case "dragend":
      case "dragstart":
      case "drop":
      case "focusin":
      case "focusout":
      case "input":
      case "invalid":
      case "keydown":
      case "keypress":
      case "keyup":
      case "mousedown":
      case "mouseup":
      case "paste":
      case "pause":
      case "play":
      case "pointercancel":
      case "pointerdown":
      case "pointerup":
      case "ratechange":
      case "reset":
      case "resize":
      case "seeked":
      case "submit":
      case "toggle":
      case "touchcancel":
      case "touchend":
      case "touchstart":
      case "volumechange":
      case "change":
      case "selectionchange":
      case "textInput":
      case "compositionstart":
      case "compositionend":
      case "compositionupdate":
      case "beforeblur":
      case "afterblur":
      case "beforeinput":
      case "blur":
      case "fullscreenchange":
      case "focus":
      case "hashchange":
      case "popstate":
      case "select":
      case "selectstart":
        return 2;
      case "drag":
      case "dragenter":
      case "dragexit":
      case "dragleave":
      case "dragover":
      case "mousemove":
      case "mouseout":
      case "mouseover":
      case "pointermove":
      case "pointerout":
      case "pointerover":
      case "scroll":
      case "touchmove":
      case "wheel":
      case "mouseenter":
      case "mouseleave":
      case "pointerenter":
      case "pointerleave":
        return 8;
      case "message":
        switch (vn()) {
          case St:
            return 2;
          case me:
            return 8;
          case B:
          case V:
            return 32;
          case ae:
            return 268435456;
          default:
            return 32;
        }
      default:
        return 32;
    }
  }
  var Ud = !1, $r = null, Vr = null, Yr = null, ks = /* @__PURE__ */ new Map(), xs = /* @__PURE__ */ new Map(), Fr = [], U1 = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(
    " "
  );
  function Hg(e, n) {
    switch (e) {
      case "focusin":
      case "focusout":
        $r = null;
        break;
      case "dragenter":
      case "dragleave":
        Vr = null;
        break;
      case "mouseover":
      case "mouseout":
        Yr = null;
        break;
      case "pointerover":
      case "pointerout":
        ks.delete(n.pointerId);
        break;
      case "gotpointercapture":
      case "lostpointercapture":
        xs.delete(n.pointerId);
    }
  }
  function Ns(e, n, i, o, d, y) {
    return e === null || e.nativeEvent !== y ? (e = {
      blockedOn: n,
      domEventName: i,
      eventSystemFlags: o,
      nativeEvent: y,
      targetContainers: [d]
    }, n !== null && (n = Ia(n), n !== null && Bg(n)), e) : (e.eventSystemFlags |= o, n = e.targetContainers, d !== null && n.indexOf(d) === -1 && n.push(d), e);
  }
  function H1(e, n, i, o, d) {
    switch (n) {
      case "focusin":
        return $r = Ns(
          $r,
          e,
          n,
          i,
          o,
          d
        ), !0;
      case "dragenter":
        return Vr = Ns(
          Vr,
          e,
          n,
          i,
          o,
          d
        ), !0;
      case "mouseover":
        return Yr = Ns(
          Yr,
          e,
          n,
          i,
          o,
          d
        ), !0;
      case "pointerover":
        var y = d.pointerId;
        return ks.set(
          y,
          Ns(
            ks.get(y) || null,
            e,
            n,
            i,
            o,
            d
          )
        ), !0;
      case "gotpointercapture":
        return y = d.pointerId, xs.set(
          y,
          Ns(
            xs.get(y) || null,
            e,
            n,
            i,
            o,
            d
          )
        ), !0;
    }
    return !1;
  }
  function qg(e) {
    var n = za(e.target);
    if (n !== null) {
      var i = l(n);
      if (i !== null) {
        if (n = i.tag, n === 13) {
          if (n = h(i), n !== null) {
            e.blockedOn = n, Db(e.priority, function() {
              if (i.tag === 13) {
                var o = En();
                o = Rl(o);
                var d = Ka(i, o);
                d !== null && Cn(d, i, o), Pd(i, o);
              }
            });
            return;
          }
        } else if (n === 3 && i.stateNode.current.memoizedState.isDehydrated) {
          e.blockedOn = i.tag === 3 ? i.stateNode.containerInfo : null;
          return;
        }
      }
    }
    e.blockedOn = null;
  }
  function hu(e) {
    if (e.blockedOn !== null) return !1;
    for (var n = e.targetContainers; 0 < n.length; ) {
      var i = Id(e.nativeEvent);
      if (i === null) {
        i = e.nativeEvent;
        var o = new i.constructor(
          i.type,
          i
        );
        ql = o, i.target.dispatchEvent(o), ql = null;
      } else
        return n = Ia(i), n !== null && Bg(n), e.blockedOn = i, !1;
      n.shift();
    }
    return !0;
  }
  function Gg(e, n, i) {
    hu(e) && i.delete(n);
  }
  function q1() {
    Ud = !1, $r !== null && hu($r) && ($r = null), Vr !== null && hu(Vr) && (Vr = null), Yr !== null && hu(Yr) && (Yr = null), ks.forEach(Gg), xs.forEach(Gg);
  }
  function pu(e, n) {
    e.blockedOn === n && (e.blockedOn = null, Ud || (Ud = !0, t.unstable_scheduleCallback(
      t.unstable_NormalPriority,
      q1
    )));
  }
  var mu = null;
  function Zg(e) {
    mu !== e && (mu = e, t.unstable_scheduleCallback(
      t.unstable_NormalPriority,
      function() {
        mu === e && (mu = null);
        for (var n = 0; n < e.length; n += 3) {
          var i = e[n], o = e[n + 1], d = e[n + 2];
          if (typeof o != "function") {
            if (Bd(o || i) === null)
              continue;
            break;
          }
          var y = Ia(i);
          y !== null && (e.splice(n, 3), n -= 3, Bc(
            y,
            {
              pending: !0,
              data: d,
              method: i.method,
              action: o
            },
            o,
            d
          ));
        }
      }
    ));
  }
  function Os(e) {
    function n(U) {
      return pu(U, e);
    }
    $r !== null && pu($r, e), Vr !== null && pu(Vr, e), Yr !== null && pu(Yr, e), ks.forEach(n), xs.forEach(n);
    for (var i = 0; i < Fr.length; i++) {
      var o = Fr[i];
      o.blockedOn === e && (o.blockedOn = null);
    }
    for (; 0 < Fr.length && (i = Fr[0], i.blockedOn === null); )
      qg(i), i.blockedOn === null && Fr.shift();
    if (i = (e.ownerDocument || e).$$reactFormReplay, i != null)
      for (o = 0; o < i.length; o += 3) {
        var d = i[o], y = i[o + 1], x = d[sn] || null;
        if (typeof y == "function")
          x || Zg(i);
        else if (x) {
          var L = null;
          if (y && y.hasAttribute("formAction")) {
            if (d = y, x = y[sn] || null)
              L = x.formAction;
            else if (Bd(d) !== null) continue;
          } else L = x.action;
          typeof L == "function" ? i[o + 1] = L : (i.splice(o, 3), o -= 3), Zg(i);
        }
      }
  }
  function Hd(e) {
    this._internalRoot = e;
  }
  gu.prototype.render = Hd.prototype.render = function(e) {
    var n = this._internalRoot;
    if (n === null) throw Error(a(409));
    var i = n.current, o = En();
    zg(i, o, e, n, null, null);
  }, gu.prototype.unmount = Hd.prototype.unmount = function() {
    var e = this._internalRoot;
    if (e !== null) {
      this._internalRoot = null;
      var n = e.containerInfo;
      zg(e.current, 2, null, e, null, null), Qo(), n[Pa] = null;
    }
  };
  function gu(e) {
    this._internalRoot = e;
  }
  gu.prototype.unstable_scheduleHydration = function(e) {
    if (e) {
      var n = oh();
      e = { blockedOn: null, target: e, priority: n };
      for (var i = 0; i < Fr.length && n !== 0 && n < Fr[i].priority; i++) ;
      Fr.splice(i, 0, e), i === 0 && qg(e);
    }
  };
  var $g = r.version;
  if ($g !== "19.1.1")
    throw Error(
      a(
        527,
        $g,
        "19.1.1"
      )
    );
  q.findDOMNode = function(e) {
    var n = e._reactInternals;
    if (n === void 0)
      throw typeof e.render == "function" ? Error(a(188)) : (e = Object.keys(e).join(","), Error(a(268, e)));
    return e = f(n), e = e !== null ? g(e) : null, e = e === null ? null : e.stateNode, e;
  };
  var G1 = {
    bundleType: 0,
    version: "19.1.1",
    rendererPackageName: "react-dom",
    currentDispatcherRef: R,
    reconcilerVersion: "19.1.1"
  };
  if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u") {
    var vu = __REACT_DEVTOOLS_GLOBAL_HOOK__;
    if (!vu.isDisabled && vu.supportsFiber)
      try {
        ve = vu.inject(
          G1
        ), Ee = vu;
      } catch {
      }
  }
  return Ds.createRoot = function(e, n) {
    if (!u(e)) throw Error(a(299));
    var i = !1, o = "", d = om, y = um, x = lm, L = null;
    return n != null && (n.unstable_strictMode === !0 && (i = !0), n.identifierPrefix !== void 0 && (o = n.identifierPrefix), n.onUncaughtError !== void 0 && (d = n.onUncaughtError), n.onCaughtError !== void 0 && (y = n.onCaughtError), n.onRecoverableError !== void 0 && (x = n.onRecoverableError), n.unstable_transitionCallbacks !== void 0 && (L = n.unstable_transitionCallbacks)), n = Lg(
      e,
      1,
      !1,
      null,
      null,
      i,
      o,
      d,
      y,
      x,
      L,
      null
    ), e[Pa] = n.current, Ed(e), new Hd(n);
  }, Ds.hydrateRoot = function(e, n, i) {
    if (!u(e)) throw Error(a(299));
    var o = !1, d = "", y = om, x = um, L = lm, U = null, J = null;
    return i != null && (i.unstable_strictMode === !0 && (o = !0), i.identifierPrefix !== void 0 && (d = i.identifierPrefix), i.onUncaughtError !== void 0 && (y = i.onUncaughtError), i.onCaughtError !== void 0 && (x = i.onCaughtError), i.onRecoverableError !== void 0 && (L = i.onRecoverableError), i.unstable_transitionCallbacks !== void 0 && (U = i.unstable_transitionCallbacks), i.formState !== void 0 && (J = i.formState)), n = Lg(
      e,
      1,
      !0,
      n,
      i ?? null,
      o,
      d,
      y,
      x,
      L,
      U,
      J
    ), n.context = Pg(null), i = n.current, o = En(), o = Rl(o), d = Mr(o), d.callback = null, Rr(i, d, o), i = o, n.current.lanes = i, Pi(n, i), er(n), e[Pa] = n.current, Ed(e), new gu(n);
  }, Ds.version = "19.1.1", Ds;
}
var sv;
function T2() {
  if (sv) return $d.exports;
  sv = 1;
  function t() {
    if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function"))
      try {
        __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t);
      } catch (r) {
        console.error(r);
      }
  }
  return t(), $d.exports = A2(), $d.exports;
}
var k2 = T2();
const ov = /* @__PURE__ */ Uf(k2);
var x2 = Object.defineProperty, N2 = (t, r, s) => r in t ? x2(t, r, { enumerable: !0, configurable: !0, writable: !0, value: s }) : t[r] = s, uv = (t, r, s) => N2(t, typeof r != "symbol" ? r + "" : r, s);
class h0 {
  constructor(r, s) {
    uv(this, "settingsKey"), uv(this, "defaultSettings"), this.settingsKey = r, this.defaultSettings = s;
  }
  /**
   * If defaultSettings has "version" and "formatVersion" properties, they will be used to track version and format version changes.
   *
   * For example, if you want to show a notification when a new version is released, you can check "result.version.changed".
   *
   * @param [options={}]
   * @param [options.strategy='recursive'] - 'recursive' will migrate old settings with the default settings.
   *
   * For complex settings, you can specify a custom migration strategy. For example, if you change the field name from "old" to "new", you can use:
   * @example
   * [
   *   {
   *     from: 'FORMAT-0.1.0',
   *     to: 'FORMAT-0.1.1',
   *     action: (previous) => {
   *       const data = {
   *         ...previous,
   *         new: previous.old,
   *       };
   *       delete data.old;
   *       return data;
   *     },
   *   },
   * ]
   */
  async initializeSettings(r = {}) {
    const { strategy: s = "recursive" } = r, a = this.defaultSettings.version, u = this.defaultSettings.formatVersion, l = SillyTavern.getContext().extensionSettings[this.settingsKey], h = {
      version: {
        changed: !1,
        new: a ?? ""
      },
      formatVersion: {
        changed: !1,
        new: u ?? ""
      },
      oldSettings: null,
      newSettings: this.defaultSettings
    };
    if (!l)
      return SillyTavern.getContext().extensionSettings[this.settingsKey] = this.defaultSettings, this.saveSettings(), h;
    const m = {
      ...h,
      oldSettings: structuredClone(l),
      version: {
        changed: !1,
        old: l.version,
        new: l.version
      },
      formatVersion: {
        changed: !1,
        old: l.formatVersion,
        new: l.formatVersion
      }
    };
    if (s === "recursive") {
      let f = function(g, v) {
        let E = !1;
        for (const _ of Object.keys(v))
          g[_] === void 0 ? (g[_] = v[_], E = !0) : typeof v[_] == "object" && v[_] !== null && (g[_] = g[_] || {}, f(g[_], v[_]) && (E = !0));
        return E;
      };
      a && l.version !== a && (m.version.changed = !0, m.version.new = a, l.version = a), u && u !== "*" && l.formatVersion !== u && (m.formatVersion.changed = !0, m.formatVersion.new = u, l.formatVersion = u), (f(l, this.defaultSettings) || m.version.changed || m.formatVersion.changed) && this.saveSettings();
    } else if (Array.isArray(s)) {
      a && !l.version && (l.version = a, m.version.changed = !0, m.version.new = a), u && !l.formatVersion && (l.formatVersion = u, m.formatVersion.changed = !0, m.formatVersion.new = u);
      let f = structuredClone(l), g = l.formatVersion;
      try {
        let v;
        do {
          v = !1;
          let E = s.find((_) => _.from === g);
          if (E && E.to > g)
            f = await E.action(f), g = E.to, f.formatVersion = E.to, v = !0;
          else
            for (const _ of s)
              if (_.from === "*" && _.to > g && g !== _.to) {
                f = await _.action(f), g = _.to, f.formatVersion = _.to, v = !0;
                break;
              }
        } while (v);
        if (g !== l.formatVersion) {
          m.formatVersion.changed = !0, m.formatVersion.new = g;
          const E = this.defaultSettings.version;
          E && (f.version = E);
        }
        if (m.formatVersion.changed) {
          for (const E of Object.keys(l))
            delete l[E];
          Object.assign(l, f), this.saveSettings();
        }
      } catch (v) {
        throw console.error("Failed to apply version changes:", v), new Error(`Version migration failed: ${v instanceof Error ? v.message : v}`, {
          cause: v
        });
      }
    }
    return m.newSettings = l, m;
  }
  getSettings() {
    return SillyTavern.getContext().extensionSettings[this.settingsKey];
  }
  updateSetting(r, s) {
    SillyTavern.getContext().extensionSettings[this.settingsKey][r] = s, this.saveSettings();
  }
  saveSettings() {
    SillyTavern.getContext().saveSettingsDebounced();
  }
  resetSettings() {
    SillyTavern.getContext().extensionSettings[this.settingsKey] = this.defaultSettings, this.saveSettings();
  }
}
function Cr(t) {
  return Array.isArray ? Array.isArray(t) : g0(t) === "[object Array]";
}
function O2(t) {
  if (typeof t == "string")
    return t;
  let r = t + "";
  return r == "0" && 1 / t == -1 / 0 ? "-0" : r;
}
function M2(t) {
  return t == null ? "" : O2(t);
}
function tr(t) {
  return typeof t == "string";
}
function p0(t) {
  return typeof t == "number";
}
function R2(t) {
  return t === !0 || t === !1 || j2(t) && g0(t) == "[object Boolean]";
}
function m0(t) {
  return typeof t == "object";
}
function j2(t) {
  return m0(t) && t !== null;
}
function xn(t) {
  return t != null;
}
function Xd(t) {
  return !t.trim().length;
}
function g0(t) {
  return t == null ? t === void 0 ? "[object Undefined]" : "[object Null]" : Object.prototype.toString.call(t);
}
const D2 = "Incorrect 'index' type", L2 = (t) => `Invalid value for key ${t}`, P2 = (t) => `Pattern length exceeds max of ${t}.`, z2 = (t) => `Missing ${t} property in key`, I2 = (t) => `Property 'weight' in key '${t}' must be a positive integer`, lv = Object.prototype.hasOwnProperty;
class B2 {
  constructor(r) {
    this._keys = [], this._keyMap = {};
    let s = 0;
    r.forEach((a) => {
      let u = v0(a);
      this._keys.push(u), this._keyMap[u.id] = u, s += u.weight;
    }), this._keys.forEach((a) => {
      a.weight /= s;
    });
  }
  get(r) {
    return this._keyMap[r];
  }
  keys() {
    return this._keys;
  }
  toJSON() {
    return JSON.stringify(this._keys);
  }
}
function v0(t) {
  let r = null, s = null, a = null, u = 1, l = null;
  if (tr(t) || Cr(t))
    a = t, r = cv(t), s = bf(t);
  else {
    if (!lv.call(t, "name"))
      throw new Error(z2("name"));
    const h = t.name;
    if (a = h, lv.call(t, "weight") && (u = t.weight, u <= 0))
      throw new Error(I2(h));
    r = cv(h), s = bf(h), l = t.getFn;
  }
  return { path: r, id: s, weight: u, src: a, getFn: l };
}
function cv(t) {
  return Cr(t) ? t : t.split(".");
}
function bf(t) {
  return Cr(t) ? t.join(".") : t;
}
function U2(t, r) {
  let s = [], a = !1;
  const u = (l, h, m) => {
    if (xn(l))
      if (!h[m])
        s.push(l);
      else {
        let f = h[m];
        const g = l[f];
        if (!xn(g))
          return;
        if (m === h.length - 1 && (tr(g) || p0(g) || R2(g)))
          s.push(M2(g));
        else if (Cr(g)) {
          a = !0;
          for (let v = 0, E = g.length; v < E; v += 1)
            u(g[v], h, m + 1);
        } else h.length && u(g, h, m + 1);
      }
  };
  return u(t, tr(r) ? r.split(".") : r, 0), a ? s : s[0];
}
const H2 = {
  // Whether the matches should be included in the result set. When `true`, each record in the result
  // set will include the indices of the matched characters.
  // These can consequently be used for highlighting purposes.
  includeMatches: !1,
  // When `true`, the matching function will continue to the end of a search pattern even if
  // a perfect match has already been located in the string.
  findAllMatches: !1,
  // Minimum number of characters that must be matched before a result is considered a match
  minMatchCharLength: 1
}, q2 = {
  // When `true`, the algorithm continues searching to the end of the input even if a perfect
  // match is found before the end of the same input.
  isCaseSensitive: !1,
  // When `true`, the algorithm will ignore diacritics (accents) in comparisons
  ignoreDiacritics: !1,
  // When true, the matching function will continue to the end of a search pattern even if
  includeScore: !1,
  // List of properties that will be searched. This also supports nested properties.
  keys: [],
  // Whether to sort the result list, by score
  shouldSort: !0,
  // Default sort function: sort by ascending score, ascending index
  sortFn: (t, r) => t.score === r.score ? t.idx < r.idx ? -1 : 1 : t.score < r.score ? -1 : 1
}, G2 = {
  // Approximately where in the text is the pattern expected to be found?
  location: 0,
  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match
  // (of both letters and location), a threshold of '1.0' would match anything.
  threshold: 0.6,
  // Determines how close the match must be to the fuzzy location (specified above).
  // An exact letter match which is 'distance' characters away from the fuzzy location
  // would score as a complete mismatch. A distance of '0' requires the match be at
  // the exact location specified, a threshold of '1000' would require a perfect match
  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.
  distance: 100
}, Z2 = {
  // When `true`, it enables the use of unix-like search commands
  useExtendedSearch: !1,
  // The get function to use when fetching an object's properties.
  // The default will search nested paths *ie foo.bar.baz*
  getFn: U2,
  // When `true`, search will ignore `location` and `distance`, so it won't matter
  // where in the string the pattern appears.
  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score
  ignoreLocation: !1,
  // When `true`, the calculation for the relevance score (used for sorting) will
  // ignore the field-length norm.
  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm
  ignoreFieldNorm: !1,
  // The weight to determine how much field length norm effects scoring.
  fieldNormWeight: 1
};
var De = {
  ...q2,
  ...H2,
  ...G2,
  ...Z2
};
const $2 = /[^ ]+/g;
function V2(t = 1, r = 3) {
  const s = /* @__PURE__ */ new Map(), a = Math.pow(10, r);
  return {
    get(u) {
      const l = u.match($2).length;
      if (s.has(l))
        return s.get(l);
      const h = 1 / Math.pow(l, 0.5 * t), m = parseFloat(Math.round(h * a) / a);
      return s.set(l, m), m;
    },
    clear() {
      s.clear();
    }
  };
}
class qf {
  constructor({
    getFn: r = De.getFn,
    fieldNormWeight: s = De.fieldNormWeight
  } = {}) {
    this.norm = V2(s, 3), this.getFn = r, this.isCreated = !1, this.setIndexRecords();
  }
  setSources(r = []) {
    this.docs = r;
  }
  setIndexRecords(r = []) {
    this.records = r;
  }
  setKeys(r = []) {
    this.keys = r, this._keysMap = {}, r.forEach((s, a) => {
      this._keysMap[s.id] = a;
    });
  }
  create() {
    this.isCreated || !this.docs.length || (this.isCreated = !0, tr(this.docs[0]) ? this.docs.forEach((r, s) => {
      this._addString(r, s);
    }) : this.docs.forEach((r, s) => {
      this._addObject(r, s);
    }), this.norm.clear());
  }
  // Adds a doc to the end of the index
  add(r) {
    const s = this.size();
    tr(r) ? this._addString(r, s) : this._addObject(r, s);
  }
  // Removes the doc at the specified index of the index
  removeAt(r) {
    this.records.splice(r, 1);
    for (let s = r, a = this.size(); s < a; s += 1)
      this.records[s].i -= 1;
  }
  getValueForItemAtKeyId(r, s) {
    return r[this._keysMap[s]];
  }
  size() {
    return this.records.length;
  }
  _addString(r, s) {
    if (!xn(r) || Xd(r))
      return;
    let a = {
      v: r,
      i: s,
      n: this.norm.get(r)
    };
    this.records.push(a);
  }
  _addObject(r, s) {
    let a = { i: s, $: {} };
    this.keys.forEach((u, l) => {
      let h = u.getFn ? u.getFn(r) : this.getFn(r, u.path);
      if (xn(h)) {
        if (Cr(h)) {
          let m = [];
          const f = [{ nestedArrIndex: -1, value: h }];
          for (; f.length; ) {
            const { nestedArrIndex: g, value: v } = f.pop();
            if (xn(v))
              if (tr(v) && !Xd(v)) {
                let E = {
                  v,
                  i: g,
                  n: this.norm.get(v)
                };
                m.push(E);
              } else Cr(v) && v.forEach((E, _) => {
                f.push({
                  nestedArrIndex: _,
                  value: E
                });
              });
          }
          a.$[l] = m;
        } else if (tr(h) && !Xd(h)) {
          let m = {
            v: h,
            n: this.norm.get(h)
          };
          a.$[l] = m;
        }
      }
    }), this.records.push(a);
  }
  toJSON() {
    return {
      keys: this.keys,
      records: this.records
    };
  }
}
function y0(t, r, { getFn: s = De.getFn, fieldNormWeight: a = De.fieldNormWeight } = {}) {
  const u = new qf({ getFn: s, fieldNormWeight: a });
  return u.setKeys(t.map(v0)), u.setSources(r), u.create(), u;
}
function Y2(t, { getFn: r = De.getFn, fieldNormWeight: s = De.fieldNormWeight } = {}) {
  const { keys: a, records: u } = t, l = new qf({ getFn: r, fieldNormWeight: s });
  return l.setKeys(a), l.setIndexRecords(u), l;
}
function yu(t, {
  errors: r = 0,
  currentLocation: s = 0,
  expectedLocation: a = 0,
  distance: u = De.distance,
  ignoreLocation: l = De.ignoreLocation
} = {}) {
  const h = r / t.length;
  if (l)
    return h;
  const m = Math.abs(a - s);
  return u ? h + m / u : m ? 1 : h;
}
function F2(t = [], r = De.minMatchCharLength) {
  let s = [], a = -1, u = -1, l = 0;
  for (let h = t.length; l < h; l += 1) {
    let m = t[l];
    m && a === -1 ? a = l : !m && a !== -1 && (u = l - 1, u - a + 1 >= r && s.push([a, u]), a = -1);
  }
  return t[l - 1] && l - a >= r && s.push([a, l - 1]), s;
}
const Na = 32;
function X2(t, r, s, {
  location: a = De.location,
  distance: u = De.distance,
  threshold: l = De.threshold,
  findAllMatches: h = De.findAllMatches,
  minMatchCharLength: m = De.minMatchCharLength,
  includeMatches: f = De.includeMatches,
  ignoreLocation: g = De.ignoreLocation
} = {}) {
  if (r.length > Na)
    throw new Error(P2(Na));
  const v = r.length, E = t.length, _ = Math.max(0, Math.min(a, E));
  let b = l, p = _;
  const C = m > 1 || f, k = C ? Array(E) : [];
  let j;
  for (; (j = t.indexOf(r, p)) > -1; ) {
    let A = yu(r, {
      currentLocation: j,
      expectedLocation: _,
      distance: u,
      ignoreLocation: g
    });
    if (b = Math.min(A, b), p = j + v, C) {
      let N = 0;
      for (; N < v; )
        k[j + N] = 1, N += 1;
    }
  }
  p = -1;
  let O = [], I = 1, c = v + E;
  const S = 1 << v - 1;
  for (let A = 0; A < v; A += 1) {
    let N = 0, D = c;
    for (; N < D; )
      yu(r, {
        errors: A,
        currentLocation: _ + D,
        expectedLocation: _,
        distance: u,
        ignoreLocation: g
      }) <= b ? N = D : c = D, D = Math.floor((c - N) / 2 + N);
    c = D;
    let M = Math.max(1, _ - D + 1), P = h ? E : Math.min(_ + D, E) + v, H = Array(P + 2);
    H[P + 1] = (1 << A) - 1;
    for (let F = P; F >= M; F -= 1) {
      let Q = F - 1, R = s[t.charAt(Q)];
      if (C && (k[Q] = +!!R), H[F] = (H[F + 1] << 1 | 1) & R, A && (H[F] |= (O[F + 1] | O[F]) << 1 | 1 | O[F + 1]), H[F] & S && (I = yu(r, {
        errors: A,
        currentLocation: Q,
        expectedLocation: _,
        distance: u,
        ignoreLocation: g
      }), I <= b)) {
        if (b = I, p = Q, p <= _)
          break;
        M = Math.max(1, 2 * _ - p);
      }
    }
    if (yu(r, {
      errors: A + 1,
      currentLocation: _,
      expectedLocation: _,
      distance: u,
      ignoreLocation: g
    }) > b)
      break;
    O = H;
  }
  const w = {
    isMatch: p >= 0,
    // Count exact matches (those with a score of 0) to be "almost" exact
    score: Math.max(1e-3, I)
  };
  if (C) {
    const A = F2(k, m);
    A.length ? f && (w.indices = A) : w.isMatch = !1;
  }
  return w;
}
function K2(t) {
  let r = {};
  for (let s = 0, a = t.length; s < a; s += 1) {
    const u = t.charAt(s);
    r[u] = (r[u] || 0) | 1 << a - s - 1;
  }
  return r;
}
const dl = String.prototype.normalize ? ((t) => t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g, "")) : ((t) => t);
class b0 {
  constructor(r, {
    location: s = De.location,
    threshold: a = De.threshold,
    distance: u = De.distance,
    includeMatches: l = De.includeMatches,
    findAllMatches: h = De.findAllMatches,
    minMatchCharLength: m = De.minMatchCharLength,
    isCaseSensitive: f = De.isCaseSensitive,
    ignoreDiacritics: g = De.ignoreDiacritics,
    ignoreLocation: v = De.ignoreLocation
  } = {}) {
    if (this.options = {
      location: s,
      threshold: a,
      distance: u,
      includeMatches: l,
      findAllMatches: h,
      minMatchCharLength: m,
      isCaseSensitive: f,
      ignoreDiacritics: g,
      ignoreLocation: v
    }, r = f ? r : r.toLowerCase(), r = g ? dl(r) : r, this.pattern = r, this.chunks = [], !this.pattern.length)
      return;
    const E = (b, p) => {
      this.chunks.push({
        pattern: b,
        alphabet: K2(b),
        startIndex: p
      });
    }, _ = this.pattern.length;
    if (_ > Na) {
      let b = 0;
      const p = _ % Na, C = _ - p;
      for (; b < C; )
        E(this.pattern.substr(b, Na), b), b += Na;
      if (p) {
        const k = _ - Na;
        E(this.pattern.substr(k), k);
      }
    } else
      E(this.pattern, 0);
  }
  searchIn(r) {
    const { isCaseSensitive: s, ignoreDiacritics: a, includeMatches: u } = this.options;
    if (r = s ? r : r.toLowerCase(), r = a ? dl(r) : r, this.pattern === r) {
      let C = {
        isMatch: !0,
        score: 0
      };
      return u && (C.indices = [[0, r.length - 1]]), C;
    }
    const {
      location: l,
      distance: h,
      threshold: m,
      findAllMatches: f,
      minMatchCharLength: g,
      ignoreLocation: v
    } = this.options;
    let E = [], _ = 0, b = !1;
    this.chunks.forEach(({ pattern: C, alphabet: k, startIndex: j }) => {
      const { isMatch: O, score: I, indices: c } = X2(r, C, k, {
        location: l + j,
        distance: h,
        threshold: m,
        findAllMatches: f,
        minMatchCharLength: g,
        includeMatches: u,
        ignoreLocation: v
      });
      O && (b = !0), _ += I, O && c && (E = [...E, ...c]);
    });
    let p = {
      isMatch: b,
      score: b ? _ / this.chunks.length : 1
    };
    return b && u && (p.indices = E), p;
  }
}
class na {
  constructor(r) {
    this.pattern = r;
  }
  static isMultiMatch(r) {
    return dv(r, this.multiRegex);
  }
  static isSingleMatch(r) {
    return dv(r, this.singleRegex);
  }
  search() {
  }
}
function dv(t, r) {
  const s = t.match(r);
  return s ? s[1] : null;
}
class Q2 extends na {
  constructor(r) {
    super(r);
  }
  static get type() {
    return "exact";
  }
  static get multiRegex() {
    return /^="(.*)"$/;
  }
  static get singleRegex() {
    return /^=(.*)$/;
  }
  search(r) {
    const s = r === this.pattern;
    return {
      isMatch: s,
      score: s ? 0 : 1,
      indices: [0, this.pattern.length - 1]
    };
  }
}
class J2 extends na {
  constructor(r) {
    super(r);
  }
  static get type() {
    return "inverse-exact";
  }
  static get multiRegex() {
    return /^!"(.*)"$/;
  }
  static get singleRegex() {
    return /^!(.*)$/;
  }
  search(r) {
    const a = r.indexOf(this.pattern) === -1;
    return {
      isMatch: a,
      score: a ? 0 : 1,
      indices: [0, r.length - 1]
    };
  }
}
class W2 extends na {
  constructor(r) {
    super(r);
  }
  static get type() {
    return "prefix-exact";
  }
  static get multiRegex() {
    return /^\^"(.*)"$/;
  }
  static get singleRegex() {
    return /^\^(.*)$/;
  }
  search(r) {
    const s = r.startsWith(this.pattern);
    return {
      isMatch: s,
      score: s ? 0 : 1,
      indices: [0, this.pattern.length - 1]
    };
  }
}
class e3 extends na {
  constructor(r) {
    super(r);
  }
  static get type() {
    return "inverse-prefix-exact";
  }
  static get multiRegex() {
    return /^!\^"(.*)"$/;
  }
  static get singleRegex() {
    return /^!\^(.*)$/;
  }
  search(r) {
    const s = !r.startsWith(this.pattern);
    return {
      isMatch: s,
      score: s ? 0 : 1,
      indices: [0, r.length - 1]
    };
  }
}
class t3 extends na {
  constructor(r) {
    super(r);
  }
  static get type() {
    return "suffix-exact";
  }
  static get multiRegex() {
    return /^"(.*)"\$$/;
  }
  static get singleRegex() {
    return /^(.*)\$$/;
  }
  search(r) {
    const s = r.endsWith(this.pattern);
    return {
      isMatch: s,
      score: s ? 0 : 1,
      indices: [r.length - this.pattern.length, r.length - 1]
    };
  }
}
class n3 extends na {
  constructor(r) {
    super(r);
  }
  static get type() {
    return "inverse-suffix-exact";
  }
  static get multiRegex() {
    return /^!"(.*)"\$$/;
  }
  static get singleRegex() {
    return /^!(.*)\$$/;
  }
  search(r) {
    const s = !r.endsWith(this.pattern);
    return {
      isMatch: s,
      score: s ? 0 : 1,
      indices: [0, r.length - 1]
    };
  }
}
class _0 extends na {
  constructor(r, {
    location: s = De.location,
    threshold: a = De.threshold,
    distance: u = De.distance,
    includeMatches: l = De.includeMatches,
    findAllMatches: h = De.findAllMatches,
    minMatchCharLength: m = De.minMatchCharLength,
    isCaseSensitive: f = De.isCaseSensitive,
    ignoreDiacritics: g = De.ignoreDiacritics,
    ignoreLocation: v = De.ignoreLocation
  } = {}) {
    super(r), this._bitapSearch = new b0(r, {
      location: s,
      threshold: a,
      distance: u,
      includeMatches: l,
      findAllMatches: h,
      minMatchCharLength: m,
      isCaseSensitive: f,
      ignoreDiacritics: g,
      ignoreLocation: v
    });
  }
  static get type() {
    return "fuzzy";
  }
  static get multiRegex() {
    return /^"(.*)"$/;
  }
  static get singleRegex() {
    return /^(.*)$/;
  }
  search(r) {
    return this._bitapSearch.searchIn(r);
  }
}
class S0 extends na {
  constructor(r) {
    super(r);
  }
  static get type() {
    return "include";
  }
  static get multiRegex() {
    return /^'"(.*)"$/;
  }
  static get singleRegex() {
    return /^'(.*)$/;
  }
  search(r) {
    let s = 0, a;
    const u = [], l = this.pattern.length;
    for (; (a = r.indexOf(this.pattern, s)) > -1; )
      s = a + l, u.push([a, s - 1]);
    const h = !!u.length;
    return {
      isMatch: h,
      score: h ? 0 : 1,
      indices: u
    };
  }
}
const _f = [
  Q2,
  S0,
  W2,
  e3,
  n3,
  t3,
  J2,
  _0
], fv = _f.length, r3 = / +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/, a3 = "|";
function i3(t, r = {}) {
  return t.split(a3).map((s) => {
    let a = s.trim().split(r3).filter((l) => l && !!l.trim()), u = [];
    for (let l = 0, h = a.length; l < h; l += 1) {
      const m = a[l];
      let f = !1, g = -1;
      for (; !f && ++g < fv; ) {
        const v = _f[g];
        let E = v.isMultiMatch(m);
        E && (u.push(new v(E, r)), f = !0);
      }
      if (!f)
        for (g = -1; ++g < fv; ) {
          const v = _f[g];
          let E = v.isSingleMatch(m);
          if (E) {
            u.push(new v(E, r));
            break;
          }
        }
    }
    return u;
  });
}
const s3 = /* @__PURE__ */ new Set([_0.type, S0.type]);
class o3 {
  constructor(r, {
    isCaseSensitive: s = De.isCaseSensitive,
    ignoreDiacritics: a = De.ignoreDiacritics,
    includeMatches: u = De.includeMatches,
    minMatchCharLength: l = De.minMatchCharLength,
    ignoreLocation: h = De.ignoreLocation,
    findAllMatches: m = De.findAllMatches,
    location: f = De.location,
    threshold: g = De.threshold,
    distance: v = De.distance
  } = {}) {
    this.query = null, this.options = {
      isCaseSensitive: s,
      ignoreDiacritics: a,
      includeMatches: u,
      minMatchCharLength: l,
      findAllMatches: m,
      ignoreLocation: h,
      location: f,
      threshold: g,
      distance: v
    }, r = s ? r : r.toLowerCase(), r = a ? dl(r) : r, this.pattern = r, this.query = i3(this.pattern, this.options);
  }
  static condition(r, s) {
    return s.useExtendedSearch;
  }
  searchIn(r) {
    const s = this.query;
    if (!s)
      return {
        isMatch: !1,
        score: 1
      };
    const { includeMatches: a, isCaseSensitive: u, ignoreDiacritics: l } = this.options;
    r = u ? r : r.toLowerCase(), r = l ? dl(r) : r;
    let h = 0, m = [], f = 0;
    for (let g = 0, v = s.length; g < v; g += 1) {
      const E = s[g];
      m.length = 0, h = 0;
      for (let _ = 0, b = E.length; _ < b; _ += 1) {
        const p = E[_], { isMatch: C, indices: k, score: j } = p.search(r);
        if (C) {
          if (h += 1, f += j, a) {
            const O = p.constructor.type;
            s3.has(O) ? m = [...m, ...k] : m.push(k);
          }
        } else {
          f = 0, h = 0, m.length = 0;
          break;
        }
      }
      if (h) {
        let _ = {
          isMatch: !0,
          score: f / h
        };
        return a && (_.indices = m), _;
      }
    }
    return {
      isMatch: !1,
      score: 1
    };
  }
}
const Sf = [];
function u3(...t) {
  Sf.push(...t);
}
function wf(t, r) {
  for (let s = 0, a = Sf.length; s < a; s += 1) {
    let u = Sf[s];
    if (u.condition(t, r))
      return new u(t, r);
  }
  return new b0(t, r);
}
const fl = {
  AND: "$and",
  OR: "$or"
}, Ef = {
  PATH: "$path",
  PATTERN: "$val"
}, Cf = (t) => !!(t[fl.AND] || t[fl.OR]), l3 = (t) => !!t[Ef.PATH], c3 = (t) => !Cr(t) && m0(t) && !Cf(t), hv = (t) => ({
  [fl.AND]: Object.keys(t).map((r) => ({
    [r]: t[r]
  }))
});
function w0(t, r, { auto: s = !0 } = {}) {
  const a = (u) => {
    let l = Object.keys(u);
    const h = l3(u);
    if (!h && l.length > 1 && !Cf(u))
      return a(hv(u));
    if (c3(u)) {
      const f = h ? u[Ef.PATH] : l[0], g = h ? u[Ef.PATTERN] : u[f];
      if (!tr(g))
        throw new Error(L2(f));
      const v = {
        keyId: bf(f),
        pattern: g
      };
      return s && (v.searcher = wf(g, r)), v;
    }
    let m = {
      children: [],
      operator: l[0]
    };
    return l.forEach((f) => {
      const g = u[f];
      Cr(g) && g.forEach((v) => {
        m.children.push(a(v));
      });
    }), m;
  };
  return Cf(t) || (t = hv(t)), a(t);
}
function d3(t, { ignoreFieldNorm: r = De.ignoreFieldNorm }) {
  t.forEach((s) => {
    let a = 1;
    s.matches.forEach(({ key: u, norm: l, score: h }) => {
      const m = u ? u.weight : null;
      a *= Math.pow(
        h === 0 && m ? Number.EPSILON : h,
        (m || 1) * (r ? 1 : l)
      );
    }), s.score = a;
  });
}
function f3(t, r) {
  const s = t.matches;
  r.matches = [], xn(s) && s.forEach((a) => {
    if (!xn(a.indices) || !a.indices.length)
      return;
    const { indices: u, value: l } = a;
    let h = {
      indices: u,
      value: l
    };
    a.key && (h.key = a.key.src), a.idx > -1 && (h.refIndex = a.idx), r.matches.push(h);
  });
}
function h3(t, r) {
  r.score = t.score;
}
function p3(t, r, {
  includeMatches: s = De.includeMatches,
  includeScore: a = De.includeScore
} = {}) {
  const u = [];
  return s && u.push(f3), a && u.push(h3), t.map((l) => {
    const { idx: h } = l, m = {
      item: r[h],
      refIndex: h
    };
    return u.length && u.forEach((f) => {
      f(l, m);
    }), m;
  });
}
class Li {
  constructor(r, s = {}, a) {
    this.options = { ...De, ...s }, this.options.useExtendedSearch, this._keyStore = new B2(this.options.keys), this.setCollection(r, a);
  }
  setCollection(r, s) {
    if (this._docs = r, s && !(s instanceof qf))
      throw new Error(D2);
    this._myIndex = s || y0(this.options.keys, this._docs, {
      getFn: this.options.getFn,
      fieldNormWeight: this.options.fieldNormWeight
    });
  }
  add(r) {
    xn(r) && (this._docs.push(r), this._myIndex.add(r));
  }
  remove(r = () => !1) {
    const s = [];
    for (let a = 0, u = this._docs.length; a < u; a += 1) {
      const l = this._docs[a];
      r(l, a) && (this.removeAt(a), a -= 1, u -= 1, s.push(l));
    }
    return s;
  }
  removeAt(r) {
    this._docs.splice(r, 1), this._myIndex.removeAt(r);
  }
  getIndex() {
    return this._myIndex;
  }
  search(r, { limit: s = -1 } = {}) {
    const {
      includeMatches: a,
      includeScore: u,
      shouldSort: l,
      sortFn: h,
      ignoreFieldNorm: m
    } = this.options;
    let f = tr(r) ? tr(this._docs[0]) ? this._searchStringList(r) : this._searchObjectList(r) : this._searchLogical(r);
    return d3(f, { ignoreFieldNorm: m }), l && f.sort(h), p0(s) && s > -1 && (f = f.slice(0, s)), p3(f, this._docs, {
      includeMatches: a,
      includeScore: u
    });
  }
  _searchStringList(r) {
    const s = wf(r, this.options), { records: a } = this._myIndex, u = [];
    return a.forEach(({ v: l, i: h, n: m }) => {
      if (!xn(l))
        return;
      const { isMatch: f, score: g, indices: v } = s.searchIn(l);
      f && u.push({
        item: l,
        idx: h,
        matches: [{ score: g, value: l, norm: m, indices: v }]
      });
    }), u;
  }
  _searchLogical(r) {
    const s = w0(r, this.options), a = (m, f, g) => {
      if (!m.children) {
        const { keyId: E, searcher: _ } = m, b = this._findMatches({
          key: this._keyStore.get(E),
          value: this._myIndex.getValueForItemAtKeyId(f, E),
          searcher: _
        });
        return b && b.length ? [
          {
            idx: g,
            item: f,
            matches: b
          }
        ] : [];
      }
      const v = [];
      for (let E = 0, _ = m.children.length; E < _; E += 1) {
        const b = m.children[E], p = a(b, f, g);
        if (p.length)
          v.push(...p);
        else if (m.operator === fl.AND)
          return [];
      }
      return v;
    }, u = this._myIndex.records, l = {}, h = [];
    return u.forEach(({ $: m, i: f }) => {
      if (xn(m)) {
        let g = a(s, m, f);
        g.length && (l[f] || (l[f] = { idx: f, item: m, matches: [] }, h.push(l[f])), g.forEach(({ matches: v }) => {
          l[f].matches.push(...v);
        }));
      }
    }), h;
  }
  _searchObjectList(r) {
    const s = wf(r, this.options), { keys: a, records: u } = this._myIndex, l = [];
    return u.forEach(({ $: h, i: m }) => {
      if (!xn(h))
        return;
      let f = [];
      a.forEach((g, v) => {
        f.push(
          ...this._findMatches({
            key: g,
            value: h[v],
            searcher: s
          })
        );
      }), f.length && l.push({
        idx: m,
        item: h,
        matches: f
      });
    }), l;
  }
  _findMatches({ key: r, value: s, searcher: a }) {
    if (!xn(s))
      return [];
    let u = [];
    if (Cr(s))
      s.forEach(({ v: l, i: h, n: m }) => {
        if (!xn(l))
          return;
        const { isMatch: f, score: g, indices: v } = a.searchIn(l);
        f && u.push({
          score: g,
          key: r,
          value: l,
          idx: h,
          norm: m,
          indices: v
        });
      });
    else {
      const { v: l, n: h } = s, { isMatch: m, score: f, indices: g } = a.searchIn(l);
      m && u.push({ score: f, key: r, value: l, norm: h, indices: g });
    }
    return u;
  }
}
Li.version = "7.1.0";
Li.createIndex = y0;
Li.parseIndex = Y2;
Li.config = De;
Li.parseQuery = w0;
u3(o3);
var m3 = Object.defineProperty, g3 = (t, r, s) => r in t ? m3(t, r, { enumerable: !0, configurable: !0, writable: !0, value: s }) : t[r] = s, v3 = (t, r, s) => g3(t, r + "", s);
let y3 = class {
  constructor() {
    v3(this, "requestMap"), this.requestMap = /* @__PURE__ */ new Map();
  }
  async abortRequest(r) {
    var s;
    const a = this.requestMap.get(r);
    if (a) {
      if (a.abortController)
        try {
          a.abortController.abort();
        } catch {
        }
      (s = a.options) != null && s.onFinish && await a.options.onFinish(r), this.requestMap.delete(r);
    }
  }
  /**
   * @returns return value is not important because request would be finished anyway. So use "options".
   */
  async generateRequest(r, s) {
    var a;
    const u = SillyTavern.getContext(), l = u.uuidv4(), h = ((a = r?.custom) == null ? void 0 : a.stream) ?? !1;
    if (this.requestMap.set(l, {
      abortController: s?.abortController,
      isStream: h,
      options: s
    }), h)
      try {
        const m = await u.ConnectionManagerRequestService.sendRequest(
          r.profileId,
          r.prompt,
          r.maxTokens,
          r.custom,
          r.overridePayload
        );
        s != null && s.onStart && await s.onStart(l);
        let f;
        for await (const g of m())
          f = g, s != null && s.onEntry && await s.onEntry(l, g);
        s != null && s.onFinish && await s.onFinish(l, f);
      } catch (m) {
        s != null && s.onFinish && await s.onFinish(l, void 0, m);
      } finally {
        this.requestMap.delete(l);
      }
    else
      try {
        s != null && s.onStart && await s.onStart(l);
        const m = await u.ConnectionManagerRequestService.sendRequest(
          r.profileId,
          r.prompt,
          r.maxTokens,
          r.custom,
          r.overridePayload
        );
        this.requestMap.get(l) && (s != null && s.onEntry && await s.onEntry(l, m), s != null && s.onFinish && await s.onFinish(l, m));
      } catch (m) {
        s != null && s.onFinish && await s.onFinish(l, void 0, m);
      } finally {
        this.requestMap.delete(l);
      }
    return l;
  }
  getActiveRequest(r) {
    var s;
    return (s = this.requestMap.get(r)) == null ? void 0 : s.abortController;
  }
  getAllActiveRequests() {
    const r = /* @__PURE__ */ new Map();
    for (const [s, a] of this.requestMap)
      r.set(s, a.abortController);
    return r;
  }
};
async function b3(t, ...r) {
  await SillyTavern.getContext().SlashCommandParser.commands[t].callback(...r);
}
async function ye(t, r, { escapeHtml: s = !0 } = {}) {
  await b3("echo", { severity: t, escapeHtml: (!!s).toString() }, r);
}
function Kd(t) {
  return F1(t);
}
function pv(t, r) {
  return V1(t, r);
}
function bu(t, r, s) {
  return Y1(t, r, s);
}
function _3(t, r, s) {
  return a2(t, r, s);
}
function S3(t, r) {
  return i2(t, r);
}
function w3(t, {
  customStoryString: r,
  customInstructSettings: s
} = {}) {
  return $1(t, { customStoryString: r, customInstructSettings: s });
}
function Ca(t) {
  return d2(t);
}
function E3() {
  return {
    prompt: Ms[Rs.prompt],
    interval: Ms[Rs.interval],
    position: Ms[Rs.position],
    depth: Ms[Rs.depth],
    role: Ms[Rs.role]
  };
}
function C3(t, r) {
  return h2(t, r);
}
function A3({
  name2: t,
  charDescription: r,
  charPersonality: s,
  Scenario: a,
  worldInfoBefore: u,
  worldInfoAfter: l,
  bias: h,
  type: m,
  quietPrompt: f,
  quietImage: g,
  extensionPrompts: v,
  cyclePrompt: E,
  systemPromptOverride: _,
  jailbreakPromptOverride: b,
  personaDescription: p,
  messages: C,
  messageExamples: k
}, j) {
  return f2(
    {
      name2: t,
      charDescription: r,
      charPersonality: s,
      Scenario: a,
      worldInfoBefore: u,
      worldInfoAfter: l,
      bias: h,
      type: m,
      quietPrompt: f,
      quietImage: g,
      cyclePrompt: E,
      systemPromptOverride: _,
      jailbreakPromptOverride: b,
      personaDescription: p,
      extensionPrompts: v,
      messages: C,
      messageExamples: k
    },
    j
  );
}
function T3(t) {
  return o2(t);
}
function k3(t) {
  return u2(t);
}
function x3(t, r, {
  characterOverride: s,
  isMarkdown: a,
  isPrompt: u,
  isEdit: l,
  depth: h
}) {
  return m2(t, r, { characterOverride: s, isMarkdown: a, isPrompt: u, isEdit: l, depth: h });
}
function N3(t, r, { characterOverride: s = null } = {}) {
  return p2(t, r, { characterOverride: s });
}
async function O3(t, r) {
  return await s2(t, r);
}
function mv(t, {
  wiFormat: r
} = {}) {
  return l2(t, { wiFormat: r });
}
function Ls(t) {
  return c2(t);
}
function E0(t, {
  manualAvatarKey: r
} = {}) {
  return g2(t, { manualAvatarKey: r });
}
function hl(t, r) {
  return Q1(t, r);
}
class M3 {
  /**
   * Encodes a string into a sequence of tokens using a simple heuristic.
   * This is a placeholder for a real tokenizer.
   */
  encode(r) {
    const s = Math.ceil(r.length / 4);
    return new Array(s).fill(" ");
  }
  /**
   * Decodes a sequence of tokens back into a string.
   * This is a placeholder and doesn't actually decode.
   */
  decode(r) {
    return r.join("");
  }
}
var R3 = Object.defineProperty, j3 = (t, r, s) => r in t ? R3(t, r, { enumerable: !0, configurable: !0, writable: !0, value: s }) : t[r] = s, _u = (t, r, s) => j3(t, typeof r != "symbol" ? r + "" : r, s);
class D3 {
  constructor(r) {
    _u(this, "messages", []), _u(this, "tokenizer"), _u(this, "maxContext"), _u(this, "currentTokenCount", 0), this.tokenizer = new M3(), this.maxContext = r;
  }
  getTokenCount(r) {
    var s, a;
    return r.content ? ((a = (s = r.source) == null ? void 0 : s.extra) == null ? void 0 : a.token_count) ?? this.tokenizer.encode(r.content).length : 0;
  }
  canFit(r) {
    return this.currentTokenCount + this.getTokenCount(r) <= this.maxContext;
  }
  add(r) {
    if (!r.content) return !0;
    const s = this.getTokenCount(r);
    return this.currentTokenCount + s > this.maxContext ? !1 : (this.messages.push(r), this.currentTokenCount += s, !0);
  }
  addFront(r) {
    if (!r.content) return !0;
    const s = this.getTokenCount(r);
    return this.currentTokenCount + s > this.maxContext ? !1 : (this.messages.unshift(r), this.currentTokenCount += s, !0);
  }
  addMany(r) {
    const s = r.filter((m) => m.content), a = s.map((m) => this.getTokenCount(m)), u = a.reduce((m, f) => m + f, 0);
    if (this.currentTokenCount + u <= this.maxContext)
      return this.messages.push(...s), this.currentTokenCount += u, !0;
    let l = 0;
    const h = [];
    for (let m = s.length - 1; m >= 0; m--) {
      const f = s[m], g = a[m];
      if (this.currentTokenCount + l + g <= this.maxContext)
        h.unshift(f), l += g;
      else
        break;
    }
    return h.length > 0 && (this.messages.push(...h), this.currentTokenCount += l), h.length === s.length;
  }
  insert(r, s) {
    if (!s.content) return !0;
    const a = this.getTokenCount(s);
    return this.currentTokenCount + a > this.maxContext ? !1 : (this.messages.splice(r, 0, s), this.currentTokenCount += a, !0);
  }
  getMessages() {
    return this.messages;
  }
}
async function C0(t, {
  targetCharacterId: r,
  presetName: s,
  instructName: a,
  contextName: u,
  syspromptName: l,
  maxContext: h,
  includeNames: m,
  ignoreCharacterFields: f,
  ignoreAuthorNote: g,
  ignoreWorldInfo: v,
  messageIndexesBetween: E
} = {}) {
  var _, b, p, C, k, j, O, I, c, S, w, A, N, D;
  if (!["textgenerationwebui", "openai"].includes(t))
    throw new Error("Unsupported API");
  const M = SillyTavern.getContext();
  let { description: P, personality: H, persona: X, scenario: F, mesExamples: Q, system: R, jailbreak: q } = f ? {
    description: "",
    personality: "",
    persona: "",
    scenario: "",
    mesExamples: "",
    system: "",
    jailbreak: ""
  } : M.getCharacterCardFields({
    chid: r
  });
  const $ = t === "textgenerationwebui" ? (_ = M.getPresetManager("instruct")) == null ? void 0 : _.getCompletionPresetByName(a) : void 0, oe = !!($ != null && $.enabled);
  let z = pv(Q, oe);
  function Z() {
    var me, B;
    if (typeof h == "number")
      return h;
    if (!h || h === "active" || !s)
      return Kd();
    if (typeof h == "number")
      return h;
    let V;
    if (t === "textgenerationwebui") {
      const ae = (me = M.getPresetManager("textgenerationwebui")) == null ? void 0 : me.getCompletionPresetByName(s);
      V = ae?.max_length;
    } else {
      const ae = (B = M.getPresetManager("openai")) == null ? void 0 : B.getCompletionPresetByName(s);
      V = ae?.openai_max_context;
    }
    return typeof V == "number" ? V : Kd();
  }
  let re = [];
  const ce = Z();
  if (ce <= 0)
    return { result: [], warnings: re };
  const fe = new D3(ce), we = M.ToolManager.isToolCallingSupported(), te = E?.start ?? 0, _e = E != null && E.end ? E.end + 1 : void 0;
  let be = te === -1 && _e === 0 ? [] : M.chat.slice(te, _e).filter((me) => {
    var B;
    return !me.is_system || we && Array.isArray((B = me.extra) == null ? void 0 : B.tool_invocations);
  });
  be = await Promise.all(
    be.map(async (me, B) => {
      var V, ae;
      let ne = me.mes, he = me.is_user ? Fg.USER_INPUT : Fg.AI_OUTPUT, ve = { isPrompt: !0, depth: be.length - B - 1 }, Ee = x3(ne, he, ve);
      return Ee = await O3(me, Ee), (V = me?.extra) != null && V.append_title && (ae = me?.extra) != null && ae.title && (Ee = `${Ee}

${me.extra.title}`), {
        ...me,
        mes: Ee,
        index: B
      };
    })
  );
  const Ze = be.map((me) => J1 ? `${me.name}: ${me.mes}` : me.mes).reverse(), { worldInfoString: $e, worldInfoBefore: Je, worldInfoAfter: et, worldInfoExamples: Ht, worldInfoDepth: qt, anBefore: Wt, anAfter: en } = v ? {
    worldInfoString: "",
    worldInfoBefore: "",
    worldInfoAfter: "",
    worldInfoExamples: [],
    worldInfoDepth: [],
    anBefore: [],
    anAfter: []
  } : await M.getWorldInfoPrompt(Ze, ce, !1);
  for (const me of Ht) {
    const B = me.content;
    if (B.length === 0)
      continue;
    const V = bu(B, wa, Kr), ae = pv(V, oe);
    me.position === W1.before ? z.unshift(...ae) : z.push(...ae);
  }
  function vt() {
    const me = [];
    for (let B = be.length - 1; B >= 0; B--) {
      const V = be[B], ae = V.name === "System" && !V.is_user ? "system" : V.is_user ? "user" : "assistant";
      me.unshift({
        role: ae,
        content: m && ae != "system" ? `${V.name}: ${V.mes}` : V.mes,
        source: V
      });
    }
    fe.addMany(me);
  }
  if (t === "textgenerationwebui") {
    const me = [...z];
    z && (z = _3(z, wa, Kr));
    const B = (b = M.getPresetManager("sysprompt")) == null ? void 0 : b.getCompletionPresetByName(l);
    B && (R = M.powerUserSettings.prefer_character_prompt && R ? R : bu(B.content, wa, Kr), R = oe ? S3(
      M.substituteParams(R, wa, Kr, B.content),
      $
    ) : R);
    const V = {
      description: P,
      personality: H,
      persona: M.powerUserSettings.persona_description_position == Vg.IN_PROMPT ? X : "",
      scenario: F,
      system: R,
      char: Kr,
      user: wa,
      wiBefore: Je,
      wiAfter: et,
      loreBefore: Je,
      loreAfter: et,
      mesExamples: z.join(""),
      mesExamplesRaw: me.join("")
    }, ae = (p = M.getPresetManager("context")) == null ? void 0 : p.getCompletionPresetByName(u);
    let ne = w3(V, {
      customInstructSettings: $,
      customStoryString: ae?.story_string
    });
    ne && fe.add({ role: "system", content: ne, ignoreInstruct: !0 }), vt();
  } else {
    let me = function(Ke) {
      const ct = Te.find((On) => On.identifier === Ke);
      if (ct)
        return ct;
      const qn = ne.prompts.find((On) => On.identifier === Ke);
      if (qn)
        return qn;
    }, B = T3(be), V = k3(z);
    async function ae() {
      let [Ke, ct] = await A3(
        {
          name2: Kr,
          charDescription: P,
          charPersonality: H,
          Scenario: F,
          worldInfoBefore: Je,
          worldInfoAfter: et,
          extensionPrompts: M.extensionPrompts,
          bias: "",
          type: "normal",
          quietPrompt: void 0,
          quietImage: void 0,
          cyclePrompt: "",
          systemPromptOverride: R,
          jailbreakPromptOverride: q,
          personaDescription: X,
          messages: B,
          messageExamples: V
        },
        !1
      );
      fe.addMany(Ke);
    }
    if (!s)
      return re.push("No preset name provided. Using default preset."), await ae(), { result: fe.getMessages(), warnings: re };
    const ne = (C = M.getPresetManager("openai")) == null ? void 0 : C.getCompletionPresetByName(s);
    if (!ne)
      return console.warn(`Preset not found: ${s}. Using current preset.`), re.push(`Preset not found: ${s}. Using current preset.`), ae(), { result: fe.getMessages(), warnings: re };
    let he = (k = ne.prompt_order) == null ? void 0 : k.find((Ke) => Ke.character_id === mn);
    if (!he && ne.prompt_order && ne.prompt_order.length > 0 && (he = ne.prompt_order[0]), !he)
      return console.warn(`No prompt order found for preset: ${s}. Using current preset.`), re.push(`No prompt order found for preset: ${s}. Using current preset.`), ae(), { result: fe.getMessages(), warnings: re };
    const ve = F && ne.scenario_format ? M.substituteParams(ne.scenario_format) : "", Ee = H && ne.personality_format ? M.substituteParams(ne.personality_format) : "", Le = M.substituteParams(ne.group_nudge_prompt), ge = ne.impersonation_prompt ? M.substituteParams(ne.impersonation_prompt) : "", Te = [];
    v || Te.push(
      {
        role: "system",
        content: mv(Je, { wiFormat: ne.wi_format }),
        identifier: "worldInfoBefore"
      },
      {
        role: "system",
        content: mv(et, { wiFormat: ne.wi_format }),
        identifier: "worldInfoAfter"
      }
    ), f || Te.push(
      { role: "system", content: P, identifier: "charDescription" },
      { role: "system", content: Ee, identifier: "charPersonality" },
      { role: "system", content: ve, identifier: "scenario" }
    ), Te.push(
      { role: "system", content: ge, identifier: "impersonate" },
      { role: "system", content: Le, identifier: "groupNudge" }
    );
    const Ye = M.extensionPrompts["1_memory"];
    Ye && Ye.value && Te.push({
      role: Ca(Ye.role),
      content: Ye.value,
      identifier: "summary",
      position: Ls(Ye.position)
    });
    const ut = M.extensionPrompts["2_floating_prompt"];
    !g && ut && ut.value && Te.push({
      role: Ca(ut.role),
      content: ut.value,
      identifier: "authorsNote",
      position: Ls(ut.position)
    });
    const at = M.extensionPrompts["3_vectors"];
    at && at.value && Te.push({
      role: "system",
      content: at.value,
      identifier: "vectorsMemory",
      position: Ls(at.position)
    });
    const Ie = M.extensionPrompts["4_vectors_data_bank"];
    Ie && Ie.value && Te.push({
      role: Ca(Ie.role),
      content: Ie.value,
      identifier: "vectorsDataBank",
      position: Ls(Ie.position)
    });
    const Xe = M.extensionPrompts.chromadb;
    Xe && Xe.value && Te.push({
      role: "system",
      content: Xe.value,
      identifier: "smartContext",
      position: Ls(Xe.position)
    }), !f && M.powerUserSettings.persona_description && M.powerUserSettings.persona_description_position === Vg.IN_PROMPT && Te.push({
      role: "system",
      content: M.powerUserSettings.persona_description,
      identifier: "personaDescription"
    }), he.order.forEach((Ke) => {
      if (!Ke.enabled)
        return;
      const ct = me(Ke.identifier);
      if (ct && ct.content) {
        fe.add({
          role: ct.role ?? "system",
          content: M.substituteParams(ct.content)
        });
        return;
      }
      Ke.identifier === "chatHistory" && vt();
    });
  }
  const vn = [
    "1_memory",
    "2_floating_prompt",
    "3_vectors",
    "4_vectors_data_bank",
    "chromadb",
    "PERSONA_DESCRIPTION",
    "QUIET_PROMPT",
    "DEPTH_PROMPT"
  ];
  for (const me in M.extensionPrompts)
    if (Object.hasOwn(M.extensionPrompts, me)) {
      const B = M.extensionPrompts[me];
      if (vn.includes(me) || !M.extensionPrompts[me].value || ![Ea.BEFORE_PROMPT, Ea.IN_PROMPT].includes(B.position) || typeof B.filter == "function" && !await B.filter()) continue;
      const V = {
        role: Ca(B.role) ?? "system",
        content: B.value
      };
      if (B.position === Ea.BEFORE_PROMPT)
        fe.insert(B.depth, V);
      else if (B.position === Ea.IN_PROMPT) {
        const ae = fe.getMessages();
        fe.insert(ae.length - B.depth, V);
      }
    }
  for (const me of qt) {
    const B = fe.getMessages();
    fe.insert(B.length - me.depth, {
      role: Ca(me.role),
      content: me.entries.join(`
`)
    });
  }
  if (!f) {
    const me = C3(an, Number(mn));
    if (an && Array.isArray(me) && me.length > 0)
      me.filter((B) => B.text).forEach((B, V) => {
        const ae = fe.getMessages();
        fe.insert(ae.length - B.depth, { role: B.role, content: B.text });
      });
    else {
      const B = bu(
        (S = (c = (I = (O = (j = M.characters[mn]) == null ? void 0 : j.data) == null ? void 0 : O.extensions) == null ? void 0 : I.depth_prompt) == null ? void 0 : c.prompt) == null ? void 0 : S.trim(),
        wa,
        Kr
      ) || "";
      if (B) {
        const V = K1, ae = ((D = (N = (A = (w = M.characters[mn]) == null ? void 0 : w.data) == null ? void 0 : A.extensions) == null ? void 0 : N.depth_prompt) == null ? void 0 : D.role) ?? X1, ne = fe.getMessages();
        fe.insert(ne.length - V, {
          role: Ca(ae),
          content: B
        });
      }
    }
  }
  let St = -1;
  if (!g) {
    const me = E3();
    if (me.prompt) {
      me.prompt = bu(me.prompt, wa, Kr);
      const B = { role: Ca(me.role), content: me.prompt };
      switch (me.position) {
        case Ea.IN_PROMPT:
          fe.insert(1, B), St = 1;
          break;
        case Ea.IN_CHAT:
          St = fe.getMessages().length - me.depth, fe.insert(St, B);
          break;
        case Ea.BEFORE_PROMPT:
          fe.addFront(B), St = 0;
          break;
      }
    }
  }
  return St >= 0 && (Wt.length > 0 && (fe.insert(St, { role: "system", content: Wt.join(`
`) }), St++), en.length > 0 && fe.insert(St + 1, { role: "system", content: en.join(`
`) })), { result: fe.getMessages(), warnings: re };
}
/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function gv(t, r) {
  var s = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var a = Object.getOwnPropertySymbols(t);
    r && (a = a.filter(function(u) {
      return Object.getOwnPropertyDescriptor(t, u).enumerable;
    })), s.push.apply(s, a);
  }
  return s;
}
function ar(t) {
  for (var r = 1; r < arguments.length; r++) {
    var s = arguments[r] != null ? arguments[r] : {};
    r % 2 ? gv(Object(s), !0).forEach(function(a) {
      L3(t, a, s[a]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(s)) : gv(Object(s)).forEach(function(a) {
      Object.defineProperty(t, a, Object.getOwnPropertyDescriptor(s, a));
    });
  }
  return t;
}
function rl(t) {
  "@babel/helpers - typeof";
  return typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? rl = function(r) {
    return typeof r;
  } : rl = function(r) {
    return r && typeof Symbol == "function" && r.constructor === Symbol && r !== Symbol.prototype ? "symbol" : typeof r;
  }, rl(t);
}
function L3(t, r, s) {
  return r in t ? Object.defineProperty(t, r, {
    value: s,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : t[r] = s, t;
}
function Ar() {
  return Ar = Object.assign || function(t) {
    for (var r = 1; r < arguments.length; r++) {
      var s = arguments[r];
      for (var a in s)
        Object.prototype.hasOwnProperty.call(s, a) && (t[a] = s[a]);
    }
    return t;
  }, Ar.apply(this, arguments);
}
function P3(t, r) {
  if (t == null) return {};
  var s = {}, a = Object.keys(t), u, l;
  for (l = 0; l < a.length; l++)
    u = a[l], !(r.indexOf(u) >= 0) && (s[u] = t[u]);
  return s;
}
function z3(t, r) {
  if (t == null) return {};
  var s = P3(t, r), a, u;
  if (Object.getOwnPropertySymbols) {
    var l = Object.getOwnPropertySymbols(t);
    for (u = 0; u < l.length; u++)
      a = l[u], !(r.indexOf(a) >= 0) && Object.prototype.propertyIsEnumerable.call(t, a) && (s[a] = t[a]);
  }
  return s;
}
var I3 = "1.15.6";
function wr(t) {
  if (typeof window < "u" && window.navigator)
    return !!/* @__PURE__ */ navigator.userAgent.match(t);
}
var Tr = wr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i), no = wr(/Edge/i), vv = wr(/firefox/i), Xs = wr(/safari/i) && !wr(/chrome/i) && !wr(/android/i), Gf = wr(/iP(ad|od|hone)/i), A0 = wr(/chrome/i) && wr(/android/i), T0 = {
  capture: !1,
  passive: !1
};
function Fe(t, r, s) {
  t.addEventListener(r, s, !Tr && T0);
}
function Ve(t, r, s) {
  t.removeEventListener(r, s, !Tr && T0);
}
function pl(t, r) {
  if (r) {
    if (r[0] === ">" && (r = r.substring(1)), t)
      try {
        if (t.matches)
          return t.matches(r);
        if (t.msMatchesSelector)
          return t.msMatchesSelector(r);
        if (t.webkitMatchesSelector)
          return t.webkitMatchesSelector(r);
      } catch {
        return !1;
      }
    return !1;
  }
}
function k0(t) {
  return t.host && t !== document && t.host.nodeType ? t.host : t.parentNode;
}
function Fn(t, r, s, a) {
  if (t) {
    s = s || document;
    do {
      if (r != null && (r[0] === ">" ? t.parentNode === s && pl(t, r) : pl(t, r)) || a && t === s)
        return t;
      if (t === s) break;
    } while (t = k0(t));
  }
  return null;
}
var yv = /\s+/g;
function Tn(t, r, s) {
  if (t && r)
    if (t.classList)
      t.classList[s ? "add" : "remove"](r);
    else {
      var a = (" " + t.className + " ").replace(yv, " ").replace(" " + r + " ", " ");
      t.className = (a + (s ? " " + r : "")).replace(yv, " ");
    }
}
function Re(t, r, s) {
  var a = t && t.style;
  if (a) {
    if (s === void 0)
      return document.defaultView && document.defaultView.getComputedStyle ? s = document.defaultView.getComputedStyle(t, "") : t.currentStyle && (s = t.currentStyle), r === void 0 ? s : s[r];
    !(r in a) && r.indexOf("webkit") === -1 && (r = "-webkit-" + r), a[r] = s + (typeof s == "string" ? "" : "px");
  }
}
function Ri(t, r) {
  var s = "";
  if (typeof t == "string")
    s = t;
  else
    do {
      var a = Re(t, "transform");
      a && a !== "none" && (s = a + " " + s);
    } while (!r && (t = t.parentNode));
  var u = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;
  return u && new u(s);
}
function x0(t, r, s) {
  if (t) {
    var a = t.getElementsByTagName(r), u = 0, l = a.length;
    if (s)
      for (; u < l; u++)
        s(a[u], u);
    return a;
  }
  return [];
}
function nr() {
  var t = document.scrollingElement;
  return t || document.documentElement;
}
function Mt(t, r, s, a, u) {
  if (!(!t.getBoundingClientRect && t !== window)) {
    var l, h, m, f, g, v, E;
    if (t !== window && t.parentNode && t !== nr() ? (l = t.getBoundingClientRect(), h = l.top, m = l.left, f = l.bottom, g = l.right, v = l.height, E = l.width) : (h = 0, m = 0, f = window.innerHeight, g = window.innerWidth, v = window.innerHeight, E = window.innerWidth), (r || s) && t !== window && (u = u || t.parentNode, !Tr))
      do
        if (u && u.getBoundingClientRect && (Re(u, "transform") !== "none" || s && Re(u, "position") !== "static")) {
          var _ = u.getBoundingClientRect();
          h -= _.top + parseInt(Re(u, "border-top-width")), m -= _.left + parseInt(Re(u, "border-left-width")), f = h + l.height, g = m + l.width;
          break;
        }
      while (u = u.parentNode);
    if (a && t !== window) {
      var b = Ri(u || t), p = b && b.a, C = b && b.d;
      b && (h /= C, m /= p, E /= p, v /= C, f = h + v, g = m + E);
    }
    return {
      top: h,
      left: m,
      bottom: f,
      right: g,
      width: E,
      height: v
    };
  }
}
function bv(t, r, s) {
  for (var a = ta(t, !0), u = Mt(t)[r]; a; ) {
    var l = Mt(a)[s], h = void 0;
    if (h = u >= l, !h) return a;
    if (a === nr()) break;
    a = ta(a, !1);
  }
  return !1;
}
function Di(t, r, s, a) {
  for (var u = 0, l = 0, h = t.children; l < h.length; ) {
    if (h[l].style.display !== "none" && h[l] !== je.ghost && (a || h[l] !== je.dragged) && Fn(h[l], s.draggable, t, !1)) {
      if (u === r)
        return h[l];
      u++;
    }
    l++;
  }
  return null;
}
function Zf(t, r) {
  for (var s = t.lastElementChild; s && (s === je.ghost || Re(s, "display") === "none" || r && !pl(s, r)); )
    s = s.previousElementSibling;
  return s || null;
}
function Un(t, r) {
  var s = 0;
  if (!t || !t.parentNode)
    return -1;
  for (; t = t.previousElementSibling; )
    t.nodeName.toUpperCase() !== "TEMPLATE" && t !== je.clone && (!r || pl(t, r)) && s++;
  return s;
}
function _v(t) {
  var r = 0, s = 0, a = nr();
  if (t)
    do {
      var u = Ri(t), l = u.a, h = u.d;
      r += t.scrollLeft * l, s += t.scrollTop * h;
    } while (t !== a && (t = t.parentNode));
  return [r, s];
}
function B3(t, r) {
  for (var s in t)
    if (t.hasOwnProperty(s)) {
      for (var a in r)
        if (r.hasOwnProperty(a) && r[a] === t[s][a]) return Number(s);
    }
  return -1;
}
function ta(t, r) {
  if (!t || !t.getBoundingClientRect) return nr();
  var s = t, a = !1;
  do
    if (s.clientWidth < s.scrollWidth || s.clientHeight < s.scrollHeight) {
      var u = Re(s);
      if (s.clientWidth < s.scrollWidth && (u.overflowX == "auto" || u.overflowX == "scroll") || s.clientHeight < s.scrollHeight && (u.overflowY == "auto" || u.overflowY == "scroll")) {
        if (!s.getBoundingClientRect || s === document.body) return nr();
        if (a || r) return s;
        a = !0;
      }
    }
  while (s = s.parentNode);
  return nr();
}
function U3(t, r) {
  if (t && r)
    for (var s in r)
      r.hasOwnProperty(s) && (t[s] = r[s]);
  return t;
}
function Qd(t, r) {
  return Math.round(t.top) === Math.round(r.top) && Math.round(t.left) === Math.round(r.left) && Math.round(t.height) === Math.round(r.height) && Math.round(t.width) === Math.round(r.width);
}
var Ks;
function N0(t, r) {
  return function() {
    if (!Ks) {
      var s = arguments, a = this;
      s.length === 1 ? t.call(a, s[0]) : t.apply(a, s), Ks = setTimeout(function() {
        Ks = void 0;
      }, r);
    }
  };
}
function H3() {
  clearTimeout(Ks), Ks = void 0;
}
function O0(t, r, s) {
  t.scrollLeft += r, t.scrollTop += s;
}
function M0(t) {
  var r = window.Polymer, s = window.jQuery || window.Zepto;
  return r && r.dom ? r.dom(t).cloneNode(!0) : s ? s(t).clone(!0)[0] : t.cloneNode(!0);
}
function R0(t, r, s) {
  var a = {};
  return Array.from(t.children).forEach(function(u) {
    var l, h, m, f;
    if (!(!Fn(u, r.draggable, t, !1) || u.animated || u === s)) {
      var g = Mt(u);
      a.left = Math.min((l = a.left) !== null && l !== void 0 ? l : 1 / 0, g.left), a.top = Math.min((h = a.top) !== null && h !== void 0 ? h : 1 / 0, g.top), a.right = Math.max((m = a.right) !== null && m !== void 0 ? m : -1 / 0, g.right), a.bottom = Math.max((f = a.bottom) !== null && f !== void 0 ? f : -1 / 0, g.bottom);
    }
  }), a.width = a.right - a.left, a.height = a.bottom - a.top, a.x = a.left, a.y = a.top, a;
}
var pn = "Sortable" + (/* @__PURE__ */ new Date()).getTime();
function q3() {
  var t = [], r;
  return {
    captureAnimationState: function() {
      if (t = [], !!this.options.animation) {
        var a = [].slice.call(this.el.children);
        a.forEach(function(u) {
          if (!(Re(u, "display") === "none" || u === je.ghost)) {
            t.push({
              target: u,
              rect: Mt(u)
            });
            var l = ar({}, t[t.length - 1].rect);
            if (u.thisAnimationDuration) {
              var h = Ri(u, !0);
              h && (l.top -= h.f, l.left -= h.e);
            }
            u.fromRect = l;
          }
        });
      }
    },
    addAnimationState: function(a) {
      t.push(a);
    },
    removeAnimationState: function(a) {
      t.splice(B3(t, {
        target: a
      }), 1);
    },
    animateAll: function(a) {
      var u = this;
      if (!this.options.animation) {
        clearTimeout(r), typeof a == "function" && a();
        return;
      }
      var l = !1, h = 0;
      t.forEach(function(m) {
        var f = 0, g = m.target, v = g.fromRect, E = Mt(g), _ = g.prevFromRect, b = g.prevToRect, p = m.rect, C = Ri(g, !0);
        C && (E.top -= C.f, E.left -= C.e), g.toRect = E, g.thisAnimationDuration && Qd(_, E) && !Qd(v, E) && // Make sure animatingRect is on line between toRect & fromRect
        (p.top - E.top) / (p.left - E.left) === (v.top - E.top) / (v.left - E.left) && (f = Z3(p, _, b, u.options)), Qd(E, v) || (g.prevFromRect = v, g.prevToRect = E, f || (f = u.options.animation), u.animate(g, p, E, f)), f && (l = !0, h = Math.max(h, f), clearTimeout(g.animationResetTimer), g.animationResetTimer = setTimeout(function() {
          g.animationTime = 0, g.prevFromRect = null, g.fromRect = null, g.prevToRect = null, g.thisAnimationDuration = null;
        }, f), g.thisAnimationDuration = f);
      }), clearTimeout(r), l ? r = setTimeout(function() {
        typeof a == "function" && a();
      }, h) : typeof a == "function" && a(), t = [];
    },
    animate: function(a, u, l, h) {
      if (h) {
        Re(a, "transition", ""), Re(a, "transform", "");
        var m = Ri(this.el), f = m && m.a, g = m && m.d, v = (u.left - l.left) / (f || 1), E = (u.top - l.top) / (g || 1);
        a.animatingX = !!v, a.animatingY = !!E, Re(a, "transform", "translate3d(" + v + "px," + E + "px,0)"), this.forRepaintDummy = G3(a), Re(a, "transition", "transform " + h + "ms" + (this.options.easing ? " " + this.options.easing : "")), Re(a, "transform", "translate3d(0,0,0)"), typeof a.animated == "number" && clearTimeout(a.animated), a.animated = setTimeout(function() {
          Re(a, "transition", ""), Re(a, "transform", ""), a.animated = !1, a.animatingX = !1, a.animatingY = !1;
        }, h);
      }
    }
  };
}
function G3(t) {
  return t.offsetWidth;
}
function Z3(t, r, s, a) {
  return Math.sqrt(Math.pow(r.top - t.top, 2) + Math.pow(r.left - t.left, 2)) / Math.sqrt(Math.pow(r.top - s.top, 2) + Math.pow(r.left - s.left, 2)) * a.animation;
}
var wi = [], Jd = {
  initializeByDefault: !0
}, ro = {
  mount: function(r) {
    for (var s in Jd)
      Jd.hasOwnProperty(s) && !(s in r) && (r[s] = Jd[s]);
    wi.forEach(function(a) {
      if (a.pluginName === r.pluginName)
        throw "Sortable: Cannot mount plugin ".concat(r.pluginName, " more than once");
    }), wi.push(r);
  },
  pluginEvent: function(r, s, a) {
    var u = this;
    this.eventCanceled = !1, a.cancel = function() {
      u.eventCanceled = !0;
    };
    var l = r + "Global";
    wi.forEach(function(h) {
      s[h.pluginName] && (s[h.pluginName][l] && s[h.pluginName][l](ar({
        sortable: s
      }, a)), s.options[h.pluginName] && s[h.pluginName][r] && s[h.pluginName][r](ar({
        sortable: s
      }, a)));
    });
  },
  initializePlugins: function(r, s, a, u) {
    wi.forEach(function(m) {
      var f = m.pluginName;
      if (!(!r.options[f] && !m.initializeByDefault)) {
        var g = new m(r, s, r.options);
        g.sortable = r, g.options = r.options, r[f] = g, Ar(a, g.defaults);
      }
    });
    for (var l in r.options)
      if (r.options.hasOwnProperty(l)) {
        var h = this.modifyOption(r, l, r.options[l]);
        typeof h < "u" && (r.options[l] = h);
      }
  },
  getEventProperties: function(r, s) {
    var a = {};
    return wi.forEach(function(u) {
      typeof u.eventProperties == "function" && Ar(a, u.eventProperties.call(s[u.pluginName], r));
    }), a;
  },
  modifyOption: function(r, s, a) {
    var u;
    return wi.forEach(function(l) {
      r[l.pluginName] && l.optionListeners && typeof l.optionListeners[s] == "function" && (u = l.optionListeners[s].call(r[l.pluginName], a));
    }), u;
  }
};
function $3(t) {
  var r = t.sortable, s = t.rootEl, a = t.name, u = t.targetEl, l = t.cloneEl, h = t.toEl, m = t.fromEl, f = t.oldIndex, g = t.newIndex, v = t.oldDraggableIndex, E = t.newDraggableIndex, _ = t.originalEvent, b = t.putSortable, p = t.extraEventProperties;
  if (r = r || s && s[pn], !!r) {
    var C, k = r.options, j = "on" + a.charAt(0).toUpperCase() + a.substr(1);
    window.CustomEvent && !Tr && !no ? C = new CustomEvent(a, {
      bubbles: !0,
      cancelable: !0
    }) : (C = document.createEvent("Event"), C.initEvent(a, !0, !0)), C.to = h || s, C.from = m || s, C.item = u || s, C.clone = l, C.oldIndex = f, C.newIndex = g, C.oldDraggableIndex = v, C.newDraggableIndex = E, C.originalEvent = _, C.pullMode = b ? b.lastPutMode : void 0;
    var O = ar(ar({}, p), ro.getEventProperties(a, r));
    for (var I in O)
      C[I] = O[I];
    s && s.dispatchEvent(C), k[j] && k[j].call(r, C);
  }
}
var V3 = ["evt"], dn = function(r, s) {
  var a = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, u = a.evt, l = z3(a, V3);
  ro.pluginEvent.bind(je)(r, s, ar({
    dragEl: pe,
    parentEl: Ct,
    ghostEl: ze,
    rootEl: pt,
    nextEl: ka,
    lastDownEl: al,
    cloneEl: bt,
    cloneHidden: ea,
    dragStarted: Zs,
    putSortable: Vt,
    activeSortable: je.active,
    originalEvent: u,
    oldIndex: xi,
    oldDraggableIndex: Qs,
    newIndex: kn,
    newDraggableIndex: Wr,
    hideGhostForTarget: P0,
    unhideGhostForTarget: z0,
    cloneNowHidden: function() {
      ea = !0;
    },
    cloneNowShown: function() {
      ea = !1;
    },
    dispatchSortableEvent: function(m) {
      nn({
        sortable: s,
        name: m,
        originalEvent: u
      });
    }
  }, l));
};
function nn(t) {
  $3(ar({
    putSortable: Vt,
    cloneEl: bt,
    targetEl: pe,
    rootEl: pt,
    oldIndex: xi,
    oldDraggableIndex: Qs,
    newIndex: kn,
    newDraggableIndex: Wr
  }, t));
}
var pe, Ct, ze, pt, ka, al, bt, ea, xi, kn, Qs, Wr, Su, Vt, ki = !1, ml = !1, gl = [], Aa, Vn, Wd, ef, Sv, wv, Zs, Ei, Js, Ws = !1, wu = !1, il, Qt, tf = [], Af = !1, vl = [], Al = typeof document < "u", Eu = Gf, Ev = no || Tr ? "cssFloat" : "float", Y3 = Al && !A0 && !Gf && "draggable" in document.createElement("div"), j0 = (function() {
  if (Al) {
    if (Tr)
      return !1;
    var t = document.createElement("x");
    return t.style.cssText = "pointer-events:auto", t.style.pointerEvents === "auto";
  }
})(), D0 = function(r, s) {
  var a = Re(r), u = parseInt(a.width) - parseInt(a.paddingLeft) - parseInt(a.paddingRight) - parseInt(a.borderLeftWidth) - parseInt(a.borderRightWidth), l = Di(r, 0, s), h = Di(r, 1, s), m = l && Re(l), f = h && Re(h), g = m && parseInt(m.marginLeft) + parseInt(m.marginRight) + Mt(l).width, v = f && parseInt(f.marginLeft) + parseInt(f.marginRight) + Mt(h).width;
  if (a.display === "flex")
    return a.flexDirection === "column" || a.flexDirection === "column-reverse" ? "vertical" : "horizontal";
  if (a.display === "grid")
    return a.gridTemplateColumns.split(" ").length <= 1 ? "vertical" : "horizontal";
  if (l && m.float && m.float !== "none") {
    var E = m.float === "left" ? "left" : "right";
    return h && (f.clear === "both" || f.clear === E) ? "vertical" : "horizontal";
  }
  return l && (m.display === "block" || m.display === "flex" || m.display === "table" || m.display === "grid" || g >= u && a[Ev] === "none" || h && a[Ev] === "none" && g + v > u) ? "vertical" : "horizontal";
}, F3 = function(r, s, a) {
  var u = a ? r.left : r.top, l = a ? r.right : r.bottom, h = a ? r.width : r.height, m = a ? s.left : s.top, f = a ? s.right : s.bottom, g = a ? s.width : s.height;
  return u === m || l === f || u + h / 2 === m + g / 2;
}, X3 = function(r, s) {
  var a;
  return gl.some(function(u) {
    var l = u[pn].options.emptyInsertThreshold;
    if (!(!l || Zf(u))) {
      var h = Mt(u), m = r >= h.left - l && r <= h.right + l, f = s >= h.top - l && s <= h.bottom + l;
      if (m && f)
        return a = u;
    }
  }), a;
}, L0 = function(r) {
  function s(l, h) {
    return function(m, f, g, v) {
      var E = m.options.group.name && f.options.group.name && m.options.group.name === f.options.group.name;
      if (l == null && (h || E))
        return !0;
      if (l == null || l === !1)
        return !1;
      if (h && l === "clone")
        return l;
      if (typeof l == "function")
        return s(l(m, f, g, v), h)(m, f, g, v);
      var _ = (h ? m : f).options.group.name;
      return l === !0 || typeof l == "string" && l === _ || l.join && l.indexOf(_) > -1;
    };
  }
  var a = {}, u = r.group;
  (!u || rl(u) != "object") && (u = {
    name: u
  }), a.name = u.name, a.checkPull = s(u.pull, !0), a.checkPut = s(u.put), a.revertClone = u.revertClone, r.group = a;
}, P0 = function() {
  !j0 && ze && Re(ze, "display", "none");
}, z0 = function() {
  !j0 && ze && Re(ze, "display", "");
};
Al && !A0 && document.addEventListener("click", function(t) {
  if (ml)
    return t.preventDefault(), t.stopPropagation && t.stopPropagation(), t.stopImmediatePropagation && t.stopImmediatePropagation(), ml = !1, !1;
}, !0);
var Ta = function(r) {
  if (pe) {
    r = r.touches ? r.touches[0] : r;
    var s = X3(r.clientX, r.clientY);
    if (s) {
      var a = {};
      for (var u in r)
        r.hasOwnProperty(u) && (a[u] = r[u]);
      a.target = a.rootEl = s, a.preventDefault = void 0, a.stopPropagation = void 0, s[pn]._onDragOver(a);
    }
  }
}, K3 = function(r) {
  pe && pe.parentNode[pn]._isOutsideThisEl(r.target);
};
function je(t, r) {
  if (!(t && t.nodeType && t.nodeType === 1))
    throw "Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));
  this.el = t, this.options = r = Ar({}, r), t[pn] = this;
  var s = {
    group: null,
    sort: !0,
    disabled: !1,
    store: null,
    handle: null,
    draggable: /^[uo]l$/i.test(t.nodeName) ? ">li" : ">*",
    swapThreshold: 1,
    // percentage; 0 <= x <= 1
    invertSwap: !1,
    // invert always
    invertedSwapThreshold: null,
    // will be set to same as swapThreshold if default
    removeCloneOnHide: !0,
    direction: function() {
      return D0(t, this.options);
    },
    ghostClass: "sortable-ghost",
    chosenClass: "sortable-chosen",
    dragClass: "sortable-drag",
    ignore: "a, img",
    filter: null,
    preventOnFilter: !0,
    animation: 0,
    easing: null,
    setData: function(h, m) {
      h.setData("Text", m.textContent);
    },
    dropBubble: !1,
    dragoverBubble: !1,
    dataIdAttr: "data-id",
    delay: 0,
    delayOnTouchOnly: !1,
    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,
    forceFallback: !1,
    fallbackClass: "sortable-fallback",
    fallbackOnBody: !1,
    fallbackTolerance: 0,
    fallbackOffset: {
      x: 0,
      y: 0
    },
    // Disabled on Safari: #1571; Enabled on Safari IOS: #2244
    supportPointer: je.supportPointer !== !1 && "PointerEvent" in window && (!Xs || Gf),
    emptyInsertThreshold: 5
  };
  ro.initializePlugins(this, t, s);
  for (var a in s)
    !(a in r) && (r[a] = s[a]);
  L0(r);
  for (var u in this)
    u.charAt(0) === "_" && typeof this[u] == "function" && (this[u] = this[u].bind(this));
  this.nativeDraggable = r.forceFallback ? !1 : Y3, this.nativeDraggable && (this.options.touchStartThreshold = 1), r.supportPointer ? Fe(t, "pointerdown", this._onTapStart) : (Fe(t, "mousedown", this._onTapStart), Fe(t, "touchstart", this._onTapStart)), this.nativeDraggable && (Fe(t, "dragover", this), Fe(t, "dragenter", this)), gl.push(this.el), r.store && r.store.get && this.sort(r.store.get(this) || []), Ar(this, q3());
}
je.prototype = /** @lends Sortable.prototype */
{
  constructor: je,
  _isOutsideThisEl: function(r) {
    !this.el.contains(r) && r !== this.el && (Ei = null);
  },
  _getDirection: function(r, s) {
    return typeof this.options.direction == "function" ? this.options.direction.call(this, r, s, pe) : this.options.direction;
  },
  _onTapStart: function(r) {
    if (r.cancelable) {
      var s = this, a = this.el, u = this.options, l = u.preventOnFilter, h = r.type, m = r.touches && r.touches[0] || r.pointerType && r.pointerType === "touch" && r, f = (m || r).target, g = r.target.shadowRoot && (r.path && r.path[0] || r.composedPath && r.composedPath()[0]) || f, v = u.filter;
      if (aS(a), !pe && !(/mousedown|pointerdown/.test(h) && r.button !== 0 || u.disabled) && !g.isContentEditable && !(!this.nativeDraggable && Xs && f && f.tagName.toUpperCase() === "SELECT") && (f = Fn(f, u.draggable, a, !1), !(f && f.animated) && al !== f)) {
        if (xi = Un(f), Qs = Un(f, u.draggable), typeof v == "function") {
          if (v.call(this, r, f, this)) {
            nn({
              sortable: s,
              rootEl: g,
              name: "filter",
              targetEl: f,
              toEl: a,
              fromEl: a
            }), dn("filter", s, {
              evt: r
            }), l && r.preventDefault();
            return;
          }
        } else if (v && (v = v.split(",").some(function(E) {
          if (E = Fn(g, E.trim(), a, !1), E)
            return nn({
              sortable: s,
              rootEl: E,
              name: "filter",
              targetEl: f,
              fromEl: a,
              toEl: a
            }), dn("filter", s, {
              evt: r
            }), !0;
        }), v)) {
          l && r.preventDefault();
          return;
        }
        u.handle && !Fn(g, u.handle, a, !1) || this._prepareDragStart(r, m, f);
      }
    }
  },
  _prepareDragStart: function(r, s, a) {
    var u = this, l = u.el, h = u.options, m = l.ownerDocument, f;
    if (a && !pe && a.parentNode === l) {
      var g = Mt(a);
      if (pt = l, pe = a, Ct = pe.parentNode, ka = pe.nextSibling, al = a, Su = h.group, je.dragged = pe, Aa = {
        target: pe,
        clientX: (s || r).clientX,
        clientY: (s || r).clientY
      }, Sv = Aa.clientX - g.left, wv = Aa.clientY - g.top, this._lastX = (s || r).clientX, this._lastY = (s || r).clientY, pe.style["will-change"] = "all", f = function() {
        if (dn("delayEnded", u, {
          evt: r
        }), je.eventCanceled) {
          u._onDrop();
          return;
        }
        u._disableDelayedDragEvents(), !vv && u.nativeDraggable && (pe.draggable = !0), u._triggerDragStart(r, s), nn({
          sortable: u,
          name: "choose",
          originalEvent: r
        }), Tn(pe, h.chosenClass, !0);
      }, h.ignore.split(",").forEach(function(v) {
        x0(pe, v.trim(), nf);
      }), Fe(m, "dragover", Ta), Fe(m, "mousemove", Ta), Fe(m, "touchmove", Ta), h.supportPointer ? (Fe(m, "pointerup", u._onDrop), !this.nativeDraggable && Fe(m, "pointercancel", u._onDrop)) : (Fe(m, "mouseup", u._onDrop), Fe(m, "touchend", u._onDrop), Fe(m, "touchcancel", u._onDrop)), vv && this.nativeDraggable && (this.options.touchStartThreshold = 4, pe.draggable = !0), dn("delayStart", this, {
        evt: r
      }), h.delay && (!h.delayOnTouchOnly || s) && (!this.nativeDraggable || !(no || Tr))) {
        if (je.eventCanceled) {
          this._onDrop();
          return;
        }
        h.supportPointer ? (Fe(m, "pointerup", u._disableDelayedDrag), Fe(m, "pointercancel", u._disableDelayedDrag)) : (Fe(m, "mouseup", u._disableDelayedDrag), Fe(m, "touchend", u._disableDelayedDrag), Fe(m, "touchcancel", u._disableDelayedDrag)), Fe(m, "mousemove", u._delayedDragTouchMoveHandler), Fe(m, "touchmove", u._delayedDragTouchMoveHandler), h.supportPointer && Fe(m, "pointermove", u._delayedDragTouchMoveHandler), u._dragStartTimer = setTimeout(f, h.delay);
      } else
        f();
    }
  },
  _delayedDragTouchMoveHandler: function(r) {
    var s = r.touches ? r.touches[0] : r;
    Math.max(Math.abs(s.clientX - this._lastX), Math.abs(s.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1)) && this._disableDelayedDrag();
  },
  _disableDelayedDrag: function() {
    pe && nf(pe), clearTimeout(this._dragStartTimer), this._disableDelayedDragEvents();
  },
  _disableDelayedDragEvents: function() {
    var r = this.el.ownerDocument;
    Ve(r, "mouseup", this._disableDelayedDrag), Ve(r, "touchend", this._disableDelayedDrag), Ve(r, "touchcancel", this._disableDelayedDrag), Ve(r, "pointerup", this._disableDelayedDrag), Ve(r, "pointercancel", this._disableDelayedDrag), Ve(r, "mousemove", this._delayedDragTouchMoveHandler), Ve(r, "touchmove", this._delayedDragTouchMoveHandler), Ve(r, "pointermove", this._delayedDragTouchMoveHandler);
  },
  _triggerDragStart: function(r, s) {
    s = s || r.pointerType == "touch" && r, !this.nativeDraggable || s ? this.options.supportPointer ? Fe(document, "pointermove", this._onTouchMove) : s ? Fe(document, "touchmove", this._onTouchMove) : Fe(document, "mousemove", this._onTouchMove) : (Fe(pe, "dragend", this), Fe(pt, "dragstart", this._onDragStart));
    try {
      document.selection ? sl(function() {
        document.selection.empty();
      }) : window.getSelection().removeAllRanges();
    } catch {
    }
  },
  _dragStarted: function(r, s) {
    if (ki = !1, pt && pe) {
      dn("dragStarted", this, {
        evt: s
      }), this.nativeDraggable && Fe(document, "dragover", K3);
      var a = this.options;
      !r && Tn(pe, a.dragClass, !1), Tn(pe, a.ghostClass, !0), je.active = this, r && this._appendGhost(), nn({
        sortable: this,
        name: "start",
        originalEvent: s
      });
    } else
      this._nulling();
  },
  _emulateDragOver: function() {
    if (Vn) {
      this._lastX = Vn.clientX, this._lastY = Vn.clientY, P0();
      for (var r = document.elementFromPoint(Vn.clientX, Vn.clientY), s = r; r && r.shadowRoot && (r = r.shadowRoot.elementFromPoint(Vn.clientX, Vn.clientY), r !== s); )
        s = r;
      if (pe.parentNode[pn]._isOutsideThisEl(r), s)
        do {
          if (s[pn]) {
            var a = void 0;
            if (a = s[pn]._onDragOver({
              clientX: Vn.clientX,
              clientY: Vn.clientY,
              target: r,
              rootEl: s
            }), a && !this.options.dragoverBubble)
              break;
          }
          r = s;
        } while (s = k0(s));
      z0();
    }
  },
  _onTouchMove: function(r) {
    if (Aa) {
      var s = this.options, a = s.fallbackTolerance, u = s.fallbackOffset, l = r.touches ? r.touches[0] : r, h = ze && Ri(ze, !0), m = ze && h && h.a, f = ze && h && h.d, g = Eu && Qt && _v(Qt), v = (l.clientX - Aa.clientX + u.x) / (m || 1) + (g ? g[0] - tf[0] : 0) / (m || 1), E = (l.clientY - Aa.clientY + u.y) / (f || 1) + (g ? g[1] - tf[1] : 0) / (f || 1);
      if (!je.active && !ki) {
        if (a && Math.max(Math.abs(l.clientX - this._lastX), Math.abs(l.clientY - this._lastY)) < a)
          return;
        this._onDragStart(r, !0);
      }
      if (ze) {
        h ? (h.e += v - (Wd || 0), h.f += E - (ef || 0)) : h = {
          a: 1,
          b: 0,
          c: 0,
          d: 1,
          e: v,
          f: E
        };
        var _ = "matrix(".concat(h.a, ",").concat(h.b, ",").concat(h.c, ",").concat(h.d, ",").concat(h.e, ",").concat(h.f, ")");
        Re(ze, "webkitTransform", _), Re(ze, "mozTransform", _), Re(ze, "msTransform", _), Re(ze, "transform", _), Wd = v, ef = E, Vn = l;
      }
      r.cancelable && r.preventDefault();
    }
  },
  _appendGhost: function() {
    if (!ze) {
      var r = this.options.fallbackOnBody ? document.body : pt, s = Mt(pe, !0, Eu, !0, r), a = this.options;
      if (Eu) {
        for (Qt = r; Re(Qt, "position") === "static" && Re(Qt, "transform") === "none" && Qt !== document; )
          Qt = Qt.parentNode;
        Qt !== document.body && Qt !== document.documentElement ? (Qt === document && (Qt = nr()), s.top += Qt.scrollTop, s.left += Qt.scrollLeft) : Qt = nr(), tf = _v(Qt);
      }
      ze = pe.cloneNode(!0), Tn(ze, a.ghostClass, !1), Tn(ze, a.fallbackClass, !0), Tn(ze, a.dragClass, !0), Re(ze, "transition", ""), Re(ze, "transform", ""), Re(ze, "box-sizing", "border-box"), Re(ze, "margin", 0), Re(ze, "top", s.top), Re(ze, "left", s.left), Re(ze, "width", s.width), Re(ze, "height", s.height), Re(ze, "opacity", "0.8"), Re(ze, "position", Eu ? "absolute" : "fixed"), Re(ze, "zIndex", "100000"), Re(ze, "pointerEvents", "none"), je.ghost = ze, r.appendChild(ze), Re(ze, "transform-origin", Sv / parseInt(ze.style.width) * 100 + "% " + wv / parseInt(ze.style.height) * 100 + "%");
    }
  },
  _onDragStart: function(r, s) {
    var a = this, u = r.dataTransfer, l = a.options;
    if (dn("dragStart", this, {
      evt: r
    }), je.eventCanceled) {
      this._onDrop();
      return;
    }
    dn("setupClone", this), je.eventCanceled || (bt = M0(pe), bt.removeAttribute("id"), bt.draggable = !1, bt.style["will-change"] = "", this._hideClone(), Tn(bt, this.options.chosenClass, !1), je.clone = bt), a.cloneId = sl(function() {
      dn("clone", a), !je.eventCanceled && (a.options.removeCloneOnHide || pt.insertBefore(bt, pe), a._hideClone(), nn({
        sortable: a,
        name: "clone"
      }));
    }), !s && Tn(pe, l.dragClass, !0), s ? (ml = !0, a._loopId = setInterval(a._emulateDragOver, 50)) : (Ve(document, "mouseup", a._onDrop), Ve(document, "touchend", a._onDrop), Ve(document, "touchcancel", a._onDrop), u && (u.effectAllowed = "move", l.setData && l.setData.call(a, u, pe)), Fe(document, "drop", a), Re(pe, "transform", "translateZ(0)")), ki = !0, a._dragStartId = sl(a._dragStarted.bind(a, s, r)), Fe(document, "selectstart", a), Zs = !0, window.getSelection().removeAllRanges(), Xs && Re(document.body, "user-select", "none");
  },
  // Returns true - if no further action is needed (either inserted or another condition)
  _onDragOver: function(r) {
    var s = this.el, a = r.target, u, l, h, m = this.options, f = m.group, g = je.active, v = Su === f, E = m.sort, _ = Vt || g, b, p = this, C = !1;
    if (Af) return;
    function k($, oe) {
      dn($, p, ar({
        evt: r,
        isOwner: v,
        axis: b ? "vertical" : "horizontal",
        revert: h,
        dragRect: u,
        targetRect: l,
        canSort: E,
        fromSortable: _,
        target: a,
        completed: O,
        onMove: function(Z, re) {
          return Cu(pt, s, pe, u, Z, Mt(Z), r, re);
        },
        changed: I
      }, oe));
    }
    function j() {
      k("dragOverAnimationCapture"), p.captureAnimationState(), p !== _ && _.captureAnimationState();
    }
    function O($) {
      return k("dragOverCompleted", {
        insertion: $
      }), $ && (v ? g._hideClone() : g._showClone(p), p !== _ && (Tn(pe, Vt ? Vt.options.ghostClass : g.options.ghostClass, !1), Tn(pe, m.ghostClass, !0)), Vt !== p && p !== je.active ? Vt = p : p === je.active && Vt && (Vt = null), _ === p && (p._ignoreWhileAnimating = a), p.animateAll(function() {
        k("dragOverAnimationComplete"), p._ignoreWhileAnimating = null;
      }), p !== _ && (_.animateAll(), _._ignoreWhileAnimating = null)), (a === pe && !pe.animated || a === s && !a.animated) && (Ei = null), !m.dragoverBubble && !r.rootEl && a !== document && (pe.parentNode[pn]._isOutsideThisEl(r.target), !$ && Ta(r)), !m.dragoverBubble && r.stopPropagation && r.stopPropagation(), C = !0;
    }
    function I() {
      kn = Un(pe), Wr = Un(pe, m.draggable), nn({
        sortable: p,
        name: "change",
        toEl: s,
        newIndex: kn,
        newDraggableIndex: Wr,
        originalEvent: r
      });
    }
    if (r.preventDefault !== void 0 && r.cancelable && r.preventDefault(), a = Fn(a, m.draggable, s, !0), k("dragOver"), je.eventCanceled) return C;
    if (pe.contains(r.target) || a.animated && a.animatingX && a.animatingY || p._ignoreWhileAnimating === a)
      return O(!1);
    if (ml = !1, g && !m.disabled && (v ? E || (h = Ct !== pt) : Vt === this || (this.lastPutMode = Su.checkPull(this, g, pe, r)) && f.checkPut(this, g, pe, r))) {
      if (b = this._getDirection(r, a) === "vertical", u = Mt(pe), k("dragOverValid"), je.eventCanceled) return C;
      if (h)
        return Ct = pt, j(), this._hideClone(), k("revert"), je.eventCanceled || (ka ? pt.insertBefore(pe, ka) : pt.appendChild(pe)), O(!0);
      var c = Zf(s, m.draggable);
      if (!c || eS(r, b, this) && !c.animated) {
        if (c === pe)
          return O(!1);
        if (c && s === r.target && (a = c), a && (l = Mt(a)), Cu(pt, s, pe, u, a, l, r, !!a) !== !1)
          return j(), c && c.nextSibling ? s.insertBefore(pe, c.nextSibling) : s.appendChild(pe), Ct = s, I(), O(!0);
      } else if (c && W3(r, b, this)) {
        var S = Di(s, 0, m, !0);
        if (S === pe)
          return O(!1);
        if (a = S, l = Mt(a), Cu(pt, s, pe, u, a, l, r, !1) !== !1)
          return j(), s.insertBefore(pe, S), Ct = s, I(), O(!0);
      } else if (a.parentNode === s) {
        l = Mt(a);
        var w = 0, A, N = pe.parentNode !== s, D = !F3(pe.animated && pe.toRect || u, a.animated && a.toRect || l, b), M = b ? "top" : "left", P = bv(a, "top", "top") || bv(pe, "top", "top"), H = P ? P.scrollTop : void 0;
        Ei !== a && (A = l[M], Ws = !1, wu = !D && m.invertSwap || N), w = tS(r, a, l, b, D ? 1 : m.swapThreshold, m.invertedSwapThreshold == null ? m.swapThreshold : m.invertedSwapThreshold, wu, Ei === a);
        var X;
        if (w !== 0) {
          var F = Un(pe);
          do
            F -= w, X = Ct.children[F];
          while (X && (Re(X, "display") === "none" || X === ze));
        }
        if (w === 0 || X === a)
          return O(!1);
        Ei = a, Js = w;
        var Q = a.nextElementSibling, R = !1;
        R = w === 1;
        var q = Cu(pt, s, pe, u, a, l, r, R);
        if (q !== !1)
          return (q === 1 || q === -1) && (R = q === 1), Af = !0, setTimeout(J3, 30), j(), R && !Q ? s.appendChild(pe) : a.parentNode.insertBefore(pe, R ? Q : a), P && O0(P, 0, H - P.scrollTop), Ct = pe.parentNode, A !== void 0 && !wu && (il = Math.abs(A - Mt(a)[M])), I(), O(!0);
      }
      if (s.contains(pe))
        return O(!1);
    }
    return !1;
  },
  _ignoreWhileAnimating: null,
  _offMoveEvents: function() {
    Ve(document, "mousemove", this._onTouchMove), Ve(document, "touchmove", this._onTouchMove), Ve(document, "pointermove", this._onTouchMove), Ve(document, "dragover", Ta), Ve(document, "mousemove", Ta), Ve(document, "touchmove", Ta);
  },
  _offUpEvents: function() {
    var r = this.el.ownerDocument;
    Ve(r, "mouseup", this._onDrop), Ve(r, "touchend", this._onDrop), Ve(r, "pointerup", this._onDrop), Ve(r, "pointercancel", this._onDrop), Ve(r, "touchcancel", this._onDrop), Ve(document, "selectstart", this);
  },
  _onDrop: function(r) {
    var s = this.el, a = this.options;
    if (kn = Un(pe), Wr = Un(pe, a.draggable), dn("drop", this, {
      evt: r
    }), Ct = pe && pe.parentNode, kn = Un(pe), Wr = Un(pe, a.draggable), je.eventCanceled) {
      this._nulling();
      return;
    }
    ki = !1, wu = !1, Ws = !1, clearInterval(this._loopId), clearTimeout(this._dragStartTimer), Tf(this.cloneId), Tf(this._dragStartId), this.nativeDraggable && (Ve(document, "drop", this), Ve(s, "dragstart", this._onDragStart)), this._offMoveEvents(), this._offUpEvents(), Xs && Re(document.body, "user-select", ""), Re(pe, "transform", ""), r && (Zs && (r.cancelable && r.preventDefault(), !a.dropBubble && r.stopPropagation()), ze && ze.parentNode && ze.parentNode.removeChild(ze), (pt === Ct || Vt && Vt.lastPutMode !== "clone") && bt && bt.parentNode && bt.parentNode.removeChild(bt), pe && (this.nativeDraggable && Ve(pe, "dragend", this), nf(pe), pe.style["will-change"] = "", Zs && !ki && Tn(pe, Vt ? Vt.options.ghostClass : this.options.ghostClass, !1), Tn(pe, this.options.chosenClass, !1), nn({
      sortable: this,
      name: "unchoose",
      toEl: Ct,
      newIndex: null,
      newDraggableIndex: null,
      originalEvent: r
    }), pt !== Ct ? (kn >= 0 && (nn({
      rootEl: Ct,
      name: "add",
      toEl: Ct,
      fromEl: pt,
      originalEvent: r
    }), nn({
      sortable: this,
      name: "remove",
      toEl: Ct,
      originalEvent: r
    }), nn({
      rootEl: Ct,
      name: "sort",
      toEl: Ct,
      fromEl: pt,
      originalEvent: r
    }), nn({
      sortable: this,
      name: "sort",
      toEl: Ct,
      originalEvent: r
    })), Vt && Vt.save()) : kn !== xi && kn >= 0 && (nn({
      sortable: this,
      name: "update",
      toEl: Ct,
      originalEvent: r
    }), nn({
      sortable: this,
      name: "sort",
      toEl: Ct,
      originalEvent: r
    })), je.active && ((kn == null || kn === -1) && (kn = xi, Wr = Qs), nn({
      sortable: this,
      name: "end",
      toEl: Ct,
      originalEvent: r
    }), this.save()))), this._nulling();
  },
  _nulling: function() {
    dn("nulling", this), pt = pe = Ct = ze = ka = bt = al = ea = Aa = Vn = Zs = kn = Wr = xi = Qs = Ei = Js = Vt = Su = je.dragged = je.ghost = je.clone = je.active = null, vl.forEach(function(r) {
      r.checked = !0;
    }), vl.length = Wd = ef = 0;
  },
  handleEvent: function(r) {
    switch (r.type) {
      case "drop":
      case "dragend":
        this._onDrop(r);
        break;
      case "dragenter":
      case "dragover":
        pe && (this._onDragOver(r), Q3(r));
        break;
      case "selectstart":
        r.preventDefault();
        break;
    }
  },
  /**
   * Serializes the item into an array of string.
   * @returns {String[]}
   */
  toArray: function() {
    for (var r = [], s, a = this.el.children, u = 0, l = a.length, h = this.options; u < l; u++)
      s = a[u], Fn(s, h.draggable, this.el, !1) && r.push(s.getAttribute(h.dataIdAttr) || rS(s));
    return r;
  },
  /**
   * Sorts the elements according to the array.
   * @param  {String[]}  order  order of the items
   */
  sort: function(r, s) {
    var a = {}, u = this.el;
    this.toArray().forEach(function(l, h) {
      var m = u.children[h];
      Fn(m, this.options.draggable, u, !1) && (a[l] = m);
    }, this), s && this.captureAnimationState(), r.forEach(function(l) {
      a[l] && (u.removeChild(a[l]), u.appendChild(a[l]));
    }), s && this.animateAll();
  },
  /**
   * Save the current sorting
   */
  save: function() {
    var r = this.options.store;
    r && r.set && r.set(this);
  },
  /**
   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.
   * @param   {HTMLElement}  el
   * @param   {String}       [selector]  default: `options.draggable`
   * @returns {HTMLElement|null}
   */
  closest: function(r, s) {
    return Fn(r, s || this.options.draggable, this.el, !1);
  },
  /**
   * Set/get option
   * @param   {string} name
   * @param   {*}      [value]
   * @returns {*}
   */
  option: function(r, s) {
    var a = this.options;
    if (s === void 0)
      return a[r];
    var u = ro.modifyOption(this, r, s);
    typeof u < "u" ? a[r] = u : a[r] = s, r === "group" && L0(a);
  },
  /**
   * Destroy
   */
  destroy: function() {
    dn("destroy", this);
    var r = this.el;
    r[pn] = null, Ve(r, "mousedown", this._onTapStart), Ve(r, "touchstart", this._onTapStart), Ve(r, "pointerdown", this._onTapStart), this.nativeDraggable && (Ve(r, "dragover", this), Ve(r, "dragenter", this)), Array.prototype.forEach.call(r.querySelectorAll("[draggable]"), function(s) {
      s.removeAttribute("draggable");
    }), this._onDrop(), this._disableDelayedDragEvents(), gl.splice(gl.indexOf(this.el), 1), this.el = r = null;
  },
  _hideClone: function() {
    if (!ea) {
      if (dn("hideClone", this), je.eventCanceled) return;
      Re(bt, "display", "none"), this.options.removeCloneOnHide && bt.parentNode && bt.parentNode.removeChild(bt), ea = !0;
    }
  },
  _showClone: function(r) {
    if (r.lastPutMode !== "clone") {
      this._hideClone();
      return;
    }
    if (ea) {
      if (dn("showClone", this), je.eventCanceled) return;
      pe.parentNode == pt && !this.options.group.revertClone ? pt.insertBefore(bt, pe) : ka ? pt.insertBefore(bt, ka) : pt.appendChild(bt), this.options.group.revertClone && this.animate(pe, bt), Re(bt, "display", ""), ea = !1;
    }
  }
};
function Q3(t) {
  t.dataTransfer && (t.dataTransfer.dropEffect = "move"), t.cancelable && t.preventDefault();
}
function Cu(t, r, s, a, u, l, h, m) {
  var f, g = t[pn], v = g.options.onMove, E;
  return window.CustomEvent && !Tr && !no ? f = new CustomEvent("move", {
    bubbles: !0,
    cancelable: !0
  }) : (f = document.createEvent("Event"), f.initEvent("move", !0, !0)), f.to = r, f.from = t, f.dragged = s, f.draggedRect = a, f.related = u || r, f.relatedRect = l || Mt(r), f.willInsertAfter = m, f.originalEvent = h, t.dispatchEvent(f), v && (E = v.call(g, f, h)), E;
}
function nf(t) {
  t.draggable = !1;
}
function J3() {
  Af = !1;
}
function W3(t, r, s) {
  var a = Mt(Di(s.el, 0, s.options, !0)), u = R0(s.el, s.options, ze), l = 10;
  return r ? t.clientX < u.left - l || t.clientY < a.top && t.clientX < a.right : t.clientY < u.top - l || t.clientY < a.bottom && t.clientX < a.left;
}
function eS(t, r, s) {
  var a = Mt(Zf(s.el, s.options.draggable)), u = R0(s.el, s.options, ze), l = 10;
  return r ? t.clientX > u.right + l || t.clientY > a.bottom && t.clientX > a.left : t.clientY > u.bottom + l || t.clientX > a.right && t.clientY > a.top;
}
function tS(t, r, s, a, u, l, h, m) {
  var f = a ? t.clientY : t.clientX, g = a ? s.height : s.width, v = a ? s.top : s.left, E = a ? s.bottom : s.right, _ = !1;
  if (!h) {
    if (m && il < g * u) {
      if (!Ws && (Js === 1 ? f > v + g * l / 2 : f < E - g * l / 2) && (Ws = !0), Ws)
        _ = !0;
      else if (Js === 1 ? f < v + il : f > E - il)
        return -Js;
    } else if (f > v + g * (1 - u) / 2 && f < E - g * (1 - u) / 2)
      return nS(r);
  }
  return _ = _ || h, _ && (f < v + g * l / 2 || f > E - g * l / 2) ? f > v + g / 2 ? 1 : -1 : 0;
}
function nS(t) {
  return Un(pe) < Un(t) ? 1 : -1;
}
function rS(t) {
  for (var r = t.tagName + t.className + t.src + t.href + t.textContent, s = r.length, a = 0; s--; )
    a += r.charCodeAt(s);
  return a.toString(36);
}
function aS(t) {
  vl.length = 0;
  for (var r = t.getElementsByTagName("input"), s = r.length; s--; ) {
    var a = r[s];
    a.checked && vl.push(a);
  }
}
function sl(t) {
  return setTimeout(t, 0);
}
function Tf(t) {
  return clearTimeout(t);
}
Al && Fe(document, "touchmove", function(t) {
  (je.active || ki) && t.cancelable && t.preventDefault();
});
je.utils = {
  on: Fe,
  off: Ve,
  css: Re,
  find: x0,
  is: function(r, s) {
    return !!Fn(r, s, r, !1);
  },
  extend: U3,
  throttle: N0,
  closest: Fn,
  toggleClass: Tn,
  clone: M0,
  index: Un,
  nextTick: sl,
  cancelNextTick: Tf,
  detectDirection: D0,
  getChild: Di,
  expando: pn
};
je.get = function(t) {
  return t[pn];
};
je.mount = function() {
  for (var t = arguments.length, r = new Array(t), s = 0; s < t; s++)
    r[s] = arguments[s];
  r[0].constructor === Array && (r = r[0]), r.forEach(function(a) {
    if (!a.prototype || !a.prototype.constructor)
      throw "Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));
    a.utils && (je.utils = ar(ar({}, je.utils), a.utils)), ro.mount(a);
  });
};
je.create = function(t, r) {
  return new je(t, r);
};
je.version = I3;
var Ot = [], $s, kf, xf = !1, rf, af, yl, Vs;
function iS() {
  function t() {
    this.defaults = {
      scroll: !0,
      forceAutoScrollFallback: !1,
      scrollSensitivity: 30,
      scrollSpeed: 10,
      bubbleScroll: !0
    };
    for (var r in this)
      r.charAt(0) === "_" && typeof this[r] == "function" && (this[r] = this[r].bind(this));
  }
  return t.prototype = {
    dragStarted: function(s) {
      var a = s.originalEvent;
      this.sortable.nativeDraggable ? Fe(document, "dragover", this._handleAutoScroll) : this.options.supportPointer ? Fe(document, "pointermove", this._handleFallbackAutoScroll) : a.touches ? Fe(document, "touchmove", this._handleFallbackAutoScroll) : Fe(document, "mousemove", this._handleFallbackAutoScroll);
    },
    dragOverCompleted: function(s) {
      var a = s.originalEvent;
      !this.options.dragOverBubble && !a.rootEl && this._handleAutoScroll(a);
    },
    drop: function() {
      this.sortable.nativeDraggable ? Ve(document, "dragover", this._handleAutoScroll) : (Ve(document, "pointermove", this._handleFallbackAutoScroll), Ve(document, "touchmove", this._handleFallbackAutoScroll), Ve(document, "mousemove", this._handleFallbackAutoScroll)), Cv(), ol(), H3();
    },
    nulling: function() {
      yl = kf = $s = xf = Vs = rf = af = null, Ot.length = 0;
    },
    _handleFallbackAutoScroll: function(s) {
      this._handleAutoScroll(s, !0);
    },
    _handleAutoScroll: function(s, a) {
      var u = this, l = (s.touches ? s.touches[0] : s).clientX, h = (s.touches ? s.touches[0] : s).clientY, m = document.elementFromPoint(l, h);
      if (yl = s, a || this.options.forceAutoScrollFallback || no || Tr || Xs) {
        sf(s, this.options, m, a);
        var f = ta(m, !0);
        xf && (!Vs || l !== rf || h !== af) && (Vs && Cv(), Vs = setInterval(function() {
          var g = ta(document.elementFromPoint(l, h), !0);
          g !== f && (f = g, ol()), sf(s, u.options, g, a);
        }, 10), rf = l, af = h);
      } else {
        if (!this.options.bubbleScroll || ta(m, !0) === nr()) {
          ol();
          return;
        }
        sf(s, this.options, ta(m, !1), !1);
      }
    }
  }, Ar(t, {
    pluginName: "scroll",
    initializeByDefault: !0
  });
}
function ol() {
  Ot.forEach(function(t) {
    clearInterval(t.pid);
  }), Ot = [];
}
function Cv() {
  clearInterval(Vs);
}
var sf = N0(function(t, r, s, a) {
  if (r.scroll) {
    var u = (t.touches ? t.touches[0] : t).clientX, l = (t.touches ? t.touches[0] : t).clientY, h = r.scrollSensitivity, m = r.scrollSpeed, f = nr(), g = !1, v;
    kf !== s && (kf = s, ol(), $s = r.scroll, v = r.scrollFn, $s === !0 && ($s = ta(s, !0)));
    var E = 0, _ = $s;
    do {
      var b = _, p = Mt(b), C = p.top, k = p.bottom, j = p.left, O = p.right, I = p.width, c = p.height, S = void 0, w = void 0, A = b.scrollWidth, N = b.scrollHeight, D = Re(b), M = b.scrollLeft, P = b.scrollTop;
      b === f ? (S = I < A && (D.overflowX === "auto" || D.overflowX === "scroll" || D.overflowX === "visible"), w = c < N && (D.overflowY === "auto" || D.overflowY === "scroll" || D.overflowY === "visible")) : (S = I < A && (D.overflowX === "auto" || D.overflowX === "scroll"), w = c < N && (D.overflowY === "auto" || D.overflowY === "scroll"));
      var H = S && (Math.abs(O - u) <= h && M + I < A) - (Math.abs(j - u) <= h && !!M), X = w && (Math.abs(k - l) <= h && P + c < N) - (Math.abs(C - l) <= h && !!P);
      if (!Ot[E])
        for (var F = 0; F <= E; F++)
          Ot[F] || (Ot[F] = {});
      (Ot[E].vx != H || Ot[E].vy != X || Ot[E].el !== b) && (Ot[E].el = b, Ot[E].vx = H, Ot[E].vy = X, clearInterval(Ot[E].pid), (H != 0 || X != 0) && (g = !0, Ot[E].pid = setInterval((function() {
        a && this.layer === 0 && je.active._onTouchMove(yl);
        var Q = Ot[this.layer].vy ? Ot[this.layer].vy * m : 0, R = Ot[this.layer].vx ? Ot[this.layer].vx * m : 0;
        typeof v == "function" && v.call(je.dragged.parentNode[pn], R, Q, t, yl, Ot[this.layer].el) !== "continue" || O0(Ot[this.layer].el, R, Q);
      }).bind({
        layer: E
      }), 24))), E++;
    } while (r.bubbleScroll && _ !== f && (_ = ta(_, !1)));
    xf = g;
  }
}, 30), I0 = function(r) {
  var s = r.originalEvent, a = r.putSortable, u = r.dragEl, l = r.activeSortable, h = r.dispatchSortableEvent, m = r.hideGhostForTarget, f = r.unhideGhostForTarget;
  if (s) {
    var g = a || l;
    m();
    var v = s.changedTouches && s.changedTouches.length ? s.changedTouches[0] : s, E = document.elementFromPoint(v.clientX, v.clientY);
    f(), g && !g.el.contains(E) && (h("spill"), this.onSpill({
      dragEl: u,
      putSortable: a
    }));
  }
};
function $f() {
}
$f.prototype = {
  startIndex: null,
  dragStart: function(r) {
    var s = r.oldDraggableIndex;
    this.startIndex = s;
  },
  onSpill: function(r) {
    var s = r.dragEl, a = r.putSortable;
    this.sortable.captureAnimationState(), a && a.captureAnimationState();
    var u = Di(this.sortable.el, this.startIndex, this.options);
    u ? this.sortable.el.insertBefore(s, u) : this.sortable.el.appendChild(s), this.sortable.animateAll(), a && a.animateAll();
  },
  drop: I0
};
Ar($f, {
  pluginName: "revertOnSpill"
});
function Vf() {
}
Vf.prototype = {
  onSpill: function(r) {
    var s = r.dragEl, a = r.putSortable, u = a || this.sortable;
    u.captureAnimationState(), s.parentNode && s.parentNode.removeChild(s), u.animateAll();
  },
  drop: I0
};
Ar(Vf, {
  pluginName: "removeOnSpill"
});
je.mount(new iS());
je.mount(Vf, $f);
async function ul(t, r, s) {
  var a, u, l;
  function h(v) {
    return t.includes("all") || t.includes(v);
  }
  const m = SillyTavern.getContext();
  let f = {};
  const g = e2;
  if (h("global") && g != null && g.length)
    for (const v of g) {
      const E = await sS(v);
      E && (f[v] || (f[v] = []), Object.values(E).forEach((_) => {
        f[v].push(_);
      }));
    }
  if (h("chat")) {
    const v = m.chatMetadata[t2];
    if (v && !f[v]) {
      f[v] = [];
      const E = await m.loadWorldInfo(v);
      E && Object.values(E.entries).forEach((_) => {
        f[v].push(_);
      });
    }
  }
  if (h("character") && s) {
    const v = m.characters[s];
    let E = /* @__PURE__ */ new Set();
    const _ = (u = (a = v?.data) == null ? void 0 : a.extensions) == null ? void 0 : u.world;
    _ && E.add(_);
    const b = E0(s), p = (l = n2.charLore) == null ? void 0 : l.find((C) => C.name === b);
    p && (E = /* @__PURE__ */ new Set([...E, ...p.extraBooks]));
    for (const C of E) {
      const k = await m.loadWorldInfo(C);
      !k || f[C] || (f[C] = [], Object.values(k.entries).forEach((j) => {
        f[C].push(j);
      }));
    }
  }
  if (h("persona")) {
    const v = m.powerUserSettings.persona_description_lorebook;
    if (v && !f[v]) {
      f[v] = [];
      const E = await m.loadWorldInfo(v);
      E && Object.values(E.entries).forEach((_) => {
        f[v].push(_);
      });
    }
  }
  return f;
}
async function sS(t) {
  const r = await SillyTavern.getContext().loadWorldInfo(t);
  return r ? Object.values(r.entries) : null;
}
const oS = `=== SILLYTAVERN===

**SillyTavern** is a popular open-source front-end interface designed for interacting with AI language models. It's primarily used for role-playing, creative writing, and conversational experiences, offering a user-friendly platform to customize interactions with AI. Here's an overview:

### Key Features:
1. **AI Backend Compatibility**: Works with APIs like OpenAI (GPT), KoboldAI, Claude, or local models (via services like Text-generation-webui or Ollama).
2. **Customization**:
   - Create and import character cards (with personas, scenarios, and dialogue examples).
   - Adjust model parameters (temperature, repetition penalties) for tailored responses.
3. **Plugins & Extensions**: Adds features like text-to-speech, image generation, emotion recognition, and world-building tools.
4. **Privacy**: Self-hosted locally, giving users control over data (unlike cloud-based services).

### Use Cases:
- Role-playing with AI characters.
- Collaborative storytelling or creative writing.
- Experimental AI interactions (users often share character templates and scripts in communities).

### Requirements:
- Technical setup involves installing Node.js, cloning the GitHub repo, and configuring API connections.
- Requires access to an AI model backend (e.g., OpenAI API key or a locally hosted model).

### Community & Ethics:
- Active communities on platforms like GitHub and Reddit share guides, characters, and plugins.
- Encourages responsible use, as the tool can generate unrestricted content depending on the AI backend.

SillyTavern is not an AI itself but a flexible interface to enhance interactions with LLMs.

=== WORLDINFO (LOREBOOKS) ===

**World Info** (often called **Lorebooks**) is a feature used in AI-driven storytelling and role-playing platforms (like SillyTavern, NovelAI, KoboldAI, or Text-generation-webui) to help AI models maintain consistency in fictional worlds. It acts as a dynamic knowledge base that the AI references during interactions to avoid contradictions and keep track of key details.

---

### **What is World Info/Lorebooks?**
- **A structured database**: Stores details about characters, locations, rules, events, or concepts in your fictional world.
- **Contextual triggers**: Entries activate automatically when specific keywords or phrases appear in the conversation/story.
- **Prevents "amnesia"**: Ensures the AI remembers critical lore without relying solely on its limited context window.

---

### **How It Works**
1. **Create Entries**: Define elements (e.g., a characters backstory, a magic systems rules).
2. **Set Triggers**: Link entries to keywords (e.g., mention "Dragonstone"  inject lore about that location).
3. **Dynamic Injection**: When a trigger word appears in the chat/story, the relevant entry is temporarily added to the AIs context.

---

### **Key Features**
- **Hierarchy**: Organize entries into categories (e.g., factions, items, timelines).
- **Priority**: Set which entries take precedence if multiple triggers occur.
- **Cross-references**: Link entries to each other (e.g., a character entry references their home city).
- **Formatting**: Use markdown, JSON, or plain text depending on the platform.

---

### **Example Lorebook Entry**
\`\`\`plaintext
Name: Dragonstone Citadel
Triggers: Dragonstone, Citadel, Obsidian Fortress
Content:
  A volcanic fortress built from black obsidian. Home to the ancient Order of Flames,
  who guard the Eternal Firea magical flame that grants visions of the future.
  The citadel is rumored to be cursed, as its rulers never live past 40 years.
\`\`\`

---

### **Use Cases**
1. **Complex Worldbuilding**: Track political factions, religions, or history.
2. **Character Consistency**: Ensure the AI remembers a characters motives, secrets, or relationships.
3. **Magic/Science Systems**: Define rules (e.g., "Magic drains lifeforce" or "Robots cannot harm humans").
4. **Plot Hooks**: Store hidden clues or foreshadowing for the AI to weave into the narrative.

---

### **Tools Supporting Lorebooks**
- **SillyTavern**: Integrates with lorebooks via extensions or prompts.
- **NovelAI**: Has a built-in "Lorebook" feature with advanced triggers.
- **KoboldAI/Text-generation-webui**: Use "world info" files or scripts.
- **AIDungeon** (historically): Early adopter of world info, though less popular now.

---

### **Best Practices**
- **Keep entries concise**: AI models process information best in short, clear snippets.
- **Balance detail**: Too many entries can overwhelm the context window.
- **Test triggers**: Ensure keywords are unique enough to avoid false activations.
- **Update dynamically**: Add/remove entries as the story evolves.

Lorebooks are essential for long-term storytelling with AI.`, uS = `{{#is_not_empty currentLorebooks}}
## CURRENT LOREBOOKS
{{#each currentLorebooks}}
## WORLD NAME: {{@key}}
  {{#each this as |entry|}}
### (NAME: {{#if entry.comment}}{{entry.comment}}{{else}}*No name*{{/if}}) (ID: {{entry.uid}})
Triggers: {{#if entry.key}}{{join entry.key ', '}}{{else}}*No triggers*{{/if}}
Content: {{#if entry.content}}{{entry.content}}{{else}}*No content*{{/if}}
  {{/each}}
{{/each}}
{{/is_not_empty}}`, lS = `{{#is_not_empty blackListedEntries}}
## BLACKLISTED ENTRIES
{{#each blackListedEntries}}
- {{this}}
{{/each}}
{{/is_not_empty}}`, cS = `{{#is_not_empty suggestedLorebooks}}
## SUGGESTED LOREBOOKS
{{#each suggestedLorebooks}}
## WORLD NAME: {{@key}}
  {{#each this as |entry|}}
### (NAME: {{#if entry.comment}}{{entry.comment}}{{else}}*No name*{{/if}}) (ID: {{entry.uid}})
Triggers: {{#if entry.key}}{{join entry.key ', '}}{{else}}*No triggers*{{/if}}
Content: {{#if entry.content}}{{entry.content}}{{else}}*No content*{{/if}}
  {{/each}}
{{/each}}
{{/is_not_empty}}`, dS = `If you are creating a new entry you should write it like this:
\`\`\`xml
<lorebooks>
    <entry>
        <worldName>World 1</worldName>
        <name>Book 1</name>
        <triggers>word1,word2</triggers>
        <content>Content of book 1</content>
    </entry>
</lorebooks>
\`\`\`

If you are updating an existing entry you should specify the id of the entry. Like this:
\`\`\`xml
<lorebooks>
    <entry>
        <worldName>World 1</worldName>
        <id>15</id> // Id should be the id of the entry
        <name>Book 1</name>
        <triggers>word1,word2</triggers>
        <content>Content of book 1</content>
    </entry>
</lorebooks>
\`\`\``, fS = `## Rules
- Don't suggest already existing or suggested entries.
{{#if userInstructions}}

## Your Task
{{userInstructions}}{{/if}}`, hS = "You are a highly specialized AI assistant. Your SOLE purpose is to generate a single, valid JSON object that strictly adheres to the provided JSON schema.\n\n**CRITICAL INSTRUCTIONS:**\n1.  You MUST wrap the entire JSON object in a markdown code block (```json\n...\n```).\n2.  Your response MUST NOT contain any explanatory text, comments, or any other content outside of this single code block.\n3.  The JSON object inside the code block MUST be valid and conform to the schema.\n\n**JSON SCHEMA TO FOLLOW:**\n```json\n{{schema}}\n```\n\n**EXAMPLE OF A PERFECT RESPONSE:**\n```json\n{{example_response}}\n```", pS = "You are a highly specialized AI assistant. Your SOLE purpose is to generate a single, valid XML structure that strictly adheres to the provided example.\n\n**CRITICAL INSTRUCTIONS:**\n1.  You MUST wrap the entire XML object in a markdown code block (```xml\n...\n```).\n2.  Your response MUST NOT contain any explanatory text, comments, or any other content outside of this single code block.\n3.  The XML object inside the code block MUST be valid.\n\n**JSON SCHEMA TO FOLLOW:**\n```json\n{{schema}}\n```\n\n**EXAMPLE OF A PERFECT RESPONSE:**\n```xml\n{{example_response}}\n```", mS = `You are an expert lorebook writer assisting a user. Your task is to respond with the modified lorebook data in the required structured format.
Your justification should be friendly and conversational. Be direct and focus on the changes you've made. Vary your responses and do not start every message the same way. Do not repeat the user's request back to them.

For this session, we are focusing on: {{#if isEntrySession}}the entry "{{targetEntryName}}".{{else}}the entire set of lorebook entries provided in the context.{{/if}}

The initial lorebook state is provided in the context. Read the user's request, and provide a response that incorporates their changes.`, gS = `{{#is_not_empty changedLorebooks}}
## LOREBOOK UPDATES (Added/Modified)
{{#each changedLorebooks}}
## WORLD NAME: {{@key}}
  {{#each this as |entry|}}
### (NAME: {{#if entry.comment}}{{entry.comment}}{{else}}*No name*{{/if}}) (ID: {{entry.uid}})
Triggers: {{#if entry.key}}{{join entry.key ', '}}{{else}}*No triggers*{{/if}}
Content: {{#if entry.content}}{{entry.content}}{{else}}*No content*{{/if}}
  {{/each}}
{{/each}}
{{/is_not_empty}}`, vS = `{{#is_not_empty removedEntries}}
## LOREBOOK UPDATES (Removed)
The following entries were removed and will no longer be part of the context:
{{#each removedEntries}}
- **{{this.comment}}** (from {{this.worldName}})
{{/each}}
{{/is_not_empty}}`, yS = `The following changes were applied to the lorebooks based on the last turn. Unlisted entries are unchanged.
{{{addedModifiedContent}}}
{{{removedContent}}}`, B0 = ":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD", bS = B0 + "\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040", _S = "[" + B0 + "][" + bS + "]*", SS = new RegExp("^" + _S + "$");
function U0(t, r) {
  const s = [];
  let a = r.exec(t);
  for (; a; ) {
    const u = [];
    u.startIndex = r.lastIndex - a[0].length;
    const l = a.length;
    for (let h = 0; h < l; h++)
      u.push(a[h]);
    s.push(u), a = r.exec(t);
  }
  return s;
}
const Yf = function(t) {
  const r = SS.exec(t);
  return !(r === null || typeof r > "u");
};
function wS(t) {
  return typeof t < "u";
}
const ES = {
  allowBooleanAttributes: !1,
  //A tag can have attributes without any value
  unpairedTags: []
};
function CS(t, r) {
  r = Object.assign({}, ES, r);
  const s = [];
  let a = !1, u = !1;
  t[0] === "\uFEFF" && (t = t.substr(1));
  for (let l = 0; l < t.length; l++)
    if (t[l] === "<" && t[l + 1] === "?") {
      if (l += 2, l = Tv(t, l), l.err) return l;
    } else if (t[l] === "<") {
      let h = l;
      if (l++, t[l] === "!") {
        l = kv(t, l);
        continue;
      } else {
        let m = !1;
        t[l] === "/" && (m = !0, l++);
        let f = "";
        for (; l < t.length && t[l] !== ">" && t[l] !== " " && t[l] !== "	" && t[l] !== `
` && t[l] !== "\r"; l++)
          f += t[l];
        if (f = f.trim(), f[f.length - 1] === "/" && (f = f.substring(0, f.length - 1), l--), !RS(f)) {
          let E;
          return f.trim().length === 0 ? E = "Invalid space after '<'." : E = "Tag '" + f + "' is an invalid name.", kt("InvalidTag", E, rn(t, l));
        }
        const g = kS(t, l);
        if (g === !1)
          return kt("InvalidAttr", "Attributes for '" + f + "' have open quote.", rn(t, l));
        let v = g.value;
        if (l = g.index, v[v.length - 1] === "/") {
          const E = l - v.length;
          v = v.substring(0, v.length - 1);
          const _ = xv(v, r);
          if (_ === !0)
            a = !0;
          else
            return kt(_.err.code, _.err.msg, rn(t, E + _.err.line));
        } else if (m)
          if (g.tagClosed) {
            if (v.trim().length > 0)
              return kt("InvalidTag", "Closing tag '" + f + "' can't have attributes or invalid starting.", rn(t, h));
            if (s.length === 0)
              return kt("InvalidTag", "Closing tag '" + f + "' has not been opened.", rn(t, h));
            {
              const E = s.pop();
              if (f !== E.tagName) {
                let _ = rn(t, E.tagStartPos);
                return kt(
                  "InvalidTag",
                  "Expected closing tag '" + E.tagName + "' (opened in line " + _.line + ", col " + _.col + ") instead of closing tag '" + f + "'.",
                  rn(t, h)
                );
              }
              s.length == 0 && (u = !0);
            }
          } else return kt("InvalidTag", "Closing tag '" + f + "' doesn't have proper closing.", rn(t, l));
        else {
          const E = xv(v, r);
          if (E !== !0)
            return kt(E.err.code, E.err.msg, rn(t, l - v.length + E.err.line));
          if (u === !0)
            return kt("InvalidXml", "Multiple possible root nodes found.", rn(t, l));
          r.unpairedTags.indexOf(f) !== -1 || s.push({ tagName: f, tagStartPos: h }), a = !0;
        }
        for (l++; l < t.length; l++)
          if (t[l] === "<")
            if (t[l + 1] === "!") {
              l++, l = kv(t, l);
              continue;
            } else if (t[l + 1] === "?") {
              if (l = Tv(t, ++l), l.err) return l;
            } else
              break;
          else if (t[l] === "&") {
            const E = OS(t, l);
            if (E == -1)
              return kt("InvalidChar", "char '&' is not expected.", rn(t, l));
            l = E;
          } else if (u === !0 && !Av(t[l]))
            return kt("InvalidXml", "Extra text at the end", rn(t, l));
        t[l] === "<" && l--;
      }
    } else {
      if (Av(t[l]))
        continue;
      return kt("InvalidChar", "char '" + t[l] + "' is not expected.", rn(t, l));
    }
  if (a) {
    if (s.length == 1)
      return kt("InvalidTag", "Unclosed tag '" + s[0].tagName + "'.", rn(t, s[0].tagStartPos));
    if (s.length > 0)
      return kt("InvalidXml", "Invalid '" + JSON.stringify(s.map((l) => l.tagName), null, 4).replace(/\r?\n/g, "") + "' found.", { line: 1, col: 1 });
  } else return kt("InvalidXml", "Start tag expected.", 1);
  return !0;
}
function Av(t) {
  return t === " " || t === "	" || t === `
` || t === "\r";
}
function Tv(t, r) {
  const s = r;
  for (; r < t.length; r++)
    if (t[r] == "?" || t[r] == " ") {
      const a = t.substr(s, r - s);
      if (r > 5 && a === "xml")
        return kt("InvalidXml", "XML declaration allowed only at the start of the document.", rn(t, r));
      if (t[r] == "?" && t[r + 1] == ">") {
        r++;
        break;
      } else
        continue;
    }
  return r;
}
function kv(t, r) {
  if (t.length > r + 5 && t[r + 1] === "-" && t[r + 2] === "-") {
    for (r += 3; r < t.length; r++)
      if (t[r] === "-" && t[r + 1] === "-" && t[r + 2] === ">") {
        r += 2;
        break;
      }
  } else if (t.length > r + 8 && t[r + 1] === "D" && t[r + 2] === "O" && t[r + 3] === "C" && t[r + 4] === "T" && t[r + 5] === "Y" && t[r + 6] === "P" && t[r + 7] === "E") {
    let s = 1;
    for (r += 8; r < t.length; r++)
      if (t[r] === "<")
        s++;
      else if (t[r] === ">" && (s--, s === 0))
        break;
  } else if (t.length > r + 9 && t[r + 1] === "[" && t[r + 2] === "C" && t[r + 3] === "D" && t[r + 4] === "A" && t[r + 5] === "T" && t[r + 6] === "A" && t[r + 7] === "[") {
    for (r += 8; r < t.length; r++)
      if (t[r] === "]" && t[r + 1] === "]" && t[r + 2] === ">") {
        r += 2;
        break;
      }
  }
  return r;
}
const AS = '"', TS = "'";
function kS(t, r) {
  let s = "", a = "", u = !1;
  for (; r < t.length; r++) {
    if (t[r] === AS || t[r] === TS)
      a === "" ? a = t[r] : a !== t[r] || (a = "");
    else if (t[r] === ">" && a === "") {
      u = !0;
      break;
    }
    s += t[r];
  }
  return a !== "" ? !1 : {
    value: s,
    index: r,
    tagClosed: u
  };
}
const xS = new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`, "g");
function xv(t, r) {
  const s = U0(t, xS), a = {};
  for (let u = 0; u < s.length; u++) {
    if (s[u][1].length === 0)
      return kt("InvalidAttr", "Attribute '" + s[u][2] + "' has no space in starting.", Ps(s[u]));
    if (s[u][3] !== void 0 && s[u][4] === void 0)
      return kt("InvalidAttr", "Attribute '" + s[u][2] + "' is without value.", Ps(s[u]));
    if (s[u][3] === void 0 && !r.allowBooleanAttributes)
      return kt("InvalidAttr", "boolean attribute '" + s[u][2] + "' is not allowed.", Ps(s[u]));
    const l = s[u][2];
    if (!MS(l))
      return kt("InvalidAttr", "Attribute '" + l + "' is an invalid name.", Ps(s[u]));
    if (!a.hasOwnProperty(l))
      a[l] = 1;
    else
      return kt("InvalidAttr", "Attribute '" + l + "' is repeated.", Ps(s[u]));
  }
  return !0;
}
function NS(t, r) {
  let s = /\d/;
  for (t[r] === "x" && (r++, s = /[\da-fA-F]/); r < t.length; r++) {
    if (t[r] === ";")
      return r;
    if (!t[r].match(s))
      break;
  }
  return -1;
}
function OS(t, r) {
  if (r++, t[r] === ";")
    return -1;
  if (t[r] === "#")
    return r++, NS(t, r);
  let s = 0;
  for (; r < t.length; r++, s++)
    if (!(t[r].match(/\w/) && s < 20)) {
      if (t[r] === ";")
        break;
      return -1;
    }
  return r;
}
function kt(t, r, s) {
  return {
    err: {
      code: t,
      msg: r,
      line: s.line || s,
      col: s.col
    }
  };
}
function MS(t) {
  return Yf(t);
}
function RS(t) {
  return Yf(t);
}
function rn(t, r) {
  const s = t.substring(0, r).split(/\r?\n/);
  return {
    line: s.length,
    // column number is last line's length + 1, because column numbering starts at 1:
    col: s[s.length - 1].length + 1
  };
}
function Ps(t) {
  return t.startIndex + t[1].length;
}
const jS = {
  preserveOrder: !1,
  attributeNamePrefix: "@_",
  attributesGroupName: !1,
  textNodeName: "#text",
  ignoreAttributes: !0,
  removeNSPrefix: !1,
  // remove NS from tag name or attribute name if true
  allowBooleanAttributes: !1,
  //a tag can have attributes without any value
  //ignoreRootElement : false,
  parseTagValue: !0,
  parseAttributeValue: !1,
  trimValues: !0,
  //Trim string values of tag and attributes
  cdataPropName: !1,
  numberParseOptions: {
    hex: !0,
    leadingZeros: !0,
    eNotation: !0
  },
  tagValueProcessor: function(t, r) {
    return r;
  },
  attributeValueProcessor: function(t, r) {
    return r;
  },
  stopNodes: [],
  //nested tags will not be parsed even for errors
  alwaysCreateTextNode: !1,
  isArray: () => !1,
  commentPropName: !1,
  unpairedTags: [],
  processEntities: !0,
  htmlEntities: !1,
  ignoreDeclaration: !1,
  ignorePiTags: !1,
  transformTagName: !1,
  transformAttributeName: !1,
  updateTag: function(t, r, s) {
    return t;
  }
  // skipEmptyListItem: false
}, DS = function(t) {
  return Object.assign({}, jS, t);
};
class zs {
  constructor(r) {
    this.tagname = r, this.child = [], this[":@"] = {};
  }
  add(r, s) {
    r === "__proto__" && (r = "#__proto__"), this.child.push({ [r]: s });
  }
  addChild(r) {
    r.tagname === "__proto__" && (r.tagname = "#__proto__"), r[":@"] && Object.keys(r[":@"]).length > 0 ? this.child.push({ [r.tagname]: r.child, ":@": r[":@"] }) : this.child.push({ [r.tagname]: r.child });
  }
}
function LS(t, r) {
  const s = {};
  if (t[r + 3] === "O" && t[r + 4] === "C" && t[r + 5] === "T" && t[r + 6] === "Y" && t[r + 7] === "P" && t[r + 8] === "E") {
    r = r + 9;
    let a = 1, u = !1, l = !1, h = "";
    for (; r < t.length; r++)
      if (t[r] === "<" && !l) {
        if (u && IS(t, r)) {
          r += 7;
          let m, f;
          [m, f, r] = PS(t, r + 1), f.indexOf("&") === -1 && (s[qS(m)] = {
            regx: RegExp(`&${m};`, "g"),
            val: f
          });
        } else if (u && BS(t, r)) r += 8;
        else if (u && US(t, r)) r += 8;
        else if (u && HS(t, r)) r += 9;
        else if (zS) l = !0;
        else throw new Error("Invalid DOCTYPE");
        a++, h = "";
      } else if (t[r] === ">") {
        if (l ? t[r - 1] === "-" && t[r - 2] === "-" && (l = !1, a--) : a--, a === 0)
          break;
      } else t[r] === "[" ? u = !0 : h += t[r];
    if (a !== 0)
      throw new Error("Unclosed DOCTYPE");
  } else
    throw new Error("Invalid Tag instead of DOCTYPE");
  return { entities: s, i: r };
}
function PS(t, r) {
  let s = "";
  for (; r < t.length && t[r] !== "'" && t[r] !== '"'; r++)
    s += t[r];
  if (s = s.trim(), s.indexOf(" ") !== -1) throw new Error("External entites are not supported");
  const a = t[r++];
  let u = "";
  for (; r < t.length && t[r] !== a; r++)
    u += t[r];
  return [s, u, r];
}
function zS(t, r) {
  return t[r + 1] === "!" && t[r + 2] === "-" && t[r + 3] === "-";
}
function IS(t, r) {
  return t[r + 1] === "!" && t[r + 2] === "E" && t[r + 3] === "N" && t[r + 4] === "T" && t[r + 5] === "I" && t[r + 6] === "T" && t[r + 7] === "Y";
}
function BS(t, r) {
  return t[r + 1] === "!" && t[r + 2] === "E" && t[r + 3] === "L" && t[r + 4] === "E" && t[r + 5] === "M" && t[r + 6] === "E" && t[r + 7] === "N" && t[r + 8] === "T";
}
function US(t, r) {
  return t[r + 1] === "!" && t[r + 2] === "A" && t[r + 3] === "T" && t[r + 4] === "T" && t[r + 5] === "L" && t[r + 6] === "I" && t[r + 7] === "S" && t[r + 8] === "T";
}
function HS(t, r) {
  return t[r + 1] === "!" && t[r + 2] === "N" && t[r + 3] === "O" && t[r + 4] === "T" && t[r + 5] === "A" && t[r + 6] === "T" && t[r + 7] === "I" && t[r + 8] === "O" && t[r + 9] === "N";
}
function qS(t) {
  if (Yf(t))
    return t;
  throw new Error(`Invalid entity name ${t}`);
}
const GS = /^[-+]?0x[a-fA-F0-9]+$/, ZS = /^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/, $S = {
  hex: !0,
  // oct: false,
  leadingZeros: !0,
  decimalPoint: ".",
  eNotation: !0
  //skipLike: /regex/
};
function VS(t, r = {}) {
  if (r = Object.assign({}, $S, r), !t || typeof t != "string") return t;
  let s = t.trim();
  if (r.skipLike !== void 0 && r.skipLike.test(s)) return t;
  if (t === "0") return 0;
  if (r.hex && GS.test(s))
    return FS(s, 16);
  if (s.search(/[eE]/) !== -1) {
    const a = s.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);
    if (a) {
      if (r.leadingZeros)
        s = (a[1] || "") + a[3];
      else if (!(a[2] === "0" && a[3][0] === ".")) return t;
      return r.eNotation ? Number(s) : t;
    } else
      return t;
  } else {
    const a = ZS.exec(s);
    if (a) {
      const u = a[1], l = a[2];
      let h = YS(a[3]);
      if (!r.leadingZeros && l.length > 0 && u && s[2] !== ".") return t;
      if (!r.leadingZeros && l.length > 0 && !u && s[1] !== ".") return t;
      if (r.leadingZeros && l === t) return 0;
      {
        const m = Number(s), f = "" + m;
        return f.search(/[eE]/) !== -1 ? r.eNotation ? m : t : s.indexOf(".") !== -1 ? f === "0" && h === "" || f === h || u && f === "-" + h ? m : t : l ? h === f || u + h === f ? m : t : s === f || s === u + f ? m : t;
      }
    } else
      return t;
  }
}
function YS(t) {
  return t && t.indexOf(".") !== -1 && (t = t.replace(/0+$/, ""), t === "." ? t = "0" : t[0] === "." ? t = "0" + t : t[t.length - 1] === "." && (t = t.substr(0, t.length - 1))), t;
}
function FS(t, r) {
  if (parseInt) return parseInt(t, r);
  if (Number.parseInt) return Number.parseInt(t, r);
  if (window && window.parseInt) return window.parseInt(t, r);
  throw new Error("parseInt, Number.parseInt, window.parseInt are not supported");
}
function XS(t) {
  return typeof t == "function" ? t : Array.isArray(t) ? (r) => {
    for (const s of t)
      if (typeof s == "string" && r === s || s instanceof RegExp && s.test(r))
        return !0;
  } : () => !1;
}
class KS {
  constructor(r) {
    this.options = r, this.currentNode = null, this.tagsNodeStack = [], this.docTypeEntities = {}, this.lastEntities = {
      apos: { regex: /&(apos|#39|#x27);/g, val: "'" },
      gt: { regex: /&(gt|#62|#x3E);/g, val: ">" },
      lt: { regex: /&(lt|#60|#x3C);/g, val: "<" },
      quot: { regex: /&(quot|#34|#x22);/g, val: '"' }
    }, this.ampEntity = { regex: /&(amp|#38|#x26);/g, val: "&" }, this.htmlEntities = {
      space: { regex: /&(nbsp|#160);/g, val: " " },
      // "lt" : { regex: /&(lt|#60);/g, val: "<" },
      // "gt" : { regex: /&(gt|#62);/g, val: ">" },
      // "amp" : { regex: /&(amp|#38);/g, val: "&" },
      // "quot" : { regex: /&(quot|#34);/g, val: "\"" },
      // "apos" : { regex: /&(apos|#39);/g, val: "'" },
      cent: { regex: /&(cent|#162);/g, val: "" },
      pound: { regex: /&(pound|#163);/g, val: "" },
      yen: { regex: /&(yen|#165);/g, val: "" },
      euro: { regex: /&(euro|#8364);/g, val: "" },
      copyright: { regex: /&(copy|#169);/g, val: "" },
      reg: { regex: /&(reg|#174);/g, val: "" },
      inr: { regex: /&(inr|#8377);/g, val: "" },
      num_dec: { regex: /&#([0-9]{1,7});/g, val: (s, a) => String.fromCodePoint(Number.parseInt(a, 10)) },
      num_hex: { regex: /&#x([0-9a-fA-F]{1,6});/g, val: (s, a) => String.fromCodePoint(Number.parseInt(a, 16)) }
    }, this.addExternalEntities = QS, this.parseXml = n8, this.parseTextData = JS, this.resolveNameSpace = WS, this.buildAttributesMap = t8, this.isItStopNode = s8, this.replaceEntitiesValue = a8, this.readStopNodeData = u8, this.saveTextToParentTag = i8, this.addChild = r8, this.ignoreAttributesFn = XS(this.options.ignoreAttributes);
  }
}
function QS(t) {
  const r = Object.keys(t);
  for (let s = 0; s < r.length; s++) {
    const a = r[s];
    this.lastEntities[a] = {
      regex: new RegExp("&" + a + ";", "g"),
      val: t[a]
    };
  }
}
function JS(t, r, s, a, u, l, h) {
  if (t !== void 0 && (this.options.trimValues && !a && (t = t.trim()), t.length > 0)) {
    h || (t = this.replaceEntitiesValue(t));
    const m = this.options.tagValueProcessor(r, t, s, u, l);
    return m == null ? t : typeof m != typeof t || m !== t ? m : this.options.trimValues ? Of(t, this.options.parseTagValue, this.options.numberParseOptions) : t.trim() === t ? Of(t, this.options.parseTagValue, this.options.numberParseOptions) : t;
  }
}
function WS(t) {
  if (this.options.removeNSPrefix) {
    const r = t.split(":"), s = t.charAt(0) === "/" ? "/" : "";
    if (r[0] === "xmlns")
      return "";
    r.length === 2 && (t = s + r[1]);
  }
  return t;
}
const e8 = new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`, "gm");
function t8(t, r, s) {
  if (this.options.ignoreAttributes !== !0 && typeof t == "string") {
    const a = U0(t, e8), u = a.length, l = {};
    for (let h = 0; h < u; h++) {
      const m = this.resolveNameSpace(a[h][1]);
      if (this.ignoreAttributesFn(m, r))
        continue;
      let f = a[h][4], g = this.options.attributeNamePrefix + m;
      if (m.length)
        if (this.options.transformAttributeName && (g = this.options.transformAttributeName(g)), g === "__proto__" && (g = "#__proto__"), f !== void 0) {
          this.options.trimValues && (f = f.trim()), f = this.replaceEntitiesValue(f);
          const v = this.options.attributeValueProcessor(m, f, r);
          v == null ? l[g] = f : typeof v != typeof f || v !== f ? l[g] = v : l[g] = Of(
            f,
            this.options.parseAttributeValue,
            this.options.numberParseOptions
          );
        } else this.options.allowBooleanAttributes && (l[g] = !0);
    }
    if (!Object.keys(l).length)
      return;
    if (this.options.attributesGroupName) {
      const h = {};
      return h[this.options.attributesGroupName] = l, h;
    }
    return l;
  }
}
const n8 = function(t) {
  t = t.replace(/\r\n?/g, `
`);
  const r = new zs("!xml");
  let s = r, a = "", u = "";
  for (let l = 0; l < t.length; l++)
    if (t[l] === "<")
      if (t[l + 1] === "/") {
        const m = Oa(t, ">", l, "Closing Tag is not closed.");
        let f = t.substring(l + 2, m).trim();
        if (this.options.removeNSPrefix) {
          const E = f.indexOf(":");
          E !== -1 && (f = f.substr(E + 1));
        }
        this.options.transformTagName && (f = this.options.transformTagName(f)), s && (a = this.saveTextToParentTag(a, s, u));
        const g = u.substring(u.lastIndexOf(".") + 1);
        if (f && this.options.unpairedTags.indexOf(f) !== -1)
          throw new Error(`Unpaired tag can not be used as closing tag: </${f}>`);
        let v = 0;
        g && this.options.unpairedTags.indexOf(g) !== -1 ? (v = u.lastIndexOf(".", u.lastIndexOf(".") - 1), this.tagsNodeStack.pop()) : v = u.lastIndexOf("."), u = u.substring(0, v), s = this.tagsNodeStack.pop(), a = "", l = m;
      } else if (t[l + 1] === "?") {
        let m = Nf(t, l, !1, "?>");
        if (!m) throw new Error("Pi Tag is not closed.");
        if (a = this.saveTextToParentTag(a, s, u), !(this.options.ignoreDeclaration && m.tagName === "?xml" || this.options.ignorePiTags)) {
          const f = new zs(m.tagName);
          f.add(this.options.textNodeName, ""), m.tagName !== m.tagExp && m.attrExpPresent && (f[":@"] = this.buildAttributesMap(m.tagExp, u, m.tagName)), this.addChild(s, f, u);
        }
        l = m.closeIndex + 1;
      } else if (t.substr(l + 1, 3) === "!--") {
        const m = Oa(t, "-->", l + 4, "Comment is not closed.");
        if (this.options.commentPropName) {
          const f = t.substring(l + 4, m - 2);
          a = this.saveTextToParentTag(a, s, u), s.add(this.options.commentPropName, [{ [this.options.textNodeName]: f }]);
        }
        l = m;
      } else if (t.substr(l + 1, 2) === "!D") {
        const m = LS(t, l);
        this.docTypeEntities = m.entities, l = m.i;
      } else if (t.substr(l + 1, 2) === "![") {
        const m = Oa(t, "]]>", l, "CDATA is not closed.") - 2, f = t.substring(l + 9, m);
        a = this.saveTextToParentTag(a, s, u);
        let g = this.parseTextData(f, s.tagname, u, !0, !1, !0, !0);
        g == null && (g = ""), this.options.cdataPropName ? s.add(this.options.cdataPropName, [{ [this.options.textNodeName]: f }]) : s.add(this.options.textNodeName, g), l = m + 2;
      } else {
        let m = Nf(t, l, this.options.removeNSPrefix), f = m.tagName;
        const g = m.rawTagName;
        let v = m.tagExp, E = m.attrExpPresent, _ = m.closeIndex;
        this.options.transformTagName && (f = this.options.transformTagName(f)), s && a && s.tagname !== "!xml" && (a = this.saveTextToParentTag(a, s, u, !1));
        const b = s;
        if (b && this.options.unpairedTags.indexOf(b.tagname) !== -1 && (s = this.tagsNodeStack.pop(), u = u.substring(0, u.lastIndexOf("."))), f !== r.tagname && (u += u ? "." + f : f), this.isItStopNode(this.options.stopNodes, u, f)) {
          let p = "";
          if (v.length > 0 && v.lastIndexOf("/") === v.length - 1)
            f[f.length - 1] === "/" ? (f = f.substr(0, f.length - 1), u = u.substr(0, u.length - 1), v = f) : v = v.substr(0, v.length - 1), l = m.closeIndex;
          else if (this.options.unpairedTags.indexOf(f) !== -1)
            l = m.closeIndex;
          else {
            const k = this.readStopNodeData(t, g, _ + 1);
            if (!k) throw new Error(`Unexpected end of ${g}`);
            l = k.i, p = k.tagContent;
          }
          const C = new zs(f);
          f !== v && E && (C[":@"] = this.buildAttributesMap(v, u, f)), p && (p = this.parseTextData(p, f, u, !0, E, !0, !0)), u = u.substr(0, u.lastIndexOf(".")), C.add(this.options.textNodeName, p), this.addChild(s, C, u);
        } else {
          if (v.length > 0 && v.lastIndexOf("/") === v.length - 1) {
            f[f.length - 1] === "/" ? (f = f.substr(0, f.length - 1), u = u.substr(0, u.length - 1), v = f) : v = v.substr(0, v.length - 1), this.options.transformTagName && (f = this.options.transformTagName(f));
            const p = new zs(f);
            f !== v && E && (p[":@"] = this.buildAttributesMap(v, u, f)), this.addChild(s, p, u), u = u.substr(0, u.lastIndexOf("."));
          } else {
            const p = new zs(f);
            this.tagsNodeStack.push(s), f !== v && E && (p[":@"] = this.buildAttributesMap(v, u, f)), this.addChild(s, p, u), s = p;
          }
          a = "", l = _;
        }
      }
    else
      a += t[l];
  return r.child;
};
function r8(t, r, s) {
  const a = this.options.updateTag(r.tagname, s, r[":@"]);
  a === !1 || (typeof a == "string" && (r.tagname = a), t.addChild(r));
}
const a8 = function(t) {
  if (this.options.processEntities) {
    for (let r in this.docTypeEntities) {
      const s = this.docTypeEntities[r];
      t = t.replace(s.regx, s.val);
    }
    for (let r in this.lastEntities) {
      const s = this.lastEntities[r];
      t = t.replace(s.regex, s.val);
    }
    if (this.options.htmlEntities)
      for (let r in this.htmlEntities) {
        const s = this.htmlEntities[r];
        t = t.replace(s.regex, s.val);
      }
    t = t.replace(this.ampEntity.regex, this.ampEntity.val);
  }
  return t;
};
function i8(t, r, s, a) {
  return t && (a === void 0 && (a = r.child.length === 0), t = this.parseTextData(
    t,
    r.tagname,
    s,
    !1,
    r[":@"] ? Object.keys(r[":@"]).length !== 0 : !1,
    a
  ), t !== void 0 && t !== "" && r.add(this.options.textNodeName, t), t = ""), t;
}
function s8(t, r, s) {
  const a = "*." + s;
  for (const u in t) {
    const l = t[u];
    if (a === l || r === l) return !0;
  }
  return !1;
}
function o8(t, r, s = ">") {
  let a, u = "";
  for (let l = r; l < t.length; l++) {
    let h = t[l];
    if (a)
      h === a && (a = "");
    else if (h === '"' || h === "'")
      a = h;
    else if (h === s[0])
      if (s[1]) {
        if (t[l + 1] === s[1])
          return {
            data: u,
            index: l
          };
      } else
        return {
          data: u,
          index: l
        };
    else h === "	" && (h = " ");
    u += h;
  }
}
function Oa(t, r, s, a) {
  const u = t.indexOf(r, s);
  if (u === -1)
    throw new Error(a);
  return u + r.length - 1;
}
function Nf(t, r, s, a = ">") {
  const u = o8(t, r + 1, a);
  if (!u) return;
  let l = u.data;
  const h = u.index, m = l.search(/\s/);
  let f = l, g = !0;
  m !== -1 && (f = l.substring(0, m), l = l.substring(m + 1).trimStart());
  const v = f;
  if (s) {
    const E = f.indexOf(":");
    E !== -1 && (f = f.substr(E + 1), g = f !== u.data.substr(E + 1));
  }
  return {
    tagName: f,
    tagExp: l,
    closeIndex: h,
    attrExpPresent: g,
    rawTagName: v
  };
}
function u8(t, r, s) {
  const a = s;
  let u = 1;
  for (; s < t.length; s++)
    if (t[s] === "<")
      if (t[s + 1] === "/") {
        const l = Oa(t, ">", s, `${r} is not closed`);
        if (t.substring(s + 2, l).trim() === r && (u--, u === 0))
          return {
            tagContent: t.substring(a, s),
            i: l
          };
        s = l;
      } else if (t[s + 1] === "?")
        s = Oa(t, "?>", s + 1, "StopNode is not closed.");
      else if (t.substr(s + 1, 3) === "!--")
        s = Oa(t, "-->", s + 3, "StopNode is not closed.");
      else if (t.substr(s + 1, 2) === "![")
        s = Oa(t, "]]>", s, "StopNode is not closed.") - 2;
      else {
        const l = Nf(t, s, ">");
        l && ((l && l.tagName) === r && l.tagExp[l.tagExp.length - 1] !== "/" && u++, s = l.closeIndex);
      }
}
function Of(t, r, s) {
  if (r && typeof t == "string") {
    const a = t.trim();
    return a === "true" ? !0 : a === "false" ? !1 : VS(t, s);
  } else
    return wS(t) ? t : "";
}
function l8(t, r) {
  return H0(t, r);
}
function H0(t, r, s) {
  let a;
  const u = {};
  for (let l = 0; l < t.length; l++) {
    const h = t[l], m = c8(h);
    let f = "";
    if (s === void 0 ? f = m : f = s + "." + m, m === r.textNodeName)
      a === void 0 ? a = h[m] : a += "" + h[m];
    else {
      if (m === void 0)
        continue;
      if (h[m]) {
        let g = H0(h[m], r, f);
        const v = f8(g, r);
        h[":@"] ? d8(g, h[":@"], f, r) : Object.keys(g).length === 1 && g[r.textNodeName] !== void 0 && !r.alwaysCreateTextNode ? g = g[r.textNodeName] : Object.keys(g).length === 0 && (r.alwaysCreateTextNode ? g[r.textNodeName] = "" : g = ""), u[m] !== void 0 && u.hasOwnProperty(m) ? (Array.isArray(u[m]) || (u[m] = [u[m]]), u[m].push(g)) : r.isArray(m, f, v) ? u[m] = [g] : u[m] = g;
      }
    }
  }
  return typeof a == "string" ? a.length > 0 && (u[r.textNodeName] = a) : a !== void 0 && (u[r.textNodeName] = a), u;
}
function c8(t) {
  const r = Object.keys(t);
  for (let s = 0; s < r.length; s++) {
    const a = r[s];
    if (a !== ":@") return a;
  }
}
function d8(t, r, s, a) {
  if (r) {
    const u = Object.keys(r), l = u.length;
    for (let h = 0; h < l; h++) {
      const m = u[h];
      a.isArray(m, s + "." + m, !0, !0) ? t[m] = [r[m]] : t[m] = r[m];
    }
  }
}
function f8(t, r) {
  const { textNodeName: s } = r, a = Object.keys(t).length;
  return !!(a === 0 || a === 1 && (t[s] || typeof t[s] == "boolean" || t[s] === 0));
}
class h8 {
  constructor(r) {
    this.externalEntities = {}, this.options = DS(r);
  }
  /**
   * Parse XML dats to JS object 
   * @param {string|Buffer} xmlData 
   * @param {boolean|Object} validationOption 
   */
  parse(r, s) {
    if (typeof r != "string") if (r.toString)
      r = r.toString();
    else
      throw new Error("XML data is accepted in String or Bytes[] form.");
    if (s) {
      s === !0 && (s = {});
      const l = CS(r, s);
      if (l !== !0)
        throw Error(`${l.err.msg}:${l.err.line}:${l.err.col}`);
    }
    const a = new KS(this.options);
    a.addExternalEntities(this.externalEntities);
    const u = a.parseXml(r);
    return this.options.preserveOrder || u === void 0 ? u : l8(u, this.options);
  }
  /**
   * Add Entity which is not by default supported by this library
   * @param {string} key 
   * @param {string} value 
   */
  addEntity(r, s) {
    if (s.indexOf("&") !== -1)
      throw new Error("Entity value can't have '&'");
    if (r.indexOf("&") !== -1 || r.indexOf(";") !== -1)
      throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");
    if (s === "&")
      throw new Error("An entity with value '&' is not permitted");
    this.externalEntities[r] = s;
  }
}
const q0 = new h8();
function G0(t) {
  const r = Math.pow(10, t - 1), s = Math.pow(10, t) - 1;
  return Math.floor(Math.random() * (s - r + 1)) + r;
}
function Au() {
  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
}
function p8(t) {
  try {
    const r = `<entry>${t}</entry>`, a = q0.parse(r).entry;
    return !a || !a.worldName ? null : {
      uid: a.id ?? G0(6),
      key: a.triggers?.split(",").map((u) => u.trim()) ?? [],
      content: a.content ?? "",
      comment: a.name ?? "",
      disable: !1,
      keysecondary: []
    };
  } catch {
    return null;
  }
}
function m8(t) {
  const r = t.match(/<worldName>([^<]*)<\/worldName>/);
  return r ? r[1].trim() : null;
}
function Z0(t, r = {}) {
  let s = t;
  const { previousContent: a } = r;
  s = s.replace(/```xml/g, "").replace(/```/g, ""), a && (s = a + s.trimEnd());
  const u = {};
  try {
    const l = q0.parse(s);
    if (!l.lorebooks) {
      if (s.trim().length > 0) {
        const g = {
          id: Au(),
          timestamp: (/* @__PURE__ */ new Date()).toISOString(),
          rawContent: s,
          errorMessage: "AI  lorebooks "
        };
        return { entries: u, failedRecord: g };
      }
      return { entries: u };
    }
    const h = l.lorebooks.entry?.content !== void 0 ? [l.lorebooks.entry] : Array.isArray(l.lorebooks.entry) ? l.lorebooks.entry : [l.lorebooks.entry];
    for (const f of h) {
      if (!f) continue;
      const g = f.worldName;
      g && (u[g] || (u[g] = []), u[g].push({
        uid: f.id ?? G0(6),
        key: f.triggers?.split(",").map((v) => v.trim()) ?? [],
        content: f.content ?? "",
        comment: f.name ?? "",
        disable: !1,
        keysecondary: []
      }));
    }
    if (Object.values(u).reduce((f, g) => f + g.length, 0) === 0 && s.trim().length > 0) {
      console.warn("[WorldInfoRecommender] Parsed but no valid entries found, creating failedRecord");
      const f = {
        id: Au(),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        rawContent: s,
        errorMessage: "AI  worldName "
      };
      return { entries: u, failedRecord: f };
    }
    return { entries: u };
  } catch (l) {
    console.warn("[WorldInfoRecommender] Standard XML parse failed, trying partial recovery...", l.message);
    const h = {};
    let m = 0, f = 0;
    const g = /<entry>([\s\S]*?)<\/entry>/g;
    let v;
    for (; (v = g.exec(s)) !== null; ) {
      const _ = v[1], b = m8(_);
      if (!b) {
        f++;
        continue;
      }
      const p = p8(_);
      p ? (h[b] || (h[b] = []), h[b].push(p), m++) : f++;
    }
    if (m === 0 && f === 0 && s.match(/<entry>([\s\S]*?)$/) && (f = 1), m > 0 || f > 0) {
      const _ = {
        id: Au(),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        rawContent: s,
        errorMessage: m > 0 ? `${m} ${f} ` : `${l.message || "XML "}`,
        partialEntries: m > 0 ? h : void 0
      };
      return {
        entries: h,
        failedRecord: f > 0 ? _ : void 0
      };
    }
    const E = {
      id: Au(),
      timestamp: (/* @__PURE__ */ new Date()).toISOString(),
      rawContent: s,
      errorMessage: l.message || "Model response is not valid XML"
    };
    return {
      entries: {},
      failedRecord: E
    };
  }
}
function g8(t, r) {
  return `
<lorebooks>
  <entry>
    <worldName>${t}</worldName>
    <id>${r.uid}</id>
    <name>${r.comment}</name>
    <triggers>${r.key.join(",")}</triggers>
    <content>${r.content}`;
}
function v8(t, r) {
  return `
<lorebooks>
  <entry>
    <worldName>${t}</worldName>
    <id>${r.uid}</id>
    <name>${r.comment}</name>
    <triggers>${r.key.join(",")}</triggers>
    <content>${r.content}</content>
  </entry>
</lorebooks>`;
}
function y8(t) {
  return t.map((r) => ({
    role: r.role,
    content: r.content
  }));
}
function b8(t) {
  return t.map((r) => ({
    role: r.role === "assistant" ? "model" : "user",
    parts: [{ text: r.content }]
  }));
}
async function Nv(t, r, s, a, u, l) {
  let h = t.apiUrl.replace(/\/+$/, ""), m;
  h.endsWith("/chat/completions") || h.endsWith("chat/completions") ? m = h : h.endsWith("/v1") ? m = `${h}/chat/completions` : m = `${h}/v1/chat/completions`;
  const f = !!a, g = l ?? Math.max(s, 1024), v = await fetch(m, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: `Bearer ${t.apiKey}`
    },
    body: JSON.stringify({
      model: t.modelName,
      messages: y8(r),
      max_tokens: g,
      stream: f
    }),
    signal: u
  });
  if (!v.ok) {
    const b = await v.text();
    throw new Error(`OpenAI API error (${v.status}): ${b}`);
  }
  if (f && v.body) {
    const b = v.body.getReader(), p = new TextDecoder();
    let C = "", k = "";
    try {
      for (; ; ) {
        const { done: j, value: O } = await b.read();
        if (j) break;
        k += p.decode(O, { stream: !0 });
        const I = k.split(`
`);
        k = I.pop() || "";
        for (const c of I) {
          const S = c.trim();
          if (!(!S || S === "data: [DONE]") && S.startsWith("data: "))
            try {
              const w = S.slice(6), N = JSON.parse(w).choices?.[0]?.delta?.content || "";
              N && (C += N, a.onChunk({
                chunk: N,
                fullText: C,
                receivedChars: C.length
              }));
            } catch (w) {
              console.debug("[WorldInfoRecommender] Stream parse error:", w);
            }
        }
      }
    } catch (j) {
      throw u?.aborted ? new DOMException("Request aborted by user", "AbortError") : j;
    }
    if (!C)
      throw new Error("No content received from streaming response");
    return { content: C };
  }
  const E = await v.json();
  console.log("[WorldInfoRecommender] OpenAI API response:", JSON.stringify(E).substring(0, 500));
  let _ = E.choices?.[0]?.message?.content;
  if (_ === void 0 && E.choices?.[0]?.text !== void 0 && (_ = E.choices[0].text), _ === void 0 && E.content !== void 0 && (_ = E.content), _ === void 0 && E.output !== void 0 && (_ = E.output), _ === void 0 && E.response !== void 0 && (_ = E.response), _ === void 0 && E.choices?.[0]?.delta?.content !== void 0 && (_ = E.choices[0].delta.content), _ == null)
    throw console.error("[WorldInfoRecommender] No content found in response. Full data:", JSON.stringify(E)), new Error("No content in OpenAI response");
  return { content: _ };
}
function _8(t) {
  const r = (t.message || "").toLowerCase();
  return r.includes("budget_token") || r.includes("max_tokens") && r.includes("thinking");
}
async function S8(t, r, s, a, u) {
  const l = t.apiUrl.replace(/\/$/, ""), h = !!a;
  let m;
  if (l.includes(":generateContent") || l.includes(":streamGenerateContent"))
    m = h ? l.replace(":generateContent", ":streamGenerateContent") : l;
  else {
    const E = h ? "streamGenerateContent" : "generateContent";
    m = `${l}/v1beta/models/${t.modelName}:${E}`;
  }
  m.includes("key=") || (m += `?key=${t.apiKey}`), h && !m.includes("alt=") && (m += "&alt=sse");
  const f = await fetch(m, {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      contents: b8(r),
      generationConfig: {
        maxOutputTokens: s
      }
    }),
    signal: u
  });
  if (!f.ok) {
    const E = await f.text();
    throw new Error(`Gemini API error (${f.status}): ${E}`);
  }
  if (h && f.body) {
    const E = f.body.getReader(), _ = new TextDecoder();
    let b = "", p = "";
    try {
      for (; ; ) {
        const { done: C, value: k } = await E.read();
        if (C) break;
        p += _.decode(k, { stream: !0 });
        const j = p.split(`
`);
        p = j.pop() || "";
        for (const O of j) {
          const I = O.trim();
          if (I && I.startsWith("data: "))
            try {
              const c = I.slice(6), w = JSON.parse(c).candidates?.[0]?.content?.parts?.[0]?.text || "";
              w && (b += w, a.onChunk({
                chunk: w,
                fullText: b,
                receivedChars: b.length
              }));
            } catch (c) {
              console.debug("[WorldInfoRecommender] Gemini stream parse error:", c);
            }
        }
      }
    } catch (C) {
      throw u?.aborted ? new DOMException("Request aborted by user", "AbortError") : C;
    }
    if (!b)
      throw new Error("No content received from Gemini streaming response");
    return { content: b };
  }
  const v = (await f.json()).candidates?.[0]?.content?.parts?.[0]?.text;
  if (!v)
    throw new Error("No content in Gemini response");
  return { content: v };
}
async function Tl(t, r, s, a, u) {
  if (!t.apiUrl)
    throw new Error("API URL is not configured");
  if (!t.apiKey)
    throw new Error("API Key is not configured");
  if (!t.modelName)
    throw new Error("Model name is not configured");
  const l = r.filter((h) => h.content && h.content.trim().length > 0);
  if (l.length === 0)
    throw new Error("No valid messages to send. Please ensure your prompts are configured correctly.");
  console.log(`[WorldInfoRecommender] Sending direct API request (${t.apiType})${a ? " with streaming" : ""}, messages: ${l.length}`);
  try {
    switch (t.apiType) {
      case "openai":
        return await Nv(t, l, s, a, u);
      case "gemini":
        return await S8(t, l, s, a, u);
      default:
        throw new Error(`Unsupported API type: ${t.apiType}`);
    }
  } catch (h) {
    if (u?.aborted) throw h;
    if (_8(h) && t.apiType === "openai" && s < 16384) {
      if (console.warn("[WorldInfoRecommender] Thinking Budget error detected. Retrying with max_tokens=16384..."), a?.onChunk)
        try {
          a.onChunk({ chunk: " [Adjusting tokens for Thinking Model...] ", fullText: "", receivedChars: 0 });
        } catch {
        }
      return await Nv(t, l, s, a, u, 16384);
    }
    if (a && (h.message?.includes("Failed to fetch") || h.message?.includes("NetworkError") || h.name === "TypeError")) {
      if (console.warn("[WorldInfoRecommender] Streaming failed, likely due to CORS/Network limits. Retrying with non-streaming mode...", h), a.onChunk)
        try {
          a.onChunk({
            chunk: " [Streaming failed, switching to single response...] ",
            fullText: "",
            receivedChars: 0
          });
        } catch {
        }
      return Tl(t, r, s, void 0, u);
    }
    throw h;
  }
}
async function w8(t) {
  try {
    return await Tl(t, [
      { role: "user", content: 'Hello, please respond with "OK" only.' }
    ], 1024), { success: !0, message: "Connection successful!" };
  } catch (r) {
    return { success: !1, message: r.message || "Connection failed" };
  }
}
async function E8(t) {
  if (!t.apiUrl)
    return { success: !1, models: [], message: "API URL is not configured" };
  if (!t.apiKey)
    return { success: !1, models: [], message: "API Key is not configured" };
  try {
    let r = t.apiUrl.replace(/\/+$/, ""), s, a = {
      "Content-Type": "application/json"
    };
    switch (t.apiType) {
      case "openai":
        r.endsWith("/v1") ? s = `${r}/models` : r.includes("/chat/completions") ? s = r.replace("/chat/completions", "/models") : s = `${r}/v1/models`, a.Authorization = `Bearer ${t.apiKey}`;
        break;
      case "gemini":
        r.includes(":generateContent") ? s = r.replace(/\/models\/[^/]+:generateContent.*/, "/models") : s = `${r}/v1beta/models`, s += `?key=${t.apiKey}`;
        break;
      default:
        return { success: !1, models: [], message: `Unsupported API type: ${t.apiType}` };
    }
    console.log(`[WorldInfoRecommender] Fetching models from: ${s}`);
    const u = await fetch(s, {
      method: "GET",
      headers: a
    });
    if (!u.ok) {
      const m = await u.text();
      return { success: !1, models: [], message: `API error (${u.status}): ${m}` };
    }
    const l = await u.json();
    let h = [];
    return t.apiType === "gemini" ? Array.isArray(l.models) && (h = l.models.map((m) => (m.name || m.id || "").replace(/^models\//, "")).filter((m) => m)) : Array.isArray(l.data) ? h = l.data.map((m) => m.id || m.name || "").filter((m) => m) : Array.isArray(l.models) ? h = l.models.map((m) => m.id || m.name || "").filter((m) => m) : Array.isArray(l) && (h = l.map((m) => typeof m == "string" ? m : m.id || m.name || "").filter((m) => m)), h.sort(), h.length === 0 ? (console.log("[WorldInfoRecommender] Models response:", JSON.stringify(l)), { success: !1, models: [], message: "No models found. Check console for raw response." }) : { success: !0, models: h, message: `Found ${h.length} models` };
  } catch (r) {
    return console.error("[WorldInfoRecommender] Error fetching models:", r), { success: !1, models: [], message: r.message || "Failed to fetch models" };
  }
}
var Tu = { exports: {} }, ku = { exports: {} }, Yn = {}, fn = {}, Ov;
function gn() {
  if (Ov) return fn;
  Ov = 1, fn.__esModule = !0, fn.extend = u, fn.indexOf = f, fn.escapeExpression = g, fn.isEmpty = v, fn.createFrame = E, fn.blockParams = _, fn.appendContextPath = b;
  var t = {
    "&": "&amp;",
    "<": "&lt;",
    ">": "&gt;",
    '"': "&quot;",
    "'": "&#x27;",
    "`": "&#x60;",
    "=": "&#x3D;"
  }, r = /[&<>"'`=]/g, s = /[&<>"'`=]/;
  function a(p) {
    return t[p];
  }
  function u(p) {
    for (var C = 1; C < arguments.length; C++)
      for (var k in arguments[C])
        Object.prototype.hasOwnProperty.call(arguments[C], k) && (p[k] = arguments[C][k]);
    return p;
  }
  var l = Object.prototype.toString;
  fn.toString = l;
  var h = function(C) {
    return typeof C == "function";
  };
  h(/x/) && (fn.isFunction = h = function(p) {
    return typeof p == "function" && l.call(p) === "[object Function]";
  }), fn.isFunction = h;
  var m = Array.isArray || function(p) {
    return p && typeof p == "object" ? l.call(p) === "[object Array]" : !1;
  };
  fn.isArray = m;
  function f(p, C) {
    for (var k = 0, j = p.length; k < j; k++)
      if (p[k] === C)
        return k;
    return -1;
  }
  function g(p) {
    if (typeof p != "string") {
      if (p && p.toHTML)
        return p.toHTML();
      if (p == null)
        return "";
      if (!p)
        return p + "";
      p = "" + p;
    }
    return s.test(p) ? p.replace(r, a) : p;
  }
  function v(p) {
    return !p && p !== 0 ? !0 : !!(m(p) && p.length === 0);
  }
  function E(p) {
    var C = u({}, p);
    return C._parent = p, C;
  }
  function _(p, C) {
    return p.path = C, p;
  }
  function b(p, C) {
    return (p ? p + "." : "") + C;
  }
  return fn;
}
var xu = { exports: {} }, Mv;
function Xn() {
  return Mv || (Mv = 1, (function(t, r) {
    r.__esModule = !0;
    var s = ["description", "fileName", "lineNumber", "endLineNumber", "message", "name", "number", "stack"];
    function a(u, l) {
      var h = l && l.loc, m = void 0, f = void 0, g = void 0, v = void 0;
      h && (m = h.start.line, f = h.end.line, g = h.start.column, v = h.end.column, u += " - " + m + ":" + g);
      for (var E = Error.prototype.constructor.call(this, u), _ = 0; _ < s.length; _++)
        this[s[_]] = E[s[_]];
      Error.captureStackTrace && Error.captureStackTrace(this, a);
      try {
        h && (this.lineNumber = m, this.endLineNumber = f, Object.defineProperty ? (Object.defineProperty(this, "column", {
          value: g,
          enumerable: !0
        }), Object.defineProperty(this, "endColumn", {
          value: v,
          enumerable: !0
        })) : (this.column = g, this.endColumn = v));
      } catch {
      }
    }
    a.prototype = new Error(), r.default = a, t.exports = r.default;
  })(xu, xu.exports)), xu.exports;
}
var Is = {}, Nu = { exports: {} }, Rv;
function C8() {
  return Rv || (Rv = 1, (function(t, r) {
    r.__esModule = !0;
    var s = gn();
    r.default = function(a) {
      a.registerHelper("blockHelperMissing", function(u, l) {
        var h = l.inverse, m = l.fn;
        if (u === !0)
          return m(this);
        if (u === !1 || u == null)
          return h(this);
        if (s.isArray(u))
          return u.length > 0 ? (l.ids && (l.ids = [l.name]), a.helpers.each(u, l)) : h(this);
        if (l.data && l.ids) {
          var f = s.createFrame(l.data);
          f.contextPath = s.appendContextPath(l.data.contextPath, l.name), l = { data: f };
        }
        return m(u, l);
      });
    }, t.exports = r.default;
  })(Nu, Nu.exports)), Nu.exports;
}
var Ou = { exports: {} }, jv;
function A8() {
  return jv || (jv = 1, (function(t, r) {
    r.__esModule = !0;
    function s(h) {
      return h && h.__esModule ? h : { default: h };
    }
    var a = gn(), u = Xn(), l = s(u);
    r.default = function(h) {
      h.registerHelper("each", function(m, f) {
        if (!f)
          throw new l.default("Must pass iterator to #each");
        var g = f.fn, v = f.inverse, E = 0, _ = "", b = void 0, p = void 0;
        f.data && f.ids && (p = a.appendContextPath(f.data.contextPath, f.ids[0]) + "."), a.isFunction(m) && (m = m.call(this)), f.data && (b = a.createFrame(f.data));
        function C(c, S, w) {
          b && (b.key = c, b.index = S, b.first = S === 0, b.last = !!w, p && (b.contextPath = p + c)), _ = _ + g(m[c], {
            data: b,
            blockParams: a.blockParams([m[c], c], [p + c, null])
          });
        }
        if (m && typeof m == "object")
          if (a.isArray(m))
            for (var k = m.length; E < k; E++)
              E in m && C(E, E, E === m.length - 1);
          else if (typeof Symbol == "function" && m[Symbol.iterator]) {
            for (var j = [], O = m[Symbol.iterator](), I = O.next(); !I.done; I = O.next())
              j.push(I.value);
            m = j;
            for (var k = m.length; E < k; E++)
              C(E, E, E === m.length - 1);
          } else
            (function() {
              var c = void 0;
              Object.keys(m).forEach(function(S) {
                c !== void 0 && C(c, E - 1), c = S, E++;
              }), c !== void 0 && C(c, E - 1, !0);
            })();
        return E === 0 && (_ = v(this)), _;
      });
    }, t.exports = r.default;
  })(Ou, Ou.exports)), Ou.exports;
}
var Mu = { exports: {} }, Dv;
function T8() {
  return Dv || (Dv = 1, (function(t, r) {
    r.__esModule = !0;
    function s(l) {
      return l && l.__esModule ? l : { default: l };
    }
    var a = Xn(), u = s(a);
    r.default = function(l) {
      l.registerHelper("helperMissing", function() {
        if (arguments.length !== 1)
          throw new u.default('Missing helper: "' + arguments[arguments.length - 1].name + '"');
      });
    }, t.exports = r.default;
  })(Mu, Mu.exports)), Mu.exports;
}
var Ru = { exports: {} }, Lv;
function k8() {
  return Lv || (Lv = 1, (function(t, r) {
    r.__esModule = !0;
    function s(h) {
      return h && h.__esModule ? h : { default: h };
    }
    var a = gn(), u = Xn(), l = s(u);
    r.default = function(h) {
      h.registerHelper("if", function(m, f) {
        if (arguments.length != 2)
          throw new l.default("#if requires exactly one argument");
        return a.isFunction(m) && (m = m.call(this)), !f.hash.includeZero && !m || a.isEmpty(m) ? f.inverse(this) : f.fn(this);
      }), h.registerHelper("unless", function(m, f) {
        if (arguments.length != 2)
          throw new l.default("#unless requires exactly one argument");
        return h.helpers.if.call(this, m, {
          fn: f.inverse,
          inverse: f.fn,
          hash: f.hash
        });
      });
    }, t.exports = r.default;
  })(Ru, Ru.exports)), Ru.exports;
}
var ju = { exports: {} }, Pv;
function x8() {
  return Pv || (Pv = 1, (function(t, r) {
    r.__esModule = !0, r.default = function(s) {
      s.registerHelper("log", function() {
        for (var a = [void 0], u = arguments[arguments.length - 1], l = 0; l < arguments.length - 1; l++)
          a.push(arguments[l]);
        var h = 1;
        u.hash.level != null ? h = u.hash.level : u.data && u.data.level != null && (h = u.data.level), a[0] = h, s.log.apply(s, a);
      });
    }, t.exports = r.default;
  })(ju, ju.exports)), ju.exports;
}
var Du = { exports: {} }, zv;
function N8() {
  return zv || (zv = 1, (function(t, r) {
    r.__esModule = !0, r.default = function(s) {
      s.registerHelper("lookup", function(a, u, l) {
        return a && l.lookupProperty(a, u);
      });
    }, t.exports = r.default;
  })(Du, Du.exports)), Du.exports;
}
var Lu = { exports: {} }, Iv;
function O8() {
  return Iv || (Iv = 1, (function(t, r) {
    r.__esModule = !0;
    function s(h) {
      return h && h.__esModule ? h : { default: h };
    }
    var a = gn(), u = Xn(), l = s(u);
    r.default = function(h) {
      h.registerHelper("with", function(m, f) {
        if (arguments.length != 2)
          throw new l.default("#with requires exactly one argument");
        a.isFunction(m) && (m = m.call(this));
        var g = f.fn;
        if (a.isEmpty(m))
          return f.inverse(this);
        var v = f.data;
        return f.data && f.ids && (v = a.createFrame(f.data), v.contextPath = a.appendContextPath(f.data.contextPath, f.ids[0])), g(m, {
          data: v,
          blockParams: a.blockParams([m], [v && v.contextPath])
        });
      });
    }, t.exports = r.default;
  })(Lu, Lu.exports)), Lu.exports;
}
var Bv;
function $0() {
  if (Bv) return Is;
  Bv = 1, Is.__esModule = !0, Is.registerDefaultHelpers = C, Is.moveHelperToHooks = k;
  function t(j) {
    return j && j.__esModule ? j : { default: j };
  }
  var r = C8(), s = t(r), a = A8(), u = t(a), l = T8(), h = t(l), m = k8(), f = t(m), g = x8(), v = t(g), E = N8(), _ = t(E), b = O8(), p = t(b);
  function C(j) {
    s.default(j), u.default(j), h.default(j), f.default(j), v.default(j), _.default(j), p.default(j);
  }
  function k(j, O, I) {
    j.helpers[O] && (j.hooks[O] = j.helpers[O], I || delete j.helpers[O]);
  }
  return Is;
}
var Pu = {}, zu = { exports: {} }, Uv;
function M8() {
  return Uv || (Uv = 1, (function(t, r) {
    r.__esModule = !0;
    var s = gn();
    r.default = function(a) {
      a.registerDecorator("inline", function(u, l, h, m) {
        var f = u;
        return l.partials || (l.partials = {}, f = function(g, v) {
          var E = h.partials;
          h.partials = s.extend({}, E, l.partials);
          var _ = u(g, v);
          return h.partials = E, _;
        }), l.partials[m.args[0]] = m.fn, f;
      });
    }, t.exports = r.default;
  })(zu, zu.exports)), zu.exports;
}
var Hv;
function R8() {
  if (Hv) return Pu;
  Hv = 1, Pu.__esModule = !0, Pu.registerDefaultDecorators = a;
  function t(u) {
    return u && u.__esModule ? u : { default: u };
  }
  var r = M8(), s = t(r);
  function a(u) {
    s.default(u);
  }
  return Pu;
}
var Iu = { exports: {} }, qv;
function V0() {
  return qv || (qv = 1, (function(t, r) {
    r.__esModule = !0;
    var s = gn(), a = {
      methodMap: ["debug", "info", "warn", "error"],
      level: "info",
      // Maps a given level value to the `methodMap` indexes above.
      lookupLevel: function(l) {
        if (typeof l == "string") {
          var h = s.indexOf(a.methodMap, l.toLowerCase());
          h >= 0 ? l = h : l = parseInt(l, 10);
        }
        return l;
      },
      // Can be overridden in the host environment
      log: function(l) {
        if (l = a.lookupLevel(l), typeof console < "u" && a.lookupLevel(a.level) <= l) {
          var h = a.methodMap[l];
          console[h] || (h = "log");
          for (var m = arguments.length, f = Array(m > 1 ? m - 1 : 0), g = 1; g < m; g++)
            f[g - 1] = arguments[g];
          console[h].apply(console, f);
        }
      }
    };
    r.default = a, t.exports = r.default;
  })(Iu, Iu.exports)), Iu.exports;
}
var Ci = {}, Bu = {}, Gv;
function j8() {
  if (Gv) return Bu;
  Gv = 1, Bu.__esModule = !0, Bu.createNewLookupObject = r;
  var t = gn();
  function r() {
    for (var s = arguments.length, a = Array(s), u = 0; u < s; u++)
      a[u] = arguments[u];
    return t.extend.apply(void 0, [/* @__PURE__ */ Object.create(null)].concat(a));
  }
  return Bu;
}
var Zv;
function Y0() {
  if (Zv) return Ci;
  Zv = 1, Ci.__esModule = !0, Ci.createProtoAccessControl = l, Ci.resultIsAllowed = h, Ci.resetLoggedProperties = g;
  function t(v) {
    return v && v.__esModule ? v : { default: v };
  }
  var r = j8(), s = V0(), a = t(s), u = /* @__PURE__ */ Object.create(null);
  function l(v) {
    var E = /* @__PURE__ */ Object.create(null);
    E.constructor = !1, E.__defineGetter__ = !1, E.__defineSetter__ = !1, E.__lookupGetter__ = !1;
    var _ = /* @__PURE__ */ Object.create(null);
    return _.__proto__ = !1, {
      properties: {
        whitelist: r.createNewLookupObject(_, v.allowedProtoProperties),
        defaultValue: v.allowProtoPropertiesByDefault
      },
      methods: {
        whitelist: r.createNewLookupObject(E, v.allowedProtoMethods),
        defaultValue: v.allowProtoMethodsByDefault
      }
    };
  }
  function h(v, E, _) {
    return m(typeof v == "function" ? E.methods : E.properties, _);
  }
  function m(v, E) {
    return v.whitelist[E] !== void 0 ? v.whitelist[E] === !0 : v.defaultValue !== void 0 ? v.defaultValue : (f(E), !1);
  }
  function f(v) {
    u[v] !== !0 && (u[v] = !0, a.default.log("error", 'Handlebars: Access has been denied to resolve the property "' + v + `" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`));
  }
  function g() {
    Object.keys(u).forEach(function(v) {
      delete u[v];
    });
  }
  return Ci;
}
var $v;
function Ff() {
  if ($v) return Yn;
  $v = 1, Yn.__esModule = !0, Yn.HandlebarsEnvironment = p;
  function t(k) {
    return k && k.__esModule ? k : { default: k };
  }
  var r = gn(), s = Xn(), a = t(s), u = $0(), l = R8(), h = V0(), m = t(h), f = Y0(), g = "4.7.8";
  Yn.VERSION = g;
  var v = 8;
  Yn.COMPILER_REVISION = v;
  var E = 7;
  Yn.LAST_COMPATIBLE_COMPILER_REVISION = E;
  var _ = {
    1: "<= 1.0.rc.2",
    // 1.0.rc.2 is actually rev2 but doesn't report it
    2: "== 1.0.0-rc.3",
    3: "== 1.0.0-rc.4",
    4: "== 1.x.x",
    5: "== 2.0.0-alpha.x",
    6: ">= 2.0.0-beta.1",
    7: ">= 4.0.0 <4.3.0",
    8: ">= 4.3.0"
  };
  Yn.REVISION_CHANGES = _;
  var b = "[object Object]";
  function p(k, j, O) {
    this.helpers = k || {}, this.partials = j || {}, this.decorators = O || {}, u.registerDefaultHelpers(this), l.registerDefaultDecorators(this);
  }
  p.prototype = {
    constructor: p,
    logger: m.default,
    log: m.default.log,
    registerHelper: function(j, O) {
      if (r.toString.call(j) === b) {
        if (O)
          throw new a.default("Arg not supported with multiple helpers");
        r.extend(this.helpers, j);
      } else
        this.helpers[j] = O;
    },
    unregisterHelper: function(j) {
      delete this.helpers[j];
    },
    registerPartial: function(j, O) {
      if (r.toString.call(j) === b)
        r.extend(this.partials, j);
      else {
        if (typeof O > "u")
          throw new a.default('Attempting to register a partial called "' + j + '" as undefined');
        this.partials[j] = O;
      }
    },
    unregisterPartial: function(j) {
      delete this.partials[j];
    },
    registerDecorator: function(j, O) {
      if (r.toString.call(j) === b) {
        if (O)
          throw new a.default("Arg not supported with multiple decorators");
        r.extend(this.decorators, j);
      } else
        this.decorators[j] = O;
    },
    unregisterDecorator: function(j) {
      delete this.decorators[j];
    },
    /**
     * Reset the memory of illegal property accesses that have already been logged.
     * @deprecated should only be used in handlebars test-cases
     */
    resetLoggedPropertyAccesses: function() {
      f.resetLoggedProperties();
    }
  };
  var C = m.default.log;
  return Yn.log = C, Yn.createFrame = r.createFrame, Yn.logger = m.default, Yn;
}
var Uu = { exports: {} }, Vv;
function D8() {
  return Vv || (Vv = 1, (function(t, r) {
    r.__esModule = !0;
    function s(a) {
      this.string = a;
    }
    s.prototype.toString = s.prototype.toHTML = function() {
      return "" + this.string;
    }, r.default = s, t.exports = r.default;
  })(Uu, Uu.exports)), Uu.exports;
}
var Sr = {}, Hu = {}, Yv;
function L8() {
  if (Yv) return Hu;
  Yv = 1, Hu.__esModule = !0, Hu.wrapHelper = t;
  function t(r, s) {
    if (typeof r != "function")
      return r;
    var a = function() {
      var l = arguments[arguments.length - 1];
      return arguments[arguments.length - 1] = s(l), r.apply(this, arguments);
    };
    return a;
  }
  return Hu;
}
var Fv;
function P8() {
  if (Fv) return Sr;
  Fv = 1, Sr.__esModule = !0, Sr.checkRevision = v, Sr.template = E, Sr.wrapProgram = _, Sr.resolvePartial = b, Sr.invokePartial = p, Sr.noop = C;
  function t(c) {
    return c && c.__esModule ? c : { default: c };
  }
  function r(c) {
    if (c && c.__esModule)
      return c;
    var S = {};
    if (c != null)
      for (var w in c)
        Object.prototype.hasOwnProperty.call(c, w) && (S[w] = c[w]);
    return S.default = c, S;
  }
  var s = gn(), a = r(s), u = Xn(), l = t(u), h = Ff(), m = $0(), f = L8(), g = Y0();
  function v(c) {
    var S = c && c[0] || 1, w = h.COMPILER_REVISION;
    if (!(S >= h.LAST_COMPATIBLE_COMPILER_REVISION && S <= h.COMPILER_REVISION))
      if (S < h.LAST_COMPATIBLE_COMPILER_REVISION) {
        var A = h.REVISION_CHANGES[w], N = h.REVISION_CHANGES[S];
        throw new l.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (" + A + ") or downgrade your runtime to an older version (" + N + ").");
      } else
        throw new l.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (" + c[1] + ").");
  }
  function E(c, S) {
    if (!S)
      throw new l.default("No environment passed to template");
    if (!c || !c.main)
      throw new l.default("Unknown template object: " + typeof c);
    c.main.decorator = c.main_d, S.VM.checkRevision(c.compiler);
    var w = c.compiler && c.compiler[0] === 7;
    function A(M, P, H) {
      H.hash && (P = a.extend({}, P, H.hash), H.ids && (H.ids[0] = !0)), M = S.VM.resolvePartial.call(this, M, P, H);
      var X = a.extend({}, H, {
        hooks: this.hooks,
        protoAccessControl: this.protoAccessControl
      }), F = S.VM.invokePartial.call(this, M, P, X);
      if (F == null && S.compile && (H.partials[H.name] = S.compile(M, c.compilerOptions, S), F = H.partials[H.name](P, X)), F != null) {
        if (H.indent) {
          for (var Q = F.split(`
`), R = 0, q = Q.length; R < q && !(!Q[R] && R + 1 === q); R++)
            Q[R] = H.indent + Q[R];
          F = Q.join(`
`);
        }
        return F;
      } else
        throw new l.default("The partial " + H.name + " could not be compiled when running in runtime-only mode");
    }
    var N = {
      strict: function(P, H, X) {
        if (!P || !(H in P))
          throw new l.default('"' + H + '" not defined in ' + P, {
            loc: X
          });
        return N.lookupProperty(P, H);
      },
      lookupProperty: function(P, H) {
        var X = P[H];
        if (X == null || Object.prototype.hasOwnProperty.call(P, H) || g.resultIsAllowed(X, N.protoAccessControl, H))
          return X;
      },
      lookup: function(P, H) {
        for (var X = P.length, F = 0; F < X; F++) {
          var Q = P[F] && N.lookupProperty(P[F], H);
          if (Q != null)
            return P[F][H];
        }
      },
      lambda: function(P, H) {
        return typeof P == "function" ? P.call(H) : P;
      },
      escapeExpression: a.escapeExpression,
      invokePartial: A,
      fn: function(P) {
        var H = c[P];
        return H.decorator = c[P + "_d"], H;
      },
      programs: [],
      program: function(P, H, X, F, Q) {
        var R = this.programs[P], q = this.fn(P);
        return H || Q || F || X ? R = _(this, P, q, H, X, F, Q) : R || (R = this.programs[P] = _(this, P, q)), R;
      },
      data: function(P, H) {
        for (; P && H--; )
          P = P._parent;
        return P;
      },
      mergeIfNeeded: function(P, H) {
        var X = P || H;
        return P && H && P !== H && (X = a.extend({}, H, P)), X;
      },
      // An empty object to use as replacement for null-contexts
      nullContext: Object.seal({}),
      noop: S.VM.noop,
      compilerInfo: c.compiler
    };
    function D(M) {
      var P = arguments.length <= 1 || arguments[1] === void 0 ? {} : arguments[1], H = P.data;
      D._setup(P), !P.partial && c.useData && (H = k(M, H));
      var X = void 0, F = c.useBlockParams ? [] : void 0;
      c.useDepths && (P.depths ? X = M != P.depths[0] ? [M].concat(P.depths) : P.depths : X = [M]);
      function Q(R) {
        return "" + c.main(N, R, N.helpers, N.partials, H, F, X);
      }
      return Q = j(c.main, Q, N, P.depths || [], H, F), Q(M, P);
    }
    return D.isTop = !0, D._setup = function(M) {
      if (M.partial)
        N.protoAccessControl = M.protoAccessControl, N.helpers = M.helpers, N.partials = M.partials, N.decorators = M.decorators, N.hooks = M.hooks;
      else {
        var P = a.extend({}, S.helpers, M.helpers);
        O(P, N), N.helpers = P, c.usePartial && (N.partials = N.mergeIfNeeded(M.partials, S.partials)), (c.usePartial || c.useDecorators) && (N.decorators = a.extend({}, S.decorators, M.decorators)), N.hooks = {}, N.protoAccessControl = g.createProtoAccessControl(M);
        var H = M.allowCallsToHelperMissing || w;
        m.moveHelperToHooks(N, "helperMissing", H), m.moveHelperToHooks(N, "blockHelperMissing", H);
      }
    }, D._child = function(M, P, H, X) {
      if (c.useBlockParams && !H)
        throw new l.default("must pass block params");
      if (c.useDepths && !X)
        throw new l.default("must pass parent depths");
      return _(N, M, c[M], P, 0, H, X);
    }, D;
  }
  function _(c, S, w, A, N, D, M) {
    function P(H) {
      var X = arguments.length <= 1 || arguments[1] === void 0 ? {} : arguments[1], F = M;
      return M && H != M[0] && !(H === c.nullContext && M[0] === null) && (F = [H].concat(M)), w(c, H, c.helpers, c.partials, X.data || A, D && [X.blockParams].concat(D), F);
    }
    return P = j(w, P, c, M, A, D), P.program = S, P.depth = M ? M.length : 0, P.blockParams = N || 0, P;
  }
  function b(c, S, w) {
    return c ? !c.call && !w.name && (w.name = c, c = w.partials[c]) : w.name === "@partial-block" ? c = w.data["partial-block"] : c = w.partials[w.name], c;
  }
  function p(c, S, w) {
    var A = w.data && w.data["partial-block"];
    w.partial = !0, w.ids && (w.data.contextPath = w.ids[0] || w.data.contextPath);
    var N = void 0;
    if (w.fn && w.fn !== C && (function() {
      w.data = h.createFrame(w.data);
      var D = w.fn;
      N = w.data["partial-block"] = function(P) {
        var H = arguments.length <= 1 || arguments[1] === void 0 ? {} : arguments[1];
        return H.data = h.createFrame(H.data), H.data["partial-block"] = A, D(P, H);
      }, D.partials && (w.partials = a.extend({}, w.partials, D.partials));
    })(), c === void 0 && N && (c = N), c === void 0)
      throw new l.default("The partial " + w.name + " could not be found");
    if (c instanceof Function)
      return c(S, w);
  }
  function C() {
    return "";
  }
  function k(c, S) {
    return (!S || !("root" in S)) && (S = S ? h.createFrame(S) : {}, S.root = c), S;
  }
  function j(c, S, w, A, N, D) {
    if (c.decorator) {
      var M = {};
      S = c.decorator(S, M, w, A && A[0], N, D, A), a.extend(S, M);
    }
    return S;
  }
  function O(c, S) {
    Object.keys(c).forEach(function(w) {
      var A = c[w];
      c[w] = I(A, S);
    });
  }
  function I(c, S) {
    var w = S.lookupProperty;
    return f.wrapHelper(c, function(A) {
      return a.extend({ lookupProperty: w }, A);
    });
  }
  return Sr;
}
var qu = { exports: {} }, Xv;
function F0() {
  return Xv || (Xv = 1, (function(t, r) {
    r.__esModule = !0, r.default = function(s) {
      (function() {
        typeof globalThis != "object" && (Object.prototype.__defineGetter__("__magic__", function() {
          return this;
        }), __magic__.globalThis = __magic__, delete Object.prototype.__magic__);
      })();
      var a = globalThis.Handlebars;
      s.noConflict = function() {
        return globalThis.Handlebars === s && (globalThis.Handlebars = a), s;
      };
    }, t.exports = r.default;
  })(qu, qu.exports)), qu.exports;
}
var Kv;
function z8() {
  return Kv || (Kv = 1, (function(t, r) {
    r.__esModule = !0;
    function s(O) {
      return O && O.__esModule ? O : { default: O };
    }
    function a(O) {
      if (O && O.__esModule)
        return O;
      var I = {};
      if (O != null)
        for (var c in O)
          Object.prototype.hasOwnProperty.call(O, c) && (I[c] = O[c]);
      return I.default = O, I;
    }
    var u = Ff(), l = a(u), h = D8(), m = s(h), f = Xn(), g = s(f), v = gn(), E = a(v), _ = P8(), b = a(_), p = F0(), C = s(p);
    function k() {
      var O = new l.HandlebarsEnvironment();
      return E.extend(O, l), O.SafeString = m.default, O.Exception = g.default, O.Utils = E, O.escapeExpression = E.escapeExpression, O.VM = b, O.template = function(I) {
        return b.template(I, O);
      }, O;
    }
    var j = k();
    j.create = k, C.default(j), j.default = j, r.default = j, t.exports = r.default;
  })(ku, ku.exports)), ku.exports;
}
var Gu = { exports: {} }, Qv;
function X0() {
  return Qv || (Qv = 1, (function(t, r) {
    r.__esModule = !0;
    var s = {
      // Public API used to evaluate derived attributes regarding AST nodes
      helpers: {
        // a mustache is definitely a helper if:
        // * it is an eligible helper, and
        // * it has at least one parameter or hash segment
        helperExpression: function(u) {
          return u.type === "SubExpression" || (u.type === "MustacheStatement" || u.type === "BlockStatement") && !!(u.params && u.params.length || u.hash);
        },
        scopedId: function(u) {
          return /^\.|this\b/.test(u.original);
        },
        // an ID is simple if it only has one part, and that part is not
        // `..` or `this`.
        simpleId: function(u) {
          return u.parts.length === 1 && !s.helpers.scopedId(u) && !u.depth;
        }
      }
    };
    r.default = s, t.exports = r.default;
  })(Gu, Gu.exports)), Gu.exports;
}
var Ai = {}, Zu = { exports: {} }, Jv;
function I8() {
  return Jv || (Jv = 1, (function(t, r) {
    r.__esModule = !0;
    var s = (function() {
      var a = {
        trace: function() {
        },
        yy: {},
        symbols_: { error: 2, root: 3, program: 4, EOF: 5, program_repetition0: 6, statement: 7, mustache: 8, block: 9, rawBlock: 10, partial: 11, partialBlock: 12, content: 13, COMMENT: 14, CONTENT: 15, openRawBlock: 16, rawBlock_repetition0: 17, END_RAW_BLOCK: 18, OPEN_RAW_BLOCK: 19, helperName: 20, openRawBlock_repetition0: 21, openRawBlock_option0: 22, CLOSE_RAW_BLOCK: 23, openBlock: 24, block_option0: 25, closeBlock: 26, openInverse: 27, block_option1: 28, OPEN_BLOCK: 29, openBlock_repetition0: 30, openBlock_option0: 31, openBlock_option1: 32, CLOSE: 33, OPEN_INVERSE: 34, openInverse_repetition0: 35, openInverse_option0: 36, openInverse_option1: 37, openInverseChain: 38, OPEN_INVERSE_CHAIN: 39, openInverseChain_repetition0: 40, openInverseChain_option0: 41, openInverseChain_option1: 42, inverseAndProgram: 43, INVERSE: 44, inverseChain: 45, inverseChain_option0: 46, OPEN_ENDBLOCK: 47, OPEN: 48, mustache_repetition0: 49, mustache_option0: 50, OPEN_UNESCAPED: 51, mustache_repetition1: 52, mustache_option1: 53, CLOSE_UNESCAPED: 54, OPEN_PARTIAL: 55, partialName: 56, partial_repetition0: 57, partial_option0: 58, openPartialBlock: 59, OPEN_PARTIAL_BLOCK: 60, openPartialBlock_repetition0: 61, openPartialBlock_option0: 62, param: 63, sexpr: 64, OPEN_SEXPR: 65, sexpr_repetition0: 66, sexpr_option0: 67, CLOSE_SEXPR: 68, hash: 69, hash_repetition_plus0: 70, hashSegment: 71, ID: 72, EQUALS: 73, blockParams: 74, OPEN_BLOCK_PARAMS: 75, blockParams_repetition_plus0: 76, CLOSE_BLOCK_PARAMS: 77, path: 78, dataName: 79, STRING: 80, NUMBER: 81, BOOLEAN: 82, UNDEFINED: 83, NULL: 84, DATA: 85, pathSegments: 86, SEP: 87, $accept: 0, $end: 1 },
        terminals_: { 2: "error", 5: "EOF", 14: "COMMENT", 15: "CONTENT", 18: "END_RAW_BLOCK", 19: "OPEN_RAW_BLOCK", 23: "CLOSE_RAW_BLOCK", 29: "OPEN_BLOCK", 33: "CLOSE", 34: "OPEN_INVERSE", 39: "OPEN_INVERSE_CHAIN", 44: "INVERSE", 47: "OPEN_ENDBLOCK", 48: "OPEN", 51: "OPEN_UNESCAPED", 54: "CLOSE_UNESCAPED", 55: "OPEN_PARTIAL", 60: "OPEN_PARTIAL_BLOCK", 65: "OPEN_SEXPR", 68: "CLOSE_SEXPR", 72: "ID", 73: "EQUALS", 75: "OPEN_BLOCK_PARAMS", 77: "CLOSE_BLOCK_PARAMS", 80: "STRING", 81: "NUMBER", 82: "BOOLEAN", 83: "UNDEFINED", 84: "NULL", 85: "DATA", 87: "SEP" },
        productions_: [0, [3, 2], [4, 1], [7, 1], [7, 1], [7, 1], [7, 1], [7, 1], [7, 1], [7, 1], [13, 1], [10, 3], [16, 5], [9, 4], [9, 4], [24, 6], [27, 6], [38, 6], [43, 2], [45, 3], [45, 1], [26, 3], [8, 5], [8, 5], [11, 5], [12, 3], [59, 5], [63, 1], [63, 1], [64, 5], [69, 1], [71, 3], [74, 3], [20, 1], [20, 1], [20, 1], [20, 1], [20, 1], [20, 1], [20, 1], [56, 1], [56, 1], [79, 2], [78, 1], [86, 3], [86, 1], [6, 0], [6, 2], [17, 0], [17, 2], [21, 0], [21, 2], [22, 0], [22, 1], [25, 0], [25, 1], [28, 0], [28, 1], [30, 0], [30, 2], [31, 0], [31, 1], [32, 0], [32, 1], [35, 0], [35, 2], [36, 0], [36, 1], [37, 0], [37, 1], [40, 0], [40, 2], [41, 0], [41, 1], [42, 0], [42, 1], [46, 0], [46, 1], [49, 0], [49, 2], [50, 0], [50, 1], [52, 0], [52, 2], [53, 0], [53, 1], [57, 0], [57, 2], [58, 0], [58, 1], [61, 0], [61, 2], [62, 0], [62, 1], [66, 0], [66, 2], [67, 0], [67, 1], [70, 1], [70, 2], [76, 1], [76, 2]],
        performAction: function(m, f, g, v, E, _, b) {
          var p = _.length - 1;
          switch (E) {
            case 1:
              return _[p - 1];
            case 2:
              this.$ = v.prepareProgram(_[p]);
              break;
            case 3:
              this.$ = _[p];
              break;
            case 4:
              this.$ = _[p];
              break;
            case 5:
              this.$ = _[p];
              break;
            case 6:
              this.$ = _[p];
              break;
            case 7:
              this.$ = _[p];
              break;
            case 8:
              this.$ = _[p];
              break;
            case 9:
              this.$ = {
                type: "CommentStatement",
                value: v.stripComment(_[p]),
                strip: v.stripFlags(_[p], _[p]),
                loc: v.locInfo(this._$)
              };
              break;
            case 10:
              this.$ = {
                type: "ContentStatement",
                original: _[p],
                value: _[p],
                loc: v.locInfo(this._$)
              };
              break;
            case 11:
              this.$ = v.prepareRawBlock(_[p - 2], _[p - 1], _[p], this._$);
              break;
            case 12:
              this.$ = { path: _[p - 3], params: _[p - 2], hash: _[p - 1] };
              break;
            case 13:
              this.$ = v.prepareBlock(_[p - 3], _[p - 2], _[p - 1], _[p], !1, this._$);
              break;
            case 14:
              this.$ = v.prepareBlock(_[p - 3], _[p - 2], _[p - 1], _[p], !0, this._$);
              break;
            case 15:
              this.$ = { open: _[p - 5], path: _[p - 4], params: _[p - 3], hash: _[p - 2], blockParams: _[p - 1], strip: v.stripFlags(_[p - 5], _[p]) };
              break;
            case 16:
              this.$ = { path: _[p - 4], params: _[p - 3], hash: _[p - 2], blockParams: _[p - 1], strip: v.stripFlags(_[p - 5], _[p]) };
              break;
            case 17:
              this.$ = { path: _[p - 4], params: _[p - 3], hash: _[p - 2], blockParams: _[p - 1], strip: v.stripFlags(_[p - 5], _[p]) };
              break;
            case 18:
              this.$ = { strip: v.stripFlags(_[p - 1], _[p - 1]), program: _[p] };
              break;
            case 19:
              var C = v.prepareBlock(_[p - 2], _[p - 1], _[p], _[p], !1, this._$), k = v.prepareProgram([C], _[p - 1].loc);
              k.chained = !0, this.$ = { strip: _[p - 2].strip, program: k, chain: !0 };
              break;
            case 20:
              this.$ = _[p];
              break;
            case 21:
              this.$ = { path: _[p - 1], strip: v.stripFlags(_[p - 2], _[p]) };
              break;
            case 22:
              this.$ = v.prepareMustache(_[p - 3], _[p - 2], _[p - 1], _[p - 4], v.stripFlags(_[p - 4], _[p]), this._$);
              break;
            case 23:
              this.$ = v.prepareMustache(_[p - 3], _[p - 2], _[p - 1], _[p - 4], v.stripFlags(_[p - 4], _[p]), this._$);
              break;
            case 24:
              this.$ = {
                type: "PartialStatement",
                name: _[p - 3],
                params: _[p - 2],
                hash: _[p - 1],
                indent: "",
                strip: v.stripFlags(_[p - 4], _[p]),
                loc: v.locInfo(this._$)
              };
              break;
            case 25:
              this.$ = v.preparePartialBlock(_[p - 2], _[p - 1], _[p], this._$);
              break;
            case 26:
              this.$ = { path: _[p - 3], params: _[p - 2], hash: _[p - 1], strip: v.stripFlags(_[p - 4], _[p]) };
              break;
            case 27:
              this.$ = _[p];
              break;
            case 28:
              this.$ = _[p];
              break;
            case 29:
              this.$ = {
                type: "SubExpression",
                path: _[p - 3],
                params: _[p - 2],
                hash: _[p - 1],
                loc: v.locInfo(this._$)
              };
              break;
            case 30:
              this.$ = { type: "Hash", pairs: _[p], loc: v.locInfo(this._$) };
              break;
            case 31:
              this.$ = { type: "HashPair", key: v.id(_[p - 2]), value: _[p], loc: v.locInfo(this._$) };
              break;
            case 32:
              this.$ = v.id(_[p - 1]);
              break;
            case 33:
              this.$ = _[p];
              break;
            case 34:
              this.$ = _[p];
              break;
            case 35:
              this.$ = { type: "StringLiteral", value: _[p], original: _[p], loc: v.locInfo(this._$) };
              break;
            case 36:
              this.$ = { type: "NumberLiteral", value: Number(_[p]), original: Number(_[p]), loc: v.locInfo(this._$) };
              break;
            case 37:
              this.$ = { type: "BooleanLiteral", value: _[p] === "true", original: _[p] === "true", loc: v.locInfo(this._$) };
              break;
            case 38:
              this.$ = { type: "UndefinedLiteral", original: void 0, value: void 0, loc: v.locInfo(this._$) };
              break;
            case 39:
              this.$ = { type: "NullLiteral", original: null, value: null, loc: v.locInfo(this._$) };
              break;
            case 40:
              this.$ = _[p];
              break;
            case 41:
              this.$ = _[p];
              break;
            case 42:
              this.$ = v.preparePath(!0, _[p], this._$);
              break;
            case 43:
              this.$ = v.preparePath(!1, _[p], this._$);
              break;
            case 44:
              _[p - 2].push({ part: v.id(_[p]), original: _[p], separator: _[p - 1] }), this.$ = _[p - 2];
              break;
            case 45:
              this.$ = [{ part: v.id(_[p]), original: _[p] }];
              break;
            case 46:
              this.$ = [];
              break;
            case 47:
              _[p - 1].push(_[p]);
              break;
            case 48:
              this.$ = [];
              break;
            case 49:
              _[p - 1].push(_[p]);
              break;
            case 50:
              this.$ = [];
              break;
            case 51:
              _[p - 1].push(_[p]);
              break;
            case 58:
              this.$ = [];
              break;
            case 59:
              _[p - 1].push(_[p]);
              break;
            case 64:
              this.$ = [];
              break;
            case 65:
              _[p - 1].push(_[p]);
              break;
            case 70:
              this.$ = [];
              break;
            case 71:
              _[p - 1].push(_[p]);
              break;
            case 78:
              this.$ = [];
              break;
            case 79:
              _[p - 1].push(_[p]);
              break;
            case 82:
              this.$ = [];
              break;
            case 83:
              _[p - 1].push(_[p]);
              break;
            case 86:
              this.$ = [];
              break;
            case 87:
              _[p - 1].push(_[p]);
              break;
            case 90:
              this.$ = [];
              break;
            case 91:
              _[p - 1].push(_[p]);
              break;
            case 94:
              this.$ = [];
              break;
            case 95:
              _[p - 1].push(_[p]);
              break;
            case 98:
              this.$ = [_[p]];
              break;
            case 99:
              _[p - 1].push(_[p]);
              break;
            case 100:
              this.$ = [_[p]];
              break;
            case 101:
              _[p - 1].push(_[p]);
              break;
          }
        },
        table: [{ 3: 1, 4: 2, 5: [2, 46], 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 1: [3] }, { 5: [1, 4] }, { 5: [2, 2], 7: 5, 8: 6, 9: 7, 10: 8, 11: 9, 12: 10, 13: 11, 14: [1, 12], 15: [1, 20], 16: 17, 19: [1, 23], 24: 15, 27: 16, 29: [1, 21], 34: [1, 22], 39: [2, 2], 44: [2, 2], 47: [2, 2], 48: [1, 13], 51: [1, 14], 55: [1, 18], 59: 19, 60: [1, 24] }, { 1: [2, 1] }, { 5: [2, 47], 14: [2, 47], 15: [2, 47], 19: [2, 47], 29: [2, 47], 34: [2, 47], 39: [2, 47], 44: [2, 47], 47: [2, 47], 48: [2, 47], 51: [2, 47], 55: [2, 47], 60: [2, 47] }, { 5: [2, 3], 14: [2, 3], 15: [2, 3], 19: [2, 3], 29: [2, 3], 34: [2, 3], 39: [2, 3], 44: [2, 3], 47: [2, 3], 48: [2, 3], 51: [2, 3], 55: [2, 3], 60: [2, 3] }, { 5: [2, 4], 14: [2, 4], 15: [2, 4], 19: [2, 4], 29: [2, 4], 34: [2, 4], 39: [2, 4], 44: [2, 4], 47: [2, 4], 48: [2, 4], 51: [2, 4], 55: [2, 4], 60: [2, 4] }, { 5: [2, 5], 14: [2, 5], 15: [2, 5], 19: [2, 5], 29: [2, 5], 34: [2, 5], 39: [2, 5], 44: [2, 5], 47: [2, 5], 48: [2, 5], 51: [2, 5], 55: [2, 5], 60: [2, 5] }, { 5: [2, 6], 14: [2, 6], 15: [2, 6], 19: [2, 6], 29: [2, 6], 34: [2, 6], 39: [2, 6], 44: [2, 6], 47: [2, 6], 48: [2, 6], 51: [2, 6], 55: [2, 6], 60: [2, 6] }, { 5: [2, 7], 14: [2, 7], 15: [2, 7], 19: [2, 7], 29: [2, 7], 34: [2, 7], 39: [2, 7], 44: [2, 7], 47: [2, 7], 48: [2, 7], 51: [2, 7], 55: [2, 7], 60: [2, 7] }, { 5: [2, 8], 14: [2, 8], 15: [2, 8], 19: [2, 8], 29: [2, 8], 34: [2, 8], 39: [2, 8], 44: [2, 8], 47: [2, 8], 48: [2, 8], 51: [2, 8], 55: [2, 8], 60: [2, 8] }, { 5: [2, 9], 14: [2, 9], 15: [2, 9], 19: [2, 9], 29: [2, 9], 34: [2, 9], 39: [2, 9], 44: [2, 9], 47: [2, 9], 48: [2, 9], 51: [2, 9], 55: [2, 9], 60: [2, 9] }, { 20: 25, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 36, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 4: 37, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 39: [2, 46], 44: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 4: 38, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 44: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 15: [2, 48], 17: 39, 18: [2, 48] }, { 20: 41, 56: 40, 64: 42, 65: [1, 43], 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 4: 44, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 5: [2, 10], 14: [2, 10], 15: [2, 10], 18: [2, 10], 19: [2, 10], 29: [2, 10], 34: [2, 10], 39: [2, 10], 44: [2, 10], 47: [2, 10], 48: [2, 10], 51: [2, 10], 55: [2, 10], 60: [2, 10] }, { 20: 45, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 46, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 47, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 41, 56: 48, 64: 42, 65: [1, 43], 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 33: [2, 78], 49: 49, 65: [2, 78], 72: [2, 78], 80: [2, 78], 81: [2, 78], 82: [2, 78], 83: [2, 78], 84: [2, 78], 85: [2, 78] }, { 23: [2, 33], 33: [2, 33], 54: [2, 33], 65: [2, 33], 68: [2, 33], 72: [2, 33], 75: [2, 33], 80: [2, 33], 81: [2, 33], 82: [2, 33], 83: [2, 33], 84: [2, 33], 85: [2, 33] }, { 23: [2, 34], 33: [2, 34], 54: [2, 34], 65: [2, 34], 68: [2, 34], 72: [2, 34], 75: [2, 34], 80: [2, 34], 81: [2, 34], 82: [2, 34], 83: [2, 34], 84: [2, 34], 85: [2, 34] }, { 23: [2, 35], 33: [2, 35], 54: [2, 35], 65: [2, 35], 68: [2, 35], 72: [2, 35], 75: [2, 35], 80: [2, 35], 81: [2, 35], 82: [2, 35], 83: [2, 35], 84: [2, 35], 85: [2, 35] }, { 23: [2, 36], 33: [2, 36], 54: [2, 36], 65: [2, 36], 68: [2, 36], 72: [2, 36], 75: [2, 36], 80: [2, 36], 81: [2, 36], 82: [2, 36], 83: [2, 36], 84: [2, 36], 85: [2, 36] }, { 23: [2, 37], 33: [2, 37], 54: [2, 37], 65: [2, 37], 68: [2, 37], 72: [2, 37], 75: [2, 37], 80: [2, 37], 81: [2, 37], 82: [2, 37], 83: [2, 37], 84: [2, 37], 85: [2, 37] }, { 23: [2, 38], 33: [2, 38], 54: [2, 38], 65: [2, 38], 68: [2, 38], 72: [2, 38], 75: [2, 38], 80: [2, 38], 81: [2, 38], 82: [2, 38], 83: [2, 38], 84: [2, 38], 85: [2, 38] }, { 23: [2, 39], 33: [2, 39], 54: [2, 39], 65: [2, 39], 68: [2, 39], 72: [2, 39], 75: [2, 39], 80: [2, 39], 81: [2, 39], 82: [2, 39], 83: [2, 39], 84: [2, 39], 85: [2, 39] }, { 23: [2, 43], 33: [2, 43], 54: [2, 43], 65: [2, 43], 68: [2, 43], 72: [2, 43], 75: [2, 43], 80: [2, 43], 81: [2, 43], 82: [2, 43], 83: [2, 43], 84: [2, 43], 85: [2, 43], 87: [1, 50] }, { 72: [1, 35], 86: 51 }, { 23: [2, 45], 33: [2, 45], 54: [2, 45], 65: [2, 45], 68: [2, 45], 72: [2, 45], 75: [2, 45], 80: [2, 45], 81: [2, 45], 82: [2, 45], 83: [2, 45], 84: [2, 45], 85: [2, 45], 87: [2, 45] }, { 52: 52, 54: [2, 82], 65: [2, 82], 72: [2, 82], 80: [2, 82], 81: [2, 82], 82: [2, 82], 83: [2, 82], 84: [2, 82], 85: [2, 82] }, { 25: 53, 38: 55, 39: [1, 57], 43: 56, 44: [1, 58], 45: 54, 47: [2, 54] }, { 28: 59, 43: 60, 44: [1, 58], 47: [2, 56] }, { 13: 62, 15: [1, 20], 18: [1, 61] }, { 33: [2, 86], 57: 63, 65: [2, 86], 72: [2, 86], 80: [2, 86], 81: [2, 86], 82: [2, 86], 83: [2, 86], 84: [2, 86], 85: [2, 86] }, { 33: [2, 40], 65: [2, 40], 72: [2, 40], 80: [2, 40], 81: [2, 40], 82: [2, 40], 83: [2, 40], 84: [2, 40], 85: [2, 40] }, { 33: [2, 41], 65: [2, 41], 72: [2, 41], 80: [2, 41], 81: [2, 41], 82: [2, 41], 83: [2, 41], 84: [2, 41], 85: [2, 41] }, { 20: 64, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 26: 65, 47: [1, 66] }, { 30: 67, 33: [2, 58], 65: [2, 58], 72: [2, 58], 75: [2, 58], 80: [2, 58], 81: [2, 58], 82: [2, 58], 83: [2, 58], 84: [2, 58], 85: [2, 58] }, { 33: [2, 64], 35: 68, 65: [2, 64], 72: [2, 64], 75: [2, 64], 80: [2, 64], 81: [2, 64], 82: [2, 64], 83: [2, 64], 84: [2, 64], 85: [2, 64] }, { 21: 69, 23: [2, 50], 65: [2, 50], 72: [2, 50], 80: [2, 50], 81: [2, 50], 82: [2, 50], 83: [2, 50], 84: [2, 50], 85: [2, 50] }, { 33: [2, 90], 61: 70, 65: [2, 90], 72: [2, 90], 80: [2, 90], 81: [2, 90], 82: [2, 90], 83: [2, 90], 84: [2, 90], 85: [2, 90] }, { 20: 74, 33: [2, 80], 50: 71, 63: 72, 64: 75, 65: [1, 43], 69: 73, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 72: [1, 79] }, { 23: [2, 42], 33: [2, 42], 54: [2, 42], 65: [2, 42], 68: [2, 42], 72: [2, 42], 75: [2, 42], 80: [2, 42], 81: [2, 42], 82: [2, 42], 83: [2, 42], 84: [2, 42], 85: [2, 42], 87: [1, 50] }, { 20: 74, 53: 80, 54: [2, 84], 63: 81, 64: 75, 65: [1, 43], 69: 82, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 26: 83, 47: [1, 66] }, { 47: [2, 55] }, { 4: 84, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 39: [2, 46], 44: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 47: [2, 20] }, { 20: 85, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 4: 86, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 26: 87, 47: [1, 66] }, { 47: [2, 57] }, { 5: [2, 11], 14: [2, 11], 15: [2, 11], 19: [2, 11], 29: [2, 11], 34: [2, 11], 39: [2, 11], 44: [2, 11], 47: [2, 11], 48: [2, 11], 51: [2, 11], 55: [2, 11], 60: [2, 11] }, { 15: [2, 49], 18: [2, 49] }, { 20: 74, 33: [2, 88], 58: 88, 63: 89, 64: 75, 65: [1, 43], 69: 90, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 65: [2, 94], 66: 91, 68: [2, 94], 72: [2, 94], 80: [2, 94], 81: [2, 94], 82: [2, 94], 83: [2, 94], 84: [2, 94], 85: [2, 94] }, { 5: [2, 25], 14: [2, 25], 15: [2, 25], 19: [2, 25], 29: [2, 25], 34: [2, 25], 39: [2, 25], 44: [2, 25], 47: [2, 25], 48: [2, 25], 51: [2, 25], 55: [2, 25], 60: [2, 25] }, { 20: 92, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 74, 31: 93, 33: [2, 60], 63: 94, 64: 75, 65: [1, 43], 69: 95, 70: 76, 71: 77, 72: [1, 78], 75: [2, 60], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 74, 33: [2, 66], 36: 96, 63: 97, 64: 75, 65: [1, 43], 69: 98, 70: 76, 71: 77, 72: [1, 78], 75: [2, 66], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 74, 22: 99, 23: [2, 52], 63: 100, 64: 75, 65: [1, 43], 69: 101, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 74, 33: [2, 92], 62: 102, 63: 103, 64: 75, 65: [1, 43], 69: 104, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 33: [1, 105] }, { 33: [2, 79], 65: [2, 79], 72: [2, 79], 80: [2, 79], 81: [2, 79], 82: [2, 79], 83: [2, 79], 84: [2, 79], 85: [2, 79] }, { 33: [2, 81] }, { 23: [2, 27], 33: [2, 27], 54: [2, 27], 65: [2, 27], 68: [2, 27], 72: [2, 27], 75: [2, 27], 80: [2, 27], 81: [2, 27], 82: [2, 27], 83: [2, 27], 84: [2, 27], 85: [2, 27] }, { 23: [2, 28], 33: [2, 28], 54: [2, 28], 65: [2, 28], 68: [2, 28], 72: [2, 28], 75: [2, 28], 80: [2, 28], 81: [2, 28], 82: [2, 28], 83: [2, 28], 84: [2, 28], 85: [2, 28] }, { 23: [2, 30], 33: [2, 30], 54: [2, 30], 68: [2, 30], 71: 106, 72: [1, 107], 75: [2, 30] }, { 23: [2, 98], 33: [2, 98], 54: [2, 98], 68: [2, 98], 72: [2, 98], 75: [2, 98] }, { 23: [2, 45], 33: [2, 45], 54: [2, 45], 65: [2, 45], 68: [2, 45], 72: [2, 45], 73: [1, 108], 75: [2, 45], 80: [2, 45], 81: [2, 45], 82: [2, 45], 83: [2, 45], 84: [2, 45], 85: [2, 45], 87: [2, 45] }, { 23: [2, 44], 33: [2, 44], 54: [2, 44], 65: [2, 44], 68: [2, 44], 72: [2, 44], 75: [2, 44], 80: [2, 44], 81: [2, 44], 82: [2, 44], 83: [2, 44], 84: [2, 44], 85: [2, 44], 87: [2, 44] }, { 54: [1, 109] }, { 54: [2, 83], 65: [2, 83], 72: [2, 83], 80: [2, 83], 81: [2, 83], 82: [2, 83], 83: [2, 83], 84: [2, 83], 85: [2, 83] }, { 54: [2, 85] }, { 5: [2, 13], 14: [2, 13], 15: [2, 13], 19: [2, 13], 29: [2, 13], 34: [2, 13], 39: [2, 13], 44: [2, 13], 47: [2, 13], 48: [2, 13], 51: [2, 13], 55: [2, 13], 60: [2, 13] }, { 38: 55, 39: [1, 57], 43: 56, 44: [1, 58], 45: 111, 46: 110, 47: [2, 76] }, { 33: [2, 70], 40: 112, 65: [2, 70], 72: [2, 70], 75: [2, 70], 80: [2, 70], 81: [2, 70], 82: [2, 70], 83: [2, 70], 84: [2, 70], 85: [2, 70] }, { 47: [2, 18] }, { 5: [2, 14], 14: [2, 14], 15: [2, 14], 19: [2, 14], 29: [2, 14], 34: [2, 14], 39: [2, 14], 44: [2, 14], 47: [2, 14], 48: [2, 14], 51: [2, 14], 55: [2, 14], 60: [2, 14] }, { 33: [1, 113] }, { 33: [2, 87], 65: [2, 87], 72: [2, 87], 80: [2, 87], 81: [2, 87], 82: [2, 87], 83: [2, 87], 84: [2, 87], 85: [2, 87] }, { 33: [2, 89] }, { 20: 74, 63: 115, 64: 75, 65: [1, 43], 67: 114, 68: [2, 96], 69: 116, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 33: [1, 117] }, { 32: 118, 33: [2, 62], 74: 119, 75: [1, 120] }, { 33: [2, 59], 65: [2, 59], 72: [2, 59], 75: [2, 59], 80: [2, 59], 81: [2, 59], 82: [2, 59], 83: [2, 59], 84: [2, 59], 85: [2, 59] }, { 33: [2, 61], 75: [2, 61] }, { 33: [2, 68], 37: 121, 74: 122, 75: [1, 120] }, { 33: [2, 65], 65: [2, 65], 72: [2, 65], 75: [2, 65], 80: [2, 65], 81: [2, 65], 82: [2, 65], 83: [2, 65], 84: [2, 65], 85: [2, 65] }, { 33: [2, 67], 75: [2, 67] }, { 23: [1, 123] }, { 23: [2, 51], 65: [2, 51], 72: [2, 51], 80: [2, 51], 81: [2, 51], 82: [2, 51], 83: [2, 51], 84: [2, 51], 85: [2, 51] }, { 23: [2, 53] }, { 33: [1, 124] }, { 33: [2, 91], 65: [2, 91], 72: [2, 91], 80: [2, 91], 81: [2, 91], 82: [2, 91], 83: [2, 91], 84: [2, 91], 85: [2, 91] }, { 33: [2, 93] }, { 5: [2, 22], 14: [2, 22], 15: [2, 22], 19: [2, 22], 29: [2, 22], 34: [2, 22], 39: [2, 22], 44: [2, 22], 47: [2, 22], 48: [2, 22], 51: [2, 22], 55: [2, 22], 60: [2, 22] }, { 23: [2, 99], 33: [2, 99], 54: [2, 99], 68: [2, 99], 72: [2, 99], 75: [2, 99] }, { 73: [1, 108] }, { 20: 74, 63: 125, 64: 75, 65: [1, 43], 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 5: [2, 23], 14: [2, 23], 15: [2, 23], 19: [2, 23], 29: [2, 23], 34: [2, 23], 39: [2, 23], 44: [2, 23], 47: [2, 23], 48: [2, 23], 51: [2, 23], 55: [2, 23], 60: [2, 23] }, { 47: [2, 19] }, { 47: [2, 77] }, { 20: 74, 33: [2, 72], 41: 126, 63: 127, 64: 75, 65: [1, 43], 69: 128, 70: 76, 71: 77, 72: [1, 78], 75: [2, 72], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 5: [2, 24], 14: [2, 24], 15: [2, 24], 19: [2, 24], 29: [2, 24], 34: [2, 24], 39: [2, 24], 44: [2, 24], 47: [2, 24], 48: [2, 24], 51: [2, 24], 55: [2, 24], 60: [2, 24] }, { 68: [1, 129] }, { 65: [2, 95], 68: [2, 95], 72: [2, 95], 80: [2, 95], 81: [2, 95], 82: [2, 95], 83: [2, 95], 84: [2, 95], 85: [2, 95] }, { 68: [2, 97] }, { 5: [2, 21], 14: [2, 21], 15: [2, 21], 19: [2, 21], 29: [2, 21], 34: [2, 21], 39: [2, 21], 44: [2, 21], 47: [2, 21], 48: [2, 21], 51: [2, 21], 55: [2, 21], 60: [2, 21] }, { 33: [1, 130] }, { 33: [2, 63] }, { 72: [1, 132], 76: 131 }, { 33: [1, 133] }, { 33: [2, 69] }, { 15: [2, 12], 18: [2, 12] }, { 14: [2, 26], 15: [2, 26], 19: [2, 26], 29: [2, 26], 34: [2, 26], 47: [2, 26], 48: [2, 26], 51: [2, 26], 55: [2, 26], 60: [2, 26] }, { 23: [2, 31], 33: [2, 31], 54: [2, 31], 68: [2, 31], 72: [2, 31], 75: [2, 31] }, { 33: [2, 74], 42: 134, 74: 135, 75: [1, 120] }, { 33: [2, 71], 65: [2, 71], 72: [2, 71], 75: [2, 71], 80: [2, 71], 81: [2, 71], 82: [2, 71], 83: [2, 71], 84: [2, 71], 85: [2, 71] }, { 33: [2, 73], 75: [2, 73] }, { 23: [2, 29], 33: [2, 29], 54: [2, 29], 65: [2, 29], 68: [2, 29], 72: [2, 29], 75: [2, 29], 80: [2, 29], 81: [2, 29], 82: [2, 29], 83: [2, 29], 84: [2, 29], 85: [2, 29] }, { 14: [2, 15], 15: [2, 15], 19: [2, 15], 29: [2, 15], 34: [2, 15], 39: [2, 15], 44: [2, 15], 47: [2, 15], 48: [2, 15], 51: [2, 15], 55: [2, 15], 60: [2, 15] }, { 72: [1, 137], 77: [1, 136] }, { 72: [2, 100], 77: [2, 100] }, { 14: [2, 16], 15: [2, 16], 19: [2, 16], 29: [2, 16], 34: [2, 16], 44: [2, 16], 47: [2, 16], 48: [2, 16], 51: [2, 16], 55: [2, 16], 60: [2, 16] }, { 33: [1, 138] }, { 33: [2, 75] }, { 33: [2, 32] }, { 72: [2, 101], 77: [2, 101] }, { 14: [2, 17], 15: [2, 17], 19: [2, 17], 29: [2, 17], 34: [2, 17], 39: [2, 17], 44: [2, 17], 47: [2, 17], 48: [2, 17], 51: [2, 17], 55: [2, 17], 60: [2, 17] }],
        defaultActions: { 4: [2, 1], 54: [2, 55], 56: [2, 20], 60: [2, 57], 73: [2, 81], 82: [2, 85], 86: [2, 18], 90: [2, 89], 101: [2, 53], 104: [2, 93], 110: [2, 19], 111: [2, 77], 116: [2, 97], 119: [2, 63], 122: [2, 69], 135: [2, 75], 136: [2, 32] },
        parseError: function(m, f) {
          throw new Error(m);
        },
        parse: function(m) {
          var f = this, g = [0], v = [null], E = [], _ = this.table, b = "", p = 0, C = 0;
          this.lexer.setInput(m), this.lexer.yy = this.yy, this.yy.lexer = this.lexer, this.yy.parser = this, typeof this.lexer.yylloc > "u" && (this.lexer.yylloc = {});
          var k = this.lexer.yylloc;
          E.push(k);
          var j = this.lexer.options && this.lexer.options.ranges;
          typeof this.yy.parseError == "function" && (this.parseError = this.yy.parseError);
          function O() {
            var X;
            return X = f.lexer.lex() || 1, typeof X != "number" && (X = f.symbols_[X] || X), X;
          }
          for (var I, c, S, w, A = {}, N, D, M, P; ; ) {
            if (c = g[g.length - 1], this.defaultActions[c] ? S = this.defaultActions[c] : ((I === null || typeof I > "u") && (I = O()), S = _[c] && _[c][I]), typeof S > "u" || !S.length || !S[0]) {
              var H = "";
              {
                P = [];
                for (N in _[c]) this.terminals_[N] && N > 2 && P.push("'" + this.terminals_[N] + "'");
                this.lexer.showPosition ? H = "Parse error on line " + (p + 1) + `:
` + this.lexer.showPosition() + `
Expecting ` + P.join(", ") + ", got '" + (this.terminals_[I] || I) + "'" : H = "Parse error on line " + (p + 1) + ": Unexpected " + (I == 1 ? "end of input" : "'" + (this.terminals_[I] || I) + "'"), this.parseError(H, { text: this.lexer.match, token: this.terminals_[I] || I, line: this.lexer.yylineno, loc: k, expected: P });
              }
            }
            if (S[0] instanceof Array && S.length > 1)
              throw new Error("Parse Error: multiple actions possible at state: " + c + ", token: " + I);
            switch (S[0]) {
              case 1:
                g.push(I), v.push(this.lexer.yytext), E.push(this.lexer.yylloc), g.push(S[1]), I = null, C = this.lexer.yyleng, b = this.lexer.yytext, p = this.lexer.yylineno, k = this.lexer.yylloc;
                break;
              case 2:
                if (D = this.productions_[S[1]][1], A.$ = v[v.length - D], A._$ = { first_line: E[E.length - (D || 1)].first_line, last_line: E[E.length - 1].last_line, first_column: E[E.length - (D || 1)].first_column, last_column: E[E.length - 1].last_column }, j && (A._$.range = [E[E.length - (D || 1)].range[0], E[E.length - 1].range[1]]), w = this.performAction.call(A, b, C, p, this.yy, S[1], v, E), typeof w < "u")
                  return w;
                D && (g = g.slice(0, -1 * D * 2), v = v.slice(0, -1 * D), E = E.slice(0, -1 * D)), g.push(this.productions_[S[1]][0]), v.push(A.$), E.push(A._$), M = _[g[g.length - 2]][g[g.length - 1]], g.push(M);
                break;
              case 3:
                return !0;
            }
          }
          return !0;
        }
      }, u = (function() {
        var h = {
          EOF: 1,
          parseError: function(f, g) {
            if (this.yy.parser)
              this.yy.parser.parseError(f, g);
            else
              throw new Error(f);
          },
          setInput: function(f) {
            return this._input = f, this._more = this._less = this.done = !1, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = "", this.conditionStack = ["INITIAL"], this.yylloc = { first_line: 1, first_column: 0, last_line: 1, last_column: 0 }, this.options.ranges && (this.yylloc.range = [0, 0]), this.offset = 0, this;
          },
          input: function() {
            var f = this._input[0];
            this.yytext += f, this.yyleng++, this.offset++, this.match += f, this.matched += f;
            var g = f.match(/(?:\r\n?|\n).*/g);
            return g ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, this.options.ranges && this.yylloc.range[1]++, this._input = this._input.slice(1), f;
          },
          unput: function(f) {
            var g = f.length, v = f.split(/(?:\r\n?|\n)/g);
            this._input = f + this._input, this.yytext = this.yytext.substr(0, this.yytext.length - g - 1), this.offset -= g;
            var E = this.match.split(/(?:\r\n?|\n)/g);
            this.match = this.match.substr(0, this.match.length - 1), this.matched = this.matched.substr(0, this.matched.length - 1), v.length - 1 && (this.yylineno -= v.length - 1);
            var _ = this.yylloc.range;
            return this.yylloc = {
              first_line: this.yylloc.first_line,
              last_line: this.yylineno + 1,
              first_column: this.yylloc.first_column,
              last_column: v ? (v.length === E.length ? this.yylloc.first_column : 0) + E[E.length - v.length].length - v[0].length : this.yylloc.first_column - g
            }, this.options.ranges && (this.yylloc.range = [_[0], _[0] + this.yyleng - g]), this;
          },
          more: function() {
            return this._more = !0, this;
          },
          less: function(f) {
            this.unput(this.match.slice(f));
          },
          pastInput: function() {
            var f = this.matched.substr(0, this.matched.length - this.match.length);
            return (f.length > 20 ? "..." : "") + f.substr(-20).replace(/\n/g, "");
          },
          upcomingInput: function() {
            var f = this.match;
            return f.length < 20 && (f += this._input.substr(0, 20 - f.length)), (f.substr(0, 20) + (f.length > 20 ? "..." : "")).replace(/\n/g, "");
          },
          showPosition: function() {
            var f = this.pastInput(), g = new Array(f.length + 1).join("-");
            return f + this.upcomingInput() + `
` + g + "^";
          },
          next: function() {
            if (this.done)
              return this.EOF;
            this._input || (this.done = !0);
            var f, g, v, E, _;
            this._more || (this.yytext = "", this.match = "");
            for (var b = this._currentRules(), p = 0; p < b.length && (v = this._input.match(this.rules[b[p]]), !(v && (!g || v[0].length > g[0].length) && (g = v, E = p, !this.options.flex))); p++)
              ;
            return g ? (_ = g[0].match(/(?:\r\n?|\n).*/g), _ && (this.yylineno += _.length), this.yylloc = {
              first_line: this.yylloc.last_line,
              last_line: this.yylineno + 1,
              first_column: this.yylloc.last_column,
              last_column: _ ? _[_.length - 1].length - _[_.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + g[0].length
            }, this.yytext += g[0], this.match += g[0], this.matches = g, this.yyleng = this.yytext.length, this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]), this._more = !1, this._input = this._input.slice(g[0].length), this.matched += g[0], f = this.performAction.call(this, this.yy, this, b[E], this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = !1), f || void 0) : this._input === "" ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + `. Unrecognized text.
` + this.showPosition(), { text: "", token: null, line: this.yylineno });
          },
          lex: function() {
            var f = this.next();
            return typeof f < "u" ? f : this.lex();
          },
          begin: function(f) {
            this.conditionStack.push(f);
          },
          popState: function() {
            return this.conditionStack.pop();
          },
          _currentRules: function() {
            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;
          },
          topState: function() {
            return this.conditionStack[this.conditionStack.length - 2];
          },
          pushState: function(f) {
            this.begin(f);
          }
        };
        return h.options = {}, h.performAction = function(f, g, v, E) {
          function _(b, p) {
            return g.yytext = g.yytext.substring(b, g.yyleng - p + b);
          }
          switch (v) {
            case 0:
              if (g.yytext.slice(-2) === "\\\\" ? (_(0, 1), this.begin("mu")) : g.yytext.slice(-1) === "\\" ? (_(0, 1), this.begin("emu")) : this.begin("mu"), g.yytext) return 15;
              break;
            case 1:
              return 15;
            case 2:
              return this.popState(), 15;
            case 3:
              return this.begin("raw"), 15;
            case 4:
              return this.popState(), this.conditionStack[this.conditionStack.length - 1] === "raw" ? 15 : (_(5, 9), "END_RAW_BLOCK");
            case 5:
              return 15;
            case 6:
              return this.popState(), 14;
            case 7:
              return 65;
            case 8:
              return 68;
            case 9:
              return 19;
            case 10:
              return this.popState(), this.begin("raw"), 23;
            case 11:
              return 55;
            case 12:
              return 60;
            case 13:
              return 29;
            case 14:
              return 47;
            case 15:
              return this.popState(), 44;
            case 16:
              return this.popState(), 44;
            case 17:
              return 34;
            case 18:
              return 39;
            case 19:
              return 51;
            case 20:
              return 48;
            case 21:
              this.unput(g.yytext), this.popState(), this.begin("com");
              break;
            case 22:
              return this.popState(), 14;
            case 23:
              return 48;
            case 24:
              return 73;
            case 25:
              return 72;
            case 26:
              return 72;
            case 27:
              return 87;
            case 28:
              break;
            case 29:
              return this.popState(), 54;
            case 30:
              return this.popState(), 33;
            case 31:
              return g.yytext = _(1, 2).replace(/\\"/g, '"'), 80;
            case 32:
              return g.yytext = _(1, 2).replace(/\\'/g, "'"), 80;
            case 33:
              return 85;
            case 34:
              return 82;
            case 35:
              return 82;
            case 36:
              return 83;
            case 37:
              return 84;
            case 38:
              return 81;
            case 39:
              return 75;
            case 40:
              return 77;
            case 41:
              return 72;
            case 42:
              return g.yytext = g.yytext.replace(/\\([\\\]])/g, "$1"), 72;
            case 43:
              return "INVALID";
            case 44:
              return 5;
          }
        }, h.rules = [/^(?:[^\x00]*?(?=(\{\{)))/, /^(?:[^\x00]+)/, /^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/, /^(?:\{\{\{\{(?=[^/]))/, /^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/, /^(?:[^\x00]+?(?=(\{\{\{\{)))/, /^(?:[\s\S]*?--(~)?\}\})/, /^(?:\()/, /^(?:\))/, /^(?:\{\{\{\{)/, /^(?:\}\}\}\})/, /^(?:\{\{(~)?>)/, /^(?:\{\{(~)?#>)/, /^(?:\{\{(~)?#\*?)/, /^(?:\{\{(~)?\/)/, /^(?:\{\{(~)?\^\s*(~)?\}\})/, /^(?:\{\{(~)?\s*else\s*(~)?\}\})/, /^(?:\{\{(~)?\^)/, /^(?:\{\{(~)?\s*else\b)/, /^(?:\{\{(~)?\{)/, /^(?:\{\{(~)?&)/, /^(?:\{\{(~)?!--)/, /^(?:\{\{(~)?![\s\S]*?\}\})/, /^(?:\{\{(~)?\*?)/, /^(?:=)/, /^(?:\.\.)/, /^(?:\.(?=([=~}\s\/.)|])))/, /^(?:[\/.])/, /^(?:\s+)/, /^(?:\}(~)?\}\})/, /^(?:(~)?\}\})/, /^(?:"(\\["]|[^"])*")/, /^(?:'(\\[']|[^'])*')/, /^(?:@)/, /^(?:true(?=([~}\s)])))/, /^(?:false(?=([~}\s)])))/, /^(?:undefined(?=([~}\s)])))/, /^(?:null(?=([~}\s)])))/, /^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/, /^(?:as\s+\|)/, /^(?:\|)/, /^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/, /^(?:\[(\\\]|[^\]])*\])/, /^(?:.)/, /^(?:$)/], h.conditions = { mu: { rules: [7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44], inclusive: !1 }, emu: { rules: [2], inclusive: !1 }, com: { rules: [6], inclusive: !1 }, raw: { rules: [3, 4, 5], inclusive: !1 }, INITIAL: { rules: [0, 1, 44], inclusive: !0 } }, h;
      })();
      a.lexer = u;
      function l() {
        this.yy = {};
      }
      return l.prototype = a, a.Parser = l, new l();
    })();
    r.default = s, t.exports = r.default;
  })(Zu, Zu.exports)), Zu.exports;
}
var $u = { exports: {} }, Vu = { exports: {} }, Wv;
function K0() {
  return Wv || (Wv = 1, (function(t, r) {
    r.__esModule = !0;
    function s(g) {
      return g && g.__esModule ? g : { default: g };
    }
    var a = Xn(), u = s(a);
    function l() {
      this.parents = [];
    }
    l.prototype = {
      constructor: l,
      mutating: !1,
      // Visits a given value. If mutating, will replace the value if necessary.
      acceptKey: function(v, E) {
        var _ = this.accept(v[E]);
        if (this.mutating) {
          if (_ && !l.prototype[_.type])
            throw new u.default('Unexpected node type "' + _.type + '" found when accepting ' + E + " on " + v.type);
          v[E] = _;
        }
      },
      // Performs an accept operation with added sanity check to ensure
      // required keys are not removed.
      acceptRequired: function(v, E) {
        if (this.acceptKey(v, E), !v[E])
          throw new u.default(v.type + " requires " + E);
      },
      // Traverses a given array. If mutating, empty respnses will be removed
      // for child elements.
      acceptArray: function(v) {
        for (var E = 0, _ = v.length; E < _; E++)
          this.acceptKey(v, E), v[E] || (v.splice(E, 1), E--, _--);
      },
      accept: function(v) {
        if (v) {
          if (!this[v.type])
            throw new u.default("Unknown type: " + v.type, v);
          this.current && this.parents.unshift(this.current), this.current = v;
          var E = this[v.type](v);
          if (this.current = this.parents.shift(), !this.mutating || E)
            return E;
          if (E !== !1)
            return v;
        }
      },
      Program: function(v) {
        this.acceptArray(v.body);
      },
      MustacheStatement: h,
      Decorator: h,
      BlockStatement: m,
      DecoratorBlock: m,
      PartialStatement: f,
      PartialBlockStatement: function(v) {
        f.call(this, v), this.acceptKey(v, "program");
      },
      ContentStatement: function() {
      },
      CommentStatement: function() {
      },
      SubExpression: h,
      PathExpression: function() {
      },
      StringLiteral: function() {
      },
      NumberLiteral: function() {
      },
      BooleanLiteral: function() {
      },
      UndefinedLiteral: function() {
      },
      NullLiteral: function() {
      },
      Hash: function(v) {
        this.acceptArray(v.pairs);
      },
      HashPair: function(v) {
        this.acceptRequired(v, "value");
      }
    };
    function h(g) {
      this.acceptRequired(g, "path"), this.acceptArray(g.params), this.acceptKey(g, "hash");
    }
    function m(g) {
      h.call(this, g), this.acceptKey(g, "program"), this.acceptKey(g, "inverse");
    }
    function f(g) {
      this.acceptRequired(g, "name"), this.acceptArray(g.params), this.acceptKey(g, "hash");
    }
    r.default = l, t.exports = r.default;
  })(Vu, Vu.exports)), Vu.exports;
}
var ey;
function B8() {
  return ey || (ey = 1, (function(t, r) {
    r.__esModule = !0;
    function s(v) {
      return v && v.__esModule ? v : { default: v };
    }
    var a = K0(), u = s(a);
    function l() {
      var v = arguments.length <= 0 || arguments[0] === void 0 ? {} : arguments[0];
      this.options = v;
    }
    l.prototype = new u.default(), l.prototype.Program = function(v) {
      var E = !this.options.ignoreStandalone, _ = !this.isRootSeen;
      this.isRootSeen = !0;
      for (var b = v.body, p = 0, C = b.length; p < C; p++) {
        var k = b[p], j = this.accept(k);
        if (j) {
          var O = h(b, p, _), I = m(b, p, _), c = j.openStandalone && O, S = j.closeStandalone && I, w = j.inlineStandalone && O && I;
          j.close && f(b, p, !0), j.open && g(b, p, !0), E && w && (f(b, p), g(b, p) && k.type === "PartialStatement" && (k.indent = /([ \t]+$)/.exec(b[p - 1].original)[1])), E && c && (f((k.program || k.inverse).body), g(b, p)), E && S && (f(b, p), g((k.inverse || k.program).body));
        }
      }
      return v;
    }, l.prototype.BlockStatement = l.prototype.DecoratorBlock = l.prototype.PartialBlockStatement = function(v) {
      this.accept(v.program), this.accept(v.inverse);
      var E = v.program || v.inverse, _ = v.program && v.inverse, b = _, p = _;
      if (_ && _.chained)
        for (b = _.body[0].program; p.chained; )
          p = p.body[p.body.length - 1].program;
      var C = {
        open: v.openStrip.open,
        close: v.closeStrip.close,
        // Determine the standalone candiacy. Basically flag our content as being possibly standalone
        // so our parent can determine if we actually are standalone
        openStandalone: m(E.body),
        closeStandalone: h((b || E).body)
      };
      if (v.openStrip.close && f(E.body, null, !0), _) {
        var k = v.inverseStrip;
        k.open && g(E.body, null, !0), k.close && f(b.body, null, !0), v.closeStrip.open && g(p.body, null, !0), !this.options.ignoreStandalone && h(E.body) && m(b.body) && (g(E.body), f(b.body));
      } else v.closeStrip.open && g(E.body, null, !0);
      return C;
    }, l.prototype.Decorator = l.prototype.MustacheStatement = function(v) {
      return v.strip;
    }, l.prototype.PartialStatement = l.prototype.CommentStatement = function(v) {
      var E = v.strip || {};
      return {
        inlineStandalone: !0,
        open: E.open,
        close: E.close
      };
    };
    function h(v, E, _) {
      E === void 0 && (E = v.length);
      var b = v[E - 1], p = v[E - 2];
      if (!b)
        return _;
      if (b.type === "ContentStatement")
        return (p || !_ ? /\r?\n\s*?$/ : /(^|\r?\n)\s*?$/).test(b.original);
    }
    function m(v, E, _) {
      E === void 0 && (E = -1);
      var b = v[E + 1], p = v[E + 2];
      if (!b)
        return _;
      if (b.type === "ContentStatement")
        return (p || !_ ? /^\s*?\r?\n/ : /^\s*?(\r?\n|$)/).test(b.original);
    }
    function f(v, E, _) {
      var b = v[E == null ? 0 : E + 1];
      if (!(!b || b.type !== "ContentStatement" || !_ && b.rightStripped)) {
        var p = b.value;
        b.value = b.value.replace(_ ? /^\s+/ : /^[ \t]*\r?\n?/, ""), b.rightStripped = b.value !== p;
      }
    }
    function g(v, E, _) {
      var b = v[E == null ? v.length - 1 : E - 1];
      if (!(!b || b.type !== "ContentStatement" || !_ && b.leftStripped)) {
        var p = b.value;
        return b.value = b.value.replace(_ ? /\s+$/ : /[ \t]+$/, ""), b.leftStripped = b.value !== p, b.leftStripped;
      }
    }
    r.default = l, t.exports = r.default;
  })($u, $u.exports)), $u.exports;
}
var An = {}, ty;
function U8() {
  if (ty) return An;
  ty = 1, An.__esModule = !0, An.SourceLocation = u, An.id = l, An.stripFlags = h, An.stripComment = m, An.preparePath = f, An.prepareMustache = g, An.prepareRawBlock = v, An.prepareBlock = E, An.prepareProgram = _, An.preparePartialBlock = b;
  function t(p) {
    return p && p.__esModule ? p : { default: p };
  }
  var r = Xn(), s = t(r);
  function a(p, C) {
    if (C = C.path ? C.path.original : C, p.path.original !== C) {
      var k = { loc: p.path.loc };
      throw new s.default(p.path.original + " doesn't match " + C, k);
    }
  }
  function u(p, C) {
    this.source = p, this.start = {
      line: C.first_line,
      column: C.first_column
    }, this.end = {
      line: C.last_line,
      column: C.last_column
    };
  }
  function l(p) {
    return /^\[.*\]$/.test(p) ? p.substring(1, p.length - 1) : p;
  }
  function h(p, C) {
    return {
      open: p.charAt(2) === "~",
      close: C.charAt(C.length - 3) === "~"
    };
  }
  function m(p) {
    return p.replace(/^\{\{~?!-?-?/, "").replace(/-?-?~?\}\}$/, "");
  }
  function f(p, C, k) {
    k = this.locInfo(k);
    for (var j = p ? "@" : "", O = [], I = 0, c = 0, S = C.length; c < S; c++) {
      var w = C[c].part, A = C[c].original !== w;
      if (j += (C[c].separator || "") + w, !A && (w === ".." || w === "." || w === "this")) {
        if (O.length > 0)
          throw new s.default("Invalid path: " + j, { loc: k });
        w === ".." && I++;
      } else
        O.push(w);
    }
    return {
      type: "PathExpression",
      data: p,
      depth: I,
      parts: O,
      original: j,
      loc: k
    };
  }
  function g(p, C, k, j, O, I) {
    var c = j.charAt(3) || j.charAt(2), S = c !== "{" && c !== "&", w = /\*/.test(j);
    return {
      type: w ? "Decorator" : "MustacheStatement",
      path: p,
      params: C,
      hash: k,
      escaped: S,
      strip: O,
      loc: this.locInfo(I)
    };
  }
  function v(p, C, k, j) {
    a(p, k), j = this.locInfo(j);
    var O = {
      type: "Program",
      body: C,
      strip: {},
      loc: j
    };
    return {
      type: "BlockStatement",
      path: p.path,
      params: p.params,
      hash: p.hash,
      program: O,
      openStrip: {},
      inverseStrip: {},
      closeStrip: {},
      loc: j
    };
  }
  function E(p, C, k, j, O, I) {
    j && j.path && a(p, j);
    var c = /\*/.test(p.open);
    C.blockParams = p.blockParams;
    var S = void 0, w = void 0;
    if (k) {
      if (c)
        throw new s.default("Unexpected inverse block on decorator", k);
      k.chain && (k.program.body[0].closeStrip = j.strip), w = k.strip, S = k.program;
    }
    return O && (O = S, S = C, C = O), {
      type: c ? "DecoratorBlock" : "BlockStatement",
      path: p.path,
      params: p.params,
      hash: p.hash,
      program: C,
      inverse: S,
      openStrip: p.strip,
      inverseStrip: w,
      closeStrip: j && j.strip,
      loc: this.locInfo(I)
    };
  }
  function _(p, C) {
    if (!C && p.length) {
      var k = p[0].loc, j = p[p.length - 1].loc;
      k && j && (C = {
        source: k.source,
        start: {
          line: k.start.line,
          column: k.start.column
        },
        end: {
          line: j.end.line,
          column: j.end.column
        }
      });
    }
    return {
      type: "Program",
      body: p,
      strip: {},
      loc: C
    };
  }
  function b(p, C, k, j) {
    return a(p, k), {
      type: "PartialBlockStatement",
      name: p.path,
      params: p.params,
      hash: p.hash,
      program: C,
      openStrip: p.strip,
      closeStrip: k && k.strip,
      loc: this.locInfo(j)
    };
  }
  return An;
}
var ny;
function H8() {
  if (ny) return Ai;
  ny = 1, Ai.__esModule = !0, Ai.parseWithoutProcessing = v, Ai.parse = E;
  function t(_) {
    if (_ && _.__esModule)
      return _;
    var b = {};
    if (_ != null)
      for (var p in _)
        Object.prototype.hasOwnProperty.call(_, p) && (b[p] = _[p]);
    return b.default = _, b;
  }
  function r(_) {
    return _ && _.__esModule ? _ : { default: _ };
  }
  var s = I8(), a = r(s), u = B8(), l = r(u), h = U8(), m = t(h), f = gn();
  Ai.parser = a.default;
  var g = {};
  f.extend(g, m);
  function v(_, b) {
    if (_.type === "Program")
      return _;
    a.default.yy = g, g.locInfo = function(C) {
      return new g.SourceLocation(b && b.srcName, C);
    };
    var p = a.default.parse(_);
    return p;
  }
  function E(_, b) {
    var p = v(_, b), C = new l.default(b);
    return C.accept(p);
  }
  return Ai;
}
var Ti = {}, ry;
function q8() {
  if (ry) return Ti;
  ry = 1, Ti.__esModule = !0, Ti.Compiler = m, Ti.precompile = f, Ti.compile = g;
  function t(_) {
    return _ && _.__esModule ? _ : { default: _ };
  }
  var r = Xn(), s = t(r), a = gn(), u = X0(), l = t(u), h = [].slice;
  function m() {
  }
  m.prototype = {
    compiler: m,
    equals: function(b) {
      var p = this.opcodes.length;
      if (b.opcodes.length !== p)
        return !1;
      for (var C = 0; C < p; C++) {
        var k = this.opcodes[C], j = b.opcodes[C];
        if (k.opcode !== j.opcode || !v(k.args, j.args))
          return !1;
      }
      p = this.children.length;
      for (var C = 0; C < p; C++)
        if (!this.children[C].equals(b.children[C]))
          return !1;
      return !0;
    },
    guid: 0,
    compile: function(b, p) {
      return this.sourceNode = [], this.opcodes = [], this.children = [], this.options = p, this.stringParams = p.stringParams, this.trackIds = p.trackIds, p.blockParams = p.blockParams || [], p.knownHelpers = a.extend(/* @__PURE__ */ Object.create(null), {
        helperMissing: !0,
        blockHelperMissing: !0,
        each: !0,
        if: !0,
        unless: !0,
        with: !0,
        log: !0,
        lookup: !0
      }, p.knownHelpers), this.accept(b);
    },
    compileProgram: function(b) {
      var p = new this.compiler(), C = p.compile(b, this.options), k = this.guid++;
      return this.usePartial = this.usePartial || C.usePartial, this.children[k] = C, this.useDepths = this.useDepths || C.useDepths, k;
    },
    accept: function(b) {
      if (!this[b.type])
        throw new s.default("Unknown type: " + b.type, b);
      this.sourceNode.unshift(b);
      var p = this[b.type](b);
      return this.sourceNode.shift(), p;
    },
    Program: function(b) {
      this.options.blockParams.unshift(b.blockParams);
      for (var p = b.body, C = p.length, k = 0; k < C; k++)
        this.accept(p[k]);
      return this.options.blockParams.shift(), this.isSimple = C === 1, this.blockParams = b.blockParams ? b.blockParams.length : 0, this;
    },
    BlockStatement: function(b) {
      E(b);
      var p = b.program, C = b.inverse;
      p = p && this.compileProgram(p), C = C && this.compileProgram(C);
      var k = this.classifySexpr(b);
      k === "helper" ? this.helperSexpr(b, p, C) : k === "simple" ? (this.simpleSexpr(b), this.opcode("pushProgram", p), this.opcode("pushProgram", C), this.opcode("emptyHash"), this.opcode("blockValue", b.path.original)) : (this.ambiguousSexpr(b, p, C), this.opcode("pushProgram", p), this.opcode("pushProgram", C), this.opcode("emptyHash"), this.opcode("ambiguousBlockValue")), this.opcode("append");
    },
    DecoratorBlock: function(b) {
      var p = b.program && this.compileProgram(b.program), C = this.setupFullMustacheParams(b, p, void 0), k = b.path;
      this.useDecorators = !0, this.opcode("registerDecorator", C.length, k.original);
    },
    PartialStatement: function(b) {
      this.usePartial = !0;
      var p = b.program;
      p && (p = this.compileProgram(b.program));
      var C = b.params;
      if (C.length > 1)
        throw new s.default("Unsupported number of partial arguments: " + C.length, b);
      C.length || (this.options.explicitPartialContext ? this.opcode("pushLiteral", "undefined") : C.push({ type: "PathExpression", parts: [], depth: 0 }));
      var k = b.name.original, j = b.name.type === "SubExpression";
      j && this.accept(b.name), this.setupFullMustacheParams(b, p, void 0, !0);
      var O = b.indent || "";
      this.options.preventIndent && O && (this.opcode("appendContent", O), O = ""), this.opcode("invokePartial", j, k, O), this.opcode("append");
    },
    PartialBlockStatement: function(b) {
      this.PartialStatement(b);
    },
    MustacheStatement: function(b) {
      this.SubExpression(b), b.escaped && !this.options.noEscape ? this.opcode("appendEscaped") : this.opcode("append");
    },
    Decorator: function(b) {
      this.DecoratorBlock(b);
    },
    ContentStatement: function(b) {
      b.value && this.opcode("appendContent", b.value);
    },
    CommentStatement: function() {
    },
    SubExpression: function(b) {
      E(b);
      var p = this.classifySexpr(b);
      p === "simple" ? this.simpleSexpr(b) : p === "helper" ? this.helperSexpr(b) : this.ambiguousSexpr(b);
    },
    ambiguousSexpr: function(b, p, C) {
      var k = b.path, j = k.parts[0], O = p != null || C != null;
      this.opcode("getContext", k.depth), this.opcode("pushProgram", p), this.opcode("pushProgram", C), k.strict = !0, this.accept(k), this.opcode("invokeAmbiguous", j, O);
    },
    simpleSexpr: function(b) {
      var p = b.path;
      p.strict = !0, this.accept(p), this.opcode("resolvePossibleLambda");
    },
    helperSexpr: function(b, p, C) {
      var k = this.setupFullMustacheParams(b, p, C), j = b.path, O = j.parts[0];
      if (this.options.knownHelpers[O])
        this.opcode("invokeKnownHelper", k.length, O);
      else {
        if (this.options.knownHelpersOnly)
          throw new s.default("You specified knownHelpersOnly, but used the unknown helper " + O, b);
        j.strict = !0, j.falsy = !0, this.accept(j), this.opcode("invokeHelper", k.length, j.original, l.default.helpers.simpleId(j));
      }
    },
    PathExpression: function(b) {
      this.addDepth(b.depth), this.opcode("getContext", b.depth);
      var p = b.parts[0], C = l.default.helpers.scopedId(b), k = !b.depth && !C && this.blockParamIndex(p);
      k ? this.opcode("lookupBlockParam", k, b.parts) : p ? b.data ? (this.options.data = !0, this.opcode("lookupData", b.depth, b.parts, b.strict)) : this.opcode("lookupOnContext", b.parts, b.falsy, b.strict, C) : this.opcode("pushContext");
    },
    StringLiteral: function(b) {
      this.opcode("pushString", b.value);
    },
    NumberLiteral: function(b) {
      this.opcode("pushLiteral", b.value);
    },
    BooleanLiteral: function(b) {
      this.opcode("pushLiteral", b.value);
    },
    UndefinedLiteral: function() {
      this.opcode("pushLiteral", "undefined");
    },
    NullLiteral: function() {
      this.opcode("pushLiteral", "null");
    },
    Hash: function(b) {
      var p = b.pairs, C = 0, k = p.length;
      for (this.opcode("pushHash"); C < k; C++)
        this.pushParam(p[C].value);
      for (; C--; )
        this.opcode("assignToHash", p[C].key);
      this.opcode("popHash");
    },
    // HELPERS
    opcode: function(b) {
      this.opcodes.push({
        opcode: b,
        args: h.call(arguments, 1),
        loc: this.sourceNode[0].loc
      });
    },
    addDepth: function(b) {
      b && (this.useDepths = !0);
    },
    classifySexpr: function(b) {
      var p = l.default.helpers.simpleId(b.path), C = p && !!this.blockParamIndex(b.path.parts[0]), k = !C && l.default.helpers.helperExpression(b), j = !C && (k || p);
      if (j && !k) {
        var O = b.path.parts[0], I = this.options;
        I.knownHelpers[O] ? k = !0 : I.knownHelpersOnly && (j = !1);
      }
      return k ? "helper" : j ? "ambiguous" : "simple";
    },
    pushParams: function(b) {
      for (var p = 0, C = b.length; p < C; p++)
        this.pushParam(b[p]);
    },
    pushParam: function(b) {
      var p = b.value != null ? b.value : b.original || "";
      if (this.stringParams)
        p.replace && (p = p.replace(/^(\.?\.\/)*/g, "").replace(/\//g, ".")), b.depth && this.addDepth(b.depth), this.opcode("getContext", b.depth || 0), this.opcode("pushStringParam", p, b.type), b.type === "SubExpression" && this.accept(b);
      else {
        if (this.trackIds) {
          var C = void 0;
          if (b.parts && !l.default.helpers.scopedId(b) && !b.depth && (C = this.blockParamIndex(b.parts[0])), C) {
            var k = b.parts.slice(1).join(".");
            this.opcode("pushId", "BlockParam", C, k);
          } else
            p = b.original || p, p.replace && (p = p.replace(/^this(?:\.|$)/, "").replace(/^\.\//, "").replace(/^\.$/, "")), this.opcode("pushId", b.type, p);
        }
        this.accept(b);
      }
    },
    setupFullMustacheParams: function(b, p, C, k) {
      var j = b.params;
      return this.pushParams(j), this.opcode("pushProgram", p), this.opcode("pushProgram", C), b.hash ? this.accept(b.hash) : this.opcode("emptyHash", k), j;
    },
    blockParamIndex: function(b) {
      for (var p = 0, C = this.options.blockParams.length; p < C; p++) {
        var k = this.options.blockParams[p], j = k && a.indexOf(k, b);
        if (k && j >= 0)
          return [p, j];
      }
    }
  };
  function f(_, b, p) {
    if (_ == null || typeof _ != "string" && _.type !== "Program")
      throw new s.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed " + _);
    b = b || {}, "data" in b || (b.data = !0), b.compat && (b.useDepths = !0);
    var C = p.parse(_, b), k = new p.Compiler().compile(C, b);
    return new p.JavaScriptCompiler().compile(k, b);
  }
  function g(_, b, p) {
    if (b === void 0 && (b = {}), _ == null || typeof _ != "string" && _.type !== "Program")
      throw new s.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed " + _);
    b = a.extend({}, b), "data" in b || (b.data = !0), b.compat && (b.useDepths = !0);
    var C = void 0;
    function k() {
      var O = p.parse(_, b), I = new p.Compiler().compile(O, b), c = new p.JavaScriptCompiler().compile(I, b, void 0, !0);
      return p.template(c);
    }
    function j(O, I) {
      return C || (C = k()), C.call(this, O, I);
    }
    return j._setup = function(O) {
      return C || (C = k()), C._setup(O);
    }, j._child = function(O, I, c, S) {
      return C || (C = k()), C._child(O, I, c, S);
    }, j;
  }
  function v(_, b) {
    if (_ === b)
      return !0;
    if (a.isArray(_) && a.isArray(b) && _.length === b.length) {
      for (var p = 0; p < _.length; p++)
        if (!v(_[p], b[p]))
          return !1;
      return !0;
    }
  }
  function E(_) {
    if (!_.path.parts) {
      var b = _.path;
      _.path = {
        type: "PathExpression",
        data: !1,
        depth: 0,
        parts: [b.original + ""],
        original: b.original + "",
        loc: b.loc
      };
    }
  }
  return Ti;
}
var Yu = { exports: {} }, Fu = { exports: {} }, Bs = {}, of = {}, Xu = {}, Ku = {}, ay;
function G8() {
  if (ay) return Ku;
  ay = 1;
  var t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
  return Ku.encode = function(r) {
    if (0 <= r && r < t.length)
      return t[r];
    throw new TypeError("Must be between 0 and 63: " + r);
  }, Ku.decode = function(r) {
    var s = 65, a = 90, u = 97, l = 122, h = 48, m = 57, f = 43, g = 47, v = 26, E = 52;
    return s <= r && r <= a ? r - s : u <= r && r <= l ? r - u + v : h <= r && r <= m ? r - h + E : r == f ? 62 : r == g ? 63 : -1;
  }, Ku;
}
var iy;
function Q0() {
  if (iy) return Xu;
  iy = 1;
  var t = G8(), r = 5, s = 1 << r, a = s - 1, u = s;
  function l(m) {
    return m < 0 ? (-m << 1) + 1 : (m << 1) + 0;
  }
  function h(m) {
    var f = (m & 1) === 1, g = m >> 1;
    return f ? -g : g;
  }
  return Xu.encode = function(f) {
    var g = "", v, E = l(f);
    do
      v = E & a, E >>>= r, E > 0 && (v |= u), g += t.encode(v);
    while (E > 0);
    return g;
  }, Xu.decode = function(f, g, v) {
    var E = f.length, _ = 0, b = 0, p, C;
    do {
      if (g >= E)
        throw new Error("Expected more digits in base 64 VLQ value.");
      if (C = t.decode(f.charCodeAt(g++)), C === -1)
        throw new Error("Invalid base64 digit: " + f.charAt(g - 1));
      p = !!(C & u), C &= a, _ = _ + (C << b), b += r;
    } while (p);
    v.value = h(_), v.rest = g;
  }, Xu;
}
var uf = {}, sy;
function ao() {
  return sy || (sy = 1, (function(t) {
    function r(c, S, w) {
      if (S in c)
        return c[S];
      if (arguments.length === 3)
        return w;
      throw new Error('"' + S + '" is a required argument.');
    }
    t.getArg = r;
    var s = /^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/, a = /^data:.+\,.+$/;
    function u(c) {
      var S = c.match(s);
      return S ? {
        scheme: S[1],
        auth: S[2],
        host: S[3],
        port: S[4],
        path: S[5]
      } : null;
    }
    t.urlParse = u;
    function l(c) {
      var S = "";
      return c.scheme && (S += c.scheme + ":"), S += "//", c.auth && (S += c.auth + "@"), c.host && (S += c.host), c.port && (S += ":" + c.port), c.path && (S += c.path), S;
    }
    t.urlGenerate = l;
    function h(c) {
      var S = c, w = u(c);
      if (w) {
        if (!w.path)
          return c;
        S = w.path;
      }
      for (var A = t.isAbsolute(S), N = S.split(/\/+/), D, M = 0, P = N.length - 1; P >= 0; P--)
        D = N[P], D === "." ? N.splice(P, 1) : D === ".." ? M++ : M > 0 && (D === "" ? (N.splice(P + 1, M), M = 0) : (N.splice(P, 2), M--));
      return S = N.join("/"), S === "" && (S = A ? "/" : "."), w ? (w.path = S, l(w)) : S;
    }
    t.normalize = h;
    function m(c, S) {
      c === "" && (c = "."), S === "" && (S = ".");
      var w = u(S), A = u(c);
      if (A && (c = A.path || "/"), w && !w.scheme)
        return A && (w.scheme = A.scheme), l(w);
      if (w || S.match(a))
        return S;
      if (A && !A.host && !A.path)
        return A.host = S, l(A);
      var N = S.charAt(0) === "/" ? S : h(c.replace(/\/+$/, "") + "/" + S);
      return A ? (A.path = N, l(A)) : N;
    }
    t.join = m, t.isAbsolute = function(c) {
      return c.charAt(0) === "/" || s.test(c);
    };
    function f(c, S) {
      c === "" && (c = "."), c = c.replace(/\/$/, "");
      for (var w = 0; S.indexOf(c + "/") !== 0; ) {
        var A = c.lastIndexOf("/");
        if (A < 0 || (c = c.slice(0, A), c.match(/^([^\/]+:\/)?\/*$/)))
          return S;
        ++w;
      }
      return Array(w + 1).join("../") + S.substr(c.length + 1);
    }
    t.relative = f;
    var g = (function() {
      var c = /* @__PURE__ */ Object.create(null);
      return !("__proto__" in c);
    })();
    function v(c) {
      return c;
    }
    function E(c) {
      return b(c) ? "$" + c : c;
    }
    t.toSetString = g ? v : E;
    function _(c) {
      return b(c) ? c.slice(1) : c;
    }
    t.fromSetString = g ? v : _;
    function b(c) {
      if (!c)
        return !1;
      var S = c.length;
      if (S < 9 || c.charCodeAt(S - 1) !== 95 || c.charCodeAt(S - 2) !== 95 || c.charCodeAt(S - 3) !== 111 || c.charCodeAt(S - 4) !== 116 || c.charCodeAt(S - 5) !== 111 || c.charCodeAt(S - 6) !== 114 || c.charCodeAt(S - 7) !== 112 || c.charCodeAt(S - 8) !== 95 || c.charCodeAt(S - 9) !== 95)
        return !1;
      for (var w = S - 10; w >= 0; w--)
        if (c.charCodeAt(w) !== 36)
          return !1;
      return !0;
    }
    function p(c, S, w) {
      var A = k(c.source, S.source);
      return A !== 0 || (A = c.originalLine - S.originalLine, A !== 0) || (A = c.originalColumn - S.originalColumn, A !== 0 || w) || (A = c.generatedColumn - S.generatedColumn, A !== 0) || (A = c.generatedLine - S.generatedLine, A !== 0) ? A : k(c.name, S.name);
    }
    t.compareByOriginalPositions = p;
    function C(c, S, w) {
      var A = c.generatedLine - S.generatedLine;
      return A !== 0 || (A = c.generatedColumn - S.generatedColumn, A !== 0 || w) || (A = k(c.source, S.source), A !== 0) || (A = c.originalLine - S.originalLine, A !== 0) || (A = c.originalColumn - S.originalColumn, A !== 0) ? A : k(c.name, S.name);
    }
    t.compareByGeneratedPositionsDeflated = C;
    function k(c, S) {
      return c === S ? 0 : c === null ? 1 : S === null ? -1 : c > S ? 1 : -1;
    }
    function j(c, S) {
      var w = c.generatedLine - S.generatedLine;
      return w !== 0 || (w = c.generatedColumn - S.generatedColumn, w !== 0) || (w = k(c.source, S.source), w !== 0) || (w = c.originalLine - S.originalLine, w !== 0) || (w = c.originalColumn - S.originalColumn, w !== 0) ? w : k(c.name, S.name);
    }
    t.compareByGeneratedPositionsInflated = j;
    function O(c) {
      return JSON.parse(c.replace(/^\)]}'[^\n]*\n/, ""));
    }
    t.parseSourceMapInput = O;
    function I(c, S, w) {
      if (S = S || "", c && (c[c.length - 1] !== "/" && S[0] !== "/" && (c += "/"), S = c + S), w) {
        var A = u(w);
        if (!A)
          throw new Error("sourceMapURL could not be parsed");
        if (A.path) {
          var N = A.path.lastIndexOf("/");
          N >= 0 && (A.path = A.path.substring(0, N + 1));
        }
        S = m(l(A), S);
      }
      return h(S);
    }
    t.computeSourceURL = I;
  })(uf)), uf;
}
var lf = {}, oy;
function J0() {
  if (oy) return lf;
  oy = 1;
  var t = ao(), r = Object.prototype.hasOwnProperty, s = typeof Map < "u";
  function a() {
    this._array = [], this._set = s ? /* @__PURE__ */ new Map() : /* @__PURE__ */ Object.create(null);
  }
  return a.fromArray = function(l, h) {
    for (var m = new a(), f = 0, g = l.length; f < g; f++)
      m.add(l[f], h);
    return m;
  }, a.prototype.size = function() {
    return s ? this._set.size : Object.getOwnPropertyNames(this._set).length;
  }, a.prototype.add = function(l, h) {
    var m = s ? l : t.toSetString(l), f = s ? this.has(l) : r.call(this._set, m), g = this._array.length;
    (!f || h) && this._array.push(l), f || (s ? this._set.set(l, g) : this._set[m] = g);
  }, a.prototype.has = function(l) {
    if (s)
      return this._set.has(l);
    var h = t.toSetString(l);
    return r.call(this._set, h);
  }, a.prototype.indexOf = function(l) {
    if (s) {
      var h = this._set.get(l);
      if (h >= 0)
        return h;
    } else {
      var m = t.toSetString(l);
      if (r.call(this._set, m))
        return this._set[m];
    }
    throw new Error('"' + l + '" is not in the set.');
  }, a.prototype.at = function(l) {
    if (l >= 0 && l < this._array.length)
      return this._array[l];
    throw new Error("No element indexed by " + l);
  }, a.prototype.toArray = function() {
    return this._array.slice();
  }, lf.ArraySet = a, lf;
}
var cf = {}, uy;
function Z8() {
  if (uy) return cf;
  uy = 1;
  var t = ao();
  function r(a, u) {
    var l = a.generatedLine, h = u.generatedLine, m = a.generatedColumn, f = u.generatedColumn;
    return h > l || h == l && f >= m || t.compareByGeneratedPositionsInflated(a, u) <= 0;
  }
  function s() {
    this._array = [], this._sorted = !0, this._last = { generatedLine: -1, generatedColumn: 0 };
  }
  return s.prototype.unsortedForEach = function(u, l) {
    this._array.forEach(u, l);
  }, s.prototype.add = function(u) {
    r(this._last, u) ? (this._last = u, this._array.push(u)) : (this._sorted = !1, this._array.push(u));
  }, s.prototype.toArray = function() {
    return this._sorted || (this._array.sort(t.compareByGeneratedPositionsInflated), this._sorted = !0), this._array;
  }, cf.MappingList = s, cf;
}
var ly;
function W0() {
  if (ly) return of;
  ly = 1;
  var t = Q0(), r = ao(), s = J0().ArraySet, a = Z8().MappingList;
  function u(l) {
    l || (l = {}), this._file = r.getArg(l, "file", null), this._sourceRoot = r.getArg(l, "sourceRoot", null), this._skipValidation = r.getArg(l, "skipValidation", !1), this._sources = new s(), this._names = new s(), this._mappings = new a(), this._sourcesContents = null;
  }
  return u.prototype._version = 3, u.fromSourceMap = function(h) {
    var m = h.sourceRoot, f = new u({
      file: h.file,
      sourceRoot: m
    });
    return h.eachMapping(function(g) {
      var v = {
        generated: {
          line: g.generatedLine,
          column: g.generatedColumn
        }
      };
      g.source != null && (v.source = g.source, m != null && (v.source = r.relative(m, v.source)), v.original = {
        line: g.originalLine,
        column: g.originalColumn
      }, g.name != null && (v.name = g.name)), f.addMapping(v);
    }), h.sources.forEach(function(g) {
      var v = g;
      m !== null && (v = r.relative(m, g)), f._sources.has(v) || f._sources.add(v);
      var E = h.sourceContentFor(g);
      E != null && f.setSourceContent(g, E);
    }), f;
  }, u.prototype.addMapping = function(h) {
    var m = r.getArg(h, "generated"), f = r.getArg(h, "original", null), g = r.getArg(h, "source", null), v = r.getArg(h, "name", null);
    this._skipValidation || this._validateMapping(m, f, g, v), g != null && (g = String(g), this._sources.has(g) || this._sources.add(g)), v != null && (v = String(v), this._names.has(v) || this._names.add(v)), this._mappings.add({
      generatedLine: m.line,
      generatedColumn: m.column,
      originalLine: f != null && f.line,
      originalColumn: f != null && f.column,
      source: g,
      name: v
    });
  }, u.prototype.setSourceContent = function(h, m) {
    var f = h;
    this._sourceRoot != null && (f = r.relative(this._sourceRoot, f)), m != null ? (this._sourcesContents || (this._sourcesContents = /* @__PURE__ */ Object.create(null)), this._sourcesContents[r.toSetString(f)] = m) : this._sourcesContents && (delete this._sourcesContents[r.toSetString(f)], Object.keys(this._sourcesContents).length === 0 && (this._sourcesContents = null));
  }, u.prototype.applySourceMap = function(h, m, f) {
    var g = m;
    if (m == null) {
      if (h.file == null)
        throw new Error(
          `SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`
        );
      g = h.file;
    }
    var v = this._sourceRoot;
    v != null && (g = r.relative(v, g));
    var E = new s(), _ = new s();
    this._mappings.unsortedForEach(function(b) {
      if (b.source === g && b.originalLine != null) {
        var p = h.originalPositionFor({
          line: b.originalLine,
          column: b.originalColumn
        });
        p.source != null && (b.source = p.source, f != null && (b.source = r.join(f, b.source)), v != null && (b.source = r.relative(v, b.source)), b.originalLine = p.line, b.originalColumn = p.column, p.name != null && (b.name = p.name));
      }
      var C = b.source;
      C != null && !E.has(C) && E.add(C);
      var k = b.name;
      k != null && !_.has(k) && _.add(k);
    }, this), this._sources = E, this._names = _, h.sources.forEach(function(b) {
      var p = h.sourceContentFor(b);
      p != null && (f != null && (b = r.join(f, b)), v != null && (b = r.relative(v, b)), this.setSourceContent(b, p));
    }, this);
  }, u.prototype._validateMapping = function(h, m, f, g) {
    if (m && typeof m.line != "number" && typeof m.column != "number")
      throw new Error(
        "original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values."
      );
    if (!(h && "line" in h && "column" in h && h.line > 0 && h.column >= 0 && !m && !f && !g)) {
      if (h && "line" in h && "column" in h && m && "line" in m && "column" in m && h.line > 0 && h.column >= 0 && m.line > 0 && m.column >= 0 && f)
        return;
      throw new Error("Invalid mapping: " + JSON.stringify({
        generated: h,
        source: f,
        original: m,
        name: g
      }));
    }
  }, u.prototype._serializeMappings = function() {
    for (var h = 0, m = 1, f = 0, g = 0, v = 0, E = 0, _ = "", b, p, C, k, j = this._mappings.toArray(), O = 0, I = j.length; O < I; O++) {
      if (p = j[O], b = "", p.generatedLine !== m)
        for (h = 0; p.generatedLine !== m; )
          b += ";", m++;
      else if (O > 0) {
        if (!r.compareByGeneratedPositionsInflated(p, j[O - 1]))
          continue;
        b += ",";
      }
      b += t.encode(p.generatedColumn - h), h = p.generatedColumn, p.source != null && (k = this._sources.indexOf(p.source), b += t.encode(k - E), E = k, b += t.encode(p.originalLine - 1 - g), g = p.originalLine - 1, b += t.encode(p.originalColumn - f), f = p.originalColumn, p.name != null && (C = this._names.indexOf(p.name), b += t.encode(C - v), v = C)), _ += b;
    }
    return _;
  }, u.prototype._generateSourcesContent = function(h, m) {
    return h.map(function(f) {
      if (!this._sourcesContents)
        return null;
      m != null && (f = r.relative(m, f));
      var g = r.toSetString(f);
      return Object.prototype.hasOwnProperty.call(this._sourcesContents, g) ? this._sourcesContents[g] : null;
    }, this);
  }, u.prototype.toJSON = function() {
    var h = {
      version: this._version,
      sources: this._sources.toArray(),
      names: this._names.toArray(),
      mappings: this._serializeMappings()
    };
    return this._file != null && (h.file = this._file), this._sourceRoot != null && (h.sourceRoot = this._sourceRoot), this._sourcesContents && (h.sourcesContent = this._generateSourcesContent(h.sources, h.sourceRoot)), h;
  }, u.prototype.toString = function() {
    return JSON.stringify(this.toJSON());
  }, of.SourceMapGenerator = u, of;
}
var Us = {}, df = {}, cy;
function $8() {
  return cy || (cy = 1, (function(t) {
    t.GREATEST_LOWER_BOUND = 1, t.LEAST_UPPER_BOUND = 2;
    function r(s, a, u, l, h, m) {
      var f = Math.floor((a - s) / 2) + s, g = h(u, l[f], !0);
      return g === 0 ? f : g > 0 ? a - f > 1 ? r(f, a, u, l, h, m) : m == t.LEAST_UPPER_BOUND ? a < l.length ? a : -1 : f : f - s > 1 ? r(s, f, u, l, h, m) : m == t.LEAST_UPPER_BOUND ? f : s < 0 ? -1 : s;
    }
    t.search = function(a, u, l, h) {
      if (u.length === 0)
        return -1;
      var m = r(
        -1,
        u.length,
        a,
        u,
        l,
        h || t.GREATEST_LOWER_BOUND
      );
      if (m < 0)
        return -1;
      for (; m - 1 >= 0 && l(u[m], u[m - 1], !0) === 0; )
        --m;
      return m;
    };
  })(df)), df;
}
var ff = {}, dy;
function V8() {
  if (dy) return ff;
  dy = 1;
  function t(a, u, l) {
    var h = a[u];
    a[u] = a[l], a[l] = h;
  }
  function r(a, u) {
    return Math.round(a + Math.random() * (u - a));
  }
  function s(a, u, l, h) {
    if (l < h) {
      var m = r(l, h), f = l - 1;
      t(a, m, h);
      for (var g = a[h], v = l; v < h; v++)
        u(a[v], g) <= 0 && (f += 1, t(a, f, v));
      t(a, f + 1, v);
      var E = f + 1;
      s(a, u, l, E - 1), s(a, u, E + 1, h);
    }
  }
  return ff.quickSort = function(a, u) {
    s(a, u, 0, a.length - 1);
  }, ff;
}
var fy;
function Y8() {
  if (fy) return Us;
  fy = 1;
  var t = ao(), r = $8(), s = J0().ArraySet, a = Q0(), u = V8().quickSort;
  function l(g, v) {
    var E = g;
    return typeof g == "string" && (E = t.parseSourceMapInput(g)), E.sections != null ? new f(E, v) : new h(E, v);
  }
  l.fromSourceMap = function(g, v) {
    return h.fromSourceMap(g, v);
  }, l.prototype._version = 3, l.prototype.__generatedMappings = null, Object.defineProperty(l.prototype, "_generatedMappings", {
    configurable: !0,
    enumerable: !0,
    get: function() {
      return this.__generatedMappings || this._parseMappings(this._mappings, this.sourceRoot), this.__generatedMappings;
    }
  }), l.prototype.__originalMappings = null, Object.defineProperty(l.prototype, "_originalMappings", {
    configurable: !0,
    enumerable: !0,
    get: function() {
      return this.__originalMappings || this._parseMappings(this._mappings, this.sourceRoot), this.__originalMappings;
    }
  }), l.prototype._charIsMappingSeparator = function(v, E) {
    var _ = v.charAt(E);
    return _ === ";" || _ === ",";
  }, l.prototype._parseMappings = function(v, E) {
    throw new Error("Subclasses must implement _parseMappings");
  }, l.GENERATED_ORDER = 1, l.ORIGINAL_ORDER = 2, l.GREATEST_LOWER_BOUND = 1, l.LEAST_UPPER_BOUND = 2, l.prototype.eachMapping = function(v, E, _) {
    var b = E || null, p = _ || l.GENERATED_ORDER, C;
    switch (p) {
      case l.GENERATED_ORDER:
        C = this._generatedMappings;
        break;
      case l.ORIGINAL_ORDER:
        C = this._originalMappings;
        break;
      default:
        throw new Error("Unknown order of iteration.");
    }
    var k = this.sourceRoot;
    C.map(function(j) {
      var O = j.source === null ? null : this._sources.at(j.source);
      return O = t.computeSourceURL(k, O, this._sourceMapURL), {
        source: O,
        generatedLine: j.generatedLine,
        generatedColumn: j.generatedColumn,
        originalLine: j.originalLine,
        originalColumn: j.originalColumn,
        name: j.name === null ? null : this._names.at(j.name)
      };
    }, this).forEach(v, b);
  }, l.prototype.allGeneratedPositionsFor = function(v) {
    var E = t.getArg(v, "line"), _ = {
      source: t.getArg(v, "source"),
      originalLine: E,
      originalColumn: t.getArg(v, "column", 0)
    };
    if (_.source = this._findSourceIndex(_.source), _.source < 0)
      return [];
    var b = [], p = this._findMapping(
      _,
      this._originalMappings,
      "originalLine",
      "originalColumn",
      t.compareByOriginalPositions,
      r.LEAST_UPPER_BOUND
    );
    if (p >= 0) {
      var C = this._originalMappings[p];
      if (v.column === void 0)
        for (var k = C.originalLine; C && C.originalLine === k; )
          b.push({
            line: t.getArg(C, "generatedLine", null),
            column: t.getArg(C, "generatedColumn", null),
            lastColumn: t.getArg(C, "lastGeneratedColumn", null)
          }), C = this._originalMappings[++p];
      else
        for (var j = C.originalColumn; C && C.originalLine === E && C.originalColumn == j; )
          b.push({
            line: t.getArg(C, "generatedLine", null),
            column: t.getArg(C, "generatedColumn", null),
            lastColumn: t.getArg(C, "lastGeneratedColumn", null)
          }), C = this._originalMappings[++p];
    }
    return b;
  }, Us.SourceMapConsumer = l;
  function h(g, v) {
    var E = g;
    typeof g == "string" && (E = t.parseSourceMapInput(g));
    var _ = t.getArg(E, "version"), b = t.getArg(E, "sources"), p = t.getArg(E, "names", []), C = t.getArg(E, "sourceRoot", null), k = t.getArg(E, "sourcesContent", null), j = t.getArg(E, "mappings"), O = t.getArg(E, "file", null);
    if (_ != this._version)
      throw new Error("Unsupported version: " + _);
    C && (C = t.normalize(C)), b = b.map(String).map(t.normalize).map(function(I) {
      return C && t.isAbsolute(C) && t.isAbsolute(I) ? t.relative(C, I) : I;
    }), this._names = s.fromArray(p.map(String), !0), this._sources = s.fromArray(b, !0), this._absoluteSources = this._sources.toArray().map(function(I) {
      return t.computeSourceURL(C, I, v);
    }), this.sourceRoot = C, this.sourcesContent = k, this._mappings = j, this._sourceMapURL = v, this.file = O;
  }
  h.prototype = Object.create(l.prototype), h.prototype.consumer = l, h.prototype._findSourceIndex = function(g) {
    var v = g;
    if (this.sourceRoot != null && (v = t.relative(this.sourceRoot, v)), this._sources.has(v))
      return this._sources.indexOf(v);
    var E;
    for (E = 0; E < this._absoluteSources.length; ++E)
      if (this._absoluteSources[E] == g)
        return E;
    return -1;
  }, h.fromSourceMap = function(v, E) {
    var _ = Object.create(h.prototype), b = _._names = s.fromArray(v._names.toArray(), !0), p = _._sources = s.fromArray(v._sources.toArray(), !0);
    _.sourceRoot = v._sourceRoot, _.sourcesContent = v._generateSourcesContent(
      _._sources.toArray(),
      _.sourceRoot
    ), _.file = v._file, _._sourceMapURL = E, _._absoluteSources = _._sources.toArray().map(function(w) {
      return t.computeSourceURL(_.sourceRoot, w, E);
    });
    for (var C = v._mappings.toArray().slice(), k = _.__generatedMappings = [], j = _.__originalMappings = [], O = 0, I = C.length; O < I; O++) {
      var c = C[O], S = new m();
      S.generatedLine = c.generatedLine, S.generatedColumn = c.generatedColumn, c.source && (S.source = p.indexOf(c.source), S.originalLine = c.originalLine, S.originalColumn = c.originalColumn, c.name && (S.name = b.indexOf(c.name)), j.push(S)), k.push(S);
    }
    return u(_.__originalMappings, t.compareByOriginalPositions), _;
  }, h.prototype._version = 3, Object.defineProperty(h.prototype, "sources", {
    get: function() {
      return this._absoluteSources.slice();
    }
  });
  function m() {
    this.generatedLine = 0, this.generatedColumn = 0, this.source = null, this.originalLine = null, this.originalColumn = null, this.name = null;
  }
  h.prototype._parseMappings = function(v, E) {
    for (var _ = 1, b = 0, p = 0, C = 0, k = 0, j = 0, O = v.length, I = 0, c = {}, S = {}, w = [], A = [], N, D, M, P, H; I < O; )
      if (v.charAt(I) === ";")
        _++, I++, b = 0;
      else if (v.charAt(I) === ",")
        I++;
      else {
        for (N = new m(), N.generatedLine = _, P = I; P < O && !this._charIsMappingSeparator(v, P); P++)
          ;
        if (D = v.slice(I, P), M = c[D], M)
          I += D.length;
        else {
          for (M = []; I < P; )
            a.decode(v, I, S), H = S.value, I = S.rest, M.push(H);
          if (M.length === 2)
            throw new Error("Found a source, but no line and column");
          if (M.length === 3)
            throw new Error("Found a source and line, but no column");
          c[D] = M;
        }
        N.generatedColumn = b + M[0], b = N.generatedColumn, M.length > 1 && (N.source = k + M[1], k += M[1], N.originalLine = p + M[2], p = N.originalLine, N.originalLine += 1, N.originalColumn = C + M[3], C = N.originalColumn, M.length > 4 && (N.name = j + M[4], j += M[4])), A.push(N), typeof N.originalLine == "number" && w.push(N);
      }
    u(A, t.compareByGeneratedPositionsDeflated), this.__generatedMappings = A, u(w, t.compareByOriginalPositions), this.__originalMappings = w;
  }, h.prototype._findMapping = function(v, E, _, b, p, C) {
    if (v[_] <= 0)
      throw new TypeError("Line must be greater than or equal to 1, got " + v[_]);
    if (v[b] < 0)
      throw new TypeError("Column must be greater than or equal to 0, got " + v[b]);
    return r.search(v, E, p, C);
  }, h.prototype.computeColumnSpans = function() {
    for (var v = 0; v < this._generatedMappings.length; ++v) {
      var E = this._generatedMappings[v];
      if (v + 1 < this._generatedMappings.length) {
        var _ = this._generatedMappings[v + 1];
        if (E.generatedLine === _.generatedLine) {
          E.lastGeneratedColumn = _.generatedColumn - 1;
          continue;
        }
      }
      E.lastGeneratedColumn = 1 / 0;
    }
  }, h.prototype.originalPositionFor = function(v) {
    var E = {
      generatedLine: t.getArg(v, "line"),
      generatedColumn: t.getArg(v, "column")
    }, _ = this._findMapping(
      E,
      this._generatedMappings,
      "generatedLine",
      "generatedColumn",
      t.compareByGeneratedPositionsDeflated,
      t.getArg(v, "bias", l.GREATEST_LOWER_BOUND)
    );
    if (_ >= 0) {
      var b = this._generatedMappings[_];
      if (b.generatedLine === E.generatedLine) {
        var p = t.getArg(b, "source", null);
        p !== null && (p = this._sources.at(p), p = t.computeSourceURL(this.sourceRoot, p, this._sourceMapURL));
        var C = t.getArg(b, "name", null);
        return C !== null && (C = this._names.at(C)), {
          source: p,
          line: t.getArg(b, "originalLine", null),
          column: t.getArg(b, "originalColumn", null),
          name: C
        };
      }
    }
    return {
      source: null,
      line: null,
      column: null,
      name: null
    };
  }, h.prototype.hasContentsOfAllSources = function() {
    return this.sourcesContent ? this.sourcesContent.length >= this._sources.size() && !this.sourcesContent.some(function(v) {
      return v == null;
    }) : !1;
  }, h.prototype.sourceContentFor = function(v, E) {
    if (!this.sourcesContent)
      return null;
    var _ = this._findSourceIndex(v);
    if (_ >= 0)
      return this.sourcesContent[_];
    var b = v;
    this.sourceRoot != null && (b = t.relative(this.sourceRoot, b));
    var p;
    if (this.sourceRoot != null && (p = t.urlParse(this.sourceRoot))) {
      var C = b.replace(/^file:\/\//, "");
      if (p.scheme == "file" && this._sources.has(C))
        return this.sourcesContent[this._sources.indexOf(C)];
      if ((!p.path || p.path == "/") && this._sources.has("/" + b))
        return this.sourcesContent[this._sources.indexOf("/" + b)];
    }
    if (E)
      return null;
    throw new Error('"' + b + '" is not in the SourceMap.');
  }, h.prototype.generatedPositionFor = function(v) {
    var E = t.getArg(v, "source");
    if (E = this._findSourceIndex(E), E < 0)
      return {
        line: null,
        column: null,
        lastColumn: null
      };
    var _ = {
      source: E,
      originalLine: t.getArg(v, "line"),
      originalColumn: t.getArg(v, "column")
    }, b = this._findMapping(
      _,
      this._originalMappings,
      "originalLine",
      "originalColumn",
      t.compareByOriginalPositions,
      t.getArg(v, "bias", l.GREATEST_LOWER_BOUND)
    );
    if (b >= 0) {
      var p = this._originalMappings[b];
      if (p.source === _.source)
        return {
          line: t.getArg(p, "generatedLine", null),
          column: t.getArg(p, "generatedColumn", null),
          lastColumn: t.getArg(p, "lastGeneratedColumn", null)
        };
    }
    return {
      line: null,
      column: null,
      lastColumn: null
    };
  }, Us.BasicSourceMapConsumer = h;
  function f(g, v) {
    var E = g;
    typeof g == "string" && (E = t.parseSourceMapInput(g));
    var _ = t.getArg(E, "version"), b = t.getArg(E, "sections");
    if (_ != this._version)
      throw new Error("Unsupported version: " + _);
    this._sources = new s(), this._names = new s();
    var p = {
      line: -1,
      column: 0
    };
    this._sections = b.map(function(C) {
      if (C.url)
        throw new Error("Support for url field in sections not implemented.");
      var k = t.getArg(C, "offset"), j = t.getArg(k, "line"), O = t.getArg(k, "column");
      if (j < p.line || j === p.line && O < p.column)
        throw new Error("Section offsets must be ordered and non-overlapping.");
      return p = k, {
        generatedOffset: {
          // The offset fields are 0-based, but we use 1-based indices when
          // encoding/decoding from VLQ.
          generatedLine: j + 1,
          generatedColumn: O + 1
        },
        consumer: new l(t.getArg(C, "map"), v)
      };
    });
  }
  return f.prototype = Object.create(l.prototype), f.prototype.constructor = l, f.prototype._version = 3, Object.defineProperty(f.prototype, "sources", {
    get: function() {
      for (var g = [], v = 0; v < this._sections.length; v++)
        for (var E = 0; E < this._sections[v].consumer.sources.length; E++)
          g.push(this._sections[v].consumer.sources[E]);
      return g;
    }
  }), f.prototype.originalPositionFor = function(v) {
    var E = {
      generatedLine: t.getArg(v, "line"),
      generatedColumn: t.getArg(v, "column")
    }, _ = r.search(
      E,
      this._sections,
      function(p, C) {
        var k = p.generatedLine - C.generatedOffset.generatedLine;
        return k || p.generatedColumn - C.generatedOffset.generatedColumn;
      }
    ), b = this._sections[_];
    return b ? b.consumer.originalPositionFor({
      line: E.generatedLine - (b.generatedOffset.generatedLine - 1),
      column: E.generatedColumn - (b.generatedOffset.generatedLine === E.generatedLine ? b.generatedOffset.generatedColumn - 1 : 0),
      bias: v.bias
    }) : {
      source: null,
      line: null,
      column: null,
      name: null
    };
  }, f.prototype.hasContentsOfAllSources = function() {
    return this._sections.every(function(v) {
      return v.consumer.hasContentsOfAllSources();
    });
  }, f.prototype.sourceContentFor = function(v, E) {
    for (var _ = 0; _ < this._sections.length; _++) {
      var b = this._sections[_], p = b.consumer.sourceContentFor(v, !0);
      if (p)
        return p;
    }
    if (E)
      return null;
    throw new Error('"' + v + '" is not in the SourceMap.');
  }, f.prototype.generatedPositionFor = function(v) {
    for (var E = 0; E < this._sections.length; E++) {
      var _ = this._sections[E];
      if (_.consumer._findSourceIndex(t.getArg(v, "source")) !== -1) {
        var b = _.consumer.generatedPositionFor(v);
        if (b) {
          var p = {
            line: b.line + (_.generatedOffset.generatedLine - 1),
            column: b.column + (_.generatedOffset.generatedLine === b.line ? _.generatedOffset.generatedColumn - 1 : 0)
          };
          return p;
        }
      }
    }
    return {
      line: null,
      column: null
    };
  }, f.prototype._parseMappings = function(v, E) {
    this.__generatedMappings = [], this.__originalMappings = [];
    for (var _ = 0; _ < this._sections.length; _++)
      for (var b = this._sections[_], p = b.consumer._generatedMappings, C = 0; C < p.length; C++) {
        var k = p[C], j = b.consumer._sources.at(k.source);
        j = t.computeSourceURL(b.consumer.sourceRoot, j, this._sourceMapURL), this._sources.add(j), j = this._sources.indexOf(j);
        var O = null;
        k.name && (O = b.consumer._names.at(k.name), this._names.add(O), O = this._names.indexOf(O));
        var I = {
          source: j,
          generatedLine: k.generatedLine + (b.generatedOffset.generatedLine - 1),
          generatedColumn: k.generatedColumn + (b.generatedOffset.generatedLine === k.generatedLine ? b.generatedOffset.generatedColumn - 1 : 0),
          originalLine: k.originalLine,
          originalColumn: k.originalColumn,
          name: O
        };
        this.__generatedMappings.push(I), typeof I.originalLine == "number" && this.__originalMappings.push(I);
      }
    u(this.__generatedMappings, t.compareByGeneratedPositionsDeflated), u(this.__originalMappings, t.compareByOriginalPositions);
  }, Us.IndexedSourceMapConsumer = f, Us;
}
var hf = {}, hy;
function F8() {
  if (hy) return hf;
  hy = 1;
  var t = W0().SourceMapGenerator, r = ao(), s = /(\r?\n)/, a = 10, u = "$$$isSourceNode$$$";
  function l(h, m, f, g, v) {
    this.children = [], this.sourceContents = {}, this.line = h ?? null, this.column = m ?? null, this.source = f ?? null, this.name = v ?? null, this[u] = !0, g != null && this.add(g);
  }
  return l.fromStringWithSourceMap = function(m, f, g) {
    var v = new l(), E = m.split(s), _ = 0, b = function() {
      var O = c(), I = c() || "";
      return O + I;
      function c() {
        return _ < E.length ? E[_++] : void 0;
      }
    }, p = 1, C = 0, k = null;
    return f.eachMapping(function(O) {
      if (k !== null)
        if (p < O.generatedLine)
          j(k, b()), p++, C = 0;
        else {
          var I = E[_] || "", c = I.substr(0, O.generatedColumn - C);
          E[_] = I.substr(O.generatedColumn - C), C = O.generatedColumn, j(k, c), k = O;
          return;
        }
      for (; p < O.generatedLine; )
        v.add(b()), p++;
      if (C < O.generatedColumn) {
        var I = E[_] || "";
        v.add(I.substr(0, O.generatedColumn)), E[_] = I.substr(O.generatedColumn), C = O.generatedColumn;
      }
      k = O;
    }, this), _ < E.length && (k && j(k, b()), v.add(E.splice(_).join(""))), f.sources.forEach(function(O) {
      var I = f.sourceContentFor(O);
      I != null && (g != null && (O = r.join(g, O)), v.setSourceContent(O, I));
    }), v;
    function j(O, I) {
      if (O === null || O.source === void 0)
        v.add(I);
      else {
        var c = g ? r.join(g, O.source) : O.source;
        v.add(new l(
          O.originalLine,
          O.originalColumn,
          c,
          I,
          O.name
        ));
      }
    }
  }, l.prototype.add = function(m) {
    if (Array.isArray(m))
      m.forEach(function(f) {
        this.add(f);
      }, this);
    else if (m[u] || typeof m == "string")
      m && this.children.push(m);
    else
      throw new TypeError(
        "Expected a SourceNode, string, or an array of SourceNodes and strings. Got " + m
      );
    return this;
  }, l.prototype.prepend = function(m) {
    if (Array.isArray(m))
      for (var f = m.length - 1; f >= 0; f--)
        this.prepend(m[f]);
    else if (m[u] || typeof m == "string")
      this.children.unshift(m);
    else
      throw new TypeError(
        "Expected a SourceNode, string, or an array of SourceNodes and strings. Got " + m
      );
    return this;
  }, l.prototype.walk = function(m) {
    for (var f, g = 0, v = this.children.length; g < v; g++)
      f = this.children[g], f[u] ? f.walk(m) : f !== "" && m(f, {
        source: this.source,
        line: this.line,
        column: this.column,
        name: this.name
      });
  }, l.prototype.join = function(m) {
    var f, g, v = this.children.length;
    if (v > 0) {
      for (f = [], g = 0; g < v - 1; g++)
        f.push(this.children[g]), f.push(m);
      f.push(this.children[g]), this.children = f;
    }
    return this;
  }, l.prototype.replaceRight = function(m, f) {
    var g = this.children[this.children.length - 1];
    return g[u] ? g.replaceRight(m, f) : typeof g == "string" ? this.children[this.children.length - 1] = g.replace(m, f) : this.children.push("".replace(m, f)), this;
  }, l.prototype.setSourceContent = function(m, f) {
    this.sourceContents[r.toSetString(m)] = f;
  }, l.prototype.walkSourceContents = function(m) {
    for (var f = 0, g = this.children.length; f < g; f++)
      this.children[f][u] && this.children[f].walkSourceContents(m);
    for (var v = Object.keys(this.sourceContents), f = 0, g = v.length; f < g; f++)
      m(r.fromSetString(v[f]), this.sourceContents[v[f]]);
  }, l.prototype.toString = function() {
    var m = "";
    return this.walk(function(f) {
      m += f;
    }), m;
  }, l.prototype.toStringWithSourceMap = function(m) {
    var f = {
      code: "",
      line: 1,
      column: 0
    }, g = new t(m), v = !1, E = null, _ = null, b = null, p = null;
    return this.walk(function(C, k) {
      f.code += C, k.source !== null && k.line !== null && k.column !== null ? ((E !== k.source || _ !== k.line || b !== k.column || p !== k.name) && g.addMapping({
        source: k.source,
        original: {
          line: k.line,
          column: k.column
        },
        generated: {
          line: f.line,
          column: f.column
        },
        name: k.name
      }), E = k.source, _ = k.line, b = k.column, p = k.name, v = !0) : v && (g.addMapping({
        generated: {
          line: f.line,
          column: f.column
        }
      }), E = null, v = !1);
      for (var j = 0, O = C.length; j < O; j++)
        C.charCodeAt(j) === a ? (f.line++, f.column = 0, j + 1 === O ? (E = null, v = !1) : v && g.addMapping({
          source: k.source,
          original: {
            line: k.line,
            column: k.column
          },
          generated: {
            line: f.line,
            column: f.column
          },
          name: k.name
        })) : f.column++;
    }), this.walkSourceContents(function(C, k) {
      g.setSourceContent(C, k);
    }), { code: f.code, map: g };
  }, hf.SourceNode = l, hf;
}
var py;
function X8() {
  return py || (py = 1, Bs.SourceMapGenerator = W0().SourceMapGenerator, Bs.SourceMapConsumer = Y8().SourceMapConsumer, Bs.SourceNode = F8().SourceNode), Bs;
}
var my;
function K8() {
  return my || (my = 1, (function(t, r) {
    r.__esModule = !0;
    var s = gn(), a = void 0;
    try {
      var u = X8();
      a = u.SourceNode;
    } catch {
    }
    a || (a = function(m, f, g, v) {
      this.src = "", v && this.add(v);
    }, a.prototype = {
      add: function(f) {
        s.isArray(f) && (f = f.join("")), this.src += f;
      },
      prepend: function(f) {
        s.isArray(f) && (f = f.join("")), this.src = f + this.src;
      },
      toStringWithSourceMap: function() {
        return { code: this.toString() };
      },
      toString: function() {
        return this.src;
      }
    });
    function l(m, f, g) {
      if (s.isArray(m)) {
        for (var v = [], E = 0, _ = m.length; E < _; E++)
          v.push(f.wrap(m[E], g));
        return v;
      } else if (typeof m == "boolean" || typeof m == "number")
        return m + "";
      return m;
    }
    function h(m) {
      this.srcFile = m, this.source = [];
    }
    h.prototype = {
      isEmpty: function() {
        return !this.source.length;
      },
      prepend: function(f, g) {
        this.source.unshift(this.wrap(f, g));
      },
      push: function(f, g) {
        this.source.push(this.wrap(f, g));
      },
      merge: function() {
        var f = this.empty();
        return this.each(function(g) {
          f.add(["  ", g, `
`]);
        }), f;
      },
      each: function(f) {
        for (var g = 0, v = this.source.length; g < v; g++)
          f(this.source[g]);
      },
      empty: function() {
        var f = this.currentLocation || { start: {} };
        return new a(f.start.line, f.start.column, this.srcFile);
      },
      wrap: function(f) {
        var g = arguments.length <= 1 || arguments[1] === void 0 ? this.currentLocation || { start: {} } : arguments[1];
        return f instanceof a ? f : (f = l(f, this, g), new a(g.start.line, g.start.column, this.srcFile, f));
      },
      functionCall: function(f, g, v) {
        return v = this.generateList(v), this.wrap([f, g ? "." + g + "(" : "(", v, ")"]);
      },
      quotedString: function(f) {
        return '"' + (f + "").replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029") + '"';
      },
      objectLiteral: function(f) {
        var g = this, v = [];
        Object.keys(f).forEach(function(_) {
          var b = l(f[_], g);
          b !== "undefined" && v.push([g.quotedString(_), ":", b]);
        });
        var E = this.generateList(v);
        return E.prepend("{"), E.add("}"), E;
      },
      generateList: function(f) {
        for (var g = this.empty(), v = 0, E = f.length; v < E; v++)
          v && g.add(","), g.add(l(f[v], this));
        return g;
      },
      generateArray: function(f) {
        var g = this.generateList(f);
        return g.prepend("["), g.add("]"), g;
      }
    }, r.default = h, t.exports = r.default;
  })(Fu, Fu.exports)), Fu.exports;
}
var gy;
function Q8() {
  return gy || (gy = 1, (function(t, r) {
    r.__esModule = !0;
    function s(_) {
      return _ && _.__esModule ? _ : { default: _ };
    }
    var a = Ff(), u = Xn(), l = s(u), h = gn(), m = K8(), f = s(m);
    function g(_) {
      this.value = _;
    }
    function v() {
    }
    v.prototype = {
      // PUBLIC API: You can override these methods in a subclass to provide
      // alternative compiled forms for name lookup and buffering semantics
      nameLookup: function(b, p) {
        return this.internalNameLookup(b, p);
      },
      depthedLookup: function(b) {
        return [this.aliasable("container.lookup"), "(depths, ", JSON.stringify(b), ")"];
      },
      compilerInfo: function() {
        var b = a.COMPILER_REVISION, p = a.REVISION_CHANGES[b];
        return [b, p];
      },
      appendToBuffer: function(b, p, C) {
        return h.isArray(b) || (b = [b]), b = this.source.wrap(b, p), this.environment.isSimple ? ["return ", b, ";"] : C ? ["buffer += ", b, ";"] : (b.appendToBuffer = !0, b);
      },
      initializeBuffer: function() {
        return this.quotedString("");
      },
      // END PUBLIC API
      internalNameLookup: function(b, p) {
        return this.lookupPropertyFunctionIsUsed = !0, ["lookupProperty(", b, ",", JSON.stringify(p), ")"];
      },
      lookupPropertyFunctionIsUsed: !1,
      compile: function(b, p, C, k) {
        this.environment = b, this.options = p, this.stringParams = this.options.stringParams, this.trackIds = this.options.trackIds, this.precompile = !k, this.name = this.environment.name, this.isChild = !!C, this.context = C || {
          decorators: [],
          programs: [],
          environments: []
        }, this.preamble(), this.stackSlot = 0, this.stackVars = [], this.aliases = {}, this.registers = { list: [] }, this.hashes = [], this.compileStack = [], this.inlineStack = [], this.blockParams = [], this.compileChildren(b, p), this.useDepths = this.useDepths || b.useDepths || b.useDecorators || this.options.compat, this.useBlockParams = this.useBlockParams || b.useBlockParams;
        var j = b.opcodes, O = void 0, I = void 0, c = void 0, S = void 0;
        for (c = 0, S = j.length; c < S; c++)
          O = j[c], this.source.currentLocation = O.loc, I = I || O.loc, this[O.opcode].apply(this, O.args);
        if (this.source.currentLocation = I, this.pushSource(""), this.stackSlot || this.inlineStack.length || this.compileStack.length)
          throw new l.default("Compile completed with content left on stack");
        this.decorators.isEmpty() ? this.decorators = void 0 : (this.useDecorators = !0, this.decorators.prepend(["var decorators = container.decorators, ", this.lookupPropertyFunctionVarDeclaration(), `;
`]), this.decorators.push("return fn;"), k ? this.decorators = Function.apply(this, ["fn", "props", "container", "depth0", "data", "blockParams", "depths", this.decorators.merge()]) : (this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`), this.decorators.push(`}
`), this.decorators = this.decorators.merge()));
        var w = this.createFunctionContext(k);
        if (this.isChild)
          return w;
        var A = {
          compiler: this.compilerInfo(),
          main: w
        };
        this.decorators && (A.main_d = this.decorators, A.useDecorators = !0);
        var N = this.context, D = N.programs, M = N.decorators;
        for (c = 0, S = D.length; c < S; c++)
          D[c] && (A[c] = D[c], M[c] && (A[c + "_d"] = M[c], A.useDecorators = !0));
        return this.environment.usePartial && (A.usePartial = !0), this.options.data && (A.useData = !0), this.useDepths && (A.useDepths = !0), this.useBlockParams && (A.useBlockParams = !0), this.options.compat && (A.compat = !0), k ? A.compilerOptions = this.options : (A.compiler = JSON.stringify(A.compiler), this.source.currentLocation = { start: { line: 1, column: 0 } }, A = this.objectLiteral(A), p.srcName ? (A = A.toStringWithSourceMap({ file: p.destName }), A.map = A.map && A.map.toString()) : A = A.toString()), A;
      },
      preamble: function() {
        this.lastContext = 0, this.source = new f.default(this.options.srcName), this.decorators = new f.default(this.options.srcName);
      },
      createFunctionContext: function(b) {
        var p = this, C = "", k = this.stackVars.concat(this.registers.list);
        k.length > 0 && (C += ", " + k.join(", "));
        var j = 0;
        Object.keys(this.aliases).forEach(function(c) {
          var S = p.aliases[c];
          S.children && S.referenceCount > 1 && (C += ", alias" + ++j + "=" + c, S.children[0] = "alias" + j);
        }), this.lookupPropertyFunctionIsUsed && (C += ", " + this.lookupPropertyFunctionVarDeclaration());
        var O = ["container", "depth0", "helpers", "partials", "data"];
        (this.useBlockParams || this.useDepths) && O.push("blockParams"), this.useDepths && O.push("depths");
        var I = this.mergeSource(C);
        return b ? (O.push(I), Function.apply(this, O)) : this.source.wrap(["function(", O.join(","), `) {
  `, I, "}"]);
      },
      mergeSource: function(b) {
        var p = this.environment.isSimple, C = !this.forceBuffer, k = void 0, j = void 0, O = void 0, I = void 0;
        return this.source.each(function(c) {
          c.appendToBuffer ? (O ? c.prepend("  + ") : O = c, I = c) : (O && (j ? O.prepend("buffer += ") : k = !0, I.add(";"), O = I = void 0), j = !0, p || (C = !1));
        }), C ? O ? (O.prepend("return "), I.add(";")) : j || this.source.push('return "";') : (b += ", buffer = " + (k ? "" : this.initializeBuffer()), O ? (O.prepend("return buffer + "), I.add(";")) : this.source.push("return buffer;")), b && this.source.prepend("var " + b.substring(2) + (k ? "" : `;
`)), this.source.merge();
      },
      lookupPropertyFunctionVarDeclaration: function() {
        return `
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim();
      },
      // [blockValue]
      //
      // On stack, before: hash, inverse, program, value
      // On stack, after: return value of blockHelperMissing
      //
      // The purpose of this opcode is to take a block of the form
      // `{{#this.foo}}...{{/this.foo}}`, resolve the value of `foo`, and
      // replace it on the stack with the result of properly
      // invoking blockHelperMissing.
      blockValue: function(b) {
        var p = this.aliasable("container.hooks.blockHelperMissing"), C = [this.contextName(0)];
        this.setupHelperArgs(b, 0, C);
        var k = this.popStack();
        C.splice(1, 0, k), this.push(this.source.functionCall(p, "call", C));
      },
      // [ambiguousBlockValue]
      //
      // On stack, before: hash, inverse, program, value
      // Compiler value, before: lastHelper=value of last found helper, if any
      // On stack, after, if no lastHelper: same as [blockValue]
      // On stack, after, if lastHelper: value
      ambiguousBlockValue: function() {
        var b = this.aliasable("container.hooks.blockHelperMissing"), p = [this.contextName(0)];
        this.setupHelperArgs("", 0, p, !0), this.flushInline();
        var C = this.topStack();
        p.splice(1, 0, C), this.pushSource(["if (!", this.lastHelper, ") { ", C, " = ", this.source.functionCall(b, "call", p), "}"]);
      },
      // [appendContent]
      //
      // On stack, before: ...
      // On stack, after: ...
      //
      // Appends the string value of `content` to the current buffer
      appendContent: function(b) {
        this.pendingContent ? b = this.pendingContent + b : this.pendingLocation = this.source.currentLocation, this.pendingContent = b;
      },
      // [append]
      //
      // On stack, before: value, ...
      // On stack, after: ...
      //
      // Coerces `value` to a String and appends it to the current buffer.
      //
      // If `value` is truthy, or 0, it is coerced into a string and appended
      // Otherwise, the empty string is appended
      append: function() {
        if (this.isInline())
          this.replaceStack(function(p) {
            return [" != null ? ", p, ' : ""'];
          }), this.pushSource(this.appendToBuffer(this.popStack()));
        else {
          var b = this.popStack();
          this.pushSource(["if (", b, " != null) { ", this.appendToBuffer(b, void 0, !0), " }"]), this.environment.isSimple && this.pushSource(["else { ", this.appendToBuffer("''", void 0, !0), " }"]);
        }
      },
      // [appendEscaped]
      //
      // On stack, before: value, ...
      // On stack, after: ...
      //
      // Escape `value` and append it to the buffer
      appendEscaped: function() {
        this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"), "(", this.popStack(), ")"]));
      },
      // [getContext]
      //
      // On stack, before: ...
      // On stack, after: ...
      // Compiler value, after: lastContext=depth
      //
      // Set the value of the `lastContext` compiler value to the depth
      getContext: function(b) {
        this.lastContext = b;
      },
      // [pushContext]
      //
      // On stack, before: ...
      // On stack, after: currentContext, ...
      //
      // Pushes the value of the current context onto the stack.
      pushContext: function() {
        this.pushStackLiteral(this.contextName(this.lastContext));
      },
      // [lookupOnContext]
      //
      // On stack, before: ...
      // On stack, after: currentContext[name], ...
      //
      // Looks up the value of `name` on the current context and pushes
      // it onto the stack.
      lookupOnContext: function(b, p, C, k) {
        var j = 0;
        !k && this.options.compat && !this.lastContext ? this.push(this.depthedLookup(b[j++])) : this.pushContext(), this.resolvePath("context", b, j, p, C);
      },
      // [lookupBlockParam]
      //
      // On stack, before: ...
      // On stack, after: blockParam[name], ...
      //
      // Looks up the value of `parts` on the given block param and pushes
      // it onto the stack.
      lookupBlockParam: function(b, p) {
        this.useBlockParams = !0, this.push(["blockParams[", b[0], "][", b[1], "]"]), this.resolvePath("context", p, 1);
      },
      // [lookupData]
      //
      // On stack, before: ...
      // On stack, after: data, ...
      //
      // Push the data lookup operator
      lookupData: function(b, p, C) {
        b ? this.pushStackLiteral("container.data(data, " + b + ")") : this.pushStackLiteral("data"), this.resolvePath("data", p, 0, !0, C);
      },
      resolvePath: function(b, p, C, k, j) {
        var O = this;
        if (this.options.strict || this.options.assumeObjects) {
          this.push(E(this.options.strict && j, this, p, C, b));
          return;
        }
        for (var I = p.length; C < I; C++)
          this.replaceStack(function(c) {
            var S = O.nameLookup(c, p[C], b);
            return k ? [" && ", S] : [" != null ? ", S, " : ", c];
          });
      },
      // [resolvePossibleLambda]
      //
      // On stack, before: value, ...
      // On stack, after: resolved value, ...
      //
      // If the `value` is a lambda, replace it on the stack by
      // the return value of the lambda
      resolvePossibleLambda: function() {
        this.push([this.aliasable("container.lambda"), "(", this.popStack(), ", ", this.contextName(0), ")"]);
      },
      // [pushStringParam]
      //
      // On stack, before: ...
      // On stack, after: string, currentContext, ...
      //
      // This opcode is designed for use in string mode, which
      // provides the string value of a parameter along with its
      // depth rather than resolving it immediately.
      pushStringParam: function(b, p) {
        this.pushContext(), this.pushString(p), p !== "SubExpression" && (typeof b == "string" ? this.pushString(b) : this.pushStackLiteral(b));
      },
      emptyHash: function(b) {
        this.trackIds && this.push("{}"), this.stringParams && (this.push("{}"), this.push("{}")), this.pushStackLiteral(b ? "undefined" : "{}");
      },
      pushHash: function() {
        this.hash && this.hashes.push(this.hash), this.hash = { values: {}, types: [], contexts: [], ids: [] };
      },
      popHash: function() {
        var b = this.hash;
        this.hash = this.hashes.pop(), this.trackIds && this.push(this.objectLiteral(b.ids)), this.stringParams && (this.push(this.objectLiteral(b.contexts)), this.push(this.objectLiteral(b.types))), this.push(this.objectLiteral(b.values));
      },
      // [pushString]
      //
      // On stack, before: ...
      // On stack, after: quotedString(string), ...
      //
      // Push a quoted version of `string` onto the stack
      pushString: function(b) {
        this.pushStackLiteral(this.quotedString(b));
      },
      // [pushLiteral]
      //
      // On stack, before: ...
      // On stack, after: value, ...
      //
      // Pushes a value onto the stack. This operation prevents
      // the compiler from creating a temporary variable to hold
      // it.
      pushLiteral: function(b) {
        this.pushStackLiteral(b);
      },
      // [pushProgram]
      //
      // On stack, before: ...
      // On stack, after: program(guid), ...
      //
      // Push a program expression onto the stack. This takes
      // a compile-time guid and converts it into a runtime-accessible
      // expression.
      pushProgram: function(b) {
        b != null ? this.pushStackLiteral(this.programExpression(b)) : this.pushStackLiteral(null);
      },
      // [registerDecorator]
      //
      // On stack, before: hash, program, params..., ...
      // On stack, after: ...
      //
      // Pops off the decorator's parameters, invokes the decorator,
      // and inserts the decorator into the decorators list.
      registerDecorator: function(b, p) {
        var C = this.nameLookup("decorators", p, "decorator"), k = this.setupHelperArgs(p, b);
        this.decorators.push(["fn = ", this.decorators.functionCall(C, "", ["fn", "props", "container", k]), " || fn;"]);
      },
      // [invokeHelper]
      //
      // On stack, before: hash, inverse, program, params..., ...
      // On stack, after: result of helper invocation
      //
      // Pops off the helper's parameters, invokes the helper,
      // and pushes the helper's return value onto the stack.
      //
      // If the helper is not found, `helperMissing` is called.
      invokeHelper: function(b, p, C) {
        var k = this.popStack(), j = this.setupHelper(b, p), O = [];
        C && O.push(j.name), O.push(k), this.options.strict || O.push(this.aliasable("container.hooks.helperMissing"));
        var I = ["(", this.itemsSeparatedBy(O, "||"), ")"], c = this.source.functionCall(I, "call", j.callParams);
        this.push(c);
      },
      itemsSeparatedBy: function(b, p) {
        var C = [];
        C.push(b[0]);
        for (var k = 1; k < b.length; k++)
          C.push(p, b[k]);
        return C;
      },
      // [invokeKnownHelper]
      //
      // On stack, before: hash, inverse, program, params..., ...
      // On stack, after: result of helper invocation
      //
      // This operation is used when the helper is known to exist,
      // so a `helperMissing` fallback is not required.
      invokeKnownHelper: function(b, p) {
        var C = this.setupHelper(b, p);
        this.push(this.source.functionCall(C.name, "call", C.callParams));
      },
      // [invokeAmbiguous]
      //
      // On stack, before: hash, inverse, program, params..., ...
      // On stack, after: result of disambiguation
      //
      // This operation is used when an expression like `{{foo}}`
      // is provided, but we don't know at compile-time whether it
      // is a helper or a path.
      //
      // This operation emits more code than the other options,
      // and can be avoided by passing the `knownHelpers` and
      // `knownHelpersOnly` flags at compile-time.
      invokeAmbiguous: function(b, p) {
        this.useRegister("helper");
        var C = this.popStack();
        this.emptyHash();
        var k = this.setupHelper(0, b, p), j = this.lastHelper = this.nameLookup("helpers", b, "helper"), O = ["(", "(helper = ", j, " || ", C, ")"];
        this.options.strict || (O[0] = "(helper = ", O.push(" != null ? helper : ", this.aliasable("container.hooks.helperMissing"))), this.push(["(", O, k.paramsInit ? ["),(", k.paramsInit] : [], "),", "(typeof helper === ", this.aliasable('"function"'), " ? ", this.source.functionCall("helper", "call", k.callParams), " : helper))"]);
      },
      // [invokePartial]
      //
      // On stack, before: context, ...
      // On stack after: result of partial invocation
      //
      // This operation pops off a context, invokes a partial with that context,
      // and pushes the result of the invocation back.
      invokePartial: function(b, p, C) {
        var k = [], j = this.setupParams(p, 1, k);
        b && (p = this.popStack(), delete j.name), C && (j.indent = JSON.stringify(C)), j.helpers = "helpers", j.partials = "partials", j.decorators = "container.decorators", b ? k.unshift(p) : k.unshift(this.nameLookup("partials", p, "partial")), this.options.compat && (j.depths = "depths"), j = this.objectLiteral(j), k.push(j), this.push(this.source.functionCall("container.invokePartial", "", k));
      },
      // [assignToHash]
      //
      // On stack, before: value, ..., hash, ...
      // On stack, after: ..., hash, ...
      //
      // Pops a value off the stack and assigns it to the current hash
      assignToHash: function(b) {
        var p = this.popStack(), C = void 0, k = void 0, j = void 0;
        this.trackIds && (j = this.popStack()), this.stringParams && (k = this.popStack(), C = this.popStack());
        var O = this.hash;
        C && (O.contexts[b] = C), k && (O.types[b] = k), j && (O.ids[b] = j), O.values[b] = p;
      },
      pushId: function(b, p, C) {
        b === "BlockParam" ? this.pushStackLiteral("blockParams[" + p[0] + "].path[" + p[1] + "]" + (C ? " + " + JSON.stringify("." + C) : "")) : b === "PathExpression" ? this.pushString(p) : b === "SubExpression" ? this.pushStackLiteral("true") : this.pushStackLiteral("null");
      },
      // HELPERS
      compiler: v,
      compileChildren: function(b, p) {
        for (var C = b.children, k = void 0, j = void 0, O = 0, I = C.length; O < I; O++) {
          k = C[O], j = new this.compiler();
          var c = this.matchExistingProgram(k);
          if (c == null) {
            this.context.programs.push("");
            var S = this.context.programs.length;
            k.index = S, k.name = "program" + S, this.context.programs[S] = j.compile(k, p, this.context, !this.precompile), this.context.decorators[S] = j.decorators, this.context.environments[S] = k, this.useDepths = this.useDepths || j.useDepths, this.useBlockParams = this.useBlockParams || j.useBlockParams, k.useDepths = this.useDepths, k.useBlockParams = this.useBlockParams;
          } else
            k.index = c.index, k.name = "program" + c.index, this.useDepths = this.useDepths || c.useDepths, this.useBlockParams = this.useBlockParams || c.useBlockParams;
        }
      },
      matchExistingProgram: function(b) {
        for (var p = 0, C = this.context.environments.length; p < C; p++) {
          var k = this.context.environments[p];
          if (k && k.equals(b))
            return k;
        }
      },
      programExpression: function(b) {
        var p = this.environment.children[b], C = [p.index, "data", p.blockParams];
        return (this.useBlockParams || this.useDepths) && C.push("blockParams"), this.useDepths && C.push("depths"), "container.program(" + C.join(", ") + ")";
      },
      useRegister: function(b) {
        this.registers[b] || (this.registers[b] = !0, this.registers.list.push(b));
      },
      push: function(b) {
        return b instanceof g || (b = this.source.wrap(b)), this.inlineStack.push(b), b;
      },
      pushStackLiteral: function(b) {
        this.push(new g(b));
      },
      pushSource: function(b) {
        this.pendingContent && (this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent), this.pendingLocation)), this.pendingContent = void 0), b && this.source.push(b);
      },
      replaceStack: function(b) {
        var p = ["("], C = void 0, k = void 0, j = void 0;
        if (!this.isInline())
          throw new l.default("replaceStack on non-inline");
        var O = this.popStack(!0);
        if (O instanceof g)
          C = [O.value], p = ["(", C], j = !0;
        else {
          k = !0;
          var I = this.incrStack();
          p = ["((", this.push(I), " = ", O, ")"], C = this.topStack();
        }
        var c = b.call(this, C);
        j || this.popStack(), k && this.stackSlot--, this.push(p.concat(c, ")"));
      },
      incrStack: function() {
        return this.stackSlot++, this.stackSlot > this.stackVars.length && this.stackVars.push("stack" + this.stackSlot), this.topStackName();
      },
      topStackName: function() {
        return "stack" + this.stackSlot;
      },
      flushInline: function() {
        var b = this.inlineStack;
        this.inlineStack = [];
        for (var p = 0, C = b.length; p < C; p++) {
          var k = b[p];
          if (k instanceof g)
            this.compileStack.push(k);
          else {
            var j = this.incrStack();
            this.pushSource([j, " = ", k, ";"]), this.compileStack.push(j);
          }
        }
      },
      isInline: function() {
        return this.inlineStack.length;
      },
      popStack: function(b) {
        var p = this.isInline(), C = (p ? this.inlineStack : this.compileStack).pop();
        if (!b && C instanceof g)
          return C.value;
        if (!p) {
          if (!this.stackSlot)
            throw new l.default("Invalid stack pop");
          this.stackSlot--;
        }
        return C;
      },
      topStack: function() {
        var b = this.isInline() ? this.inlineStack : this.compileStack, p = b[b.length - 1];
        return p instanceof g ? p.value : p;
      },
      contextName: function(b) {
        return this.useDepths && b ? "depths[" + b + "]" : "depth" + b;
      },
      quotedString: function(b) {
        return this.source.quotedString(b);
      },
      objectLiteral: function(b) {
        return this.source.objectLiteral(b);
      },
      aliasable: function(b) {
        var p = this.aliases[b];
        return p ? (p.referenceCount++, p) : (p = this.aliases[b] = this.source.wrap(b), p.aliasable = !0, p.referenceCount = 1, p);
      },
      setupHelper: function(b, p, C) {
        var k = [], j = this.setupHelperArgs(p, b, k, C), O = this.nameLookup("helpers", p, "helper"), I = this.aliasable(this.contextName(0) + " != null ? " + this.contextName(0) + " : (container.nullContext || {})");
        return {
          params: k,
          paramsInit: j,
          name: O,
          callParams: [I].concat(k)
        };
      },
      setupParams: function(b, p, C) {
        var k = {}, j = [], O = [], I = [], c = !C, S = void 0;
        c && (C = []), k.name = this.quotedString(b), k.hash = this.popStack(), this.trackIds && (k.hashIds = this.popStack()), this.stringParams && (k.hashTypes = this.popStack(), k.hashContexts = this.popStack());
        var w = this.popStack(), A = this.popStack();
        (A || w) && (k.fn = A || "container.noop", k.inverse = w || "container.noop");
        for (var N = p; N--; )
          S = this.popStack(), C[N] = S, this.trackIds && (I[N] = this.popStack()), this.stringParams && (O[N] = this.popStack(), j[N] = this.popStack());
        return c && (k.args = this.source.generateArray(C)), this.trackIds && (k.ids = this.source.generateArray(I)), this.stringParams && (k.types = this.source.generateArray(O), k.contexts = this.source.generateArray(j)), this.options.data && (k.data = "data"), this.useBlockParams && (k.blockParams = "blockParams"), k;
      },
      setupHelperArgs: function(b, p, C, k) {
        var j = this.setupParams(b, p, C);
        return j.loc = JSON.stringify(this.source.currentLocation), j = this.objectLiteral(j), k ? (this.useRegister("options"), C.push("options"), ["options=", j]) : C ? (C.push(j), "") : j;
      }
    }, (function() {
      for (var _ = "break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "), b = v.RESERVED_WORDS = {}, p = 0, C = _.length; p < C; p++)
        b[_[p]] = !0;
    })(), v.isValidJavaScriptVariableName = function(_) {
      return !v.RESERVED_WORDS[_] && /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(_);
    };
    function E(_, b, p, C, k) {
      var j = b.popStack(), O = p.length;
      for (_ && O--; C < O; C++)
        j = b.nameLookup(j, p[C], k);
      return _ ? [b.aliasable("container.strict"), "(", j, ", ", b.quotedString(p[C]), ", ", JSON.stringify(b.source.currentLocation), " )"] : j;
    }
    r.default = v, t.exports = r.default;
  })(Yu, Yu.exports)), Yu.exports;
}
var vy;
function J8() {
  return vy || (vy = 1, (function(t, r) {
    r.__esModule = !0;
    function s(O) {
      return O && O.__esModule ? O : { default: O };
    }
    var a = z8(), u = s(a), l = X0(), h = s(l), m = H8(), f = q8(), g = Q8(), v = s(g), E = K0(), _ = s(E), b = F0(), p = s(b), C = u.default.create;
    function k() {
      var O = C();
      return O.compile = function(I, c) {
        return f.compile(I, c, O);
      }, O.precompile = function(I, c) {
        return f.precompile(I, c, O);
      }, O.AST = h.default, O.Compiler = f.Compiler, O.JavaScriptCompiler = v.default, O.Parser = m.parser, O.parse = m.parse, O.parseWithoutProcessing = m.parseWithoutProcessing, O;
    }
    var j = k();
    j.create = k, p.default(j), j.Visitor = _.default, j.default = j, r.default = j, t.exports = r.default;
  })(Tu, Tu.exports)), Tu.exports;
}
var Nn = J8();
const Ne = SillyTavern.getContext();
new h0("dumb", {}).getSettings();
async function eb({
  profileId: t,
  userPrompt: r,
  buildPromptOptions: s,
  session: a,
  entriesGroupByWorldName: u,
  promptSettings: l,
  mainContextList: h,
  maxResponseToken: m,
  continueFrom: f,
  streamCallbacks: g,
  signal: v
}) {
  const E = Oe.getSettings().directApi;
  if (!E.enabled && !t)
    throw new Error("No connection profile selected.");
  const _ = SillyTavern.getContext();
  let b = null, p;
  if (E.enabled) {
    const w = Ne.main_api;
    if (w) {
      const A = Ne.CONNECT_API_MAP?.[w];
      A && A.selected && (p = A.selected);
    }
    if (!p) {
      for (const [A, N] of Object.entries(Ne.CONNECT_API_MAP || {}))
        if (N && N.selected) {
          p = N.selected;
          break;
        }
    }
    if (!p) {
      const A = Object.keys(Ne.CONNECT_API_MAP || {});
      if (A.length > 0) {
        const N = Ne.CONNECT_API_MAP[A[0]];
        N && N.selected && (p = N.selected);
      }
    }
  } else {
    if (b = _.extensionSettings.connectionManager?.profiles?.find((w) => w.id === t), !b)
      throw new Error(`Connection profile with ID "${t}" not found.`);
    if (b.api && Ne.CONNECT_API_MAP[b.api])
      p = Ne.CONNECT_API_MAP[b.api].selected;
    else {
      console.warn(`[WorldInfoRecommender] Profile "${b.name}" has no API configured, using ST default.`);
      for (const [w, A] of Object.entries(Ne.CONNECT_API_MAP))
        if (A && A.selected) {
          p = A.selected, console.log(`[WorldInfoRecommender] Using fallback API: ${w} -> ${p}`);
          break;
        }
    }
    if (!p)
      throw new Error(`Could not determine API for profile "${b.name}". Please configure an API in Connection Manager or select a valid profile.`);
  }
  const C = {};
  C.user = "{{user}}", C.char = "{{char}}", C.persona = "{{persona}}", C.blackListedEntries = a.blackListedEntries;
  const k = r.trim();
  f && f.mode === "revise" ? C.userInstructions = "" : C.userInstructions = Nn.compile(k, { noEscape: !0 })(C);
  {
    const w = {};
    Object.entries(u).filter(
      ([A, N]) => N.length > 0 && a.selectedWorldNames.includes(A) && N.some((D) => !D?.disable)
    ).forEach(([A, N]) => {
      let D = N.filter((P) => !P?.disable);
      const M = a.selectedEntryUids?.[A];
      if (M && M.length > 0) {
        const P = new Set(M);
        D = D.filter((H) => P.has(H.uid));
      }
      D.length > 0 && (w[A] = D);
    }), C.currentLorebooks = w;
  }
  {
    const w = {};
    Object.entries(a.suggestedEntries).filter(([A, N]) => N.length > 0).forEach(([A, N]) => {
      w[A] = N.filter(
        (D) => !(A === f?.worldName && D.uid === f.entry.uid && D.comment === f.entry.comment)
      );
    }), C.suggestedLorebooks = w;
  }
  const j = [];
  {
    for (const w of h) {
      if (w.promptName === "chatHistory") {
        if (E.enabled) {
          console.log("[WorldInfoRecommender] Direct API mode: skipping chat history (buildPrompt not available)");
          continue;
        }
        p ? j.push(...(await C0(p, s)).result) : console.warn("[WorldInfoRecommender] Skipping chat history: no valid API type available");
        continue;
      }
      const A = l[w.promptName];
      if (!A)
        continue;
      const N = {
        role: w.role,
        content: Nn.compile(A.content, { noEscape: !0 })(C)
      };
      N.content = Ne.substituteParams(N.content), N.content && j.push(N);
    }
    f && (f.mode === "continue" ? j.push({
      role: "assistant",
      content: g8(f.worldName, f.entry)
    }) : f.mode === "revise" && (j.push({
      role: "assistant",
      content: v8(f.worldName, f.entry)
    }), k && j.push({
      role: "user",
      content: k
    })));
  }
  let O;
  try {
    E.enabled ? (console.log("[WorldInfoRecommender] Using Direct API:", E.apiType, g ? "(streaming)" : ""), O = { content: (await Tl(E, j, m, g, v)).content }) : O = await Ne.ConnectionManagerRequestService.sendRequest(
      t,
      j,
      m
    );
  } catch (w) {
    console.error("[WorldInfoRecommender] Request failed:", w);
    let A = "Request failed";
    throw w.message && (A += `: ${w.message}`), w.status && (A += ` (HTTP ${w.status})`), w.name === "TypeError" && w.message.includes("fetch") && (A += ". This might be a network or CORS issue. Please check your connection profile settings and ensure the API endpoint is accessible."), new Error(A);
  }
  const I = j.find((w) => w.role === "assistant");
  if (!O.content)
    return { entries: {} };
  const c = Z0(O.content, {
    // Only merge with previous content if we are in 'continue' mode.
    previousContent: f && f.mode === "continue" ? I?.content : void 0
  });
  let S = c.entries;
  return Object.keys(S).length === 0 && !c.failedRecord ? { entries: {} } : (Object.entries(S).forEach(([w, A]) => {
    u[w] && A.forEach((N) => {
      const D = u[w]?.find((M) => M.uid === N.uid);
      D && (N.key.length === 0 && (N.key = D.key), N.comment || (N.comment = D.comment)), (N.comment === null || N.comment === void 0) && (N.comment = "");
    });
  }), S = f ? { [f.worldName]: [S[f.worldName]?.[0]].filter(Boolean) } : S, {
    entries: S,
    failedRecord: c.failedRecord
  });
}
function W8(t, r, s) {
  s[r] || (s[r] = []);
  const a = s[r], u = a.findIndex((m) => m.uid === t.uid);
  let l;
  const h = u !== -1;
  if (h)
    l = a[u];
  else {
    const m = { entries: {} };
    a.forEach((v) => m.entries[v.uid] = v);
    const f = hl(r, m);
    if (!f)
      throw new Error(`Failed to create a new entry structure in world "${r}"`);
    const g = a.length > 0 ? a[a.length - 1] : void 0;
    if (g) {
      const v = f.uid;
      Object.assign(f, g), f.uid = v;
    }
    l = f, a.push(l);
  }
  return l.key = t.key, l.content = t.content, l.comment = t.comment, { modifiedEntry: l, status: h ? "updated" : "added" };
}
function ew() {
  const t = Ne.extensionSettings?.connectionManager?.profiles ?? [];
  return t.map((r) => ({
    value: r.name ?? r.id,
    valueProvider: (s) => t.find((a) => a.name?.includes(s))?.name
  }));
}
const Ni = "worldinfo", tw = "0.3.0", nw = "F_1.5", rw = {
  EXTENSION: "worldInfoRecommender"
}, Oi = ["en", "zh-CN"], Qu = [
  "stDescription",
  "currentLorebooks",
  "blackListedEntries",
  "suggestedLorebooks",
  "responseRules",
  "taskDescription",
  "reviseJsonPrompt",
  "reviseXmlPrompt",
  "reviseTaskDescription",
  "reviseGlobalStateUpdate",
  "reviseGlobalStateUpdateAddedModified",
  "reviseGlobalStateUpdateRemoved"
], mt = {
  stDescription: oS,
  currentLorebooks: uS,
  blackListedEntries: lS,
  suggestedLorebooks: cS,
  responseRules: dS,
  taskDescription: fS,
  reviseJsonPrompt: hS,
  reviseXmlPrompt: pS,
  reviseTaskDescription: mS,
  reviseGlobalStateUpdate: yS,
  reviseGlobalStateUpdateAddedModified: gS,
  reviseGlobalStateUpdateRemoved: vS
}, Xf = {
  version: tw,
  formatVersion: nw,
  profileId: "",
  maxContextType: "profile",
  maxContextValue: 16384,
  maxResponseToken: 1024,
  contextToSend: {
    stDescription: !0,
    messages: {
      type: "all",
      first: 10,
      last: 10,
      range: {
        start: 0,
        end: 10
      }
    },
    charCard: !0,
    authorNote: !0,
    worldInfo: !0,
    suggestedEntries: !0
  },
  defaultPromptEngineeringMode: "native",
  language: "en",
  prompts: {
    stDescription: {
      label: "SillyTavern Description",
      content: mt.stDescription,
      isDefault: !0
    },
    currentLorebooks: {
      label: "Current Lorebooks",
      content: mt.currentLorebooks,
      isDefault: !0
    },
    blackListedEntries: {
      label: "Blacklisted Entries",
      content: mt.blackListedEntries,
      isDefault: !0
    },
    suggestedLorebooks: {
      label: "Suggested Lorebooks",
      content: mt.suggestedLorebooks,
      isDefault: !0
    },
    responseRules: {
      label: "Response Rules",
      content: mt.responseRules,
      isDefault: !0
    },
    taskDescription: {
      label: "Task Description",
      content: mt.taskDescription,
      isDefault: !0
    },
    reviseJsonPrompt: {
      content: mt.reviseJsonPrompt,
      isDefault: !0,
      label: "Revise Session (JSON Mode)"
    },
    reviseXmlPrompt: {
      content: mt.reviseXmlPrompt,
      isDefault: !0,
      label: "Revise Session (XML Mode)"
    },
    reviseTaskDescription: {
      content: mt.reviseTaskDescription,
      isDefault: !0,
      label: "Revise Session Task Description"
    },
    reviseGlobalStateUpdate: {
      content: mt.reviseGlobalStateUpdate,
      isDefault: !0,
      label: "Revise Global State Update (Wrapper)"
    },
    reviseGlobalStateUpdateAddedModified: {
      content: mt.reviseGlobalStateUpdateAddedModified,
      isDefault: !0,
      label: "Revise Global State (Added/Modified)"
    },
    reviseGlobalStateUpdateRemoved: {
      content: mt.reviseGlobalStateUpdateRemoved,
      isDefault: !0,
      label: "Revise Global State (Removed)"
    }
  },
  promptPreset: "default",
  promptPresets: {
    default: {
      content: ""
    }
  },
  mainContextTemplatePreset: "default",
  mainContextTemplatePresets: {
    default: {
      prompts: [
        {
          promptName: "chatHistory",
          // this is exception, since chat history is not exactly a prompt
          enabled: !0,
          role: "system"
        },
        {
          promptName: "stDescription",
          enabled: !0,
          role: "system"
        },
        {
          promptName: "currentLorebooks",
          enabled: !0,
          role: "system"
        },
        {
          promptName: "blackListedEntries",
          enabled: !0,
          role: "system"
        },
        {
          promptName: "suggestedLorebooks",
          enabled: !0,
          role: "system"
        },
        {
          promptName: "responseRules",
          enabled: !0,
          role: "system"
        },
        {
          promptName: "taskDescription",
          enabled: !0,
          role: "user"
        }
      ]
    }
  },
  directApi: {
    enabled: !0,
    //  API
    currentPreset: "default",
    presets: {
      default: {
        name: "Default",
        apiType: "openai",
        apiUrl: "",
        apiKey: "",
        modelName: ""
      }
    },
    apiType: "openai",
    apiUrl: "",
    apiKey: "",
    modelName: ""
  }
};
function yy(t) {
  const s = t.replace(/[^\w\s]/g, "").split(/\s+/).filter(Boolean);
  let a = !1;
  return s.map((u, l) => {
    const h = u.replace(/^\d+/, "");
    if (h) {
      const m = a ? `${h[0].toUpperCase()}${h.slice(1).toLowerCase()}` : h.toLowerCase();
      return a || (a = !0), m;
    }
    return "";
  }).join("");
}
const Oe = new h0(rw.EXTENSION, Xf);
async function aw() {
  return new Promise((t, r) => {
    Oe.initializeSettings({
      strategy: [
        {
          from: "F_1.0",
          to: "F_1.1",
          action(s) {
            const a = {
              ...Xf,
              ...s
            };
            return delete a.stWorldInfoPrompt, delete a.usingDefaultStWorldInfoPrompt, delete a.lorebookDefinitionPrompt, delete a.usingDefaultLorebookDefinitionPrompt, delete a.lorebookRulesPrompt, delete a.usingDefaultLorebookRulesPrompt, delete a.responseRulesPrompt, delete a.usingDefaultResponseRulesPrompt, a;
          }
        },
        {
          from: "F_1.1",
          to: "F_1.2",
          action(s) {
            const a = { ...s };
            return a.formatVersion = "F_1.2", a.prompts.taskDescription.content === `## Rules
- Don't suggest already existing or suggested entries.

## Your Task
{{userInstructions}}` ? (a.prompts.taskDescription.content = mt.taskDescription, a.prompts.taskDescription.isDefault = !0) : a.prompts.taskDescription.isDefault = !1, a;
          }
        },
        {
          from: "F_1.2",
          to: "F_1.3",
          action(s) {
            const a = { ...s };
            return a.formatVersion = "F_1.3", a.defaultPromptEngineeringMode = "native", a.prompts || (a.prompts = {}), a.prompts.reviseJsonPrompt = {
              content: mt.reviseJsonPrompt,
              isDefault: !0,
              label: "Revise Session (JSON Mode)"
            }, a.prompts.reviseXmlPrompt = {
              content: mt.reviseXmlPrompt,
              isDefault: !0,
              label: "Revise Session (XML Mode)"
            }, a.prompts.reviseTaskDescription = {
              content: mt.reviseTaskDescription,
              isDefault: !0,
              label: "Revise Session Task Description"
            }, s.prompts.currentLorebooks.isDefault && (a.prompts.currentLorebooks.content = mt.currentLorebooks, a.prompts.currentLorebooks.isDefault = !0), s.prompts.blackListedEntries.isDefault && (a.prompts.blackListedEntries.content = mt.blackListedEntries, a.prompts.blackListedEntries.isDefault = !0), s.prompts.suggestedLorebooks.isDefault && (a.prompts.suggestedLorebooks.content = mt.suggestedLorebooks, a.prompts.suggestedLorebooks.isDefault = !0), a;
          }
        },
        {
          from: "F_1.3",
          to: "F_1.4",
          action(s) {
            const a = { ...s };
            return a.formatVersion = "F_1.4", a.prompts || (a.prompts = {}), a.prompts.reviseGlobalStateUpdate = {
              content: mt.reviseGlobalStateUpdate,
              isDefault: !0,
              label: "Revise Global State Update (Wrapper)"
            }, a.prompts.reviseGlobalStateUpdateAddedModified = {
              content: mt.reviseGlobalStateUpdateAddedModified,
              isDefault: !0,
              label: "Revise Global State (Added/Modified)"
            }, a.prompts.reviseGlobalStateUpdateRemoved = {
              content: mt.reviseGlobalStateUpdateRemoved,
              isDefault: !0,
              label: "Revise Global State (Removed)"
            }, a;
          }
        },
        {
          from: "F_1.4",
          to: "F_1.5",
          action(s) {
            const a = { ...s };
            return a.formatVersion = "F_1.5", (!("language" in a) || !a.language) && (a.language = "en"), a;
          }
        }
      ]
    }).then((s) => {
      t();
    }).catch((s) => {
      console.error(`[${Ni}] Error initializing settings:`, s), ye("error", `[${Ni}] Failed to initialize settings: ${s.message}`), Ne.Popup.show.confirm(
        `[${Ni}] Failed to load settings. This might be due to an update. Reset settings to default?`,
        "Extension Error"
      ).then((a) => {
        a && (Oe.resetSettings(), ye("success", `[${Ni}] Settings reset. Reloading may be required.`), t());
      });
    });
  });
}
const Ae = ({ children: t, className: r, overrideDefaults: s = !1, ...a }) => {
  const u = se.useMemo(() => {
    const l = [];
    return s || l.push("menu_button", "interactable"), l.push(r), l.filter(Boolean).join(" ");
  }, [s, r]);
  return /* @__PURE__ */ T.jsx("button", { className: u, ...a, children: t });
}, tb = ({ label: t, className: r, overrideDefaults: s = !1, type: a = "text", ...u }) => {
  const l = se.useMemo(() => {
    const h = [];
    return s || (a === "text" || a === "number" || a === "password" || a === "email" || a === "search") && h.push("text_pole"), h.push(r), h.filter(Boolean).join(" ");
  }, [s, r, a]);
  if (a === "checkbox") {
    const h = s ? r : `checkbox_label ${r ?? ""}`.trim();
    return /* @__PURE__ */ T.jsxs("label", { className: h, children: [
      /* @__PURE__ */ T.jsx("input", { type: "checkbox", ...u }),
      t && /* @__PURE__ */ T.jsx("span", { children: t })
    ] });
  }
  return /* @__PURE__ */ T.jsx("input", { type: a, className: l, ...u });
}, nb = ({ children: t, className: r, overrideDefaults: s = !1, ...a }) => {
  const u = se.useMemo(() => {
    const l = [];
    return s || l.push("text_pole"), l.push(r), l.filter(Boolean).join(" ");
  }, [s, r]);
  return /* @__PURE__ */ T.jsx("select", { className: u, ...a, children: t });
}, Er = ({ children: t, className: r, overrideDefaults: s = !1, ...a }) => {
  const u = se.useMemo(() => {
    const l = [];
    return s || l.push("text_pole", "textarea_compact"), l.push(r), l.filter(Boolean).join(" ");
  }, [s, r]);
  return /* @__PURE__ */ T.jsx("textarea", { className: u, ...a, children: t });
};
var iw = f0(), Yt = /* @__PURE__ */ ((t) => (t[t.TEXT = 1] = "TEXT", t[t.CONFIRM = 2] = "CONFIRM", t[t.INPUT = 3] = "INPUT", t[t.DISPLAY = 4] = "DISPLAY", t))(Yt || {}), Jr = /* @__PURE__ */ ((t) => (t[t.AFFIRMATIVE = 1] = "AFFIRMATIVE", t[t.NEGATIVE = 0] = "NEGATIVE", t[t.CANCELLED = null] = "CANCELLED", t))(Jr || {});
const sw = SillyTavern.getContext(), rr = ({
  content: t,
  type: r,
  inputValue: s = "",
  options: a = {},
  preventEscape: u = !1,
  onComplete: l
}) => {
  var h;
  const m = se.useRef(null), f = se.useRef(null), [g, v] = se.useState(!1), [E, _] = se.useState(null), b = se.useRef(sw.uuidv4()), p = se.useRef({
    id: b.current,
    type: r,
    dlg: null,
    mainInput: null,
    lastFocus: null,
    value: void 0,
    result: void 0,
    inputResults: void 0
  });
  se.useEffect(() => {
    const O = m.current;
    if (!O) return;
    const I = (c) => {
      c.preventDefault(), u || C(Jr.CANCELLED);
    };
    return O.addEventListener("cancel", I), p.current.dlg = O, p.current.mainInput = f.current, Si.util.popups.push(p.current), O.showModal || (O.classList.add("poly_dialog"), Kg.registerDialog(O), new ResizeObserver((c) => {
      for (const S of c)
        Kg.reposition(S.target);
    }).observe(O)), O.showModal(), qd(), () => {
      Xg(Si.util.popups, p.current), qd(), O.removeEventListener("cancel", I);
    };
  }, []);
  const C = async (O) => {
    var I, c;
    let S = O;
    if (r === Yt.INPUT && (O >= Jr.AFFIRMATIVE ? S = (I = f.current) == null ? void 0 : I.value : O === Jr.NEGATIVE ? S = !1 : O === Jr.CANCELLED ? S = null : S = !1), (c = a.customInputs) != null && c.length) {
      const A = new Map(
        a.customInputs.map((N) => {
          var D;
          const M = (D = m.current) == null ? void 0 : D.querySelector(`#${N.id}`);
          return [M.id, M.checked];
        })
      );
      p.current.inputResults = A;
    }
    if (p.current.result = O, p.current.value = S, a.onClosing && !await a.onClosing(p.current)) {
      v(!0), p.current.value = void 0, p.current.result = void 0, p.current.inputResults = void 0;
      return;
    }
    v(!1), Si.util.lastResult = {
      value: S,
      result: O,
      inputResults: p.current.inputResults
    };
    const w = m.current;
    w && (w.setAttribute("closing", ""), qd(), v2(w, async () => {
      var A;
      if (w.close(), a.onClose && await a.onClose(p.current), Xg(Si.util.popups, p.current), Si.util.popups.length > 0) {
        const N = (A = document.activeElement) == null ? void 0 : A.closest(".popup"), D = N?.getAttribute("data-id"), M = Si.util.popups.find((P) => P.id === D);
        M && M.lastFocus && M.lastFocus.focus();
      }
      l(S);
    }));
  }, k = (O) => {
    O.target instanceof HTMLElement && O.target !== m.current && (_(O.target), p.current.lastFocus = O.target);
  }, j = async (O) => {
  };
  return iw.createPortal(
    /* @__PURE__ */ T.jsx(
      "dialog",
      {
        ref: m,
        className: (() => {
          const O = ["popup"];
          return a.wide && O.push("wide_dialogue_popup"), a.wider && O.push("wider_dialogue_popup"), a.large && O.push("large_dialogue_popup"), a.transparent && O.push("transparent_dialogue_popup"), a.allowHorizontalScrolling && O.push("horizontal_scrolling_dialogue_popup"), a.allowVerticalScrolling && O.push("vertical_scrolling_dialogue_popup"), a.animation && O.push(`popup--animation-${a.animation}`), O.join(" ");
        })(),
        "data-id": b.current,
        onKeyDown: j,
        onFocus: k,
        children: /* @__PURE__ */ T.jsxs("div", { className: "popup-body", children: [
          /* @__PURE__ */ T.jsx("div", { className: "popup-content", children: t }),
          r === Yt.INPUT && /* @__PURE__ */ T.jsx(
            "textarea",
            {
              ref: f,
              className: "popup-input text_pole result-control auto-select",
              rows: a.rows ?? 1,
              defaultValue: s,
              "data-result": "1",
              "data-result-event": "submit"
            }
          ),
          a.customInputs && /* @__PURE__ */ T.jsx("div", { className: "popup-inputs", children: a.customInputs.map((O) => /* @__PURE__ */ T.jsxs("label", { className: "checkbox_label justifyCenter", htmlFor: O.id, children: [
            /* @__PURE__ */ T.jsx("input", { type: "checkbox", id: O.id, defaultChecked: O.defaultState }),
            /* @__PURE__ */ T.jsx("span", { "data-i18n": O.label, children: O.label }),
            O.tooltip && /* @__PURE__ */ T.jsx(
              "div",
              {
                className: "fa-solid fa-circle-info opacity50p",
                title: O.tooltip,
                "data-i18n": `[title]${O.tooltip}`
              }
            )
          ] }, O.id)) }),
          r !== Yt.DISPLAY && /* @__PURE__ */ T.jsxs("div", { className: "popup-controls", children: [
            (h = a.customButtons) == null ? void 0 : h.map((O, I) => {
              const c = typeof O == "string" ? { text: O, result: I + 2 } : O;
              return /* @__PURE__ */ T.jsx(
                "div",
                {
                  className: `menu_button popup-button-custom result-control ${c.classes ?? ""}`,
                  "data-result": c.result,
                  onClick: () => {
                    var S;
                    (S = c.action) == null || S.call(c), C(c.result ?? I + 2);
                  },
                  "data-i18n": c.text,
                  children: c.text
                },
                I
              );
            }),
            r !== Yt.DISPLAY && a.okButton !== !1 && /* @__PURE__ */ T.jsx(
              "div",
              {
                className: "popup-button-ok menu_button result-control",
                onClick: () => C(Jr.AFFIRMATIVE),
                "data-result": "1",
                children: typeof a.okButton == "string" ? a.okButton : "OK"
              }
            ),
            r !== Yt.DISPLAY && a.cancelButton !== !1 && /* @__PURE__ */ T.jsx(
              "div",
              {
                className: "popup-button-cancel menu_button result-control",
                onClick: () => C(Jr.NEGATIVE),
                "data-result": "0",
                children: typeof a.cancelButton == "string" ? a.cancelButton : "Cancel"
              }
            )
          ] }),
          r === Yt.DISPLAY && /* @__PURE__ */ T.jsx(
            "div",
            {
              className: "popup-button-close right_menu_button fa-solid fa-circle-xmark",
              onClick: () => C(Jr.CANCELLED),
              "data-result": "0",
              title: "Close popup",
              "data-i18n": "[title]Close popup"
            }
          )
        ] })
      }
    ),
    document.body
  );
};
SillyTavern.getContext();
const ow = cl.memo(
  ({ item: t, showToggleButton: r, showDeleteButton: s, showSelectInput: a, onToggle: u, onDelete: l, onSelectChange: h }) => {
    const {
      id: m,
      label: f,
      enabled: g,
      canDelete: v = !0,
      canToggle: E = !0,
      showSelect: _ = !0,
      canSelect: b = !0,
      selectOptions: p = [],
      selectValue: C
    } = t, k = {
      display: "flex",
      alignItems: "center",
      padding: "8px 12px",
      border: "1px solid var(--SmartThemeBorderColor, #ccc)",
      color: "var(--SmartThemeBodyColor, #333)",
      marginBottom: "2px",
      opacity: r && !g ? 0.6 : 1
    }, j = { cursor: "pointer", flexShrink: 0 }, O = { display: "inline-block", flexShrink: 0, marginRight: "10px" };
    return /* @__PURE__ */ T.jsxs("li", { className: "sortable-list-item", style: k, "data-id": m, children: [
      /* @__PURE__ */ T.jsx(
        "span",
        {
          className: "drag-handle fas fa-bars",
          style: { cursor: "grab", marginRight: "10px", color: "var(--SmartThemeBodyColor, #555)", flexShrink: 0 }
        }
      ),
      /* @__PURE__ */ T.jsx(
        "span",
        {
          className: "item-label",
          style: {
            flexGrow: 1,
            marginRight: "10px",
            overflow: "hidden",
            textOverflow: "ellipsis",
            whiteSpace: "nowrap"
          },
          children: f
        }
      ),
      a && _ && b && /* @__PURE__ */ T.jsx(
        nb,
        {
          value: C,
          onChange: (I) => h(m, I.target.value),
          disabled: !g,
          style: { marginRight: "10px", flexShrink: 0, width: "unset" },
          children: p.length === 0 ? /* @__PURE__ */ T.jsx("option", { disabled: !0, children: "--" }) : p.map((I) => /* @__PURE__ */ T.jsx("option", { value: I.value, children: I.label }, I.value))
        }
      ),
      a && (!_ || !b) && /* @__PURE__ */ T.jsx("span", { style: O }),
      r && E && /* @__PURE__ */ T.jsx(
        Ae,
        {
          overrideDefaults: !0,
          className: `toggle-button fas ${g ? "fa-toggle-on" : "fa-toggle-off"}`,
          style: {
            ...j,
            marginRight: "10px",
            fontSize: "1.2em",
            color: g ? "var(--success-color, #4CAF50)" : "var(--SmartThemeBodyColor, #555)",
            backgroundColor: "transparent",
            border: "none"
          },
          onClick: () => u(m)
        }
      ),
      r && !E && /* @__PURE__ */ T.jsx("span", { style: O }),
      s && v && /* @__PURE__ */ T.jsx(
        Ae,
        {
          overrideDefaults: !0,
          className: "delete-button fas fa-trash-can",
          style: {
            ...j,
            color: "var(--error-color, #f44336)",
            backgroundColor: "transparent",
            border: "none"
          },
          onClick: () => l(m)
        }
      ),
      s && !v && /* @__PURE__ */ T.jsx("span", { style: { ...O, marginRight: 0 } })
    ] });
  }
), rb = ({
  items: t,
  onItemsChange: r,
  showToggleButton: s = !1,
  showDeleteButton: a = !1,
  showSelectInput: u = !1,
  sortableJsOptions: l = {}
}) => {
  const h = se.useRef(null), m = se.useRef(null);
  se.useEffect(() => (h.current && (m.current = je.create(h.current, {
    handle: ".drag-handle",
    animation: 150,
    ghostClass: "sortable-ghost",
    chosenClass: "sortable-chosen",
    dragClass: "sortable-drag",
    filter: "select, button, .toggle-button, .delete-button",
    // Prevent drag on controls
    preventOnFilter: !1,
    ...l,
    onEnd: (E) => {
      const { oldIndex: _, newIndex: b } = E;
      if (_ === void 0 || b === void 0 || _ === b)
        return;
      const p = Array.from(t), [C] = p.splice(_, 1);
      p.splice(b, 0, C), r(p);
    }
  })), () => {
    var E;
    (E = m.current) == null || E.destroy(), m.current = null;
  }), [t, r, l]);
  const f = (E) => {
    r(t.map((_) => _.id === E ? { ..._, enabled: !_.enabled } : _));
  }, g = (E) => {
    r(t.filter((_) => _.id !== E));
  }, v = (E, _) => {
    r(t.map((b) => b.id === E ? { ...b, selectValue: _ } : b));
  };
  return /* @__PURE__ */ T.jsx("ul", { ref: h, className: "sortable-list", style: { listStyle: "none", padding: 0, margin: 0 }, children: t.map((E) => /* @__PURE__ */ T.jsx(
    ow,
    {
      item: E,
      showToggleButton: s,
      showDeleteButton: a,
      showSelectInput: u,
      onToggle: f,
      onDelete: g,
      onSelectChange: v
    },
    E.id
  )) });
}, ab = ({
  items: t,
  value: r,
  onChange: s,
  placeholder: a = "Select items...",
  closeOnSelect: u = !1,
  multiple: l = !0,
  disabled: h = !1,
  onBeforeSelection: m,
  enableSearch: f = !1,
  searchPlaceholder: g = "Search...",
  searchNoResultsText: v = "No results found",
  searchFuseOptions: E,
  inputClasses: _,
  containerClasses: b
}) => {
  const [p, C] = se.useState(!1), [k, j] = se.useState(""), O = se.useRef(null);
  se.useEffect(() => {
    const A = (N) => {
      O.current && !O.current.contains(N.target) && C(!1);
    };
    return document.addEventListener("mousedown", A), () => document.removeEventListener("mousedown", A);
  }, []), se.useEffect(() => {
    p || j("");
  }, [p]);
  const I = se.useMemo(() => {
    if (!f) return null;
    const A = {
      includeScore: !1,
      threshold: 0.4,
      keys: ["label", "value"],
      ...E
    };
    return new Li(t, A);
  }, [t, f, E]), c = se.useMemo(() => !f || !k.trim() || !I ? t : I.search(k.trim()).map((A) => A.item), [t, k, f, I]), S = async (A) => {
    let N;
    l ? N = r.includes(A) ? r.filter((D) => D !== A) : [...r, A] : N = r.includes(A) ? [] : [A], !(m && !await Promise.resolve(m(r, N))) && (s(N), u && C(!1));
  }, w = se.useMemo(() => {
    var A;
    return r.length === 0 ? a : r.length === 1 ? ((A = t.find((N) => N.value === r[0])) == null ? void 0 : A.label) ?? r[0] : `${r.length} items selected`;
  }, [r, t, a]);
  return /* @__PURE__ */ T.jsxs(
    "div",
    {
      ref: O,
      className: `fancy-dropdown-container ${b ?? ""}`,
      style: {
        position: "relative",
        userSelect: "none",
        opacity: h ? 0.6 : 1,
        pointerEvents: h ? "none" : "auto"
      },
      children: [
        /* @__PURE__ */ T.jsxs(
          "div",
          {
            className: "fancy-dropdown-trigger",
            onClick: () => !h && C(!p),
            style: {
              padding: "8px 12px",
              border: "1px solid var(--border-color)",
              backgroundColor: "var(--bg-color)",
              color: "var(--text-color)",
              borderRadius: "4px",
              cursor: "pointer",
              display: "flex",
              alignItems: "center",
              justifyContent: "space-between"
            },
            children: [
              /* @__PURE__ */ T.jsx("span", { className: "fancy-dropdown-trigger-text", children: w }),
              /* @__PURE__ */ T.jsx("i", { className: `fas ${p ? "fa-chevron-up" : "fa-chevron-down"}`, style: { marginLeft: "8px" } })
            ]
          }
        ),
        p && /* @__PURE__ */ T.jsxs(
          "div",
          {
            className: "fancy-dropdown-list",
            style: {
              position: "absolute",
              top: "100%",
              left: "0",
              right: "0",
              maxHeight: "300px",
              zIndex: 1050,
              border: "1px solid var(--border-color)",
              borderTop: "none",
              backgroundColor: "var(--bg-color-popup, var(--bg-color-secondary, var(--greyCAIbg, var(--grey30))))",
              color: "var(--text-color)",
              borderRadius: "0 0 4px 4px",
              boxShadow: "0 4px 8px var(--black50a)",
              overflowY: "auto",
              display: "flex",
              flexDirection: "column"
            },
            children: [
              f && /* @__PURE__ */ T.jsx(
                "div",
                {
                  style: {
                    padding: "8px",
                    borderBottom: "1px solid var(--border-color)",
                    position: "sticky",
                    top: 0,
                    backgroundColor: "inherit"
                  },
                  children: /* @__PURE__ */ T.jsx(
                    tb,
                    {
                      type: "text",
                      placeholder: g,
                      value: k,
                      onChange: (A) => j(A.target.value),
                      autoFocus: !0,
                      className: _
                    }
                  )
                }
              ),
              /* @__PURE__ */ T.jsx("ul", { style: { listStyle: "none", margin: 0, padding: 0 }, children: c.length > 0 ? c.map((A) => /* @__PURE__ */ T.jsx(
                uw,
                {
                  item: A,
                  isSelected: r.includes(A.value),
                  onClick: S
                },
                A.value
              )) : /* @__PURE__ */ T.jsx(
                "div",
                {
                  style: {
                    padding: "8px 12px",
                    textAlign: "center",
                    color: "var(--text-color-secondary, var(--grey50))"
                  },
                  children: v
                }
              ) })
            ]
          }
        )
      ]
    }
  );
}, uw = cl.memo(({ item: t, isSelected: r, onClick: s }) => {
  const [a, u] = se.useState(!1);
  return /* @__PURE__ */ T.jsxs(
    "li",
    {
      onClick: () => s(t.value),
      onMouseEnter: () => u(!0),
      onMouseLeave: () => u(!1),
      style: {
        padding: "8px 12px",
        cursor: "pointer",
        display: "flex",
        alignItems: "center",
        justifyContent: "space-between",
        backgroundColor: r ? "var(--accent-color-bg, var(--link-color))" : a ? "var(--hover-color, var(--white20a))" : "transparent"
      },
      children: [
        /* @__PURE__ */ T.jsx("span", { children: t.label }),
        r && /* @__PURE__ */ T.jsx("i", { className: "checkmark fa-solid fa-check", style: { marginLeft: "8px" } })
      ]
    }
  );
}), pf = SillyTavern.getContext(), Mf = ({
  value: t,
  items: r,
  readOnlyValues: s = [],
  label: a,
  onChange: u,
  onItemsChange: l,
  enableCreate: h = !1,
  enableRename: m = !1,
  enableDelete: f = !1,
  onCreate: g,
  onRename: v,
  onDelete: E,
  buttons: _
}) => {
  const b = se.useMemo(() => r.find((O) => O.value === t), [r, t]), p = se.useCallback((O) => O ? s.includes(O) : !1, [s]), C = async () => {
    const O = await pf.Popup.show.input(
      `Create a new ${a}`,
      `Please enter a name for the new ${a}:`,
      ""
    );
    if (!O || O.trim() === "") return;
    const I = O.trim();
    if (r.some((S) => S.value === I)) {
      await ye("warning", `A ${a} with this name already exists.`);
      return;
    }
    let c = { value: I, label: I };
    if (g) {
      const S = await Promise.resolve(g(I));
      if (!S.confirmed) return;
      S.value && (typeof S.value == "string" ? c = { value: S.value, label: S.value } : c = S.value);
    }
    l([...r, c]), u(c.value, t);
  }, k = async () => {
    if (!b) {
      await ye("warning", `Please select a ${a} to rename.`);
      return;
    }
    if (p(b.value)) {
      await ye("warning", `This ${a} cannot be renamed as it is read-only.`);
      return;
    }
    const O = await pf.Popup.show.input(
      `Rename ${a}`,
      `Please enter a new name for "${b.label}":`,
      b.label
    );
    if (!O || O.trim() === "" || O.trim() === b.value) return;
    const I = O.trim();
    if (r.some((w) => w.value === I)) {
      await ye("warning", `A ${a} with this name already exists.`);
      return;
    }
    let c = { value: I, label: I };
    if (v) {
      const w = await Promise.resolve(v(b.value, I));
      if (!w.confirmed) return;
      w.value && (typeof w.value == "string" ? c = { value: w.value, label: w.value } : c = w.value);
    }
    const S = r.map((w) => w.value === b.value ? c : w);
    l(S), u(c.value, t);
  }, j = async () => {
    var O;
    if (!b) {
      await ye("warning", `Please select a ${a} to delete.`);
      return;
    }
    if (p(b.value)) {
      await ye("warning", `This ${a} cannot be deleted as it is read-only.`);
      return;
    }
    if (!await pf.Popup.show.confirm(
      `Delete ${a}`,
      `Are you sure you want to delete "${b.label}"?`
    ) || E && !await Promise.resolve(E(b.value)))
      return;
    const I = r.findIndex((w) => w.value === b.value), c = r.filter((w) => w.value !== b.value);
    l(c);
    let S;
    if (c.length > 0) {
      const w = Math.min(I, c.length - 1);
      S = (O = c[w]) == null ? void 0 : O.value;
    }
    u(S, t);
  };
  return /* @__PURE__ */ T.jsxs("div", { className: "preset-select-container", style: { display: "flex", alignItems: "center" }, children: [
    /* @__PURE__ */ T.jsx(nb, { value: t ?? "", onChange: (O) => u(O.target.value, t), children: r.map((O) => /* @__PURE__ */ T.jsx("option", { value: O.value, children: O.label }, O.value)) }),
    h && /* @__PURE__ */ T.jsx(
      Ae,
      {
        className: "fa-solid fa-file-circle-plus",
        title: `Create a new ${a}`,
        onClick: C,
        "data-i18n": `[title]Create a new ${a}`
      }
    ),
    m && /* @__PURE__ */ T.jsx(
      Ae,
      {
        className: "fa-solid fa-pencil",
        title: `Rename selected ${a}`,
        onClick: k,
        disabled: !b,
        "data-i18n": `[title]Rename selected ${a}`
      }
    ),
    f && /* @__PURE__ */ T.jsx(
      Ae,
      {
        className: "fa-solid fa-trash-can",
        title: `Delete selected ${a}`,
        onClick: j,
        disabled: !b,
        "data-i18n": `[title]Delete selected ${a}`
      }
    ),
    _?.map((O) => /* @__PURE__ */ T.jsx(
      Ae,
      {
        className: O.icon,
        title: O.title,
        onClick: O.onClick,
        disabled: O.disabled,
        "data-i18n": O.i18n ? `[title]${O.i18n}` : void 0
      },
      O.key
    ))
  ] });
}, ib = () => {
  const [, t] = se.useState(0);
  return se.useCallback(() => {
    t((s) => s + 1);
  }, []);
}, by = "en", sb = {
  en: "English",
  "zh-CN": ""
}, lw = Oi.map((t) => ({
  value: t,
  label: sb[t]
})), mf = {
  en: {
    languageLabel: "Language",
    languageDescription: "Choose the language for the extension interface.",
    languageToggleButtonLabel: (t) => `Language: ${t}`,
    languageToggleButtonTooltip: "Switch interface language",
    languageSwitched: (t) => `Language switched to ${t}.`,
    mainContextTitle: "Main Context Template",
    restoreMainContextTooltip: "Restore main context template to default",
    restoreMainContextConfirmTitle: "Restore default",
    restoreMainContextConfirmMessage: "Are you sure?",
    mainContextTemplateLabel: "Template",
    promptTemplatesTitle: "Prompt Templates",
    restorePromptTooltip: "Restore selected prompt to default",
    promptLabel: "Prompt",
    restorePromptConfirmTitle: "Restore default",
    restorePromptConfirmMessage: (t) => `Restore default for "${t}"?`,
    promptEditorPlaceholder: "Edit the selected system prompt template here...",
    resetEverythingButton: "I messed up, reset everything",
    resetEverythingConfirmTitle: "Reset Everything",
    resetEverythingConfirmMessage: "Are you sure? This cannot be undone.",
    resetEverythingSuccess: "Settings reset. The UI has been updated.",
    noPromptSelectedWarning: "No prompt selected."
  },
  "zh-CN": {
    languageLabel: "",
    languageDescription: "",
    languageToggleButtonLabel: (t) => `${t}`,
    languageToggleButtonTooltip: "",
    languageSwitched: (t) => ` ${t}`,
    mainContextTitle: "",
    restoreMainContextTooltip: "",
    restoreMainContextConfirmTitle: "",
    restoreMainContextConfirmMessage: "",
    mainContextTemplateLabel: "",
    promptTemplatesTitle: "",
    restorePromptTooltip: "",
    promptLabel: "",
    restorePromptConfirmTitle: "",
    restorePromptConfirmMessage: (t) => `${t}`,
    promptEditorPlaceholder: "...",
    resetEverythingButton: "",
    resetEverythingConfirmTitle: "",
    resetEverythingConfirmMessage: "",
    resetEverythingSuccess: "",
    noPromptSelectedWarning: ""
  }
}, _y = (t) => Oi.includes(t), gf = SillyTavern.getContext(), cw = () => {
  const t = ib(), r = Oe.getSettings();
  if (console.log("[WorldInfoRecommender] Settings loaded:", {
    hasSettings: !!r,
    language: r?.language,
    hasPrompts: !!r?.prompts
  }), !r)
    return /* @__PURE__ */ T.jsx("div", { style: { padding: "20px", color: "red" }, children: "Error: Settings not loaded" });
  const s = _y(r.language) ? r.language : by, a = mf[s] ?? mf[by], [u, l] = se.useState(Qu[0]), h = se.useCallback(
    (A) => {
      const N = Oe.getSettings();
      A(N), Oe.saveSettings(), t();
    },
    [t]
  ), m = (A) => {
    const N = A.target.value;
    if (!_y(N) || N === r.language)
      return;
    h((P) => {
      P.language = N;
    });
    const D = sb[N], M = mf[N] ?? a;
    ye("info", M.languageSwitched(D));
  }, f = se.useMemo(
    () => Object.keys(r.mainContextTemplatePresets).map((A) => ({
      value: A,
      label: A
    })),
    [r.mainContextTemplatePresets]
  ), g = se.useMemo(
    () => Object.keys(r.prompts).map((A) => {
      const N = r.prompts[A];
      return {
        value: A,
        label: N ? `${N.label} (${A})` : A
      };
    }),
    [r.prompts]
  ), v = se.useMemo(() => {
    const A = r.mainContextTemplatePresets[r.mainContextTemplatePreset];
    return A ? A.prompts.map((N) => {
      const D = r.prompts[N.promptName], M = D ? `${D.label} (${N.promptName})` : N.promptName;
      return {
        id: N.promptName,
        label: M,
        enabled: N.enabled,
        selectValue: N.role,
        selectOptions: [
          { value: "user", label: "User" },
          { value: "assistant", label: "Assistant" },
          { value: "system", label: "System" }
        ]
      };
    }) : [];
  }, [r.mainContextTemplatePreset, r.mainContextTemplatePresets, r.prompts]), E = (A) => {
    h((N) => {
      N.mainContextTemplatePreset = A ?? "default";
    });
  }, _ = (A) => {
    h((N) => {
      const D = {}, M = N.mainContextTemplatePresets;
      A.forEach((P) => {
        D[P.value] = M[P.value] ?? structuredClone(M[N.mainContextTemplatePreset] ?? M.default);
      }), N.mainContextTemplatePresets = D;
    });
  }, b = (A) => {
    h((N) => {
      const D = A.map((P) => ({
        promptName: P.id,
        enabled: P.enabled,
        role: P.selectValue ?? "user"
      })), M = {
        ...N.mainContextTemplatePresets[N.mainContextTemplatePreset],
        prompts: D
      };
      N.mainContextTemplatePresets = {
        ...N.mainContextTemplatePresets,
        [N.mainContextTemplatePreset]: M
      };
    });
  }, p = async () => {
    await gf.Popup.show.confirm(
      a.restoreMainContextConfirmTitle,
      a.restoreMainContextConfirmMessage
    ) && h((N) => {
      N.mainContextTemplatePresets = {
        ...N.mainContextTemplatePresets,
        default: structuredClone(Xf.mainContextTemplatePresets.default)
      }, N.mainContextTemplatePreset = "default";
    });
  }, C = (A) => {
    h((N) => {
      const D = {}, M = N.prompts, P = Object.keys(M), H = A.map((F) => F.value);
      H.forEach((F) => {
        D[F] = M[F] ?? { content: "", isDefault: !1, label: F };
      }), N.prompts = D;
      const X = P.filter((F) => !H.includes(F));
      if (X.length > 0) {
        const F = Object.fromEntries(
          Object.entries(N.mainContextTemplatePresets).map(([Q, R]) => [
            Q,
            {
              ...R,
              prompts: R.prompts.filter((q) => !X.includes(q.promptName))
            }
          ])
        );
        N.mainContextTemplatePresets = F;
      }
    });
  }, k = (A) => {
    const N = yy(A);
    return N ? r.prompts[N] ? (ye("error", `Prompt name already exists: ${N}`), { confirmed: !1 }) : (h((D) => {
      D.prompts = {
        ...D.prompts,
        [N]: {
          content: D.prompts[u]?.content ?? "",
          isDefault: !1,
          label: A
        }
      }, D.mainContextTemplatePresets = Object.fromEntries(
        Object.entries(D.mainContextTemplatePresets).map(([M, P]) => [
          M,
          {
            ...P,
            prompts: [...P.prompts, { enabled: !0, promptName: N, role: "user" }]
          }
        ])
      );
    }), l(N), { confirmed: !0, value: N }) : (ye("error", `Invalid prompt name: ${A}`), { confirmed: !1 });
  }, j = (A, N) => {
    const D = yy(N);
    return D ? r.prompts[D] ? (ye("error", `Prompt name already exists: ${D}`), { confirmed: !1 }) : (h((M) => {
      const { [A]: P, ...H } = M.prompts;
      M.prompts = {
        ...H,
        [D]: { ...P, label: N }
      }, M.mainContextTemplatePresets = Object.fromEntries(
        Object.entries(M.mainContextTemplatePresets).map(([X, F]) => [
          X,
          {
            ...F,
            prompts: F.prompts.map((Q) => Q.promptName === A ? { ...Q, promptName: D } : Q)
          }
        ])
      );
    }), l(D), { confirmed: !0, value: D }) : (ye("error", `Invalid prompt name: ${N}`), { confirmed: !1 });
  }, O = (A) => {
    const N = A.target.value;
    h((D) => {
      const M = D.prompts[u];
      M && (D.prompts = {
        ...D.prompts,
        [u]: {
          ...M,
          content: N,
          isDefault: Qu.includes(u) ? mt[u] === N : !1
        }
      });
    });
  }, I = async () => {
    const A = r.prompts[u];
    if (!A) return ye("warning", a.noPromptSelectedWarning);
    await gf.Popup.show.confirm(
      a.restorePromptConfirmTitle,
      a.restorePromptConfirmMessage(A.label)
    ) && h((D) => {
      D.prompts = {
        ...D.prompts,
        [u]: {
          ...D.prompts[u],
          content: mt[u]
        }
      };
    });
  }, c = async () => {
    await gf.Popup.show.confirm(
      a.resetEverythingConfirmTitle,
      a.resetEverythingConfirmMessage
    ) && (Oe.resetSettings(), t(), ye("success", a.resetEverythingSuccess));
  }, S = r.prompts[u]?.content ?? "", w = Qu.includes(u);
  return /* @__PURE__ */ T.jsxs("div", { className: "world-info-recommender-settings", children: [
    /* @__PURE__ */ T.jsxs("div", { className: "settings-language", style: { marginTop: "10px" }, children: [
      /* @__PURE__ */ T.jsx("label", { htmlFor: "world-info-recommender-language-select", children: a.languageLabel }),
      /* @__PURE__ */ T.jsx(
        "select",
        {
          id: "world-info-recommender-language-select",
          className: "settings-language__select",
          value: s,
          onChange: m,
          children: lw.map((A) => /* @__PURE__ */ T.jsx("option", { value: A.value, children: A.label }, A.value))
        }
      ),
      /* @__PURE__ */ T.jsx("p", { className: "settings-language__description", children: a.languageDescription })
    ] }),
    /* @__PURE__ */ T.jsxs("div", { style: { marginTop: "10px" }, children: [
      /* @__PURE__ */ T.jsxs("div", { className: "title_restorable", children: [
        /* @__PURE__ */ T.jsx("span", { children: a.mainContextTitle }),
        /* @__PURE__ */ T.jsx("div", { className: "title_restorable_actions", children: /* @__PURE__ */ T.jsx(
          Ae,
          {
            title: a.restoreMainContextTooltip,
            onClick: p,
            children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-undo" })
          }
        ) })
      ] }),
      /* @__PURE__ */ T.jsx(
        Mf,
        {
          label: a.mainContextTemplateLabel,
          items: f,
          value: r.mainContextTemplatePreset,
          readOnlyValues: ["default"],
          onChange: E,
          onItemsChange: _,
          enableCreate: !0,
          enableRename: !0,
          enableDelete: !0
        }
      ),
      /* @__PURE__ */ T.jsx("div", { style: { marginTop: "5px" }, children: /* @__PURE__ */ T.jsx(
        rb,
        {
          items: v,
          onItemsChange: b,
          showSelectInput: !0,
          showToggleButton: !0
        }
      ) })
    ] }),
    /* @__PURE__ */ T.jsx("hr", { style: { margin: "10px 0" } }),
    /* @__PURE__ */ T.jsxs("div", { style: { marginTop: "10px" }, children: [
      /* @__PURE__ */ T.jsxs("div", { className: "title_restorable", children: [
        /* @__PURE__ */ T.jsx("span", { children: a.promptTemplatesTitle }),
        w && /* @__PURE__ */ T.jsx(
          Ae,
          {
            title: a.restorePromptTooltip,
            onClick: I,
            children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-undo" })
          }
        )
      ] }),
      /* @__PURE__ */ T.jsx(
        Mf,
        {
          label: a.promptLabel,
          items: g,
          value: u,
          readOnlyValues: Qu,
          onChange: (A) => l(A ?? ""),
          onItemsChange: C,
          enableCreate: !0,
          enableRename: !0,
          enableDelete: !0,
          onCreate: k,
          onRename: j
        }
      ),
      /* @__PURE__ */ T.jsx(
        Er,
        {
          value: S,
          onChange: O,
          placeholder: a.promptEditorPlaceholder,
          rows: 6,
          style: { marginTop: "5px", width: "100%" }
        }
      )
    ] }),
    /* @__PURE__ */ T.jsx("hr", { style: { margin: "15px 0" } }),
    /* @__PURE__ */ T.jsx("div", { style: { textAlign: "center", marginTop: "15px" }, children: /* @__PURE__ */ T.jsxs(Ae, { className: "danger_button", style: { width: "auto" }, onClick: c, children: [
      /* @__PURE__ */ T.jsx("i", { style: { marginRight: "10px" }, className: "fa-solid fa-triangle-exclamation" }),
      /* @__PURE__ */ T.jsx("span", { children: a.resetEverythingButton })
    ] }) })
  ] });
};
var ll = { exports: {} }, dw = ll.exports, Sy;
function fw() {
  return Sy || (Sy = 1, (function(t) {
    (function() {
      function r(c) {
        var S = {
          omitExtraWLInCodeBlocks: {
            defaultValue: !1,
            describe: "Omit the default extra whiteline added to code blocks",
            type: "boolean"
          },
          noHeaderId: {
            defaultValue: !1,
            describe: "Turn on/off generated header id",
            type: "boolean"
          },
          prefixHeaderId: {
            defaultValue: !1,
            describe: "Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",
            type: "string"
          },
          rawPrefixHeaderId: {
            defaultValue: !1,
            describe: 'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',
            type: "boolean"
          },
          ghCompatibleHeaderId: {
            defaultValue: !1,
            describe: "Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",
            type: "boolean"
          },
          rawHeaderId: {
            defaultValue: !1,
            describe: `Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,
            type: "boolean"
          },
          headerLevelStart: {
            defaultValue: !1,
            describe: "The header blocks level start",
            type: "integer"
          },
          parseImgDimensions: {
            defaultValue: !1,
            describe: "Turn on/off image dimension parsing",
            type: "boolean"
          },
          simplifiedAutoLink: {
            defaultValue: !1,
            describe: "Turn on/off GFM autolink style",
            type: "boolean"
          },
          excludeTrailingPunctuationFromURLs: {
            defaultValue: !1,
            describe: "Excludes trailing punctuation from links generated with autoLinking",
            type: "boolean"
          },
          literalMidWordUnderscores: {
            defaultValue: !1,
            describe: "Parse midword underscores as literal underscores",
            type: "boolean"
          },
          literalMidWordAsterisks: {
            defaultValue: !1,
            describe: "Parse midword asterisks as literal asterisks",
            type: "boolean"
          },
          strikethrough: {
            defaultValue: !1,
            describe: "Turn on/off strikethrough support",
            type: "boolean"
          },
          tables: {
            defaultValue: !1,
            describe: "Turn on/off tables support",
            type: "boolean"
          },
          tablesHeaderId: {
            defaultValue: !1,
            describe: "Add an id to table headers",
            type: "boolean"
          },
          ghCodeBlocks: {
            defaultValue: !0,
            describe: "Turn on/off GFM fenced code blocks support",
            type: "boolean"
          },
          tasklists: {
            defaultValue: !1,
            describe: "Turn on/off GFM tasklist support",
            type: "boolean"
          },
          smoothLivePreview: {
            defaultValue: !1,
            describe: "Prevents weird effects in live previews due to incomplete input",
            type: "boolean"
          },
          smartIndentationFix: {
            defaultValue: !1,
            describe: "Tries to smartly fix indentation in es6 strings",
            type: "boolean"
          },
          disableForced4SpacesIndentedSublists: {
            defaultValue: !1,
            describe: "Disables the requirement of indenting nested sublists by 4 spaces",
            type: "boolean"
          },
          simpleLineBreaks: {
            defaultValue: !1,
            describe: "Parses simple line breaks as <br> (GFM Style)",
            type: "boolean"
          },
          requireSpaceBeforeHeadingText: {
            defaultValue: !1,
            describe: "Makes adding a space between `#` and the header text mandatory (GFM Style)",
            type: "boolean"
          },
          ghMentions: {
            defaultValue: !1,
            describe: "Enables github @mentions",
            type: "boolean"
          },
          ghMentionsLink: {
            defaultValue: "https://github.com/{u}",
            describe: "Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",
            type: "string"
          },
          encodeEmails: {
            defaultValue: !0,
            describe: "Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",
            type: "boolean"
          },
          openLinksInNewWindow: {
            defaultValue: !1,
            describe: "Open all links in new windows",
            type: "boolean"
          },
          backslashEscapesHTMLTags: {
            defaultValue: !1,
            describe: "Support for HTML Tag escaping. ex: <div>foo</div>",
            type: "boolean"
          },
          emoji: {
            defaultValue: !1,
            describe: "Enable emoji support. Ex: `this is a :smile: emoji`",
            type: "boolean"
          },
          underline: {
            defaultValue: !1,
            describe: "Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",
            type: "boolean"
          },
          ellipsis: {
            defaultValue: !0,
            describe: "Replaces three dots with the ellipsis unicode character",
            type: "boolean"
          },
          completeHTMLDocument: {
            defaultValue: !1,
            describe: "Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",
            type: "boolean"
          },
          metadata: {
            defaultValue: !1,
            describe: "Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",
            type: "boolean"
          },
          splitAdjacentBlockquotes: {
            defaultValue: !1,
            describe: "Split adjacent blockquote blocks",
            type: "boolean"
          }
        };
        if (c === !1)
          return JSON.parse(JSON.stringify(S));
        var w = {};
        for (var A in S)
          S.hasOwnProperty(A) && (w[A] = S[A].defaultValue);
        return w;
      }
      function s() {
        var c = r(!0), S = {};
        for (var w in c)
          c.hasOwnProperty(w) && (S[w] = !0);
        return S;
      }
      var a = {}, u = {}, l = {}, h = r(!0), m = "vanilla", f = {
        github: {
          omitExtraWLInCodeBlocks: !0,
          simplifiedAutoLink: !0,
          excludeTrailingPunctuationFromURLs: !0,
          literalMidWordUnderscores: !0,
          strikethrough: !0,
          tables: !0,
          tablesHeaderId: !0,
          ghCodeBlocks: !0,
          tasklists: !0,
          disableForced4SpacesIndentedSublists: !0,
          simpleLineBreaks: !0,
          requireSpaceBeforeHeadingText: !0,
          ghCompatibleHeaderId: !0,
          ghMentions: !0,
          backslashEscapesHTMLTags: !0,
          emoji: !0,
          splitAdjacentBlockquotes: !0
        },
        original: {
          noHeaderId: !0,
          ghCodeBlocks: !1
        },
        ghost: {
          omitExtraWLInCodeBlocks: !0,
          parseImgDimensions: !0,
          simplifiedAutoLink: !0,
          excludeTrailingPunctuationFromURLs: !0,
          literalMidWordUnderscores: !0,
          strikethrough: !0,
          tables: !0,
          tablesHeaderId: !0,
          ghCodeBlocks: !0,
          tasklists: !0,
          smoothLivePreview: !0,
          simpleLineBreaks: !0,
          requireSpaceBeforeHeadingText: !0,
          ghMentions: !1,
          encodeEmails: !0
        },
        vanilla: r(!0),
        allOn: s()
      };
      a.helper = {}, a.extensions = {}, a.setOption = function(c, S) {
        return h[c] = S, this;
      }, a.getOption = function(c) {
        return h[c];
      }, a.getOptions = function() {
        return h;
      }, a.resetOptions = function() {
        h = r(!0);
      }, a.setFlavor = function(c) {
        if (!f.hasOwnProperty(c))
          throw Error(c + " flavor was not found");
        a.resetOptions();
        var S = f[c];
        m = c;
        for (var w in S)
          S.hasOwnProperty(w) && (h[w] = S[w]);
      }, a.getFlavor = function() {
        return m;
      }, a.getFlavorOptions = function(c) {
        if (f.hasOwnProperty(c))
          return f[c];
      }, a.getDefaultOptions = function(c) {
        return r(c);
      }, a.subParser = function(c, S) {
        if (a.helper.isString(c))
          if (typeof S < "u")
            u[c] = S;
          else {
            if (u.hasOwnProperty(c))
              return u[c];
            throw Error("SubParser named " + c + " not registered!");
          }
      }, a.extension = function(c, S) {
        if (!a.helper.isString(c))
          throw Error("Extension 'name' must be a string");
        if (c = a.helper.stdExtName(c), a.helper.isUndefined(S)) {
          if (!l.hasOwnProperty(c))
            throw Error("Extension named " + c + " is not registered!");
          return l[c];
        } else {
          typeof S == "function" && (S = S()), a.helper.isArray(S) || (S = [S]);
          var w = g(S, c);
          if (w.valid)
            l[c] = S;
          else
            throw Error(w.error);
        }
      }, a.getAllExtensions = function() {
        return l;
      }, a.removeExtension = function(c) {
        delete l[c];
      }, a.resetExtensions = function() {
        l = {};
      };
      function g(c, S) {
        var w = S ? "Error in " + S + " extension->" : "Error in unnamed extension", A = {
          valid: !0,
          error: ""
        };
        a.helper.isArray(c) || (c = [c]);
        for (var N = 0; N < c.length; ++N) {
          var D = w + " sub-extension " + N + ": ", M = c[N];
          if (typeof M != "object")
            return A.valid = !1, A.error = D + "must be an object, but " + typeof M + " given", A;
          if (!a.helper.isString(M.type))
            return A.valid = !1, A.error = D + 'property "type" must be a string, but ' + typeof M.type + " given", A;
          var P = M.type = M.type.toLowerCase();
          if (P === "language" && (P = M.type = "lang"), P === "html" && (P = M.type = "output"), P !== "lang" && P !== "output" && P !== "listener")
            return A.valid = !1, A.error = D + "type " + P + ' is not recognized. Valid values: "lang/language", "output/html" or "listener"', A;
          if (P === "listener") {
            if (a.helper.isUndefined(M.listeners))
              return A.valid = !1, A.error = D + '. Extensions of type "listener" must have a property called "listeners"', A;
          } else if (a.helper.isUndefined(M.filter) && a.helper.isUndefined(M.regex))
            return A.valid = !1, A.error = D + P + ' extensions must define either a "regex" property or a "filter" method', A;
          if (M.listeners) {
            if (typeof M.listeners != "object")
              return A.valid = !1, A.error = D + '"listeners" property must be an object but ' + typeof M.listeners + " given", A;
            for (var H in M.listeners)
              if (M.listeners.hasOwnProperty(H) && typeof M.listeners[H] != "function")
                return A.valid = !1, A.error = D + '"listeners" property must be an hash of [event name]: [callback]. listeners.' + H + " must be a function but " + typeof M.listeners[H] + " given", A;
          }
          if (M.filter) {
            if (typeof M.filter != "function")
              return A.valid = !1, A.error = D + '"filter" must be a function, but ' + typeof M.filter + " given", A;
          } else if (M.regex) {
            if (a.helper.isString(M.regex) && (M.regex = new RegExp(M.regex, "g")), !(M.regex instanceof RegExp))
              return A.valid = !1, A.error = D + '"regex" property must either be a string or a RegExp object, but ' + typeof M.regex + " given", A;
            if (a.helper.isUndefined(M.replace))
              return A.valid = !1, A.error = D + '"regex" extensions must implement a replace string or function', A;
          }
        }
        return A;
      }
      a.validateExtension = function(c) {
        var S = g(c, null);
        return S.valid ? !0 : (console.warn(S.error), !1);
      }, a.hasOwnProperty("helper") || (a.helper = {}), a.helper.isString = function(c) {
        return typeof c == "string" || c instanceof String;
      }, a.helper.isFunction = function(c) {
        var S = {};
        return c && S.toString.call(c) === "[object Function]";
      }, a.helper.isArray = function(c) {
        return Array.isArray(c);
      }, a.helper.isUndefined = function(c) {
        return typeof c > "u";
      }, a.helper.forEach = function(c, S) {
        if (a.helper.isUndefined(c))
          throw new Error("obj param is required");
        if (a.helper.isUndefined(S))
          throw new Error("callback param is required");
        if (!a.helper.isFunction(S))
          throw new Error("callback param must be a function/closure");
        if (typeof c.forEach == "function")
          c.forEach(S);
        else if (a.helper.isArray(c))
          for (var w = 0; w < c.length; w++)
            S(c[w], w, c);
        else if (typeof c == "object")
          for (var A in c)
            c.hasOwnProperty(A) && S(c[A], A, c);
        else
          throw new Error("obj does not seem to be an array or an iterable object");
      }, a.helper.stdExtName = function(c) {
        return c.replace(/[_?*+\/\\.^-]/g, "").replace(/\s/g, "").toLowerCase();
      };
      function v(c, S) {
        var w = S.charCodeAt(0);
        return "E" + w + "E";
      }
      a.helper.escapeCharactersCallback = v, a.helper.escapeCharacters = function(c, S, w) {
        var A = "([" + S.replace(/([\[\]\\])/g, "\\$1") + "])";
        w && (A = "\\\\" + A);
        var N = new RegExp(A, "g");
        return c = c.replace(N, v), c;
      }, a.helper.unescapeHTMLEntities = function(c) {
        return c.replace(/&quot;/g, '"').replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&");
      };
      var E = function(c, S, w, A) {
        var N = A || "", D = N.indexOf("g") > -1, M = new RegExp(S + "|" + w, "g" + N.replace(/g/g, "")), P = new RegExp(S, N.replace(/g/g, "")), H = [], X, F, Q, R, q;
        do
          for (X = 0; Q = M.exec(c); )
            if (P.test(Q[0]))
              X++ || (F = M.lastIndex, R = F - Q[0].length);
            else if (X && !--X) {
              q = Q.index + Q[0].length;
              var $ = {
                left: { start: R, end: F },
                match: { start: F, end: Q.index },
                right: { start: Q.index, end: q },
                wholeMatch: { start: R, end: q }
              };
              if (H.push($), !D)
                return H;
            }
        while (X && (M.lastIndex = F));
        return H;
      };
      a.helper.matchRecursiveRegExp = function(c, S, w, A) {
        for (var N = E(c, S, w, A), D = [], M = 0; M < N.length; ++M)
          D.push([
            c.slice(N[M].wholeMatch.start, N[M].wholeMatch.end),
            c.slice(N[M].match.start, N[M].match.end),
            c.slice(N[M].left.start, N[M].left.end),
            c.slice(N[M].right.start, N[M].right.end)
          ]);
        return D;
      }, a.helper.replaceRecursiveRegExp = function(c, S, w, A, N) {
        if (!a.helper.isFunction(S)) {
          var D = S;
          S = function() {
            return D;
          };
        }
        var M = E(c, w, A, N), P = c, H = M.length;
        if (H > 0) {
          var X = [];
          M[0].wholeMatch.start !== 0 && X.push(c.slice(0, M[0].wholeMatch.start));
          for (var F = 0; F < H; ++F)
            X.push(
              S(
                c.slice(M[F].wholeMatch.start, M[F].wholeMatch.end),
                c.slice(M[F].match.start, M[F].match.end),
                c.slice(M[F].left.start, M[F].left.end),
                c.slice(M[F].right.start, M[F].right.end)
              )
            ), F < H - 1 && X.push(c.slice(M[F].wholeMatch.end, M[F + 1].wholeMatch.start));
          M[H - 1].wholeMatch.end < c.length && X.push(c.slice(M[H - 1].wholeMatch.end)), P = X.join("");
        }
        return P;
      }, a.helper.regexIndexOf = function(c, S, w) {
        if (!a.helper.isString(c))
          throw "InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";
        if (!(S instanceof RegExp))
          throw "InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";
        var A = c.substring(w || 0).search(S);
        return A >= 0 ? A + (w || 0) : A;
      }, a.helper.splitAtIndex = function(c, S) {
        if (!a.helper.isString(c))
          throw "InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";
        return [c.substring(0, S), c.substring(S)];
      }, a.helper.encodeEmailAddress = function(c) {
        var S = [
          function(w) {
            return "&#" + w.charCodeAt(0) + ";";
          },
          function(w) {
            return "&#x" + w.charCodeAt(0).toString(16) + ";";
          },
          function(w) {
            return w;
          }
        ];
        return c = c.replace(/./g, function(w) {
          if (w === "@")
            w = S[Math.floor(Math.random() * 2)](w);
          else {
            var A = Math.random();
            w = A > 0.9 ? S[2](w) : A > 0.45 ? S[1](w) : S[0](w);
          }
          return w;
        }), c;
      }, a.helper.padEnd = function(S, w, A) {
        return w = w >> 0, A = String(A || " "), S.length > w ? String(S) : (w = w - S.length, w > A.length && (A += A.repeat(w / A.length)), String(S) + A.slice(0, w));
      }, typeof console > "u" && (console = {
        warn: function(c) {
          alert(c);
        },
        log: function(c) {
          alert(c);
        },
        error: function(c) {
          throw c;
        }
      }), a.helper.regexes = {
        asteriskDashAndColon: /([*_:~])/g
      }, a.helper.emojis = {
        "+1": "",
        "-1": "",
        100: "",
        1234: "",
        "1st_place_medal": "",
        "2nd_place_medal": "",
        "3rd_place_medal": "",
        "8ball": "",
        a: "",
        ab: "",
        abc: "",
        abcd: "",
        accept: "",
        aerial_tramway: "",
        airplane: "",
        alarm_clock: "",
        alembic: "",
        alien: "",
        ambulance: "",
        amphora: "",
        anchor: "",
        angel: "",
        anger: "",
        angry: "",
        anguished: "",
        ant: "",
        apple: "",
        aquarius: "",
        aries: "",
        arrow_backward: "",
        arrow_double_down: "",
        arrow_double_up: "",
        arrow_down: "",
        arrow_down_small: "",
        arrow_forward: "",
        arrow_heading_down: "",
        arrow_heading_up: "",
        arrow_left: "",
        arrow_lower_left: "",
        arrow_lower_right: "",
        arrow_right: "",
        arrow_right_hook: "",
        arrow_up: "",
        arrow_up_down: "",
        arrow_up_small: "",
        arrow_upper_left: "",
        arrow_upper_right: "",
        arrows_clockwise: "",
        arrows_counterclockwise: "",
        art: "",
        articulated_lorry: "",
        artificial_satellite: "",
        astonished: "",
        athletic_shoe: "",
        atm: "",
        atom_symbol: "",
        avocado: "",
        b: "",
        baby: "",
        baby_bottle: "",
        baby_chick: "",
        baby_symbol: "",
        back: "",
        bacon: "",
        badminton: "",
        baggage_claim: "",
        baguette_bread: "",
        balance_scale: "",
        balloon: "",
        ballot_box: "",
        ballot_box_with_check: "",
        bamboo: "",
        banana: "",
        bangbang: "",
        bank: "",
        bar_chart: "",
        barber: "",
        baseball: "",
        basketball: "",
        basketball_man: "",
        basketball_woman: "&zwj;",
        bat: "",
        bath: "",
        bathtub: "",
        battery: "",
        beach_umbrella: "",
        bear: "",
        bed: "",
        bee: "",
        beer: "",
        beers: "",
        beetle: "",
        beginner: "",
        bell: "",
        bellhop_bell: "",
        bento: "",
        biking_man: "",
        bike: "",
        biking_woman: "&zwj;",
        bikini: "",
        biohazard: "",
        bird: "",
        birthday: "",
        black_circle: "",
        black_flag: "",
        black_heart: "",
        black_joker: "",
        black_large_square: "",
        black_medium_small_square: "",
        black_medium_square: "",
        black_nib: "",
        black_small_square: "",
        black_square_button: "",
        blonde_man: "",
        blonde_woman: "&zwj;",
        blossom: "",
        blowfish: "",
        blue_book: "",
        blue_car: "",
        blue_heart: "",
        blush: "",
        boar: "",
        boat: "",
        bomb: "",
        book: "",
        bookmark: "",
        bookmark_tabs: "",
        books: "",
        boom: "",
        boot: "",
        bouquet: "",
        bowing_man: "",
        bow_and_arrow: "",
        bowing_woman: "&zwj;",
        bowling: "",
        boxing_glove: "",
        boy: "",
        bread: "",
        bride_with_veil: "",
        bridge_at_night: "",
        briefcase: "",
        broken_heart: "",
        bug: "",
        building_construction: "",
        bulb: "",
        bullettrain_front: "",
        bullettrain_side: "",
        burrito: "",
        bus: "",
        business_suit_levitating: "",
        busstop: "",
        bust_in_silhouette: "",
        busts_in_silhouette: "",
        butterfly: "",
        cactus: "",
        cake: "",
        calendar: "",
        call_me_hand: "",
        calling: "",
        camel: "",
        camera: "",
        camera_flash: "",
        camping: "",
        cancer: "",
        candle: "",
        candy: "",
        canoe: "",
        capital_abcd: "",
        capricorn: "",
        car: "",
        card_file_box: "",
        card_index: "",
        card_index_dividers: "",
        carousel_horse: "",
        carrot: "",
        cat: "",
        cat2: "",
        cd: "",
        chains: "",
        champagne: "",
        chart: "",
        chart_with_downwards_trend: "",
        chart_with_upwards_trend: "",
        checkered_flag: "",
        cheese: "",
        cherries: "",
        cherry_blossom: "",
        chestnut: "",
        chicken: "",
        children_crossing: "",
        chipmunk: "",
        chocolate_bar: "",
        christmas_tree: "",
        church: "",
        cinema: "",
        circus_tent: "",
        city_sunrise: "",
        city_sunset: "",
        cityscape: "",
        cl: "",
        clamp: "",
        clap: "",
        clapper: "",
        classical_building: "",
        clinking_glasses: "",
        clipboard: "",
        clock1: "",
        clock10: "",
        clock1030: "",
        clock11: "",
        clock1130: "",
        clock12: "",
        clock1230: "",
        clock130: "",
        clock2: "",
        clock230: "",
        clock3: "",
        clock330: "",
        clock4: "",
        clock430: "",
        clock5: "",
        clock530: "",
        clock6: "",
        clock630: "",
        clock7: "",
        clock730: "",
        clock8: "",
        clock830: "",
        clock9: "",
        clock930: "",
        closed_book: "",
        closed_lock_with_key: "",
        closed_umbrella: "",
        cloud: "",
        cloud_with_lightning: "",
        cloud_with_lightning_and_rain: "",
        cloud_with_rain: "",
        cloud_with_snow: "",
        clown_face: "",
        clubs: "",
        cocktail: "",
        coffee: "",
        coffin: "",
        cold_sweat: "",
        comet: "",
        computer: "",
        computer_mouse: "",
        confetti_ball: "",
        confounded: "",
        confused: "",
        congratulations: "",
        construction: "",
        construction_worker_man: "",
        construction_worker_woman: "&zwj;",
        control_knobs: "",
        convenience_store: "",
        cookie: "",
        cool: "",
        policeman: "",
        copyright: "",
        corn: "",
        couch_and_lamp: "",
        couple: "",
        couple_with_heart_woman_man: "",
        couple_with_heart_man_man: "&zwj;&zwj;",
        couple_with_heart_woman_woman: "&zwj;&zwj;",
        couplekiss_man_man: "&zwj;&zwj;&zwj;",
        couplekiss_man_woman: "",
        couplekiss_woman_woman: "&zwj;&zwj;&zwj;",
        cow: "",
        cow2: "",
        cowboy_hat_face: "",
        crab: "",
        crayon: "",
        credit_card: "",
        crescent_moon: "",
        cricket: "",
        crocodile: "",
        croissant: "",
        crossed_fingers: "",
        crossed_flags: "",
        crossed_swords: "",
        crown: "",
        cry: "",
        crying_cat_face: "",
        crystal_ball: "",
        cucumber: "",
        cupid: "",
        curly_loop: "",
        currency_exchange: "",
        curry: "",
        custard: "",
        customs: "",
        cyclone: "",
        dagger: "",
        dancer: "",
        dancing_women: "",
        dancing_men: "&zwj;",
        dango: "",
        dark_sunglasses: "",
        dart: "",
        dash: "",
        date: "",
        deciduous_tree: "",
        deer: "",
        department_store: "",
        derelict_house: "",
        desert: "",
        desert_island: "",
        desktop_computer: "",
        male_detective: "",
        diamond_shape_with_a_dot_inside: "",
        diamonds: "",
        disappointed: "",
        disappointed_relieved: "",
        dizzy: "",
        dizzy_face: "",
        do_not_litter: "",
        dog: "",
        dog2: "",
        dollar: "",
        dolls: "",
        dolphin: "",
        door: "",
        doughnut: "",
        dove: "",
        dragon: "",
        dragon_face: "",
        dress: "",
        dromedary_camel: "",
        drooling_face: "",
        droplet: "",
        drum: "",
        duck: "",
        dvd: "",
        "e-mail": "",
        eagle: "",
        ear: "",
        ear_of_rice: "",
        earth_africa: "",
        earth_americas: "",
        earth_asia: "",
        egg: "",
        eggplant: "",
        eight_pointed_black_star: "",
        eight_spoked_asterisk: "",
        electric_plug: "",
        elephant: "",
        email: "",
        end: "",
        envelope_with_arrow: "",
        euro: "",
        european_castle: "",
        european_post_office: "",
        evergreen_tree: "",
        exclamation: "",
        expressionless: "",
        eye: "",
        eye_speech_bubble: "&zwj;",
        eyeglasses: "",
        eyes: "",
        face_with_head_bandage: "",
        face_with_thermometer: "",
        fist_oncoming: "",
        factory: "",
        fallen_leaf: "",
        family_man_woman_boy: "",
        family_man_boy: "&zwj;",
        family_man_boy_boy: "&zwj;&zwj;",
        family_man_girl: "&zwj;",
        family_man_girl_boy: "&zwj;&zwj;",
        family_man_girl_girl: "&zwj;&zwj;",
        family_man_man_boy: "&zwj;&zwj;",
        family_man_man_boy_boy: "&zwj;&zwj;&zwj;",
        family_man_man_girl: "&zwj;&zwj;",
        family_man_man_girl_boy: "&zwj;&zwj;&zwj;",
        family_man_man_girl_girl: "&zwj;&zwj;&zwj;",
        family_man_woman_boy_boy: "&zwj;&zwj;&zwj;",
        family_man_woman_girl: "&zwj;&zwj;",
        family_man_woman_girl_boy: "&zwj;&zwj;&zwj;",
        family_man_woman_girl_girl: "&zwj;&zwj;&zwj;",
        family_woman_boy: "&zwj;",
        family_woman_boy_boy: "&zwj;&zwj;",
        family_woman_girl: "&zwj;",
        family_woman_girl_boy: "&zwj;&zwj;",
        family_woman_girl_girl: "&zwj;&zwj;",
        family_woman_woman_boy: "&zwj;&zwj;",
        family_woman_woman_boy_boy: "&zwj;&zwj;&zwj;",
        family_woman_woman_girl: "&zwj;&zwj;",
        family_woman_woman_girl_boy: "&zwj;&zwj;&zwj;",
        family_woman_woman_girl_girl: "&zwj;&zwj;&zwj;",
        fast_forward: "",
        fax: "",
        fearful: "",
        feet: "",
        female_detective: "&zwj;",
        ferris_wheel: "",
        ferry: "",
        field_hockey: "",
        file_cabinet: "",
        file_folder: "",
        film_projector: "",
        film_strip: "",
        fire: "",
        fire_engine: "",
        fireworks: "",
        first_quarter_moon: "",
        first_quarter_moon_with_face: "",
        fish: "",
        fish_cake: "",
        fishing_pole_and_fish: "",
        fist_raised: "",
        fist_left: "",
        fist_right: "",
        flags: "",
        flashlight: "",
        fleur_de_lis: "",
        flight_arrival: "",
        flight_departure: "",
        floppy_disk: "",
        flower_playing_cards: "",
        flushed: "",
        fog: "",
        foggy: "",
        football: "",
        footprints: "",
        fork_and_knife: "",
        fountain: "",
        fountain_pen: "",
        four_leaf_clover: "",
        fox_face: "",
        framed_picture: "",
        free: "",
        fried_egg: "",
        fried_shrimp: "",
        fries: "",
        frog: "",
        frowning: "",
        frowning_face: "",
        frowning_man: "&zwj;",
        frowning_woman: "",
        middle_finger: "",
        fuelpump: "",
        full_moon: "",
        full_moon_with_face: "",
        funeral_urn: "",
        game_die: "",
        gear: "",
        gem: "",
        gemini: "",
        ghost: "",
        gift: "",
        gift_heart: "",
        girl: "",
        globe_with_meridians: "",
        goal_net: "",
        goat: "",
        golf: "",
        golfing_man: "",
        golfing_woman: "&zwj;",
        gorilla: "",
        grapes: "",
        green_apple: "",
        green_book: "",
        green_heart: "",
        green_salad: "",
        grey_exclamation: "",
        grey_question: "",
        grimacing: "",
        grin: "",
        grinning: "",
        guardsman: "",
        guardswoman: "&zwj;",
        guitar: "",
        gun: "",
        haircut_woman: "",
        haircut_man: "&zwj;",
        hamburger: "",
        hammer: "",
        hammer_and_pick: "",
        hammer_and_wrench: "",
        hamster: "",
        hand: "",
        handbag: "",
        handshake: "",
        hankey: "",
        hatched_chick: "",
        hatching_chick: "",
        headphones: "",
        hear_no_evil: "",
        heart: "",
        heart_decoration: "",
        heart_eyes: "",
        heart_eyes_cat: "",
        heartbeat: "",
        heartpulse: "",
        hearts: "",
        heavy_check_mark: "",
        heavy_division_sign: "",
        heavy_dollar_sign: "",
        heavy_heart_exclamation: "",
        heavy_minus_sign: "",
        heavy_multiplication_x: "",
        heavy_plus_sign: "",
        helicopter: "",
        herb: "",
        hibiscus: "",
        high_brightness: "",
        high_heel: "",
        hocho: "",
        hole: "",
        honey_pot: "",
        horse: "",
        horse_racing: "",
        hospital: "",
        hot_pepper: "",
        hotdog: "",
        hotel: "",
        hotsprings: "",
        hourglass: "",
        hourglass_flowing_sand: "",
        house: "",
        house_with_garden: "",
        houses: "",
        hugs: "",
        hushed: "",
        ice_cream: "",
        ice_hockey: "",
        ice_skate: "",
        icecream: "",
        id: "",
        ideograph_advantage: "",
        imp: "",
        inbox_tray: "",
        incoming_envelope: "",
        tipping_hand_woman: "",
        information_source: "",
        innocent: "",
        interrobang: "",
        iphone: "",
        izakaya_lantern: "",
        jack_o_lantern: "",
        japan: "",
        japanese_castle: "",
        japanese_goblin: "",
        japanese_ogre: "",
        jeans: "",
        joy: "",
        joy_cat: "",
        joystick: "",
        kaaba: "",
        key: "",
        keyboard: "",
        keycap_ten: "",
        kick_scooter: "",
        kimono: "",
        kiss: "",
        kissing: "",
        kissing_cat: "",
        kissing_closed_eyes: "",
        kissing_heart: "",
        kissing_smiling_eyes: "",
        kiwi_fruit: "",
        koala: "",
        koko: "",
        label: "",
        large_blue_circle: "",
        large_blue_diamond: "",
        large_orange_diamond: "",
        last_quarter_moon: "",
        last_quarter_moon_with_face: "",
        latin_cross: "",
        laughing: "",
        leaves: "",
        ledger: "",
        left_luggage: "",
        left_right_arrow: "",
        leftwards_arrow_with_hook: "",
        lemon: "",
        leo: "",
        leopard: "",
        level_slider: "",
        libra: "",
        light_rail: "",
        link: "",
        lion: "",
        lips: "",
        lipstick: "",
        lizard: "",
        lock: "",
        lock_with_ink_pen: "",
        lollipop: "",
        loop: "",
        loud_sound: "",
        loudspeaker: "",
        love_hotel: "",
        love_letter: "",
        low_brightness: "",
        lying_face: "",
        m: "",
        mag: "",
        mag_right: "",
        mahjong: "",
        mailbox: "",
        mailbox_closed: "",
        mailbox_with_mail: "",
        mailbox_with_no_mail: "",
        man: "",
        man_artist: "&zwj;",
        man_astronaut: "&zwj;",
        man_cartwheeling: "&zwj;",
        man_cook: "&zwj;",
        man_dancing: "",
        man_facepalming: "&zwj;",
        man_factory_worker: "&zwj;",
        man_farmer: "&zwj;",
        man_firefighter: "&zwj;",
        man_health_worker: "&zwj;",
        man_in_tuxedo: "",
        man_judge: "&zwj;",
        man_juggling: "&zwj;",
        man_mechanic: "&zwj;",
        man_office_worker: "&zwj;",
        man_pilot: "&zwj;",
        man_playing_handball: "&zwj;",
        man_playing_water_polo: "&zwj;",
        man_scientist: "&zwj;",
        man_shrugging: "&zwj;",
        man_singer: "&zwj;",
        man_student: "&zwj;",
        man_teacher: "&zwj;",
        man_technologist: "&zwj;",
        man_with_gua_pi_mao: "",
        man_with_turban: "",
        tangerine: "",
        mans_shoe: "",
        mantelpiece_clock: "",
        maple_leaf: "",
        martial_arts_uniform: "",
        mask: "",
        massage_woman: "",
        massage_man: "&zwj;",
        meat_on_bone: "",
        medal_military: "",
        medal_sports: "",
        mega: "",
        melon: "",
        memo: "",
        men_wrestling: "&zwj;",
        menorah: "",
        mens: "",
        metal: "",
        metro: "",
        microphone: "",
        microscope: "",
        milk_glass: "",
        milky_way: "",
        minibus: "",
        minidisc: "",
        mobile_phone_off: "",
        money_mouth_face: "",
        money_with_wings: "",
        moneybag: "",
        monkey: "",
        monkey_face: "",
        monorail: "",
        moon: "",
        mortar_board: "",
        mosque: "",
        motor_boat: "",
        motor_scooter: "",
        motorcycle: "",
        motorway: "",
        mount_fuji: "",
        mountain: "",
        mountain_biking_man: "",
        mountain_biking_woman: "&zwj;",
        mountain_cableway: "",
        mountain_railway: "",
        mountain_snow: "",
        mouse: "",
        mouse2: "",
        movie_camera: "",
        moyai: "",
        mrs_claus: "",
        muscle: "",
        mushroom: "",
        musical_keyboard: "",
        musical_note: "",
        musical_score: "",
        mute: "",
        nail_care: "",
        name_badge: "",
        national_park: "",
        nauseated_face: "",
        necktie: "",
        negative_squared_cross_mark: "",
        nerd_face: "",
        neutral_face: "",
        new: "",
        new_moon: "",
        new_moon_with_face: "",
        newspaper: "",
        newspaper_roll: "",
        next_track_button: "",
        ng: "",
        no_good_man: "&zwj;",
        no_good_woman: "",
        night_with_stars: "",
        no_bell: "",
        no_bicycles: "",
        no_entry: "",
        no_entry_sign: "",
        no_mobile_phones: "",
        no_mouth: "",
        no_pedestrians: "",
        no_smoking: "",
        "non-potable_water": "",
        nose: "",
        notebook: "",
        notebook_with_decorative_cover: "",
        notes: "",
        nut_and_bolt: "",
        o: "",
        o2: "",
        ocean: "",
        octopus: "",
        oden: "",
        office: "",
        oil_drum: "",
        ok: "",
        ok_hand: "",
        ok_man: "&zwj;",
        ok_woman: "",
        old_key: "",
        older_man: "",
        older_woman: "",
        om: "",
        on: "",
        oncoming_automobile: "",
        oncoming_bus: "",
        oncoming_police_car: "",
        oncoming_taxi: "",
        open_file_folder: "",
        open_hands: "",
        open_mouth: "",
        open_umbrella: "",
        ophiuchus: "",
        orange_book: "",
        orthodox_cross: "",
        outbox_tray: "",
        owl: "",
        ox: "",
        package: "",
        page_facing_up: "",
        page_with_curl: "",
        pager: "",
        paintbrush: "",
        palm_tree: "",
        pancakes: "",
        panda_face: "",
        paperclip: "",
        paperclips: "",
        parasol_on_ground: "",
        parking: "",
        part_alternation_mark: "",
        partly_sunny: "",
        passenger_ship: "",
        passport_control: "",
        pause_button: "",
        peace_symbol: "",
        peach: "",
        peanuts: "",
        pear: "",
        pen: "",
        pencil2: "",
        penguin: "",
        pensive: "",
        performing_arts: "",
        persevere: "",
        person_fencing: "",
        pouting_woman: "",
        phone: "",
        pick: "",
        pig: "",
        pig2: "",
        pig_nose: "",
        pill: "",
        pineapple: "",
        ping_pong: "",
        pisces: "",
        pizza: "",
        place_of_worship: "",
        plate_with_cutlery: "",
        play_or_pause_button: "",
        point_down: "",
        point_left: "",
        point_right: "",
        point_up: "",
        point_up_2: "",
        police_car: "",
        policewoman: "&zwj;",
        poodle: "",
        popcorn: "",
        post_office: "",
        postal_horn: "",
        postbox: "",
        potable_water: "",
        potato: "",
        pouch: "",
        poultry_leg: "",
        pound: "",
        rage: "",
        pouting_cat: "",
        pouting_man: "&zwj;",
        pray: "",
        prayer_beads: "",
        pregnant_woman: "",
        previous_track_button: "",
        prince: "",
        princess: "",
        printer: "",
        purple_heart: "",
        purse: "",
        pushpin: "",
        put_litter_in_its_place: "",
        question: "",
        rabbit: "",
        rabbit2: "",
        racehorse: "",
        racing_car: "",
        radio: "",
        radio_button: "",
        radioactive: "",
        railway_car: "",
        railway_track: "",
        rainbow: "",
        rainbow_flag: "&zwj;",
        raised_back_of_hand: "",
        raised_hand_with_fingers_splayed: "",
        raised_hands: "",
        raising_hand_woman: "",
        raising_hand_man: "&zwj;",
        ram: "",
        ramen: "",
        rat: "",
        record_button: "",
        recycle: "",
        red_circle: "",
        registered: "",
        relaxed: "",
        relieved: "",
        reminder_ribbon: "",
        repeat: "",
        repeat_one: "",
        rescue_worker_helmet: "",
        restroom: "",
        revolving_hearts: "",
        rewind: "",
        rhinoceros: "",
        ribbon: "",
        rice: "",
        rice_ball: "",
        rice_cracker: "",
        rice_scene: "",
        right_anger_bubble: "",
        ring: "",
        robot: "",
        rocket: "",
        rofl: "",
        roll_eyes: "",
        roller_coaster: "",
        rooster: "",
        rose: "",
        rosette: "",
        rotating_light: "",
        round_pushpin: "",
        rowing_man: "",
        rowing_woman: "&zwj;",
        rugby_football: "",
        running_man: "",
        running_shirt_with_sash: "",
        running_woman: "&zwj;",
        sa: "",
        sagittarius: "",
        sake: "",
        sandal: "",
        santa: "",
        satellite: "",
        saxophone: "",
        school: "",
        school_satchel: "",
        scissors: "",
        scorpion: "",
        scorpius: "",
        scream: "",
        scream_cat: "",
        scroll: "",
        seat: "",
        secret: "",
        see_no_evil: "",
        seedling: "",
        selfie: "",
        shallow_pan_of_food: "",
        shamrock: "",
        shark: "",
        shaved_ice: "",
        sheep: "",
        shell: "",
        shield: "",
        shinto_shrine: "",
        ship: "",
        shirt: "",
        shopping: "",
        shopping_cart: "",
        shower: "",
        shrimp: "",
        signal_strength: "",
        six_pointed_star: "",
        ski: "",
        skier: "",
        skull: "",
        skull_and_crossbones: "",
        sleeping: "",
        sleeping_bed: "",
        sleepy: "",
        slightly_frowning_face: "",
        slightly_smiling_face: "",
        slot_machine: "",
        small_airplane: "",
        small_blue_diamond: "",
        small_orange_diamond: "",
        small_red_triangle: "",
        small_red_triangle_down: "",
        smile: "",
        smile_cat: "",
        smiley: "",
        smiley_cat: "",
        smiling_imp: "",
        smirk: "",
        smirk_cat: "",
        smoking: "",
        snail: "",
        snake: "",
        sneezing_face: "",
        snowboarder: "",
        snowflake: "",
        snowman: "",
        snowman_with_snow: "",
        sob: "",
        soccer: "",
        soon: "",
        sos: "",
        sound: "",
        space_invader: "",
        spades: "",
        spaghetti: "",
        sparkle: "",
        sparkler: "",
        sparkles: "",
        sparkling_heart: "",
        speak_no_evil: "",
        speaker: "",
        speaking_head: "",
        speech_balloon: "",
        speedboat: "",
        spider: "",
        spider_web: "",
        spiral_calendar: "",
        spiral_notepad: "",
        spoon: "",
        squid: "",
        stadium: "",
        star: "",
        star2: "",
        star_and_crescent: "",
        star_of_david: "",
        stars: "",
        station: "",
        statue_of_liberty: "",
        steam_locomotive: "",
        stew: "",
        stop_button: "",
        stop_sign: "",
        stopwatch: "",
        straight_ruler: "",
        strawberry: "",
        stuck_out_tongue: "",
        stuck_out_tongue_closed_eyes: "",
        stuck_out_tongue_winking_eye: "",
        studio_microphone: "",
        stuffed_flatbread: "",
        sun_behind_large_cloud: "",
        sun_behind_rain_cloud: "",
        sun_behind_small_cloud: "",
        sun_with_face: "",
        sunflower: "",
        sunglasses: "",
        sunny: "",
        sunrise: "",
        sunrise_over_mountains: "",
        surfing_man: "",
        surfing_woman: "&zwj;",
        sushi: "",
        suspension_railway: "",
        sweat: "",
        sweat_drops: "",
        sweat_smile: "",
        sweet_potato: "",
        swimming_man: "",
        swimming_woman: "&zwj;",
        symbols: "",
        synagogue: "",
        syringe: "",
        taco: "",
        tada: "",
        tanabata_tree: "",
        taurus: "",
        taxi: "",
        tea: "",
        telephone_receiver: "",
        telescope: "",
        tennis: "",
        tent: "",
        thermometer: "",
        thinking: "",
        thought_balloon: "",
        ticket: "",
        tickets: "",
        tiger: "",
        tiger2: "",
        timer_clock: "",
        tipping_hand_man: "&zwj;",
        tired_face: "",
        tm: "",
        toilet: "",
        tokyo_tower: "",
        tomato: "",
        tongue: "",
        top: "",
        tophat: "",
        tornado: "",
        trackball: "",
        tractor: "",
        traffic_light: "",
        train: "",
        train2: "",
        tram: "",
        triangular_flag_on_post: "",
        triangular_ruler: "",
        trident: "",
        triumph: "",
        trolleybus: "",
        trophy: "",
        tropical_drink: "",
        tropical_fish: "",
        truck: "",
        trumpet: "",
        tulip: "",
        tumbler_glass: "",
        turkey: "",
        turtle: "",
        tv: "",
        twisted_rightwards_arrows: "",
        two_hearts: "",
        two_men_holding_hands: "",
        two_women_holding_hands: "",
        u5272: "",
        u5408: "",
        u55b6: "",
        u6307: "",
        u6708: "",
        u6709: "",
        u6e80: "",
        u7121: "",
        u7533: "",
        u7981: "",
        u7a7a: "",
        umbrella: "",
        unamused: "",
        underage: "",
        unicorn: "",
        unlock: "",
        up: "",
        upside_down_face: "",
        v: "",
        vertical_traffic_light: "",
        vhs: "",
        vibration_mode: "",
        video_camera: "",
        video_game: "",
        violin: "",
        virgo: "",
        volcano: "",
        volleyball: "",
        vs: "",
        vulcan_salute: "",
        walking_man: "",
        walking_woman: "&zwj;",
        waning_crescent_moon: "",
        waning_gibbous_moon: "",
        warning: "",
        wastebasket: "",
        watch: "",
        water_buffalo: "",
        watermelon: "",
        wave: "",
        wavy_dash: "",
        waxing_crescent_moon: "",
        wc: "",
        weary: "",
        wedding: "",
        weight_lifting_man: "",
        weight_lifting_woman: "&zwj;",
        whale: "",
        whale2: "",
        wheel_of_dharma: "",
        wheelchair: "",
        white_check_mark: "",
        white_circle: "",
        white_flag: "",
        white_flower: "",
        white_large_square: "",
        white_medium_small_square: "",
        white_medium_square: "",
        white_small_square: "",
        white_square_button: "",
        wilted_flower: "",
        wind_chime: "",
        wind_face: "",
        wine_glass: "",
        wink: "",
        wolf: "",
        woman: "",
        woman_artist: "&zwj;",
        woman_astronaut: "&zwj;",
        woman_cartwheeling: "&zwj;",
        woman_cook: "&zwj;",
        woman_facepalming: "&zwj;",
        woman_factory_worker: "&zwj;",
        woman_farmer: "&zwj;",
        woman_firefighter: "&zwj;",
        woman_health_worker: "&zwj;",
        woman_judge: "&zwj;",
        woman_juggling: "&zwj;",
        woman_mechanic: "&zwj;",
        woman_office_worker: "&zwj;",
        woman_pilot: "&zwj;",
        woman_playing_handball: "&zwj;",
        woman_playing_water_polo: "&zwj;",
        woman_scientist: "&zwj;",
        woman_shrugging: "&zwj;",
        woman_singer: "&zwj;",
        woman_student: "&zwj;",
        woman_teacher: "&zwj;",
        woman_technologist: "&zwj;",
        woman_with_turban: "&zwj;",
        womans_clothes: "",
        womans_hat: "",
        women_wrestling: "&zwj;",
        womens: "",
        world_map: "",
        worried: "",
        wrench: "",
        writing_hand: "",
        x: "",
        yellow_heart: "",
        yen: "",
        yin_yang: "",
        yum: "",
        zap: "",
        zipper_mouth_face: "",
        zzz: "",
        /* special emojis :P */
        octocat: '<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',
        showdown: `<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`
      }, a.Converter = function(c) {
        var S = {}, w = [], A = [], N = {}, D = m, M = {
          parsed: {},
          raw: "",
          format: ""
        };
        P();
        function P() {
          c = c || {};
          for (var R in h)
            h.hasOwnProperty(R) && (S[R] = h[R]);
          if (typeof c == "object")
            for (var q in c)
              c.hasOwnProperty(q) && (S[q] = c[q]);
          else
            throw Error("Converter expects the passed parameter to be an object, but " + typeof c + " was passed instead.");
          S.extensions && a.helper.forEach(S.extensions, H);
        }
        function H(R, q) {
          if (q = q || null, a.helper.isString(R))
            if (R = a.helper.stdExtName(R), q = R, a.extensions[R]) {
              console.warn("DEPRECATION WARNING: " + R + " is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"), X(a.extensions[R], R);
              return;
            } else if (!a.helper.isUndefined(l[R]))
              R = l[R];
            else
              throw Error('Extension "' + R + '" could not be loaded. It was either not found or is not a valid extension.');
          typeof R == "function" && (R = R()), a.helper.isArray(R) || (R = [R]);
          var $ = g(R, q);
          if (!$.valid)
            throw Error($.error);
          for (var oe = 0; oe < R.length; ++oe) {
            switch (R[oe].type) {
              case "lang":
                w.push(R[oe]);
                break;
              case "output":
                A.push(R[oe]);
                break;
            }
            if (R[oe].hasOwnProperty("listeners"))
              for (var z in R[oe].listeners)
                R[oe].listeners.hasOwnProperty(z) && F(z, R[oe].listeners[z]);
          }
        }
        function X(R, q) {
          typeof R == "function" && (R = R(new a.Converter())), a.helper.isArray(R) || (R = [R]);
          var $ = g(R, q);
          if (!$.valid)
            throw Error($.error);
          for (var oe = 0; oe < R.length; ++oe)
            switch (R[oe].type) {
              case "lang":
                w.push(R[oe]);
                break;
              case "output":
                A.push(R[oe]);
                break;
              default:
                throw Error("Extension loader error: Type unrecognized!!!");
            }
        }
        function F(R, q) {
          if (!a.helper.isString(R))
            throw Error("Invalid argument in converter.listen() method: name must be a string, but " + typeof R + " given");
          if (typeof q != "function")
            throw Error("Invalid argument in converter.listen() method: callback must be a function, but " + typeof q + " given");
          N.hasOwnProperty(R) || (N[R] = []), N[R].push(q);
        }
        function Q(R) {
          var q = R.match(/^\s*/)[0].length, $ = new RegExp("^\\s{0," + q + "}", "gm");
          return R.replace($, "");
        }
        this._dispatch = function(q, $, oe, z) {
          if (N.hasOwnProperty(q))
            for (var Z = 0; Z < N[q].length; ++Z) {
              var re = N[q][Z](q, $, this, oe, z);
              re && typeof re < "u" && ($ = re);
            }
          return $;
        }, this.listen = function(R, q) {
          return F(R, q), this;
        }, this.makeHtml = function(R) {
          if (!R)
            return R;
          var q = {
            gHtmlBlocks: [],
            gHtmlMdBlocks: [],
            gHtmlSpans: [],
            gUrls: {},
            gTitles: {},
            gDimensions: {},
            gListLevel: 0,
            hashLinkCounts: {},
            langExtensions: w,
            outputModifiers: A,
            converter: this,
            ghCodeBlocks: [],
            metadata: {
              parsed: {},
              raw: "",
              format: ""
            }
          };
          return R = R.replace(//g, "T"), R = R.replace(/\$/g, "D"), R = R.replace(/\r\n/g, `
`), R = R.replace(/\r/g, `
`), R = R.replace(/\u00A0/g, "&nbsp;"), S.smartIndentationFix && (R = Q(R)), R = `

` + R + `

`, R = a.subParser("detab")(R, S, q), R = R.replace(/^[ \t]+$/mg, ""), a.helper.forEach(w, function($) {
            R = a.subParser("runExtension")($, R, S, q);
          }), R = a.subParser("metadata")(R, S, q), R = a.subParser("hashPreCodeTags")(R, S, q), R = a.subParser("githubCodeBlocks")(R, S, q), R = a.subParser("hashHTMLBlocks")(R, S, q), R = a.subParser("hashCodeTags")(R, S, q), R = a.subParser("stripLinkDefinitions")(R, S, q), R = a.subParser("blockGamut")(R, S, q), R = a.subParser("unhashHTMLSpans")(R, S, q), R = a.subParser("unescapeSpecialChars")(R, S, q), R = R.replace(/D/g, "$$"), R = R.replace(/T/g, ""), R = a.subParser("completeHTMLDocument")(R, S, q), a.helper.forEach(A, function($) {
            R = a.subParser("runExtension")($, R, S, q);
          }), M = q.metadata, R;
        }, this.makeMarkdown = this.makeMd = function(R, q) {
          if (R = R.replace(/\r\n/g, `
`), R = R.replace(/\r/g, `
`), R = R.replace(/>[ \t]+</, ">NBSP;<"), !q)
            if (window && window.document)
              q = window.document;
            else
              throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");
          var $ = q.createElement("div");
          $.innerHTML = R;
          var oe = {
            preList: fe($)
          };
          ce($);
          for (var z = $.childNodes, Z = "", re = 0; re < z.length; re++)
            Z += a.subParser("makeMarkdown.node")(z[re], oe);
          function ce(we) {
            for (var te = 0; te < we.childNodes.length; ++te) {
              var _e = we.childNodes[te];
              _e.nodeType === 3 ? !/\S/.test(_e.nodeValue) && !/^[ ]+$/.test(_e.nodeValue) ? (we.removeChild(_e), --te) : (_e.nodeValue = _e.nodeValue.split(`
`).join(" "), _e.nodeValue = _e.nodeValue.replace(/(\s)+/g, "$1")) : _e.nodeType === 1 && ce(_e);
            }
          }
          function fe(we) {
            for (var te = we.querySelectorAll("pre"), _e = [], be = 0; be < te.length; ++be)
              if (te[be].childElementCount === 1 && te[be].firstChild.tagName.toLowerCase() === "code") {
                var Ze = te[be].firstChild.innerHTML.trim(), $e = te[be].firstChild.getAttribute("data-language") || "";
                if ($e === "")
                  for (var Je = te[be].firstChild.className.split(" "), et = 0; et < Je.length; ++et) {
                    var Ht = Je[et].match(/^language-(.+)$/);
                    if (Ht !== null) {
                      $e = Ht[1];
                      break;
                    }
                  }
                Ze = a.helper.unescapeHTMLEntities(Ze), _e.push(Ze), te[be].outerHTML = '<precode language="' + $e + '" precodenum="' + be.toString() + '"></precode>';
              } else
                _e.push(te[be].innerHTML), te[be].innerHTML = "", te[be].setAttribute("prenum", be.toString());
            return _e;
          }
          return Z;
        }, this.setOption = function(R, q) {
          S[R] = q;
        }, this.getOption = function(R) {
          return S[R];
        }, this.getOptions = function() {
          return S;
        }, this.addExtension = function(R, q) {
          q = q || null, H(R, q);
        }, this.useExtension = function(R) {
          H(R);
        }, this.setFlavor = function(R) {
          if (!f.hasOwnProperty(R))
            throw Error(R + " flavor was not found");
          var q = f[R];
          D = R;
          for (var $ in q)
            q.hasOwnProperty($) && (S[$] = q[$]);
        }, this.getFlavor = function() {
          return D;
        }, this.removeExtension = function(R) {
          a.helper.isArray(R) || (R = [R]);
          for (var q = 0; q < R.length; ++q) {
            for (var $ = R[q], oe = 0; oe < w.length; ++oe)
              w[oe] === $ && w.splice(oe, 1);
            for (var z = 0; z < A.length; ++z)
              A[z] === $ && A.splice(z, 1);
          }
        }, this.getAllExtensions = function() {
          return {
            language: w,
            output: A
          };
        }, this.getMetadata = function(R) {
          return R ? M.raw : M.parsed;
        }, this.getMetadataFormat = function() {
          return M.format;
        }, this._setMetadataPair = function(R, q) {
          M.parsed[R] = q;
        }, this._setMetadataFormat = function(R) {
          M.format = R;
        }, this._setMetadataRaw = function(R) {
          M.raw = R;
        };
      }, a.subParser("anchors", function(c, S, w) {
        c = w.converter._dispatch("anchors.before", c, S, w);
        var A = function(N, D, M, P, H, X, F) {
          if (a.helper.isUndefined(F) && (F = ""), M = M.toLowerCase(), N.search(/\(<?\s*>? ?(['"].*['"])?\)$/m) > -1)
            P = "";
          else if (!P)
            if (M || (M = D.toLowerCase().replace(/ ?\n/g, " ")), P = "#" + M, !a.helper.isUndefined(w.gUrls[M]))
              P = w.gUrls[M], a.helper.isUndefined(w.gTitles[M]) || (F = w.gTitles[M]);
            else
              return N;
          P = P.replace(a.helper.regexes.asteriskDashAndColon, a.helper.escapeCharactersCallback);
          var Q = '<a href="' + P + '"';
          return F !== "" && F !== null && (F = F.replace(/"/g, "&quot;"), F = F.replace(a.helper.regexes.asteriskDashAndColon, a.helper.escapeCharactersCallback), Q += ' title="' + F + '"'), S.openLinksInNewWindow && !/^#/.test(P) && (Q += ' rel="noopener noreferrer" target="E95Eblank"'), Q += ">" + D + "</a>", Q;
        };
        return c = c.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g, A), c = c.replace(
          /\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,
          A
        ), c = c.replace(
          /\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,
          A
        ), c = c.replace(/\[([^\[\]]+)]()()()()()/g, A), S.ghMentions && (c = c.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi, function(N, D, M, P, H) {
          if (M === "\\")
            return D + P;
          if (!a.helper.isString(S.ghMentionsLink))
            throw new Error("ghMentionsLink option must be a string");
          var X = S.ghMentionsLink.replace(/\{u}/g, H), F = "";
          return S.openLinksInNewWindow && (F = ' rel="noopener noreferrer" target="E95Eblank"'), D + '<a href="' + X + '"' + F + ">" + P + "</a>";
        })), c = w.converter._dispatch("anchors.after", c, S, w), c;
      });
      var _ = /([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi, b = /([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi, p = /()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi, C = /(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi, k = /<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi, j = function(c) {
        return function(S, w, A, N, D, M, P) {
          A = A.replace(a.helper.regexes.asteriskDashAndColon, a.helper.escapeCharactersCallback);
          var H = A, X = "", F = "", Q = w || "", R = P || "";
          return /^www\./i.test(A) && (A = A.replace(/^www\./i, "http://www.")), c.excludeTrailingPunctuationFromURLs && M && (X = M), c.openLinksInNewWindow && (F = ' rel="noopener noreferrer" target="E95Eblank"'), Q + '<a href="' + A + '"' + F + ">" + H + "</a>" + X + R;
        };
      }, O = function(c, S) {
        return function(w, A, N) {
          var D = "mailto:";
          return A = A || "", N = a.subParser("unescapeSpecialChars")(N, c, S), c.encodeEmails ? (D = a.helper.encodeEmailAddress(D + N), N = a.helper.encodeEmailAddress(N)) : D = D + N, A + '<a href="' + D + '">' + N + "</a>";
        };
      };
      a.subParser("autoLinks", function(c, S, w) {
        return c = w.converter._dispatch("autoLinks.before", c, S, w), c = c.replace(p, j(S)), c = c.replace(k, O(S, w)), c = w.converter._dispatch("autoLinks.after", c, S, w), c;
      }), a.subParser("simplifiedAutoLinks", function(c, S, w) {
        return S.simplifiedAutoLink && (c = w.converter._dispatch("simplifiedAutoLinks.before", c, S, w), S.excludeTrailingPunctuationFromURLs ? c = c.replace(b, j(S)) : c = c.replace(_, j(S)), c = c.replace(C, O(S, w)), c = w.converter._dispatch("simplifiedAutoLinks.after", c, S, w)), c;
      }), a.subParser("blockGamut", function(c, S, w) {
        return c = w.converter._dispatch("blockGamut.before", c, S, w), c = a.subParser("blockQuotes")(c, S, w), c = a.subParser("headers")(c, S, w), c = a.subParser("horizontalRule")(c, S, w), c = a.subParser("lists")(c, S, w), c = a.subParser("codeBlocks")(c, S, w), c = a.subParser("tables")(c, S, w), c = a.subParser("hashHTMLBlocks")(c, S, w), c = a.subParser("paragraphs")(c, S, w), c = w.converter._dispatch("blockGamut.after", c, S, w), c;
      }), a.subParser("blockQuotes", function(c, S, w) {
        c = w.converter._dispatch("blockQuotes.before", c, S, w), c = c + `

`;
        var A = /(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;
        return S.splitAdjacentBlockquotes && (A = /^ {0,3}>[\s\S]*?(?:\n\n)/gm), c = c.replace(A, function(N) {
          return N = N.replace(/^[ \t]*>[ \t]?/gm, ""), N = N.replace(/0/g, ""), N = N.replace(/^[ \t]+$/gm, ""), N = a.subParser("githubCodeBlocks")(N, S, w), N = a.subParser("blockGamut")(N, S, w), N = N.replace(/(^|\n)/g, "$1  "), N = N.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm, function(D, M) {
            var P = M;
            return P = P.replace(/^  /mg, "0"), P = P.replace(/0/g, ""), P;
          }), a.subParser("hashBlock")(`<blockquote>
` + N + `
</blockquote>`, S, w);
        }), c = w.converter._dispatch("blockQuotes.after", c, S, w), c;
      }), a.subParser("codeBlocks", function(c, S, w) {
        c = w.converter._dispatch("codeBlocks.before", c, S, w), c += "0";
        var A = /(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;
        return c = c.replace(A, function(N, D, M) {
          var P = D, H = M, X = `
`;
          return P = a.subParser("outdent")(P, S, w), P = a.subParser("encodeCode")(P, S, w), P = a.subParser("detab")(P, S, w), P = P.replace(/^\n+/g, ""), P = P.replace(/\n+$/g, ""), S.omitExtraWLInCodeBlocks && (X = ""), P = "<pre><code>" + P + X + "</code></pre>", a.subParser("hashBlock")(P, S, w) + H;
        }), c = c.replace(/0/, ""), c = w.converter._dispatch("codeBlocks.after", c, S, w), c;
      }), a.subParser("codeSpans", function(c, S, w) {
        return c = w.converter._dispatch("codeSpans.before", c, S, w), typeof c > "u" && (c = ""), c = c.replace(
          /(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,
          function(A, N, D, M) {
            var P = M;
            return P = P.replace(/^([ \t]*)/g, ""), P = P.replace(/[ \t]*$/g, ""), P = a.subParser("encodeCode")(P, S, w), P = N + "<code>" + P + "</code>", P = a.subParser("hashHTMLSpans")(P, S, w), P;
          }
        ), c = w.converter._dispatch("codeSpans.after", c, S, w), c;
      }), a.subParser("completeHTMLDocument", function(c, S, w) {
        if (!S.completeHTMLDocument)
          return c;
        c = w.converter._dispatch("completeHTMLDocument.before", c, S, w);
        var A = "html", N = `<!DOCTYPE HTML>
`, D = "", M = `<meta charset="utf-8">
`, P = "", H = "";
        typeof w.metadata.parsed.doctype < "u" && (N = "<!DOCTYPE " + w.metadata.parsed.doctype + `>
`, A = w.metadata.parsed.doctype.toString().toLowerCase(), (A === "html" || A === "html5") && (M = '<meta charset="utf-8">'));
        for (var X in w.metadata.parsed)
          if (w.metadata.parsed.hasOwnProperty(X))
            switch (X.toLowerCase()) {
              case "doctype":
                break;
              case "title":
                D = "<title>" + w.metadata.parsed.title + `</title>
`;
                break;
              case "charset":
                A === "html" || A === "html5" ? M = '<meta charset="' + w.metadata.parsed.charset + `">
` : M = '<meta name="charset" content="' + w.metadata.parsed.charset + `">
`;
                break;
              case "language":
              case "lang":
                P = ' lang="' + w.metadata.parsed[X] + '"', H += '<meta name="' + X + '" content="' + w.metadata.parsed[X] + `">
`;
                break;
              default:
                H += '<meta name="' + X + '" content="' + w.metadata.parsed[X] + `">
`;
            }
        return c = N + "<html" + P + `>
<head>
` + D + M + H + `</head>
<body>
` + c.trim() + `
</body>
</html>`, c = w.converter._dispatch("completeHTMLDocument.after", c, S, w), c;
      }), a.subParser("detab", function(c, S, w) {
        return c = w.converter._dispatch("detab.before", c, S, w), c = c.replace(/\t(?=\t)/g, "    "), c = c.replace(/\t/g, "AB"), c = c.replace(/B(.+?)A/g, function(A, N) {
          for (var D = N, M = 4 - D.length % 4, P = 0; P < M; P++)
            D += " ";
          return D;
        }), c = c.replace(/A/g, "    "), c = c.replace(/B/g, ""), c = w.converter._dispatch("detab.after", c, S, w), c;
      }), a.subParser("ellipsis", function(c, S, w) {
        return S.ellipsis && (c = w.converter._dispatch("ellipsis.before", c, S, w), c = c.replace(/\.\.\./g, ""), c = w.converter._dispatch("ellipsis.after", c, S, w)), c;
      }), a.subParser("emoji", function(c, S, w) {
        if (!S.emoji)
          return c;
        c = w.converter._dispatch("emoji.before", c, S, w);
        var A = /:([\S]+?):/g;
        return c = c.replace(A, function(N, D) {
          return a.helper.emojis.hasOwnProperty(D) ? a.helper.emojis[D] : N;
        }), c = w.converter._dispatch("emoji.after", c, S, w), c;
      }), a.subParser("encodeAmpsAndAngles", function(c, S, w) {
        return c = w.converter._dispatch("encodeAmpsAndAngles.before", c, S, w), c = c.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g, "&amp;"), c = c.replace(/<(?![a-z\/?$!])/gi, "&lt;"), c = c.replace(/</g, "&lt;"), c = c.replace(/>/g, "&gt;"), c = w.converter._dispatch("encodeAmpsAndAngles.after", c, S, w), c;
      }), a.subParser("encodeBackslashEscapes", function(c, S, w) {
        return c = w.converter._dispatch("encodeBackslashEscapes.before", c, S, w), c = c.replace(/\\(\\)/g, a.helper.escapeCharactersCallback), c = c.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g, a.helper.escapeCharactersCallback), c = w.converter._dispatch("encodeBackslashEscapes.after", c, S, w), c;
      }), a.subParser("encodeCode", function(c, S, w) {
        return c = w.converter._dispatch("encodeCode.before", c, S, w), c = c.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/([*_{}\[\]\\=~-])/g, a.helper.escapeCharactersCallback), c = w.converter._dispatch("encodeCode.after", c, S, w), c;
      }), a.subParser("escapeSpecialCharsWithinTagAttributes", function(c, S, w) {
        c = w.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before", c, S, w);
        var A = /<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi, N = /<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;
        return c = c.replace(A, function(D) {
          return D.replace(/(.)<\/?code>(?=.)/g, "$1`").replace(/([\\`*_~=|])/g, a.helper.escapeCharactersCallback);
        }), c = c.replace(N, function(D) {
          return D.replace(/([\\`*_~=|])/g, a.helper.escapeCharactersCallback);
        }), c = w.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after", c, S, w), c;
      }), a.subParser("githubCodeBlocks", function(c, S, w) {
        return S.ghCodeBlocks ? (c = w.converter._dispatch("githubCodeBlocks.before", c, S, w), c += "0", c = c.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g, function(A, N, D, M) {
          var P = S.omitExtraWLInCodeBlocks ? "" : `
`;
          return M = a.subParser("encodeCode")(M, S, w), M = a.subParser("detab")(M, S, w), M = M.replace(/^\n+/g, ""), M = M.replace(/\n+$/g, ""), M = "<pre><code" + (D ? ' class="' + D + " language-" + D + '"' : "") + ">" + M + P + "</code></pre>", M = a.subParser("hashBlock")(M, S, w), `

G` + (w.ghCodeBlocks.push({ text: A, codeblock: M }) - 1) + `G

`;
        }), c = c.replace(/0/, ""), w.converter._dispatch("githubCodeBlocks.after", c, S, w)) : c;
      }), a.subParser("hashBlock", function(c, S, w) {
        return c = w.converter._dispatch("hashBlock.before", c, S, w), c = c.replace(/(^\n+|\n+$)/g, ""), c = `

K` + (w.gHtmlBlocks.push(c) - 1) + `K

`, c = w.converter._dispatch("hashBlock.after", c, S, w), c;
      }), a.subParser("hashCodeTags", function(c, S, w) {
        c = w.converter._dispatch("hashCodeTags.before", c, S, w);
        var A = function(N, D, M, P) {
          var H = M + a.subParser("encodeCode")(D, S, w) + P;
          return "C" + (w.gHtmlSpans.push(H) - 1) + "C";
        };
        return c = a.helper.replaceRecursiveRegExp(c, A, "<code\\b[^>]*>", "</code>", "gim"), c = w.converter._dispatch("hashCodeTags.after", c, S, w), c;
      }), a.subParser("hashElement", function(c, S, w) {
        return function(A, N) {
          var D = N;
          return D = D.replace(/\n\n/g, `
`), D = D.replace(/^\n/, ""), D = D.replace(/\n+$/g, ""), D = `

K` + (w.gHtmlBlocks.push(D) - 1) + `K

`, D;
        };
      }), a.subParser("hashHTMLBlocks", function(c, S, w) {
        c = w.converter._dispatch("hashHTMLBlocks.before", c, S, w);
        var A = [
          "pre",
          "div",
          "h1",
          "h2",
          "h3",
          "h4",
          "h5",
          "h6",
          "blockquote",
          "table",
          "dl",
          "ol",
          "ul",
          "script",
          "noscript",
          "form",
          "fieldset",
          "iframe",
          "math",
          "style",
          "section",
          "header",
          "footer",
          "nav",
          "article",
          "aside",
          "address",
          "audio",
          "canvas",
          "figure",
          "hgroup",
          "output",
          "video",
          "p"
        ], N = function(R, q, $, oe) {
          var z = R;
          return $.search(/\bmarkdown\b/) !== -1 && (z = $ + w.converter.makeHtml(q) + oe), `

K` + (w.gHtmlBlocks.push(z) - 1) + `K

`;
        };
        S.backslashEscapesHTMLTags && (c = c.replace(/\\<(\/?[^>]+?)>/g, function(R, q) {
          return "&lt;" + q + "&gt;";
        }));
        for (var D = 0; D < A.length; ++D)
          for (var M, P = new RegExp("^ {0,3}(<" + A[D] + "\\b[^>]*>)", "im"), H = "<" + A[D] + "\\b[^>]*>", X = "</" + A[D] + ">"; (M = a.helper.regexIndexOf(c, P)) !== -1; ) {
            var F = a.helper.splitAtIndex(c, M), Q = a.helper.replaceRecursiveRegExp(F[1], N, H, X, "im");
            if (Q === F[1])
              break;
            c = F[0].concat(Q);
          }
        return c = c.replace(
          /(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,
          a.subParser("hashElement")(c, S, w)
        ), c = a.helper.replaceRecursiveRegExp(c, function(R) {
          return `

K` + (w.gHtmlBlocks.push(R) - 1) + `K

`;
        }, "^ {0,3}<!--", "-->", "gm"), c = c.replace(
          /(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,
          a.subParser("hashElement")(c, S, w)
        ), c = w.converter._dispatch("hashHTMLBlocks.after", c, S, w), c;
      }), a.subParser("hashHTMLSpans", function(c, S, w) {
        c = w.converter._dispatch("hashHTMLSpans.before", c, S, w);
        function A(N) {
          return "C" + (w.gHtmlSpans.push(N) - 1) + "C";
        }
        return c = c.replace(/<[^>]+?\/>/gi, function(N) {
          return A(N);
        }), c = c.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g, function(N) {
          return A(N);
        }), c = c.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g, function(N) {
          return A(N);
        }), c = c.replace(/<[^>]+?>/gi, function(N) {
          return A(N);
        }), c = w.converter._dispatch("hashHTMLSpans.after", c, S, w), c;
      }), a.subParser("unhashHTMLSpans", function(c, S, w) {
        c = w.converter._dispatch("unhashHTMLSpans.before", c, S, w);
        for (var A = 0; A < w.gHtmlSpans.length; ++A) {
          for (var N = w.gHtmlSpans[A], D = 0; /C(\d+)C/.test(N); ) {
            var M = RegExp.$1;
            if (N = N.replace("C" + M + "C", w.gHtmlSpans[M]), D === 10) {
              console.error("maximum nesting of 10 spans reached!!!");
              break;
            }
            ++D;
          }
          c = c.replace("C" + A + "C", N);
        }
        return c = w.converter._dispatch("unhashHTMLSpans.after", c, S, w), c;
      }), a.subParser("hashPreCodeTags", function(c, S, w) {
        c = w.converter._dispatch("hashPreCodeTags.before", c, S, w);
        var A = function(N, D, M, P) {
          var H = M + a.subParser("encodeCode")(D, S, w) + P;
          return `

G` + (w.ghCodeBlocks.push({ text: N, codeblock: H }) - 1) + `G

`;
        };
        return c = a.helper.replaceRecursiveRegExp(c, A, "^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>", "^ {0,3}</code>\\s*</pre>", "gim"), c = w.converter._dispatch("hashPreCodeTags.after", c, S, w), c;
      }), a.subParser("headers", function(c, S, w) {
        c = w.converter._dispatch("headers.before", c, S, w);
        var A = isNaN(parseInt(S.headerLevelStart)) ? 1 : parseInt(S.headerLevelStart), N = S.smoothLivePreview ? /^(.+)[ \t]*\n={2,}[ \t]*\n+/gm : /^(.+)[ \t]*\n=+[ \t]*\n+/gm, D = S.smoothLivePreview ? /^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm : /^(.+)[ \t]*\n-+[ \t]*\n+/gm;
        c = c.replace(N, function(H, X) {
          var F = a.subParser("spanGamut")(X, S, w), Q = S.noHeaderId ? "" : ' id="' + P(X) + '"', R = A, q = "<h" + R + Q + ">" + F + "</h" + R + ">";
          return a.subParser("hashBlock")(q, S, w);
        }), c = c.replace(D, function(H, X) {
          var F = a.subParser("spanGamut")(X, S, w), Q = S.noHeaderId ? "" : ' id="' + P(X) + '"', R = A + 1, q = "<h" + R + Q + ">" + F + "</h" + R + ">";
          return a.subParser("hashBlock")(q, S, w);
        });
        var M = S.requireSpaceBeforeHeadingText ? /^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm : /^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;
        c = c.replace(M, function(H, X, F) {
          var Q = F;
          S.customizedHeaderId && (Q = F.replace(/\s?\{([^{]+?)}\s*$/, ""));
          var R = a.subParser("spanGamut")(Q, S, w), q = S.noHeaderId ? "" : ' id="' + P(F) + '"', $ = A - 1 + X.length, oe = "<h" + $ + q + ">" + R + "</h" + $ + ">";
          return a.subParser("hashBlock")(oe, S, w);
        });
        function P(H) {
          var X, F;
          if (S.customizedHeaderId) {
            var Q = H.match(/\{([^{]+?)}\s*$/);
            Q && Q[1] && (H = Q[1]);
          }
          return X = H, a.helper.isString(S.prefixHeaderId) ? F = S.prefixHeaderId : S.prefixHeaderId === !0 ? F = "section-" : F = "", S.rawPrefixHeaderId || (X = F + X), S.ghCompatibleHeaderId ? X = X.replace(/ /g, "-").replace(/&amp;/g, "").replace(/T/g, "").replace(/D/g, "").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g, "").toLowerCase() : S.rawHeaderId ? X = X.replace(/ /g, "-").replace(/&amp;/g, "&").replace(/T/g, "").replace(/D/g, "$").replace(/["']/g, "-").toLowerCase() : X = X.replace(/[^\w]/g, "").toLowerCase(), S.rawPrefixHeaderId && (X = F + X), w.hashLinkCounts[X] ? X = X + "-" + w.hashLinkCounts[X]++ : w.hashLinkCounts[X] = 1, X;
        }
        return c = w.converter._dispatch("headers.after", c, S, w), c;
      }), a.subParser("horizontalRule", function(c, S, w) {
        c = w.converter._dispatch("horizontalRule.before", c, S, w);
        var A = a.subParser("hashBlock")("<hr />", S, w);
        return c = c.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm, A), c = c.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm, A), c = c.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm, A), c = w.converter._dispatch("horizontalRule.after", c, S, w), c;
      }), a.subParser("images", function(c, S, w) {
        c = w.converter._dispatch("images.before", c, S, w);
        var A = /!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g, N = /!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g, D = /!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g, M = /!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g, P = /!\[([^\[\]]+)]()()()()()/g;
        function H(F, Q, R, q, $, oe, z, Z) {
          return q = q.replace(/\s/g, ""), X(F, Q, R, q, $, oe, z, Z);
        }
        function X(F, Q, R, q, $, oe, z, Z) {
          var re = w.gUrls, ce = w.gTitles, fe = w.gDimensions;
          if (R = R.toLowerCase(), Z || (Z = ""), F.search(/\(<?\s*>? ?(['"].*['"])?\)$/m) > -1)
            q = "";
          else if (q === "" || q === null)
            if ((R === "" || R === null) && (R = Q.toLowerCase().replace(/ ?\n/g, " ")), q = "#" + R, !a.helper.isUndefined(re[R]))
              q = re[R], a.helper.isUndefined(ce[R]) || (Z = ce[R]), a.helper.isUndefined(fe[R]) || ($ = fe[R].width, oe = fe[R].height);
            else
              return F;
          Q = Q.replace(/"/g, "&quot;").replace(a.helper.regexes.asteriskDashAndColon, a.helper.escapeCharactersCallback), q = q.replace(a.helper.regexes.asteriskDashAndColon, a.helper.escapeCharactersCallback);
          var we = '<img src="' + q + '" alt="' + Q + '"';
          return Z && a.helper.isString(Z) && (Z = Z.replace(/"/g, "&quot;").replace(a.helper.regexes.asteriskDashAndColon, a.helper.escapeCharactersCallback), we += ' title="' + Z + '"'), $ && oe && ($ = $ === "*" ? "auto" : $, oe = oe === "*" ? "auto" : oe, we += ' width="' + $ + '"', we += ' height="' + oe + '"'), we += " />", we;
        }
        return c = c.replace(M, X), c = c.replace(D, H), c = c.replace(N, X), c = c.replace(A, X), c = c.replace(P, X), c = w.converter._dispatch("images.after", c, S, w), c;
      }), a.subParser("italicsAndBold", function(c, S, w) {
        c = w.converter._dispatch("italicsAndBold.before", c, S, w);
        function A(N, D, M) {
          return D + N + M;
        }
        return S.literalMidWordUnderscores ? (c = c.replace(/\b___(\S[\s\S]*?)___\b/g, function(N, D) {
          return A(D, "<strong><em>", "</em></strong>");
        }), c = c.replace(/\b__(\S[\s\S]*?)__\b/g, function(N, D) {
          return A(D, "<strong>", "</strong>");
        }), c = c.replace(/\b_(\S[\s\S]*?)_\b/g, function(N, D) {
          return A(D, "<em>", "</em>");
        })) : (c = c.replace(/___(\S[\s\S]*?)___/g, function(N, D) {
          return /\S$/.test(D) ? A(D, "<strong><em>", "</em></strong>") : N;
        }), c = c.replace(/__(\S[\s\S]*?)__/g, function(N, D) {
          return /\S$/.test(D) ? A(D, "<strong>", "</strong>") : N;
        }), c = c.replace(/_([^\s_][\s\S]*?)_/g, function(N, D) {
          return /\S$/.test(D) ? A(D, "<em>", "</em>") : N;
        })), S.literalMidWordAsterisks ? (c = c.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g, function(N, D, M) {
          return A(M, D + "<strong><em>", "</em></strong>");
        }), c = c.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g, function(N, D, M) {
          return A(M, D + "<strong>", "</strong>");
        }), c = c.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g, function(N, D, M) {
          return A(M, D + "<em>", "</em>");
        })) : (c = c.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g, function(N, D) {
          return /\S$/.test(D) ? A(D, "<strong><em>", "</em></strong>") : N;
        }), c = c.replace(/\*\*(\S[\s\S]*?)\*\*/g, function(N, D) {
          return /\S$/.test(D) ? A(D, "<strong>", "</strong>") : N;
        }), c = c.replace(/\*([^\s*][\s\S]*?)\*/g, function(N, D) {
          return /\S$/.test(D) ? A(D, "<em>", "</em>") : N;
        })), c = w.converter._dispatch("italicsAndBold.after", c, S, w), c;
      }), a.subParser("lists", function(c, S, w) {
        function A(M, P) {
          w.gListLevel++, M = M.replace(/\n{2,}$/, `
`), M += "0";
          var H = /(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm, X = /\n[ \t]*\n(?!0)/.test(M);
          return S.disableForced4SpacesIndentedSublists && (H = /(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm), M = M.replace(H, function(F, Q, R, q, $, oe, z) {
            z = z && z.trim() !== "";
            var Z = a.subParser("outdent")($, S, w), re = "";
            return oe && S.tasklists && (re = ' class="task-list-item" style="list-style-type: none;"', Z = Z.replace(/^[ \t]*\[(x|X| )?]/m, function() {
              var ce = '<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';
              return z && (ce += " checked"), ce += ">", ce;
            })), Z = Z.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g, function(ce) {
              return "A" + ce;
            }), Q || Z.search(/\n{2,}/) > -1 ? (Z = a.subParser("githubCodeBlocks")(Z, S, w), Z = a.subParser("blockGamut")(Z, S, w)) : (Z = a.subParser("lists")(Z, S, w), Z = Z.replace(/\n$/, ""), Z = a.subParser("hashHTMLBlocks")(Z, S, w), Z = Z.replace(/\n\n+/g, `

`), X ? Z = a.subParser("paragraphs")(Z, S, w) : Z = a.subParser("spanGamut")(Z, S, w)), Z = Z.replace("A", ""), Z = "<li" + re + ">" + Z + `</li>
`, Z;
          }), M = M.replace(/0/g, ""), w.gListLevel--, P && (M = M.replace(/\s+$/, "")), M;
        }
        function N(M, P) {
          if (P === "ol") {
            var H = M.match(/^ *(\d+)\./);
            if (H && H[1] !== "1")
              return ' start="' + H[1] + '"';
          }
          return "";
        }
        function D(M, P, H) {
          var X = S.disableForced4SpacesIndentedSublists ? /^ ?\d+\.[ \t]/gm : /^ {0,3}\d+\.[ \t]/gm, F = S.disableForced4SpacesIndentedSublists ? /^ ?[*+-][ \t]/gm : /^ {0,3}[*+-][ \t]/gm, Q = P === "ul" ? X : F, R = "";
          if (M.search(Q) !== -1)
            (function $(oe) {
              var z = oe.search(Q), Z = N(M, P);
              z !== -1 ? (R += `

<` + P + Z + `>
` + A(oe.slice(0, z), !!H) + "</" + P + `>
`, P = P === "ul" ? "ol" : "ul", Q = P === "ul" ? X : F, $(oe.slice(z))) : R += `

<` + P + Z + `>
` + A(oe, !!H) + "</" + P + `>
`;
            })(M);
          else {
            var q = N(M, P);
            R = `

<` + P + q + `>
` + A(M, !!H) + "</" + P + `>
`;
          }
          return R;
        }
        return c = w.converter._dispatch("lists.before", c, S, w), c += "0", w.gListLevel ? c = c.replace(
          /^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,
          function(M, P, H) {
            var X = H.search(/[*+-]/g) > -1 ? "ul" : "ol";
            return D(P, X, !0);
          }
        ) : c = c.replace(
          /(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,
          function(M, P, H, X) {
            var F = X.search(/[*+-]/g) > -1 ? "ul" : "ol";
            return D(H, F, !1);
          }
        ), c = c.replace(/0/, ""), c = w.converter._dispatch("lists.after", c, S, w), c;
      }), a.subParser("metadata", function(c, S, w) {
        if (!S.metadata)
          return c;
        c = w.converter._dispatch("metadata.before", c, S, w);
        function A(N) {
          w.metadata.raw = N, N = N.replace(/&/g, "&amp;").replace(/"/g, "&quot;"), N = N.replace(/\n {4}/g, " "), N.replace(/^([\S ]+): +([\s\S]+?)$/gm, function(D, M, P) {
            return w.metadata.parsed[M] = P, "";
          });
        }
        return c = c.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/, function(N, D, M) {
          return A(M), "M";
        }), c = c.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/, function(N, D, M) {
          return D && (w.metadata.format = D), A(M), "M";
        }), c = c.replace(/M/g, ""), c = w.converter._dispatch("metadata.after", c, S, w), c;
      }), a.subParser("outdent", function(c, S, w) {
        return c = w.converter._dispatch("outdent.before", c, S, w), c = c.replace(/^(\t|[ ]{1,4})/gm, "0"), c = c.replace(/0/g, ""), c = w.converter._dispatch("outdent.after", c, S, w), c;
      }), a.subParser("paragraphs", function(c, S, w) {
        c = w.converter._dispatch("paragraphs.before", c, S, w), c = c.replace(/^\n+/g, ""), c = c.replace(/\n+$/g, "");
        for (var A = c.split(/\n{2,}/g), N = [], D = A.length, M = 0; M < D; M++) {
          var P = A[M];
          P.search(/(K|G)(\d+)\1/g) >= 0 ? N.push(P) : P.search(/\S/) >= 0 && (P = a.subParser("spanGamut")(P, S, w), P = P.replace(/^([ \t]*)/g, "<p>"), P += "</p>", N.push(P));
        }
        for (D = N.length, M = 0; M < D; M++) {
          for (var H = "", X = N[M], F = !1; /(K|G)(\d+)\1/.test(X); ) {
            var Q = RegExp.$1, R = RegExp.$2;
            Q === "K" ? H = w.gHtmlBlocks[R] : F ? H = a.subParser("encodeCode")(w.ghCodeBlocks[R].text, S, w) : H = w.ghCodeBlocks[R].codeblock, H = H.replace(/\$/g, "$$$$"), X = X.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/, H), /^<pre\b[^>]*>\s*<code\b[^>]*>/.test(X) && (F = !0);
          }
          N[M] = X;
        }
        return c = N.join(`
`), c = c.replace(/^\n+/g, ""), c = c.replace(/\n+$/g, ""), w.converter._dispatch("paragraphs.after", c, S, w);
      }), a.subParser("runExtension", function(c, S, w, A) {
        if (c.filter)
          S = c.filter(S, A.converter, w);
        else if (c.regex) {
          var N = c.regex;
          N instanceof RegExp || (N = new RegExp(N, "g")), S = S.replace(N, c.replace);
        }
        return S;
      }), a.subParser("spanGamut", function(c, S, w) {
        return c = w.converter._dispatch("spanGamut.before", c, S, w), c = a.subParser("codeSpans")(c, S, w), c = a.subParser("escapeSpecialCharsWithinTagAttributes")(c, S, w), c = a.subParser("encodeBackslashEscapes")(c, S, w), c = a.subParser("images")(c, S, w), c = a.subParser("anchors")(c, S, w), c = a.subParser("autoLinks")(c, S, w), c = a.subParser("simplifiedAutoLinks")(c, S, w), c = a.subParser("emoji")(c, S, w), c = a.subParser("underline")(c, S, w), c = a.subParser("italicsAndBold")(c, S, w), c = a.subParser("strikethrough")(c, S, w), c = a.subParser("ellipsis")(c, S, w), c = a.subParser("hashHTMLSpans")(c, S, w), c = a.subParser("encodeAmpsAndAngles")(c, S, w), S.simpleLineBreaks ? /\n\nK/.test(c) || (c = c.replace(/\n+/g, `<br />
`)) : c = c.replace(/  +\n/g, `<br />
`), c = w.converter._dispatch("spanGamut.after", c, S, w), c;
      }), a.subParser("strikethrough", function(c, S, w) {
        function A(N) {
          return S.simplifiedAutoLink && (N = a.subParser("simplifiedAutoLinks")(N, S, w)), "<del>" + N + "</del>";
        }
        return S.strikethrough && (c = w.converter._dispatch("strikethrough.before", c, S, w), c = c.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g, function(N, D) {
          return A(D);
        }), c = w.converter._dispatch("strikethrough.after", c, S, w)), c;
      }), a.subParser("stripLinkDefinitions", function(c, S, w) {
        var A = /^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm, N = /^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;
        c += "0";
        var D = function(M, P, H, X, F, Q, R) {
          return P = P.toLowerCase(), c.toLowerCase().split(P).length - 1 < 2 ? M : (H.match(/^data:.+?\/.+?;base64,/) ? w.gUrls[P] = H.replace(/\s/g, "") : w.gUrls[P] = a.subParser("encodeAmpsAndAngles")(H, S, w), Q ? Q + R : (R && (w.gTitles[P] = R.replace(/"|'/g, "&quot;")), S.parseImgDimensions && X && F && (w.gDimensions[P] = {
            width: X,
            height: F
          }), ""));
        };
        return c = c.replace(N, D), c = c.replace(A, D), c = c.replace(/0/, ""), c;
      }), a.subParser("tables", function(c, S, w) {
        if (!S.tables)
          return c;
        var A = /^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm, N = /^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;
        function D(F) {
          return /^:[ \t]*--*$/.test(F) ? ' style="text-align:left;"' : /^--*[ \t]*:[ \t]*$/.test(F) ? ' style="text-align:right;"' : /^:[ \t]*--*[ \t]*:$/.test(F) ? ' style="text-align:center;"' : "";
        }
        function M(F, Q) {
          var R = "";
          return F = F.trim(), (S.tablesHeaderId || S.tableHeaderId) && (R = ' id="' + F.replace(/ /g, "_").toLowerCase() + '"'), F = a.subParser("spanGamut")(F, S, w), "<th" + R + Q + ">" + F + `</th>
`;
        }
        function P(F, Q) {
          var R = a.subParser("spanGamut")(F, S, w);
          return "<td" + Q + ">" + R + `</td>
`;
        }
        function H(F, Q) {
          for (var R = `<table>
<thead>
<tr>
`, q = F.length, $ = 0; $ < q; ++$)
            R += F[$];
          for (R += `</tr>
</thead>
<tbody>
`, $ = 0; $ < Q.length; ++$) {
            R += `<tr>
`;
            for (var oe = 0; oe < q; ++oe)
              R += Q[$][oe];
            R += `</tr>
`;
          }
          return R += `</tbody>
</table>
`, R;
        }
        function X(F) {
          var Q, R = F.split(`
`);
          for (Q = 0; Q < R.length; ++Q)
            /^ {0,3}\|/.test(R[Q]) && (R[Q] = R[Q].replace(/^ {0,3}\|/, "")), /\|[ \t]*$/.test(R[Q]) && (R[Q] = R[Q].replace(/\|[ \t]*$/, "")), R[Q] = a.subParser("codeSpans")(R[Q], S, w);
          var q = R[0].split("|").map(function(we) {
            return we.trim();
          }), $ = R[1].split("|").map(function(we) {
            return we.trim();
          }), oe = [], z = [], Z = [], re = [];
          for (R.shift(), R.shift(), Q = 0; Q < R.length; ++Q)
            R[Q].trim() !== "" && oe.push(
              R[Q].split("|").map(function(we) {
                return we.trim();
              })
            );
          if (q.length < $.length)
            return F;
          for (Q = 0; Q < $.length; ++Q)
            Z.push(D($[Q]));
          for (Q = 0; Q < q.length; ++Q)
            a.helper.isUndefined(Z[Q]) && (Z[Q] = ""), z.push(M(q[Q], Z[Q]));
          for (Q = 0; Q < oe.length; ++Q) {
            for (var ce = [], fe = 0; fe < z.length; ++fe)
              a.helper.isUndefined(oe[Q][fe]), ce.push(P(oe[Q][fe], Z[fe]));
            re.push(ce);
          }
          return H(z, re);
        }
        return c = w.converter._dispatch("tables.before", c, S, w), c = c.replace(/\\(\|)/g, a.helper.escapeCharactersCallback), c = c.replace(A, X), c = c.replace(N, X), c = w.converter._dispatch("tables.after", c, S, w), c;
      }), a.subParser("underline", function(c, S, w) {
        return S.underline && (c = w.converter._dispatch("underline.before", c, S, w), S.literalMidWordUnderscores ? (c = c.replace(/\b___(\S[\s\S]*?)___\b/g, function(A, N) {
          return "<u>" + N + "</u>";
        }), c = c.replace(/\b__(\S[\s\S]*?)__\b/g, function(A, N) {
          return "<u>" + N + "</u>";
        })) : (c = c.replace(/___(\S[\s\S]*?)___/g, function(A, N) {
          return /\S$/.test(N) ? "<u>" + N + "</u>" : A;
        }), c = c.replace(/__(\S[\s\S]*?)__/g, function(A, N) {
          return /\S$/.test(N) ? "<u>" + N + "</u>" : A;
        })), c = c.replace(/(_)/g, a.helper.escapeCharactersCallback), c = w.converter._dispatch("underline.after", c, S, w)), c;
      }), a.subParser("unescapeSpecialChars", function(c, S, w) {
        return c = w.converter._dispatch("unescapeSpecialChars.before", c, S, w), c = c.replace(/E(\d+)E/g, function(A, N) {
          var D = parseInt(N);
          return String.fromCharCode(D);
        }), c = w.converter._dispatch("unescapeSpecialChars.after", c, S, w), c;
      }), a.subParser("makeMarkdown.blockquote", function(c, S) {
        var w = "";
        if (c.hasChildNodes())
          for (var A = c.childNodes, N = A.length, D = 0; D < N; ++D) {
            var M = a.subParser("makeMarkdown.node")(A[D], S);
            M !== "" && (w += M);
          }
        return w = w.trim(), w = "> " + w.split(`
`).join(`
> `), w;
      }), a.subParser("makeMarkdown.codeBlock", function(c, S) {
        var w = c.getAttribute("language"), A = c.getAttribute("precodenum");
        return "```" + w + `
` + S.preList[A] + "\n```";
      }), a.subParser("makeMarkdown.codeSpan", function(c) {
        return "`" + c.innerHTML + "`";
      }), a.subParser("makeMarkdown.emphasis", function(c, S) {
        var w = "";
        if (c.hasChildNodes()) {
          w += "*";
          for (var A = c.childNodes, N = A.length, D = 0; D < N; ++D)
            w += a.subParser("makeMarkdown.node")(A[D], S);
          w += "*";
        }
        return w;
      }), a.subParser("makeMarkdown.header", function(c, S, w) {
        var A = new Array(w + 1).join("#"), N = "";
        if (c.hasChildNodes()) {
          N = A + " ";
          for (var D = c.childNodes, M = D.length, P = 0; P < M; ++P)
            N += a.subParser("makeMarkdown.node")(D[P], S);
        }
        return N;
      }), a.subParser("makeMarkdown.hr", function() {
        return "---";
      }), a.subParser("makeMarkdown.image", function(c) {
        var S = "";
        return c.hasAttribute("src") && (S += "![" + c.getAttribute("alt") + "](", S += "<" + c.getAttribute("src") + ">", c.hasAttribute("width") && c.hasAttribute("height") && (S += " =" + c.getAttribute("width") + "x" + c.getAttribute("height")), c.hasAttribute("title") && (S += ' "' + c.getAttribute("title") + '"'), S += ")"), S;
      }), a.subParser("makeMarkdown.links", function(c, S) {
        var w = "";
        if (c.hasChildNodes() && c.hasAttribute("href")) {
          var A = c.childNodes, N = A.length;
          w = "[";
          for (var D = 0; D < N; ++D)
            w += a.subParser("makeMarkdown.node")(A[D], S);
          w += "](", w += "<" + c.getAttribute("href") + ">", c.hasAttribute("title") && (w += ' "' + c.getAttribute("title") + '"'), w += ")";
        }
        return w;
      }), a.subParser("makeMarkdown.list", function(c, S, w) {
        var A = "";
        if (!c.hasChildNodes())
          return "";
        for (var N = c.childNodes, D = N.length, M = c.getAttribute("start") || 1, P = 0; P < D; ++P)
          if (!(typeof N[P].tagName > "u" || N[P].tagName.toLowerCase() !== "li")) {
            var H = "";
            w === "ol" ? H = M.toString() + ". " : H = "- ", A += H + a.subParser("makeMarkdown.listItem")(N[P], S), ++M;
          }
        return A += `
<!-- -->
`, A.trim();
      }), a.subParser("makeMarkdown.listItem", function(c, S) {
        for (var w = "", A = c.childNodes, N = A.length, D = 0; D < N; ++D)
          w += a.subParser("makeMarkdown.node")(A[D], S);
        return /\n$/.test(w) ? w = w.split(`
`).join(`
    `).replace(/^ {4}$/gm, "").replace(/\n\n+/g, `

`) : w += `
`, w;
      }), a.subParser("makeMarkdown.node", function(c, S, w) {
        w = w || !1;
        var A = "";
        if (c.nodeType === 3)
          return a.subParser("makeMarkdown.txt")(c, S);
        if (c.nodeType === 8)
          return "<!--" + c.data + `-->

`;
        if (c.nodeType !== 1)
          return "";
        var N = c.tagName.toLowerCase();
        switch (N) {
          //
          // BLOCKS
          //
          case "h1":
            w || (A = a.subParser("makeMarkdown.header")(c, S, 1) + `

`);
            break;
          case "h2":
            w || (A = a.subParser("makeMarkdown.header")(c, S, 2) + `

`);
            break;
          case "h3":
            w || (A = a.subParser("makeMarkdown.header")(c, S, 3) + `

`);
            break;
          case "h4":
            w || (A = a.subParser("makeMarkdown.header")(c, S, 4) + `

`);
            break;
          case "h5":
            w || (A = a.subParser("makeMarkdown.header")(c, S, 5) + `

`);
            break;
          case "h6":
            w || (A = a.subParser("makeMarkdown.header")(c, S, 6) + `

`);
            break;
          case "p":
            w || (A = a.subParser("makeMarkdown.paragraph")(c, S) + `

`);
            break;
          case "blockquote":
            w || (A = a.subParser("makeMarkdown.blockquote")(c, S) + `

`);
            break;
          case "hr":
            w || (A = a.subParser("makeMarkdown.hr")(c, S) + `

`);
            break;
          case "ol":
            w || (A = a.subParser("makeMarkdown.list")(c, S, "ol") + `

`);
            break;
          case "ul":
            w || (A = a.subParser("makeMarkdown.list")(c, S, "ul") + `

`);
            break;
          case "precode":
            w || (A = a.subParser("makeMarkdown.codeBlock")(c, S) + `

`);
            break;
          case "pre":
            w || (A = a.subParser("makeMarkdown.pre")(c, S) + `

`);
            break;
          case "table":
            w || (A = a.subParser("makeMarkdown.table")(c, S) + `

`);
            break;
          //
          // SPANS
          //
          case "code":
            A = a.subParser("makeMarkdown.codeSpan")(c, S);
            break;
          case "em":
          case "i":
            A = a.subParser("makeMarkdown.emphasis")(c, S);
            break;
          case "strong":
          case "b":
            A = a.subParser("makeMarkdown.strong")(c, S);
            break;
          case "del":
            A = a.subParser("makeMarkdown.strikethrough")(c, S);
            break;
          case "a":
            A = a.subParser("makeMarkdown.links")(c, S);
            break;
          case "img":
            A = a.subParser("makeMarkdown.image")(c, S);
            break;
          default:
            A = c.outerHTML + `

`;
        }
        return A;
      }), a.subParser("makeMarkdown.paragraph", function(c, S) {
        var w = "";
        if (c.hasChildNodes())
          for (var A = c.childNodes, N = A.length, D = 0; D < N; ++D)
            w += a.subParser("makeMarkdown.node")(A[D], S);
        return w = w.trim(), w;
      }), a.subParser("makeMarkdown.pre", function(c, S) {
        var w = c.getAttribute("prenum");
        return "<pre>" + S.preList[w] + "</pre>";
      }), a.subParser("makeMarkdown.strikethrough", function(c, S) {
        var w = "";
        if (c.hasChildNodes()) {
          w += "~~";
          for (var A = c.childNodes, N = A.length, D = 0; D < N; ++D)
            w += a.subParser("makeMarkdown.node")(A[D], S);
          w += "~~";
        }
        return w;
      }), a.subParser("makeMarkdown.strong", function(c, S) {
        var w = "";
        if (c.hasChildNodes()) {
          w += "**";
          for (var A = c.childNodes, N = A.length, D = 0; D < N; ++D)
            w += a.subParser("makeMarkdown.node")(A[D], S);
          w += "**";
        }
        return w;
      }), a.subParser("makeMarkdown.table", function(c, S) {
        var w = "", A = [[], []], N = c.querySelectorAll("thead>tr>th"), D = c.querySelectorAll("tbody>tr"), M, P;
        for (M = 0; M < N.length; ++M) {
          var H = a.subParser("makeMarkdown.tableCell")(N[M], S), X = "---";
          if (N[M].hasAttribute("style")) {
            var F = N[M].getAttribute("style").toLowerCase().replace(/\s/g, "");
            switch (F) {
              case "text-align:left;":
                X = ":---";
                break;
              case "text-align:right;":
                X = "---:";
                break;
              case "text-align:center;":
                X = ":---:";
                break;
            }
          }
          A[0][M] = H.trim(), A[1][M] = X;
        }
        for (M = 0; M < D.length; ++M) {
          var Q = A.push([]) - 1, R = D[M].getElementsByTagName("td");
          for (P = 0; P < N.length; ++P) {
            var q = " ";
            typeof R[P] < "u" && (q = a.subParser("makeMarkdown.tableCell")(R[P], S)), A[Q].push(q);
          }
        }
        var $ = 3;
        for (M = 0; M < A.length; ++M)
          for (P = 0; P < A[M].length; ++P) {
            var oe = A[M][P].length;
            oe > $ && ($ = oe);
          }
        for (M = 0; M < A.length; ++M) {
          for (P = 0; P < A[M].length; ++P)
            M === 1 ? A[M][P].slice(-1) === ":" ? A[M][P] = a.helper.padEnd(A[M][P].slice(-1), $ - 1, "-") + ":" : A[M][P] = a.helper.padEnd(A[M][P], $, "-") : A[M][P] = a.helper.padEnd(A[M][P], $);
          w += "| " + A[M].join(" | ") + ` |
`;
        }
        return w.trim();
      }), a.subParser("makeMarkdown.tableCell", function(c, S) {
        var w = "";
        if (!c.hasChildNodes())
          return "";
        for (var A = c.childNodes, N = A.length, D = 0; D < N; ++D)
          w += a.subParser("makeMarkdown.node")(A[D], S, !0);
        return w.trim();
      }), a.subParser("makeMarkdown.txt", function(c) {
        var S = c.nodeValue;
        return S = S.replace(/ +/g, " "), S = S.replace(/NBSP;/g, " "), S = a.helper.unescapeHTMLEntities(S), S = S.replace(/([*_~|`])/g, "\\$1"), S = S.replace(/^(\s*)>/g, "\\$1>"), S = S.replace(/^#/gm, "\\#"), S = S.replace(/^(\s*)([-=]{3,})(\s*)$/, "$1\\$2$3"), S = S.replace(/^( {0,3}\d+)\./gm, "$1\\."), S = S.replace(/^( {0,3})([+-])/gm, "$1\\$2"), S = S.replace(/]([\s]*)\(/g, "\\]$1\\("), S = S.replace(/^ {0,3}\[([\S \t]*?)]:/gm, "\\[$1]:"), S;
      });
      var I = this;
      t.exports ? t.exports = a : I.showdown = a;
    }).call(dw);
  })(ll)), ll.exports;
}
var hw = fw();
const pw = /* @__PURE__ */ Uf(hw);
var ra = (
  /** @class */
  (function() {
    function t() {
    }
    return t.prototype.diff = function(r, s, a) {
      a === void 0 && (a = {});
      var u;
      typeof a == "function" ? (u = a, a = {}) : "callback" in a && (u = a.callback);
      var l = this.castInput(r, a), h = this.castInput(s, a), m = this.removeEmpty(this.tokenize(l, a)), f = this.removeEmpty(this.tokenize(h, a));
      return this.diffWithOptionsObj(m, f, a, u);
    }, t.prototype.diffWithOptionsObj = function(r, s, a, u) {
      var l = this, h, m = function(c) {
        if (c = l.postProcess(c, a), u) {
          setTimeout(function() {
            u(c);
          }, 0);
          return;
        } else
          return c;
      }, f = s.length, g = r.length, v = 1, E = f + g;
      a.maxEditLength != null && (E = Math.min(E, a.maxEditLength));
      var _ = (h = a.timeout) !== null && h !== void 0 ? h : 1 / 0, b = Date.now() + _, p = [{ oldPos: -1, lastComponent: void 0 }], C = this.extractCommon(p[0], s, r, 0, a);
      if (p[0].oldPos + 1 >= g && C + 1 >= f)
        return m(this.buildValues(p[0].lastComponent, s, r));
      var k = -1 / 0, j = 1 / 0, O = function() {
        for (var c = Math.max(k, -v); c <= Math.min(j, v); c += 2) {
          var S = void 0, w = p[c - 1], A = p[c + 1];
          w && (p[c - 1] = void 0);
          var N = !1;
          if (A) {
            var D = A.oldPos - c;
            N = A && 0 <= D && D < f;
          }
          var M = w && w.oldPos + 1 < g;
          if (!N && !M) {
            p[c] = void 0;
            continue;
          }
          if (!M || N && w.oldPos < A.oldPos ? S = l.addToPath(A, !0, !1, 0, a) : S = l.addToPath(w, !1, !0, 1, a), C = l.extractCommon(S, s, r, c, a), S.oldPos + 1 >= g && C + 1 >= f)
            return m(l.buildValues(S.lastComponent, s, r)) || !0;
          p[c] = S, S.oldPos + 1 >= g && (j = Math.min(j, c - 1)), C + 1 >= f && (k = Math.max(k, c + 1));
        }
        v++;
      };
      if (u)
        (function c() {
          setTimeout(function() {
            if (v > E || Date.now() > b)
              return u(void 0);
            O() || c();
          }, 0);
        })();
      else
        for (; v <= E && Date.now() <= b; ) {
          var I = O();
          if (I)
            return I;
        }
    }, t.prototype.addToPath = function(r, s, a, u, l) {
      var h = r.lastComponent;
      return h && !l.oneChangePerToken && h.added === s && h.removed === a ? {
        oldPos: r.oldPos + u,
        lastComponent: { count: h.count + 1, added: s, removed: a, previousComponent: h.previousComponent }
      } : {
        oldPos: r.oldPos + u,
        lastComponent: { count: 1, added: s, removed: a, previousComponent: h }
      };
    }, t.prototype.extractCommon = function(r, s, a, u, l) {
      for (var h = s.length, m = a.length, f = r.oldPos, g = f - u, v = 0; g + 1 < h && f + 1 < m && this.equals(a[f + 1], s[g + 1], l); )
        g++, f++, v++, l.oneChangePerToken && (r.lastComponent = { count: 1, previousComponent: r.lastComponent, added: !1, removed: !1 });
      return v && !l.oneChangePerToken && (r.lastComponent = { count: v, previousComponent: r.lastComponent, added: !1, removed: !1 }), r.oldPos = f, g;
    }, t.prototype.equals = function(r, s, a) {
      return a.comparator ? a.comparator(r, s) : r === s || !!a.ignoreCase && r.toLowerCase() === s.toLowerCase();
    }, t.prototype.removeEmpty = function(r) {
      for (var s = [], a = 0; a < r.length; a++)
        r[a] && s.push(r[a]);
      return s;
    }, t.prototype.castInput = function(r, s) {
      return r;
    }, t.prototype.tokenize = function(r, s) {
      return Array.from(r);
    }, t.prototype.join = function(r) {
      return r.join("");
    }, t.prototype.postProcess = function(r, s) {
      return r;
    }, Object.defineProperty(t.prototype, "useLongestToken", {
      get: function() {
        return !1;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.buildValues = function(r, s, a) {
      for (var u = [], l; r; )
        u.push(r), l = r.previousComponent, delete r.previousComponent, r = l;
      u.reverse();
      for (var h = u.length, m = 0, f = 0, g = 0; m < h; m++) {
        var v = u[m];
        if (v.removed)
          v.value = this.join(a.slice(g, g + v.count)), g += v.count;
        else {
          if (!v.added && this.useLongestToken) {
            var E = s.slice(f, f + v.count);
            E = E.map(function(_, b) {
              var p = a[g + b];
              return p.length > _.length ? p : _;
            }), v.value = this.join(E);
          } else
            v.value = this.join(s.slice(f, f + v.count));
          f += v.count, v.added || (g += v.count);
        }
      }
      return u;
    }, t;
  })()
), mw = /* @__PURE__ */ (function() {
  var t = function(r, s) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(a, u) {
      a.__proto__ = u;
    } || function(a, u) {
      for (var l in u) Object.prototype.hasOwnProperty.call(u, l) && (a[l] = u[l]);
    }, t(r, s);
  };
  return function(r, s) {
    if (typeof s != "function" && s !== null)
      throw new TypeError("Class extends value " + String(s) + " is not a constructor or null");
    t(r, s);
    function a() {
      this.constructor = r;
    }
    r.prototype = s === null ? Object.create(s) : (a.prototype = s.prototype, new a());
  };
})(), gw = (
  /** @class */
  (function(t) {
    mw(r, t);
    function r() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return r;
  })(ra)
);
new gw();
function wy(t, r) {
  var s;
  for (s = 0; s < t.length && s < r.length; s++)
    if (t[s] != r[s])
      return t.slice(0, s);
  return t.slice(0, s);
}
function Ey(t, r) {
  var s;
  if (!t || !r || t[t.length - 1] != r[r.length - 1])
    return "";
  for (s = 0; s < t.length && s < r.length; s++)
    if (t[t.length - (s + 1)] != r[r.length - (s + 1)])
      return t.slice(-s);
  return t.slice(-s);
}
function Rf(t, r, s) {
  if (t.slice(0, r.length) != r)
    throw Error("string ".concat(JSON.stringify(t), " doesn't start with prefix ").concat(JSON.stringify(r), "; this is a bug"));
  return s + t.slice(r.length);
}
function jf(t, r, s) {
  if (!r)
    return t + s;
  if (t.slice(-r.length) != r)
    throw Error("string ".concat(JSON.stringify(t), " doesn't end with suffix ").concat(JSON.stringify(r), "; this is a bug"));
  return t.slice(0, -r.length) + s;
}
function Hs(t, r) {
  return Rf(t, r, "");
}
function Ju(t, r) {
  return jf(t, r, "");
}
function Cy(t, r) {
  return r.slice(0, vw(t, r));
}
function vw(t, r) {
  var s = 0;
  t.length > r.length && (s = t.length - r.length);
  var a = r.length;
  t.length < r.length && (a = t.length);
  var u = Array(a), l = 0;
  u[0] = 0;
  for (var h = 1; h < a; h++) {
    for (r[h] == r[l] ? u[h] = u[l] : u[h] = l; l > 0 && r[h] != r[l]; )
      l = u[l];
    r[h] == r[l] && l++;
  }
  l = 0;
  for (var m = s; m < t.length; m++) {
    for (; l > 0 && t[m] != r[l]; )
      l = u[l];
    t[m] == r[l] && l++;
  }
  return l;
}
function qs(t) {
  var r;
  for (r = t.length - 1; r >= 0 && t[r].match(/\s/); r--)
    ;
  return t.substring(r + 1);
}
function Qr(t) {
  var r = t.match(/^\s*/);
  return r ? r[0] : "";
}
var ob = /* @__PURE__ */ (function() {
  var t = function(r, s) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(a, u) {
      a.__proto__ = u;
    } || function(a, u) {
      for (var l in u) Object.prototype.hasOwnProperty.call(u, l) && (a[l] = u[l]);
    }, t(r, s);
  };
  return function(r, s) {
    if (typeof s != "function" && s !== null)
      throw new TypeError("Class extends value " + String(s) + " is not a constructor or null");
    t(r, s);
    function a() {
      this.constructor = r;
    }
    r.prototype = s === null ? Object.create(s) : (a.prototype = s.prototype, new a());
  };
})(), bl = "a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}", yw = new RegExp("[".concat(bl, "]+|\\s+|[^").concat(bl, "]"), "ug"), bw = (
  /** @class */
  (function(t) {
    ob(r, t);
    function r() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return r.prototype.equals = function(s, a, u) {
      return u.ignoreCase && (s = s.toLowerCase(), a = a.toLowerCase()), s.trim() === a.trim();
    }, r.prototype.tokenize = function(s, a) {
      a === void 0 && (a = {});
      var u;
      if (a.intlSegmenter) {
        var l = a.intlSegmenter;
        if (l.resolvedOptions().granularity != "word")
          throw new Error('The segmenter passed must have a granularity of "word"');
        u = Array.from(l.segment(s), function(f) {
          return f.segment;
        });
      } else
        u = s.match(yw) || [];
      var h = [], m = null;
      return u.forEach(function(f) {
        /\s/.test(f) ? m == null ? h.push(f) : h.push(h.pop() + f) : m != null && /\s/.test(m) ? h[h.length - 1] == m ? h.push(h.pop() + f) : h.push(m + f) : h.push(f), m = f;
      }), h;
    }, r.prototype.join = function(s) {
      return s.map(function(a, u) {
        return u == 0 ? a : a.replace(/^\s+/, "");
      }).join("");
    }, r.prototype.postProcess = function(s, a) {
      if (!s || a.oneChangePerToken)
        return s;
      var u = null, l = null, h = null;
      return s.forEach(function(m) {
        m.added ? l = m : m.removed ? h = m : ((l || h) && Ay(u, h, l, m), u = m, l = null, h = null);
      }), (l || h) && Ay(u, h, l, null), s;
    }, r;
  })(ra)
), _w = new bw();
function ub(t, r, s) {
  return _w.diff(t, r, s);
}
function Ay(t, r, s, a) {
  if (r && s) {
    var u = Qr(r.value), l = qs(r.value), h = Qr(s.value), m = qs(s.value);
    if (t) {
      var f = wy(u, h);
      t.value = jf(t.value, h, f), r.value = Hs(r.value, f), s.value = Hs(s.value, f);
    }
    if (a) {
      var g = Ey(l, m);
      a.value = Rf(a.value, m, g), r.value = Ju(r.value, g), s.value = Ju(s.value, g);
    }
  } else if (s) {
    if (t) {
      var v = Qr(s.value);
      s.value = s.value.substring(v.length);
    }
    if (a) {
      var v = Qr(a.value);
      a.value = a.value.substring(v.length);
    }
  } else if (t && a) {
    var E = Qr(a.value), _ = Qr(r.value), b = qs(r.value), p = wy(E, _);
    r.value = Hs(r.value, p);
    var C = Ey(Hs(E, p), b);
    r.value = Ju(r.value, C), a.value = Rf(a.value, E, C), t.value = jf(t.value, E, E.slice(0, E.length - C.length));
  } else if (a) {
    var k = Qr(a.value), j = qs(r.value), O = Cy(j, k);
    r.value = Ju(r.value, O);
  } else if (t) {
    var I = qs(t.value), c = Qr(r.value), O = Cy(I, c);
    r.value = Hs(r.value, O);
  }
}
var Sw = (
  /** @class */
  (function(t) {
    ob(r, t);
    function r() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return r.prototype.tokenize = function(s) {
      var a = new RegExp("(\\r?\\n)|[".concat(bl, "]+|[^\\S\\n\\r]+|[^").concat(bl, "]"), "ug");
      return s.match(a) || [];
    }, r;
  })(ra)
);
new Sw();
var ww = /* @__PURE__ */ (function() {
  var t = function(r, s) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(a, u) {
      a.__proto__ = u;
    } || function(a, u) {
      for (var l in u) Object.prototype.hasOwnProperty.call(u, l) && (a[l] = u[l]);
    }, t(r, s);
  };
  return function(r, s) {
    if (typeof s != "function" && s !== null)
      throw new TypeError("Class extends value " + String(s) + " is not a constructor or null");
    t(r, s);
    function a() {
      this.constructor = r;
    }
    r.prototype = s === null ? Object.create(s) : (a.prototype = s.prototype, new a());
  };
})(), Ew = (
  /** @class */
  (function(t) {
    ww(r, t);
    function r() {
      var s = t !== null && t.apply(this, arguments) || this;
      return s.tokenize = lb, s;
    }
    return r.prototype.equals = function(s, a, u) {
      return u.ignoreWhitespace ? ((!u.newlineIsToken || !s.includes(`
`)) && (s = s.trim()), (!u.newlineIsToken || !a.includes(`
`)) && (a = a.trim())) : u.ignoreNewlineAtEof && !u.newlineIsToken && (s.endsWith(`
`) && (s = s.slice(0, -1)), a.endsWith(`
`) && (a = a.slice(0, -1))), t.prototype.equals.call(this, s, a, u);
    }, r;
  })(ra)
);
new Ew();
function lb(t, r) {
  r.stripTrailingCr && (t = t.replace(/\r\n/g, `
`));
  var s = [], a = t.split(/(\n|\r\n)/);
  a[a.length - 1] || a.pop();
  for (var u = 0; u < a.length; u++) {
    var l = a[u];
    u % 2 && !r.newlineIsToken ? s[s.length - 1] += l : s.push(l);
  }
  return s;
}
var Cw = /* @__PURE__ */ (function() {
  var t = function(r, s) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(a, u) {
      a.__proto__ = u;
    } || function(a, u) {
      for (var l in u) Object.prototype.hasOwnProperty.call(u, l) && (a[l] = u[l]);
    }, t(r, s);
  };
  return function(r, s) {
    if (typeof s != "function" && s !== null)
      throw new TypeError("Class extends value " + String(s) + " is not a constructor or null");
    t(r, s);
    function a() {
      this.constructor = r;
    }
    r.prototype = s === null ? Object.create(s) : (a.prototype = s.prototype, new a());
  };
})(), Aw = (
  /** @class */
  (function(t) {
    Cw(r, t);
    function r() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return r.prototype.tokenize = function(s) {
      return s.split(new RegExp("(?<=[.!?])(\\s+|$)"));
    }, r;
  })(ra)
);
new Aw();
var Tw = /* @__PURE__ */ (function() {
  var t = function(r, s) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(a, u) {
      a.__proto__ = u;
    } || function(a, u) {
      for (var l in u) Object.prototype.hasOwnProperty.call(u, l) && (a[l] = u[l]);
    }, t(r, s);
  };
  return function(r, s) {
    if (typeof s != "function" && s !== null)
      throw new TypeError("Class extends value " + String(s) + " is not a constructor or null");
    t(r, s);
    function a() {
      this.constructor = r;
    }
    r.prototype = s === null ? Object.create(s) : (a.prototype = s.prototype, new a());
  };
})(), kw = (
  /** @class */
  (function(t) {
    Tw(r, t);
    function r() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return r.prototype.tokenize = function(s) {
      return s.split(/([{}:;,]|\s+)/);
    }, r;
  })(ra)
);
new kw();
var xw = /* @__PURE__ */ (function() {
  var t = function(r, s) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(a, u) {
      a.__proto__ = u;
    } || function(a, u) {
      for (var l in u) Object.prototype.hasOwnProperty.call(u, l) && (a[l] = u[l]);
    }, t(r, s);
  };
  return function(r, s) {
    if (typeof s != "function" && s !== null)
      throw new TypeError("Class extends value " + String(s) + " is not a constructor or null");
    t(r, s);
    function a() {
      this.constructor = r;
    }
    r.prototype = s === null ? Object.create(s) : (a.prototype = s.prototype, new a());
  };
})(), Nw = (
  /** @class */
  (function(t) {
    xw(r, t);
    function r() {
      var s = t !== null && t.apply(this, arguments) || this;
      return s.tokenize = lb, s;
    }
    return Object.defineProperty(r.prototype, "useLongestToken", {
      get: function() {
        return !0;
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.castInput = function(s, a) {
      var u = a.undefinedReplacement, l = a.stringifyReplacer, h = l === void 0 ? function(m, f) {
        return typeof f > "u" ? u : f;
      } : l;
      return typeof s == "string" ? s : JSON.stringify(Df(s, null, null, h), null, "  ");
    }, r.prototype.equals = function(s, a, u) {
      return t.prototype.equals.call(this, s.replace(/,([\r\n])/g, "$1"), a.replace(/,([\r\n])/g, "$1"), u);
    }, r;
  })(ra)
);
new Nw();
function Df(t, r, s, a, u) {
  r = r || [], s = s || [], a && (t = a(u === void 0 ? "" : u, t));
  var l;
  for (l = 0; l < r.length; l += 1)
    if (r[l] === t)
      return s[l];
  var h;
  if (Object.prototype.toString.call(t) === "[object Array]") {
    for (r.push(t), h = new Array(t.length), s.push(h), l = 0; l < t.length; l += 1)
      h[l] = Df(t[l], r, s, a, String(l));
    return r.pop(), s.pop(), h;
  }
  if (t && t.toJSON && (t = t.toJSON()), typeof t == "object" && t !== null) {
    r.push(t), h = {}, s.push(h);
    var m = [], f;
    for (f in t)
      Object.prototype.hasOwnProperty.call(t, f) && m.push(f);
    for (m.sort(), l = 0; l < m.length; l += 1)
      f = m[l], h[f] = Df(t[f], r, s, a, f);
    r.pop(), s.pop();
  } else
    h = t;
  return h;
}
var Ow = /* @__PURE__ */ (function() {
  var t = function(r, s) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(a, u) {
      a.__proto__ = u;
    } || function(a, u) {
      for (var l in u) Object.prototype.hasOwnProperty.call(u, l) && (a[l] = u[l]);
    }, t(r, s);
  };
  return function(r, s) {
    if (typeof s != "function" && s !== null)
      throw new TypeError("Class extends value " + String(s) + " is not a constructor or null");
    t(r, s);
    function a() {
      this.constructor = r;
    }
    r.prototype = s === null ? Object.create(s) : (a.prototype = s.prototype, new a());
  };
})(), Mw = (
  /** @class */
  (function(t) {
    Ow(r, t);
    function r() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return r.prototype.tokenize = function(s) {
      return s.slice();
    }, r.prototype.join = function(s) {
      return s;
    }, r.prototype.removeEmpty = function(s) {
      return s;
    }, r;
  })(ra)
);
new Mw();
const Ty = "en", ky = {
  en: {
    title: "Compare Changes",
    originalTitle: "Original Content",
    newTitle: "New Content (Suggestion)"
  },
  "zh-CN": {
    title: "",
    originalTitle: "",
    newTitle: ""
  }
}, Rw = ({ originalEntry: t, newEntry: r }) => {
  const a = Oe.getSettings()?.language ?? Ty, u = ky[a] ?? ky[Ty], l = se.useMemo(() => {
    const h = ub(t.content, r.content);
    let m = "", f = "";
    return h.forEach((g) => {
      const E = `<span style="${g.added ? "color: green; background-color: #e6ffed;" : g.removed ? "color: red; background-color: #ffebe9;" : "color: grey;"}">${g.value}</span>`;
      g.added || (m += E), g.removed || (f += E);
    }), { originalHtml: m, newHtml: f };
  }, [t, r]);
  return /* @__PURE__ */ T.jsxs("div", { className: "compare-popup", style: { padding: "10px" }, children: [
    /* @__PURE__ */ T.jsx("h3", { children: u.title }),
    /* @__PURE__ */ T.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "1rem" }, children: [
      /* @__PURE__ */ T.jsxs("div", { style: { flex: "1" }, children: [
        /* @__PURE__ */ T.jsx("h4", { children: u.originalTitle }),
        /* @__PURE__ */ T.jsx(
          "div",
          {
            style: {
              whiteSpace: "pre-wrap",
              fontFamily: "monospace",
              padding: "1rem",
              border: "1px solid #ccc",
              borderRadius: "4px",
              maxHeight: "400px",
              overflowY: "auto"
            },
            dangerouslySetInnerHTML: { __html: l.originalHtml }
          }
        )
      ] }),
      /* @__PURE__ */ T.jsxs("div", { style: { flex: "1" }, children: [
        /* @__PURE__ */ T.jsx("h4", { children: u.newTitle }),
        /* @__PURE__ */ T.jsx(
          "div",
          {
            style: {
              whiteSpace: "pre-wrap",
              fontFamily: "monospace",
              padding: "1rem",
              border: "1px solid #ccc",
              borderRadius: "4px",
              maxHeight: "400px",
              overflowY: "auto"
            },
            dangerouslySetInnerHTML: { __html: l.newHtml }
          }
        )
      ] })
    ] })
  ] });
}, jw = SillyTavern.getContext(), xy = "en", Ny = {
  en: {
    title: "Edit Suggestion",
    nameLabel: "Title",
    keywordsLabel: "Keywords (comma-separated)",
    applyRegexTitle: "Apply Regex Scripts",
    regexPlaceholder: "Select regex scripts...",
    simulateButton: "Simulate Regex",
    contentPlaceholder: "Resulting content..."
  },
  "zh-CN": {
    title: "",
    nameLabel: "",
    keywordsLabel: "",
    applyRegexTitle: "",
    regexPlaceholder: "",
    simulateButton: "",
    contentPlaceholder: ""
  }
}, Dw = se.forwardRef(({ entry: t, initialRegexIds: r }, s) => {
  const [a, u] = se.useState([]), [l, h] = se.useState(t.comment), [m, f] = se.useState(t.key.join(", ")), [g, v] = se.useState(t.content), [E, _] = se.useState([]), p = Oe.getSettings()?.language ?? xy, C = Ny[p] ?? Ny[xy];
  se.useEffect(() => {
    const c = jw.extensionSettings.regex ?? [];
    u(c);
    const S = Object.entries(r).map(([w, A]) => {
      const N = c.find((D) => D.id === w);
      return N ? { id: N.id, label: N.scriptName, enabled: !A?.disabled } : null;
    }).filter((w) => w !== null);
    _(S);
  }, [r]), se.useImperativeHandle(s, () => ({
    getFormData: () => {
      const c = {
        ...t,
        comment: l.trim(),
        key: m.split(",").map((w) => w.trim()).filter(Boolean),
        content: g
      }, S = E.reduce(
        (w, A) => (w[A.id] = { disabled: !A.enabled }, w),
        {}
      );
      return { updatedEntry: c, updatedRegexIds: S };
    }
  }));
  const k = se.useMemo(
    () => a.map((c) => ({ value: c.id, label: c.scriptName })),
    [a]
  ), j = se.useMemo(() => E.map((c) => c.id), [E]), O = se.useCallback(() => {
    let c = t.content;
    const S = E.filter((w) => w.enabled);
    for (const w of S) {
      const A = a.find((N) => N.id === w.id);
      A && (c = N3(A, c));
    }
    v(c);
  }, [E, a, t.content]), I = (c) => {
    const S = c.map((w) => {
      const A = E.find((D) => D.id === w);
      if (A) return A;
      const N = a.find((D) => D.id === w);
      return N ? { id: N.id, label: N.scriptName, enabled: !0 } : null;
    }).filter((w) => w !== null);
    _(S);
  };
  return /* @__PURE__ */ T.jsxs("div", { className: "edit-popup", style: { padding: "10px", display: "flex", flexDirection: "column", gap: "15px" }, children: [
    /* @__PURE__ */ T.jsx("h3", { children: C.title }),
    /* @__PURE__ */ T.jsxs("div", { children: [
      /* @__PURE__ */ T.jsx("label", { children: C.nameLabel }),
      /* @__PURE__ */ T.jsx("input", { type: "text", className: "text_pole", value: l, onChange: (c) => h(c.target.value) })
    ] }),
    /* @__PURE__ */ T.jsxs("div", { children: [
      /* @__PURE__ */ T.jsx("label", { children: C.keywordsLabel }),
      /* @__PURE__ */ T.jsx("input", { type: "text", className: "text_pole", value: m, onChange: (c) => f(c.target.value) })
    ] }),
    /* @__PURE__ */ T.jsxs("div", { children: [
      /* @__PURE__ */ T.jsx("h4", { children: C.applyRegexTitle }),
      /* @__PURE__ */ T.jsx(
        ab,
        {
          items: k,
          value: j,
          onChange: I,
          multiple: !0,
          enableSearch: !0,
          placeholder: C.regexPlaceholder
        }
      ),
      E.length > 0 && /* @__PURE__ */ T.jsx(
        rb,
        {
          items: E,
          onItemsChange: _,
          showToggleButton: !0,
          showDeleteButton: !0,
          sortableJsOptions: { style: { marginTop: "10px" } }
        }
      )
    ] }),
    /* @__PURE__ */ T.jsx(Ae, { onClick: O, className: "menu_button", children: C.simulateButton }),
    /* @__PURE__ */ T.jsx(
      Er,
      {
        value: g,
        onChange: (c) => v(c.target.value),
        rows: 8,
        placeholder: C.contentPlaceholder
      }
    )
  ] });
});
function de(t, r, s) {
  function a(m, f) {
    var g;
    Object.defineProperty(m, "_zod", {
      value: m._zod ?? {},
      enumerable: !1
    }), (g = m._zod).traits ?? (g.traits = /* @__PURE__ */ new Set()), m._zod.traits.add(t), r(m, f);
    for (const v in h.prototype)
      v in m || Object.defineProperty(m, v, { value: h.prototype[v].bind(m) });
    m._zod.constr = h, m._zod.def = f;
  }
  const u = s?.Parent ?? Object;
  class l extends u {
  }
  Object.defineProperty(l, "name", { value: t });
  function h(m) {
    var f;
    const g = s?.Parent ? new l() : this;
    a(g, m), (f = g._zod).deferred ?? (f.deferred = []);
    for (const v of g._zod.deferred)
      v();
    return g;
  }
  return Object.defineProperty(h, "init", { value: a }), Object.defineProperty(h, Symbol.hasInstance, {
    value: (m) => s?.Parent && m instanceof s.Parent ? !0 : m?._zod?.traits?.has(t)
  }), Object.defineProperty(h, "name", { value: t }), h;
}
class ji extends Error {
  constructor() {
    super("Encountered Promise during synchronous parse. Use .parseAsync() instead.");
  }
}
class cb extends Error {
  constructor(r) {
    super(`Encountered unidirectional transform during encode: ${r}`), this.name = "ZodEncodeError";
  }
}
const db = {};
function Ra(t) {
  return db;
}
function fb(t) {
  const r = Object.values(t).filter((a) => typeof a == "number");
  return Object.entries(t).filter(([a, u]) => r.indexOf(+a) === -1).map(([a, u]) => u);
}
function Lf(t, r) {
  return typeof r == "bigint" ? r.toString() : r;
}
function Kf(t) {
  return {
    get value() {
      {
        const r = t();
        return Object.defineProperty(this, "value", { value: r }), r;
      }
    }
  };
}
function Qf(t) {
  return t == null;
}
function Jf(t) {
  const r = t.startsWith("^") ? 1 : 0, s = t.endsWith("$") ? t.length - 1 : t.length;
  return t.slice(r, s);
}
const Oy = Symbol("evaluating");
function ft(t, r, s) {
  let a;
  Object.defineProperty(t, r, {
    get() {
      if (a !== Oy)
        return a === void 0 && (a = Oy, a = s()), a;
    },
    set(u) {
      Object.defineProperty(t, r, {
        value: u
        // configurable: true,
      });
    },
    configurable: !0
  });
}
function Da(t, r, s) {
  Object.defineProperty(t, r, {
    value: s,
    writable: !0,
    enumerable: !0,
    configurable: !0
  });
}
function La(...t) {
  const r = {};
  for (const s of t) {
    const a = Object.getOwnPropertyDescriptors(s);
    Object.assign(r, a);
  }
  return Object.defineProperties({}, r);
}
function My(t) {
  return JSON.stringify(t);
}
const hb = "captureStackTrace" in Error ? Error.captureStackTrace : (...t) => {
};
function _l(t) {
  return typeof t == "object" && t !== null && !Array.isArray(t);
}
const Lw = Kf(() => {
  if (typeof navigator < "u" && navigator?.userAgent?.includes("Cloudflare"))
    return !1;
  try {
    const t = Function;
    return new t(""), !0;
  } catch {
    return !1;
  }
});
function eo(t) {
  if (_l(t) === !1)
    return !1;
  const r = t.constructor;
  if (r === void 0)
    return !0;
  const s = r.prototype;
  return !(_l(s) === !1 || Object.prototype.hasOwnProperty.call(s, "isPrototypeOf") === !1);
}
function pb(t) {
  return eo(t) ? { ...t } : Array.isArray(t) ? [...t] : t;
}
const Pw = /* @__PURE__ */ new Set(["string", "number", "symbol"]);
function kl(t) {
  return t.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
function aa(t, r, s) {
  const a = new t._zod.constr(r ?? t._zod.def);
  return (!r || s?.parent) && (a._zod.parent = t), a;
}
function Pe(t) {
  const r = t;
  if (!r)
    return {};
  if (typeof r == "string")
    return { error: () => r };
  if (r?.message !== void 0) {
    if (r?.error !== void 0)
      throw new Error("Cannot specify both `message` and `error` params");
    r.error = r.message;
  }
  return delete r.message, typeof r.error == "string" ? { ...r, error: () => r.error } : r;
}
function zw(t) {
  return Object.keys(t).filter((r) => t[r]._zod.optin === "optional" && t[r]._zod.optout === "optional");
}
function Iw(t, r) {
  const s = t._zod.def, a = La(t._zod.def, {
    get shape() {
      const u = {};
      for (const l in r) {
        if (!(l in s.shape))
          throw new Error(`Unrecognized key: "${l}"`);
        r[l] && (u[l] = s.shape[l]);
      }
      return Da(this, "shape", u), u;
    },
    checks: []
  });
  return aa(t, a);
}
function Bw(t, r) {
  const s = t._zod.def, a = La(t._zod.def, {
    get shape() {
      const u = { ...t._zod.def.shape };
      for (const l in r) {
        if (!(l in s.shape))
          throw new Error(`Unrecognized key: "${l}"`);
        r[l] && delete u[l];
      }
      return Da(this, "shape", u), u;
    },
    checks: []
  });
  return aa(t, a);
}
function Uw(t, r) {
  if (!eo(r))
    throw new Error("Invalid input to extend: expected a plain object");
  const s = t._zod.def.checks;
  if (s && s.length > 0)
    throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");
  const u = La(t._zod.def, {
    get shape() {
      const l = { ...t._zod.def.shape, ...r };
      return Da(this, "shape", l), l;
    },
    checks: []
  });
  return aa(t, u);
}
function Hw(t, r) {
  if (!eo(r))
    throw new Error("Invalid input to safeExtend: expected a plain object");
  const s = {
    ...t._zod.def,
    get shape() {
      const a = { ...t._zod.def.shape, ...r };
      return Da(this, "shape", a), a;
    },
    checks: t._zod.def.checks
  };
  return aa(t, s);
}
function qw(t, r) {
  const s = La(t._zod.def, {
    get shape() {
      const a = { ...t._zod.def.shape, ...r._zod.def.shape };
      return Da(this, "shape", a), a;
    },
    get catchall() {
      return r._zod.def.catchall;
    },
    checks: []
    // delete existing checks
  });
  return aa(t, s);
}
function Gw(t, r, s) {
  const a = La(r._zod.def, {
    get shape() {
      const u = r._zod.def.shape, l = { ...u };
      if (s)
        for (const h in s) {
          if (!(h in u))
            throw new Error(`Unrecognized key: "${h}"`);
          s[h] && (l[h] = t ? new t({
            type: "optional",
            innerType: u[h]
          }) : u[h]);
        }
      else
        for (const h in u)
          l[h] = t ? new t({
            type: "optional",
            innerType: u[h]
          }) : u[h];
      return Da(this, "shape", l), l;
    },
    checks: []
  });
  return aa(r, a);
}
function Zw(t, r, s) {
  const a = La(r._zod.def, {
    get shape() {
      const u = r._zod.def.shape, l = { ...u };
      if (s)
        for (const h in s) {
          if (!(h in l))
            throw new Error(`Unrecognized key: "${h}"`);
          s[h] && (l[h] = new t({
            type: "nonoptional",
            innerType: u[h]
          }));
        }
      else
        for (const h in u)
          l[h] = new t({
            type: "nonoptional",
            innerType: u[h]
          });
      return Da(this, "shape", l), l;
    },
    checks: []
  });
  return aa(r, a);
}
function Mi(t, r = 0) {
  if (t.aborted === !0)
    return !0;
  for (let s = r; s < t.issues.length; s++)
    if (t.issues[s]?.continue !== !0)
      return !0;
  return !1;
}
function mb(t, r) {
  return r.map((s) => {
    var a;
    return (a = s).path ?? (a.path = []), s.path.unshift(t), s;
  });
}
function Wu(t) {
  return typeof t == "string" ? t : t?.message;
}
function ja(t, r, s) {
  const a = { ...t, path: t.path ?? [] };
  if (!t.message) {
    const u = Wu(t.inst?._zod.def?.error?.(t)) ?? Wu(r?.error?.(t)) ?? Wu(s.customError?.(t)) ?? Wu(s.localeError?.(t)) ?? "Invalid input";
    a.message = u;
  }
  return delete a.inst, delete a.continue, r?.reportInput || delete a.input, a;
}
function Wf(t) {
  return Array.isArray(t) ? "array" : typeof t == "string" ? "string" : "unknown";
}
function to(...t) {
  const [r, s, a] = t;
  return typeof r == "string" ? {
    message: r,
    code: "custom",
    input: s,
    inst: a
  } : { ...r };
}
const gb = (t, r) => {
  t.name = "$ZodError", Object.defineProperty(t, "_zod", {
    value: t._zod,
    enumerable: !1
  }), Object.defineProperty(t, "issues", {
    value: r,
    enumerable: !1
  }), t.message = JSON.stringify(r, Lf, 2), Object.defineProperty(t, "toString", {
    value: () => t.message,
    enumerable: !1
  });
}, vb = de("$ZodError", gb), yb = de("$ZodError", gb, { Parent: Error });
function $w(t, r = (s) => s.message) {
  const s = {}, a = [];
  for (const u of t.issues)
    u.path.length > 0 ? (s[u.path[0]] = s[u.path[0]] || [], s[u.path[0]].push(r(u))) : a.push(r(u));
  return { formErrors: a, fieldErrors: s };
}
function Vw(t, r = (s) => s.message) {
  const s = { _errors: [] }, a = (u) => {
    for (const l of u.issues)
      if (l.code === "invalid_union" && l.errors.length)
        l.errors.map((h) => a({ issues: h }));
      else if (l.code === "invalid_key")
        a({ issues: l.issues });
      else if (l.code === "invalid_element")
        a({ issues: l.issues });
      else if (l.path.length === 0)
        s._errors.push(r(l));
      else {
        let h = s, m = 0;
        for (; m < l.path.length; ) {
          const f = l.path[m];
          m === l.path.length - 1 ? (h[f] = h[f] || { _errors: [] }, h[f]._errors.push(r(l))) : h[f] = h[f] || { _errors: [] }, h = h[f], m++;
        }
      }
  };
  return a(t), s;
}
const eh = (t) => (r, s, a, u) => {
  const l = a ? Object.assign(a, { async: !1 }) : { async: !1 }, h = r._zod.run({ value: s, issues: [] }, l);
  if (h instanceof Promise)
    throw new ji();
  if (h.issues.length) {
    const m = new (u?.Err ?? t)(h.issues.map((f) => ja(f, l, Ra())));
    throw hb(m, u?.callee), m;
  }
  return h.value;
}, th = (t) => async (r, s, a, u) => {
  const l = a ? Object.assign(a, { async: !0 }) : { async: !0 };
  let h = r._zod.run({ value: s, issues: [] }, l);
  if (h instanceof Promise && (h = await h), h.issues.length) {
    const m = new (u?.Err ?? t)(h.issues.map((f) => ja(f, l, Ra())));
    throw hb(m, u?.callee), m;
  }
  return h.value;
}, xl = (t) => (r, s, a) => {
  const u = a ? { ...a, async: !1 } : { async: !1 }, l = r._zod.run({ value: s, issues: [] }, u);
  if (l instanceof Promise)
    throw new ji();
  return l.issues.length ? {
    success: !1,
    error: new (t ?? vb)(l.issues.map((h) => ja(h, u, Ra())))
  } : { success: !0, data: l.value };
}, Yw = /* @__PURE__ */ xl(yb), Nl = (t) => async (r, s, a) => {
  const u = a ? Object.assign(a, { async: !0 }) : { async: !0 };
  let l = r._zod.run({ value: s, issues: [] }, u);
  return l instanceof Promise && (l = await l), l.issues.length ? {
    success: !1,
    error: new t(l.issues.map((h) => ja(h, u, Ra())))
  } : { success: !0, data: l.value };
}, Fw = /* @__PURE__ */ Nl(yb), Xw = (t) => (r, s, a) => {
  const u = a ? Object.assign(a, { direction: "backward" }) : { direction: "backward" };
  return eh(t)(r, s, u);
}, Kw = (t) => (r, s, a) => eh(t)(r, s, a), Qw = (t) => async (r, s, a) => {
  const u = a ? Object.assign(a, { direction: "backward" }) : { direction: "backward" };
  return th(t)(r, s, u);
}, Jw = (t) => async (r, s, a) => th(t)(r, s, a), Ww = (t) => (r, s, a) => {
  const u = a ? Object.assign(a, { direction: "backward" }) : { direction: "backward" };
  return xl(t)(r, s, u);
}, eE = (t) => (r, s, a) => xl(t)(r, s, a), tE = (t) => async (r, s, a) => {
  const u = a ? Object.assign(a, { direction: "backward" }) : { direction: "backward" };
  return Nl(t)(r, s, u);
}, nE = (t) => async (r, s, a) => Nl(t)(r, s, a), rE = /^[cC][^\s-]{8,}$/, aE = /^[0-9a-z]+$/, iE = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/, sE = /^[0-9a-vA-V]{20}$/, oE = /^[A-Za-z0-9]{27}$/, uE = /^[a-zA-Z0-9_-]{21}$/, lE = /^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/, cE = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/, Ry = (t) => t ? new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`) : /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/, dE = /^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/, fE = "^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";
function hE() {
  return new RegExp(fE, "u");
}
const pE = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/, mE = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/, gE = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/, vE = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/, yE = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/, bb = /^[A-Za-z0-9_-]*$/, bE = /^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/, _E = /^\+(?:[0-9]){6,14}[0-9]$/, _b = "(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))", SE = /* @__PURE__ */ new RegExp(`^${_b}$`);
function Sb(t) {
  const r = "(?:[01]\\d|2[0-3]):[0-5]\\d";
  return typeof t.precision == "number" ? t.precision === -1 ? `${r}` : t.precision === 0 ? `${r}:[0-5]\\d` : `${r}:[0-5]\\d\\.\\d{${t.precision}}` : `${r}(?::[0-5]\\d(?:\\.\\d+)?)?`;
}
function wE(t) {
  return new RegExp(`^${Sb(t)}$`);
}
function EE(t) {
  const r = Sb({ precision: t.precision }), s = ["Z"];
  t.local && s.push(""), t.offset && s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");
  const a = `${r}(?:${s.join("|")})`;
  return new RegExp(`^${_b}T(?:${a})$`);
}
const CE = (t) => {
  const r = t ? `[\\s\\S]{${t?.minimum ?? 0},${t?.maximum ?? ""}}` : "[\\s\\S]*";
  return new RegExp(`^${r}$`);
}, AE = /^[^A-Z]*$/, TE = /^[^a-z]*$/, ir = /* @__PURE__ */ de("$ZodCheck", (t, r) => {
  var s;
  t._zod ?? (t._zod = {}), t._zod.def = r, (s = t._zod).onattach ?? (s.onattach = []);
}), kE = /* @__PURE__ */ de("$ZodCheckMaxLength", (t, r) => {
  var s;
  ir.init(t, r), (s = t._zod.def).when ?? (s.when = (a) => {
    const u = a.value;
    return !Qf(u) && u.length !== void 0;
  }), t._zod.onattach.push((a) => {
    const u = a._zod.bag.maximum ?? Number.POSITIVE_INFINITY;
    r.maximum < u && (a._zod.bag.maximum = r.maximum);
  }), t._zod.check = (a) => {
    const u = a.value;
    if (u.length <= r.maximum)
      return;
    const h = Wf(u);
    a.issues.push({
      origin: h,
      code: "too_big",
      maximum: r.maximum,
      inclusive: !0,
      input: u,
      inst: t,
      continue: !r.abort
    });
  };
}), xE = /* @__PURE__ */ de("$ZodCheckMinLength", (t, r) => {
  var s;
  ir.init(t, r), (s = t._zod.def).when ?? (s.when = (a) => {
    const u = a.value;
    return !Qf(u) && u.length !== void 0;
  }), t._zod.onattach.push((a) => {
    const u = a._zod.bag.minimum ?? Number.NEGATIVE_INFINITY;
    r.minimum > u && (a._zod.bag.minimum = r.minimum);
  }), t._zod.check = (a) => {
    const u = a.value;
    if (u.length >= r.minimum)
      return;
    const h = Wf(u);
    a.issues.push({
      origin: h,
      code: "too_small",
      minimum: r.minimum,
      inclusive: !0,
      input: u,
      inst: t,
      continue: !r.abort
    });
  };
}), NE = /* @__PURE__ */ de("$ZodCheckLengthEquals", (t, r) => {
  var s;
  ir.init(t, r), (s = t._zod.def).when ?? (s.when = (a) => {
    const u = a.value;
    return !Qf(u) && u.length !== void 0;
  }), t._zod.onattach.push((a) => {
    const u = a._zod.bag;
    u.minimum = r.length, u.maximum = r.length, u.length = r.length;
  }), t._zod.check = (a) => {
    const u = a.value, l = u.length;
    if (l === r.length)
      return;
    const h = Wf(u), m = l > r.length;
    a.issues.push({
      origin: h,
      ...m ? { code: "too_big", maximum: r.length } : { code: "too_small", minimum: r.length },
      inclusive: !0,
      exact: !0,
      input: a.value,
      inst: t,
      continue: !r.abort
    });
  };
}), Ol = /* @__PURE__ */ de("$ZodCheckStringFormat", (t, r) => {
  var s, a;
  ir.init(t, r), t._zod.onattach.push((u) => {
    const l = u._zod.bag;
    l.format = r.format, r.pattern && (l.patterns ?? (l.patterns = /* @__PURE__ */ new Set()), l.patterns.add(r.pattern));
  }), r.pattern ? (s = t._zod).check ?? (s.check = (u) => {
    r.pattern.lastIndex = 0, !r.pattern.test(u.value) && u.issues.push({
      origin: "string",
      code: "invalid_format",
      format: r.format,
      input: u.value,
      ...r.pattern ? { pattern: r.pattern.toString() } : {},
      inst: t,
      continue: !r.abort
    });
  }) : (a = t._zod).check ?? (a.check = () => {
  });
}), OE = /* @__PURE__ */ de("$ZodCheckRegex", (t, r) => {
  Ol.init(t, r), t._zod.check = (s) => {
    r.pattern.lastIndex = 0, !r.pattern.test(s.value) && s.issues.push({
      origin: "string",
      code: "invalid_format",
      format: "regex",
      input: s.value,
      pattern: r.pattern.toString(),
      inst: t,
      continue: !r.abort
    });
  };
}), ME = /* @__PURE__ */ de("$ZodCheckLowerCase", (t, r) => {
  r.pattern ?? (r.pattern = AE), Ol.init(t, r);
}), RE = /* @__PURE__ */ de("$ZodCheckUpperCase", (t, r) => {
  r.pattern ?? (r.pattern = TE), Ol.init(t, r);
}), jE = /* @__PURE__ */ de("$ZodCheckIncludes", (t, r) => {
  ir.init(t, r);
  const s = kl(r.includes), a = new RegExp(typeof r.position == "number" ? `^.{${r.position}}${s}` : s);
  r.pattern = a, t._zod.onattach.push((u) => {
    const l = u._zod.bag;
    l.patterns ?? (l.patterns = /* @__PURE__ */ new Set()), l.patterns.add(a);
  }), t._zod.check = (u) => {
    u.value.includes(r.includes, r.position) || u.issues.push({
      origin: "string",
      code: "invalid_format",
      format: "includes",
      includes: r.includes,
      input: u.value,
      inst: t,
      continue: !r.abort
    });
  };
}), DE = /* @__PURE__ */ de("$ZodCheckStartsWith", (t, r) => {
  ir.init(t, r);
  const s = new RegExp(`^${kl(r.prefix)}.*`);
  r.pattern ?? (r.pattern = s), t._zod.onattach.push((a) => {
    const u = a._zod.bag;
    u.patterns ?? (u.patterns = /* @__PURE__ */ new Set()), u.patterns.add(s);
  }), t._zod.check = (a) => {
    a.value.startsWith(r.prefix) || a.issues.push({
      origin: "string",
      code: "invalid_format",
      format: "starts_with",
      prefix: r.prefix,
      input: a.value,
      inst: t,
      continue: !r.abort
    });
  };
}), LE = /* @__PURE__ */ de("$ZodCheckEndsWith", (t, r) => {
  ir.init(t, r);
  const s = new RegExp(`.*${kl(r.suffix)}$`);
  r.pattern ?? (r.pattern = s), t._zod.onattach.push((a) => {
    const u = a._zod.bag;
    u.patterns ?? (u.patterns = /* @__PURE__ */ new Set()), u.patterns.add(s);
  }), t._zod.check = (a) => {
    a.value.endsWith(r.suffix) || a.issues.push({
      origin: "string",
      code: "invalid_format",
      format: "ends_with",
      suffix: r.suffix,
      input: a.value,
      inst: t,
      continue: !r.abort
    });
  };
}), PE = /* @__PURE__ */ de("$ZodCheckOverwrite", (t, r) => {
  ir.init(t, r), t._zod.check = (s) => {
    s.value = r.tx(s.value);
  };
});
class zE {
  constructor(r = []) {
    this.content = [], this.indent = 0, this && (this.args = r);
  }
  indented(r) {
    this.indent += 1, r(this), this.indent -= 1;
  }
  write(r) {
    if (typeof r == "function") {
      r(this, { execution: "sync" }), r(this, { execution: "async" });
      return;
    }
    const a = r.split(`
`).filter((h) => h), u = Math.min(...a.map((h) => h.length - h.trimStart().length)), l = a.map((h) => h.slice(u)).map((h) => " ".repeat(this.indent * 2) + h);
    for (const h of l)
      this.content.push(h);
  }
  compile() {
    const r = Function, s = this?.args, u = [...(this?.content ?? [""]).map((l) => `  ${l}`)];
    return new r(...s, u.join(`
`));
  }
}
const IE = {
  major: 4,
  minor: 1,
  patch: 12
}, Lt = /* @__PURE__ */ de("$ZodType", (t, r) => {
  var s;
  t ?? (t = {}), t._zod.def = r, t._zod.bag = t._zod.bag || {}, t._zod.version = IE;
  const a = [...t._zod.def.checks ?? []];
  t._zod.traits.has("$ZodCheck") && a.unshift(t);
  for (const u of a)
    for (const l of u._zod.onattach)
      l(t);
  if (a.length === 0)
    (s = t._zod).deferred ?? (s.deferred = []), t._zod.deferred?.push(() => {
      t._zod.run = t._zod.parse;
    });
  else {
    const u = (h, m, f) => {
      let g = Mi(h), v;
      for (const E of m) {
        if (E._zod.def.when) {
          if (!E._zod.def.when(h))
            continue;
        } else if (g)
          continue;
        const _ = h.issues.length, b = E._zod.check(h);
        if (b instanceof Promise && f?.async === !1)
          throw new ji();
        if (v || b instanceof Promise)
          v = (v ?? Promise.resolve()).then(async () => {
            await b, h.issues.length !== _ && (g || (g = Mi(h, _)));
          });
        else {
          if (h.issues.length === _)
            continue;
          g || (g = Mi(h, _));
        }
      }
      return v ? v.then(() => h) : h;
    }, l = (h, m, f) => {
      if (Mi(h))
        return h.aborted = !0, h;
      const g = u(m, a, f);
      if (g instanceof Promise) {
        if (f.async === !1)
          throw new ji();
        return g.then((v) => t._zod.parse(v, f));
      }
      return t._zod.parse(g, f);
    };
    t._zod.run = (h, m) => {
      if (m.skipChecks)
        return t._zod.parse(h, m);
      if (m.direction === "backward") {
        const g = t._zod.parse({ value: h.value, issues: [] }, { ...m, skipChecks: !0 });
        return g instanceof Promise ? g.then((v) => l(v, h, m)) : l(g, h, m);
      }
      const f = t._zod.parse(h, m);
      if (f instanceof Promise) {
        if (m.async === !1)
          throw new ji();
        return f.then((g) => u(g, a, m));
      }
      return u(f, a, m);
    };
  }
  t["~standard"] = {
    validate: (u) => {
      try {
        const l = Yw(t, u);
        return l.success ? { value: l.data } : { issues: l.error?.issues };
      } catch {
        return Fw(t, u).then((h) => h.success ? { value: h.data } : { issues: h.error?.issues });
      }
    },
    vendor: "zod",
    version: 1
  };
}), nh = /* @__PURE__ */ de("$ZodString", (t, r) => {
  Lt.init(t, r), t._zod.pattern = [...t?._zod.bag?.patterns ?? []].pop() ?? CE(t._zod.bag), t._zod.parse = (s, a) => {
    if (r.coerce)
      try {
        s.value = String(s.value);
      } catch {
      }
    return typeof s.value == "string" || s.issues.push({
      expected: "string",
      code: "invalid_type",
      input: s.value,
      inst: t
    }), s;
  };
}), gt = /* @__PURE__ */ de("$ZodStringFormat", (t, r) => {
  Ol.init(t, r), nh.init(t, r);
}), BE = /* @__PURE__ */ de("$ZodGUID", (t, r) => {
  r.pattern ?? (r.pattern = cE), gt.init(t, r);
}), UE = /* @__PURE__ */ de("$ZodUUID", (t, r) => {
  if (r.version) {
    const a = {
      v1: 1,
      v2: 2,
      v3: 3,
      v4: 4,
      v5: 5,
      v6: 6,
      v7: 7,
      v8: 8
    }[r.version];
    if (a === void 0)
      throw new Error(`Invalid UUID version: "${r.version}"`);
    r.pattern ?? (r.pattern = Ry(a));
  } else
    r.pattern ?? (r.pattern = Ry());
  gt.init(t, r);
}), HE = /* @__PURE__ */ de("$ZodEmail", (t, r) => {
  r.pattern ?? (r.pattern = dE), gt.init(t, r);
}), qE = /* @__PURE__ */ de("$ZodURL", (t, r) => {
  gt.init(t, r), t._zod.check = (s) => {
    try {
      const a = s.value.trim(), u = new URL(a);
      r.hostname && (r.hostname.lastIndex = 0, r.hostname.test(u.hostname) || s.issues.push({
        code: "invalid_format",
        format: "url",
        note: "Invalid hostname",
        pattern: bE.source,
        input: s.value,
        inst: t,
        continue: !r.abort
      })), r.protocol && (r.protocol.lastIndex = 0, r.protocol.test(u.protocol.endsWith(":") ? u.protocol.slice(0, -1) : u.protocol) || s.issues.push({
        code: "invalid_format",
        format: "url",
        note: "Invalid protocol",
        pattern: r.protocol.source,
        input: s.value,
        inst: t,
        continue: !r.abort
      })), r.normalize ? s.value = u.href : s.value = a;
      return;
    } catch {
      s.issues.push({
        code: "invalid_format",
        format: "url",
        input: s.value,
        inst: t,
        continue: !r.abort
      });
    }
  };
}), GE = /* @__PURE__ */ de("$ZodEmoji", (t, r) => {
  r.pattern ?? (r.pattern = hE()), gt.init(t, r);
}), ZE = /* @__PURE__ */ de("$ZodNanoID", (t, r) => {
  r.pattern ?? (r.pattern = uE), gt.init(t, r);
}), $E = /* @__PURE__ */ de("$ZodCUID", (t, r) => {
  r.pattern ?? (r.pattern = rE), gt.init(t, r);
}), VE = /* @__PURE__ */ de("$ZodCUID2", (t, r) => {
  r.pattern ?? (r.pattern = aE), gt.init(t, r);
}), YE = /* @__PURE__ */ de("$ZodULID", (t, r) => {
  r.pattern ?? (r.pattern = iE), gt.init(t, r);
}), FE = /* @__PURE__ */ de("$ZodXID", (t, r) => {
  r.pattern ?? (r.pattern = sE), gt.init(t, r);
}), XE = /* @__PURE__ */ de("$ZodKSUID", (t, r) => {
  r.pattern ?? (r.pattern = oE), gt.init(t, r);
}), KE = /* @__PURE__ */ de("$ZodISODateTime", (t, r) => {
  r.pattern ?? (r.pattern = EE(r)), gt.init(t, r);
}), QE = /* @__PURE__ */ de("$ZodISODate", (t, r) => {
  r.pattern ?? (r.pattern = SE), gt.init(t, r);
}), JE = /* @__PURE__ */ de("$ZodISOTime", (t, r) => {
  r.pattern ?? (r.pattern = wE(r)), gt.init(t, r);
}), WE = /* @__PURE__ */ de("$ZodISODuration", (t, r) => {
  r.pattern ?? (r.pattern = lE), gt.init(t, r);
}), eC = /* @__PURE__ */ de("$ZodIPv4", (t, r) => {
  r.pattern ?? (r.pattern = pE), gt.init(t, r), t._zod.onattach.push((s) => {
    const a = s._zod.bag;
    a.format = "ipv4";
  });
}), tC = /* @__PURE__ */ de("$ZodIPv6", (t, r) => {
  r.pattern ?? (r.pattern = mE), gt.init(t, r), t._zod.onattach.push((s) => {
    const a = s._zod.bag;
    a.format = "ipv6";
  }), t._zod.check = (s) => {
    try {
      new URL(`http://[${s.value}]`);
    } catch {
      s.issues.push({
        code: "invalid_format",
        format: "ipv6",
        input: s.value,
        inst: t,
        continue: !r.abort
      });
    }
  };
}), nC = /* @__PURE__ */ de("$ZodCIDRv4", (t, r) => {
  r.pattern ?? (r.pattern = gE), gt.init(t, r);
}), rC = /* @__PURE__ */ de("$ZodCIDRv6", (t, r) => {
  r.pattern ?? (r.pattern = vE), gt.init(t, r), t._zod.check = (s) => {
    const a = s.value.split("/");
    try {
      if (a.length !== 2)
        throw new Error();
      const [u, l] = a;
      if (!l)
        throw new Error();
      const h = Number(l);
      if (`${h}` !== l)
        throw new Error();
      if (h < 0 || h > 128)
        throw new Error();
      new URL(`http://[${u}]`);
    } catch {
      s.issues.push({
        code: "invalid_format",
        format: "cidrv6",
        input: s.value,
        inst: t,
        continue: !r.abort
      });
    }
  };
});
function wb(t) {
  if (t === "")
    return !0;
  if (t.length % 4 !== 0)
    return !1;
  try {
    return atob(t), !0;
  } catch {
    return !1;
  }
}
const aC = /* @__PURE__ */ de("$ZodBase64", (t, r) => {
  r.pattern ?? (r.pattern = yE), gt.init(t, r), t._zod.onattach.push((s) => {
    s._zod.bag.contentEncoding = "base64";
  }), t._zod.check = (s) => {
    wb(s.value) || s.issues.push({
      code: "invalid_format",
      format: "base64",
      input: s.value,
      inst: t,
      continue: !r.abort
    });
  };
});
function iC(t) {
  if (!bb.test(t))
    return !1;
  const r = t.replace(/[-_]/g, (a) => a === "-" ? "+" : "/"), s = r.padEnd(Math.ceil(r.length / 4) * 4, "=");
  return wb(s);
}
const sC = /* @__PURE__ */ de("$ZodBase64URL", (t, r) => {
  r.pattern ?? (r.pattern = bb), gt.init(t, r), t._zod.onattach.push((s) => {
    s._zod.bag.contentEncoding = "base64url";
  }), t._zod.check = (s) => {
    iC(s.value) || s.issues.push({
      code: "invalid_format",
      format: "base64url",
      input: s.value,
      inst: t,
      continue: !r.abort
    });
  };
}), oC = /* @__PURE__ */ de("$ZodE164", (t, r) => {
  r.pattern ?? (r.pattern = _E), gt.init(t, r);
});
function uC(t, r = null) {
  try {
    const s = t.split(".");
    if (s.length !== 3)
      return !1;
    const [a] = s;
    if (!a)
      return !1;
    const u = JSON.parse(atob(a));
    return !("typ" in u && u?.typ !== "JWT" || !u.alg || r && (!("alg" in u) || u.alg !== r));
  } catch {
    return !1;
  }
}
const lC = /* @__PURE__ */ de("$ZodJWT", (t, r) => {
  gt.init(t, r), t._zod.check = (s) => {
    uC(s.value, r.alg) || s.issues.push({
      code: "invalid_format",
      format: "jwt",
      input: s.value,
      inst: t,
      continue: !r.abort
    });
  };
}), cC = /* @__PURE__ */ de("$ZodUnknown", (t, r) => {
  Lt.init(t, r), t._zod.parse = (s) => s;
}), dC = /* @__PURE__ */ de("$ZodNever", (t, r) => {
  Lt.init(t, r), t._zod.parse = (s, a) => (s.issues.push({
    expected: "never",
    code: "invalid_type",
    input: s.value,
    inst: t
  }), s);
});
function jy(t, r, s) {
  t.issues.length && r.issues.push(...mb(s, t.issues)), r.value[s] = t.value;
}
const fC = /* @__PURE__ */ de("$ZodArray", (t, r) => {
  Lt.init(t, r), t._zod.parse = (s, a) => {
    const u = s.value;
    if (!Array.isArray(u))
      return s.issues.push({
        expected: "array",
        code: "invalid_type",
        input: u,
        inst: t
      }), s;
    s.value = Array(u.length);
    const l = [];
    for (let h = 0; h < u.length; h++) {
      const m = u[h], f = r.element._zod.run({
        value: m,
        issues: []
      }, a);
      f instanceof Promise ? l.push(f.then((g) => jy(g, s, h))) : jy(f, s, h);
    }
    return l.length ? Promise.all(l).then(() => s) : s;
  };
});
function Sl(t, r, s, a) {
  t.issues.length && r.issues.push(...mb(s, t.issues)), t.value === void 0 ? s in a && (r.value[s] = void 0) : r.value[s] = t.value;
}
function Eb(t) {
  const r = Object.keys(t.shape);
  for (const a of r)
    if (!t.shape?.[a]?._zod?.traits?.has("$ZodType"))
      throw new Error(`Invalid element at key "${a}": expected a Zod schema`);
  const s = zw(t.shape);
  return {
    ...t,
    keys: r,
    keySet: new Set(r),
    numKeys: r.length,
    optionalKeys: new Set(s)
  };
}
function Cb(t, r, s, a, u, l) {
  const h = [], m = u.keySet, f = u.catchall._zod, g = f.def.type;
  for (const v of Object.keys(r)) {
    if (m.has(v))
      continue;
    if (g === "never") {
      h.push(v);
      continue;
    }
    const E = f.run({ value: r[v], issues: [] }, a);
    E instanceof Promise ? t.push(E.then((_) => Sl(_, s, v, r))) : Sl(E, s, v, r);
  }
  return h.length && s.issues.push({
    code: "unrecognized_keys",
    keys: h,
    input: r,
    inst: l
  }), t.length ? Promise.all(t).then(() => s) : s;
}
const hC = /* @__PURE__ */ de("$ZodObject", (t, r) => {
  if (Lt.init(t, r), !Object.getOwnPropertyDescriptor(r, "shape")?.get) {
    const m = r.shape;
    Object.defineProperty(r, "shape", {
      get: () => {
        const f = { ...m };
        return Object.defineProperty(r, "shape", {
          value: f
        }), f;
      }
    });
  }
  const a = Kf(() => Eb(r));
  ft(t._zod, "propValues", () => {
    const m = r.shape, f = {};
    for (const g in m) {
      const v = m[g]._zod;
      if (v.values) {
        f[g] ?? (f[g] = /* @__PURE__ */ new Set());
        for (const E of v.values)
          f[g].add(E);
      }
    }
    return f;
  });
  const u = _l, l = r.catchall;
  let h;
  t._zod.parse = (m, f) => {
    h ?? (h = a.value);
    const g = m.value;
    if (!u(g))
      return m.issues.push({
        expected: "object",
        code: "invalid_type",
        input: g,
        inst: t
      }), m;
    m.value = {};
    const v = [], E = h.shape;
    for (const _ of h.keys) {
      const p = E[_]._zod.run({ value: g[_], issues: [] }, f);
      p instanceof Promise ? v.push(p.then((C) => Sl(C, m, _, g))) : Sl(p, m, _, g);
    }
    return l ? Cb(v, g, m, f, a.value, t) : v.length ? Promise.all(v).then(() => m) : m;
  };
}), pC = /* @__PURE__ */ de("$ZodObjectJIT", (t, r) => {
  hC.init(t, r);
  const s = t._zod.parse, a = Kf(() => Eb(r)), u = (_) => {
    const b = new zE(["shape", "payload", "ctx"]), p = a.value, C = (I) => {
      const c = My(I);
      return `shape[${c}]._zod.run({ value: input[${c}], issues: [] }, ctx)`;
    };
    b.write("const input = payload.value;");
    const k = /* @__PURE__ */ Object.create(null);
    let j = 0;
    for (const I of p.keys)
      k[I] = `key_${j++}`;
    b.write("const newResult = {};");
    for (const I of p.keys) {
      const c = k[I], S = My(I);
      b.write(`const ${c} = ${C(I)};`), b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${S}, ...iss.path] : [${S}]
          })));
        }
        
        
        if (${c}.value === undefined) {
          if (${S} in input) {
            newResult[${S}] = undefined;
          }
        } else {
          newResult[${S}] = ${c}.value;
        }
        
      `);
    }
    b.write("payload.value = newResult;"), b.write("return payload;");
    const O = b.compile();
    return (I, c) => O(_, I, c);
  };
  let l;
  const h = _l, m = !db.jitless, g = m && Lw.value, v = r.catchall;
  let E;
  t._zod.parse = (_, b) => {
    E ?? (E = a.value);
    const p = _.value;
    return h(p) ? m && g && b?.async === !1 && b.jitless !== !0 ? (l || (l = u(r.shape)), _ = l(_, b), v ? Cb([], p, _, b, E, t) : _) : s(_, b) : (_.issues.push({
      expected: "object",
      code: "invalid_type",
      input: p,
      inst: t
    }), _);
  };
});
function Dy(t, r, s, a) {
  for (const l of t)
    if (l.issues.length === 0)
      return r.value = l.value, r;
  const u = t.filter((l) => !Mi(l));
  return u.length === 1 ? (r.value = u[0].value, u[0]) : (r.issues.push({
    code: "invalid_union",
    input: r.value,
    inst: s,
    errors: t.map((l) => l.issues.map((h) => ja(h, a, Ra())))
  }), r);
}
const mC = /* @__PURE__ */ de("$ZodUnion", (t, r) => {
  Lt.init(t, r), ft(t._zod, "optin", () => r.options.some((u) => u._zod.optin === "optional") ? "optional" : void 0), ft(t._zod, "optout", () => r.options.some((u) => u._zod.optout === "optional") ? "optional" : void 0), ft(t._zod, "values", () => {
    if (r.options.every((u) => u._zod.values))
      return new Set(r.options.flatMap((u) => Array.from(u._zod.values)));
  }), ft(t._zod, "pattern", () => {
    if (r.options.every((u) => u._zod.pattern)) {
      const u = r.options.map((l) => l._zod.pattern);
      return new RegExp(`^(${u.map((l) => Jf(l.source)).join("|")})$`);
    }
  });
  const s = r.options.length === 1, a = r.options[0]._zod.run;
  t._zod.parse = (u, l) => {
    if (s)
      return a(u, l);
    let h = !1;
    const m = [];
    for (const f of r.options) {
      const g = f._zod.run({
        value: u.value,
        issues: []
      }, l);
      if (g instanceof Promise)
        m.push(g), h = !0;
      else {
        if (g.issues.length === 0)
          return g;
        m.push(g);
      }
    }
    return h ? Promise.all(m).then((f) => Dy(f, u, t, l)) : Dy(m, u, t, l);
  };
}), gC = /* @__PURE__ */ de("$ZodIntersection", (t, r) => {
  Lt.init(t, r), t._zod.parse = (s, a) => {
    const u = s.value, l = r.left._zod.run({ value: u, issues: [] }, a), h = r.right._zod.run({ value: u, issues: [] }, a);
    return l instanceof Promise || h instanceof Promise ? Promise.all([l, h]).then(([f, g]) => Ly(s, f, g)) : Ly(s, l, h);
  };
});
function Pf(t, r) {
  if (t === r)
    return { valid: !0, data: t };
  if (t instanceof Date && r instanceof Date && +t == +r)
    return { valid: !0, data: t };
  if (eo(t) && eo(r)) {
    const s = Object.keys(r), a = Object.keys(t).filter((l) => s.indexOf(l) !== -1), u = { ...t, ...r };
    for (const l of a) {
      const h = Pf(t[l], r[l]);
      if (!h.valid)
        return {
          valid: !1,
          mergeErrorPath: [l, ...h.mergeErrorPath]
        };
      u[l] = h.data;
    }
    return { valid: !0, data: u };
  }
  if (Array.isArray(t) && Array.isArray(r)) {
    if (t.length !== r.length)
      return { valid: !1, mergeErrorPath: [] };
    const s = [];
    for (let a = 0; a < t.length; a++) {
      const u = t[a], l = r[a], h = Pf(u, l);
      if (!h.valid)
        return {
          valid: !1,
          mergeErrorPath: [a, ...h.mergeErrorPath]
        };
      s.push(h.data);
    }
    return { valid: !0, data: s };
  }
  return { valid: !1, mergeErrorPath: [] };
}
function Ly(t, r, s) {
  if (r.issues.length && t.issues.push(...r.issues), s.issues.length && t.issues.push(...s.issues), Mi(t))
    return t;
  const a = Pf(r.value, s.value);
  if (!a.valid)
    throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);
  return t.value = a.data, t;
}
const vC = /* @__PURE__ */ de("$ZodEnum", (t, r) => {
  Lt.init(t, r);
  const s = fb(r.entries), a = new Set(s);
  t._zod.values = a, t._zod.pattern = new RegExp(`^(${s.filter((u) => Pw.has(typeof u)).map((u) => typeof u == "string" ? kl(u) : u.toString()).join("|")})$`), t._zod.parse = (u, l) => {
    const h = u.value;
    return a.has(h) || u.issues.push({
      code: "invalid_value",
      values: s,
      input: h,
      inst: t
    }), u;
  };
}), yC = /* @__PURE__ */ de("$ZodTransform", (t, r) => {
  Lt.init(t, r), t._zod.parse = (s, a) => {
    if (a.direction === "backward")
      throw new cb(t.constructor.name);
    const u = r.transform(s.value, s);
    if (a.async)
      return (u instanceof Promise ? u : Promise.resolve(u)).then((h) => (s.value = h, s));
    if (u instanceof Promise)
      throw new ji();
    return s.value = u, s;
  };
});
function Py(t, r) {
  return t.issues.length && r === void 0 ? { issues: [], value: void 0 } : t;
}
const bC = /* @__PURE__ */ de("$ZodOptional", (t, r) => {
  Lt.init(t, r), t._zod.optin = "optional", t._zod.optout = "optional", ft(t._zod, "values", () => r.innerType._zod.values ? /* @__PURE__ */ new Set([...r.innerType._zod.values, void 0]) : void 0), ft(t._zod, "pattern", () => {
    const s = r.innerType._zod.pattern;
    return s ? new RegExp(`^(${Jf(s.source)})?$`) : void 0;
  }), t._zod.parse = (s, a) => {
    if (r.innerType._zod.optin === "optional") {
      const u = r.innerType._zod.run(s, a);
      return u instanceof Promise ? u.then((l) => Py(l, s.value)) : Py(u, s.value);
    }
    return s.value === void 0 ? s : r.innerType._zod.run(s, a);
  };
}), _C = /* @__PURE__ */ de("$ZodNullable", (t, r) => {
  Lt.init(t, r), ft(t._zod, "optin", () => r.innerType._zod.optin), ft(t._zod, "optout", () => r.innerType._zod.optout), ft(t._zod, "pattern", () => {
    const s = r.innerType._zod.pattern;
    return s ? new RegExp(`^(${Jf(s.source)}|null)$`) : void 0;
  }), ft(t._zod, "values", () => r.innerType._zod.values ? /* @__PURE__ */ new Set([...r.innerType._zod.values, null]) : void 0), t._zod.parse = (s, a) => s.value === null ? s : r.innerType._zod.run(s, a);
}), SC = /* @__PURE__ */ de("$ZodDefault", (t, r) => {
  Lt.init(t, r), t._zod.optin = "optional", ft(t._zod, "values", () => r.innerType._zod.values), t._zod.parse = (s, a) => {
    if (a.direction === "backward")
      return r.innerType._zod.run(s, a);
    if (s.value === void 0)
      return s.value = r.defaultValue, s;
    const u = r.innerType._zod.run(s, a);
    return u instanceof Promise ? u.then((l) => zy(l, r)) : zy(u, r);
  };
});
function zy(t, r) {
  return t.value === void 0 && (t.value = r.defaultValue), t;
}
const wC = /* @__PURE__ */ de("$ZodPrefault", (t, r) => {
  Lt.init(t, r), t._zod.optin = "optional", ft(t._zod, "values", () => r.innerType._zod.values), t._zod.parse = (s, a) => (a.direction === "backward" || s.value === void 0 && (s.value = r.defaultValue), r.innerType._zod.run(s, a));
}), EC = /* @__PURE__ */ de("$ZodNonOptional", (t, r) => {
  Lt.init(t, r), ft(t._zod, "values", () => {
    const s = r.innerType._zod.values;
    return s ? new Set([...s].filter((a) => a !== void 0)) : void 0;
  }), t._zod.parse = (s, a) => {
    const u = r.innerType._zod.run(s, a);
    return u instanceof Promise ? u.then((l) => Iy(l, t)) : Iy(u, t);
  };
});
function Iy(t, r) {
  return !t.issues.length && t.value === void 0 && t.issues.push({
    code: "invalid_type",
    expected: "nonoptional",
    input: t.value,
    inst: r
  }), t;
}
const CC = /* @__PURE__ */ de("$ZodCatch", (t, r) => {
  Lt.init(t, r), ft(t._zod, "optin", () => r.innerType._zod.optin), ft(t._zod, "optout", () => r.innerType._zod.optout), ft(t._zod, "values", () => r.innerType._zod.values), t._zod.parse = (s, a) => {
    if (a.direction === "backward")
      return r.innerType._zod.run(s, a);
    const u = r.innerType._zod.run(s, a);
    return u instanceof Promise ? u.then((l) => (s.value = l.value, l.issues.length && (s.value = r.catchValue({
      ...s,
      error: {
        issues: l.issues.map((h) => ja(h, a, Ra()))
      },
      input: s.value
    }), s.issues = []), s)) : (s.value = u.value, u.issues.length && (s.value = r.catchValue({
      ...s,
      error: {
        issues: u.issues.map((l) => ja(l, a, Ra()))
      },
      input: s.value
    }), s.issues = []), s);
  };
}), AC = /* @__PURE__ */ de("$ZodPipe", (t, r) => {
  Lt.init(t, r), ft(t._zod, "values", () => r.in._zod.values), ft(t._zod, "optin", () => r.in._zod.optin), ft(t._zod, "optout", () => r.out._zod.optout), ft(t._zod, "propValues", () => r.in._zod.propValues), t._zod.parse = (s, a) => {
    if (a.direction === "backward") {
      const l = r.out._zod.run(s, a);
      return l instanceof Promise ? l.then((h) => el(h, r.in, a)) : el(l, r.in, a);
    }
    const u = r.in._zod.run(s, a);
    return u instanceof Promise ? u.then((l) => el(l, r.out, a)) : el(u, r.out, a);
  };
});
function el(t, r, s) {
  return t.issues.length ? (t.aborted = !0, t) : r._zod.run({ value: t.value, issues: t.issues }, s);
}
const TC = /* @__PURE__ */ de("$ZodReadonly", (t, r) => {
  Lt.init(t, r), ft(t._zod, "propValues", () => r.innerType._zod.propValues), ft(t._zod, "values", () => r.innerType._zod.values), ft(t._zod, "optin", () => r.innerType._zod.optin), ft(t._zod, "optout", () => r.innerType._zod.optout), t._zod.parse = (s, a) => {
    if (a.direction === "backward")
      return r.innerType._zod.run(s, a);
    const u = r.innerType._zod.run(s, a);
    return u instanceof Promise ? u.then(By) : By(u);
  };
});
function By(t) {
  return t.value = Object.freeze(t.value), t;
}
const kC = /* @__PURE__ */ de("$ZodCustom", (t, r) => {
  ir.init(t, r), Lt.init(t, r), t._zod.parse = (s, a) => s, t._zod.check = (s) => {
    const a = s.value, u = r.fn(a);
    if (u instanceof Promise)
      return u.then((l) => Uy(l, s, a, t));
    Uy(u, s, a, t);
  };
});
function Uy(t, r, s, a) {
  if (!t) {
    const u = {
      code: "custom",
      input: s,
      inst: a,
      // incorporates params.error into issue reporting
      path: [...a._zod.def.path ?? []],
      // incorporates params.error into issue reporting
      continue: !a._zod.def.abort
      // params: inst._zod.def.params,
    };
    a._zod.def.params && (u.params = a._zod.def.params), r.issues.push(to(u));
  }
}
class Ab {
  constructor() {
    this._map = /* @__PURE__ */ new WeakMap(), this._idmap = /* @__PURE__ */ new Map();
  }
  add(r, ...s) {
    const a = s[0];
    if (this._map.set(r, a), a && typeof a == "object" && "id" in a) {
      if (this._idmap.has(a.id))
        throw new Error(`ID ${a.id} already exists in the registry`);
      this._idmap.set(a.id, r);
    }
    return this;
  }
  clear() {
    return this._map = /* @__PURE__ */ new WeakMap(), this._idmap = /* @__PURE__ */ new Map(), this;
  }
  remove(r) {
    const s = this._map.get(r);
    return s && typeof s == "object" && "id" in s && this._idmap.delete(s.id), this._map.delete(r), this;
  }
  get(r) {
    const s = r._zod.parent;
    if (s) {
      const a = { ...this.get(s) ?? {} };
      delete a.id;
      const u = { ...a, ...this._map.get(r) };
      return Object.keys(u).length ? u : void 0;
    }
    return this._map.get(r);
  }
  has(r) {
    return this._map.has(r);
  }
}
function xC() {
  return new Ab();
}
const Ys = /* @__PURE__ */ xC();
function NC(t, r) {
  return new t({
    type: "string",
    ...Pe(r)
  });
}
function OC(t, r) {
  return new t({
    type: "string",
    format: "email",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function Hy(t, r) {
  return new t({
    type: "string",
    format: "guid",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function MC(t, r) {
  return new t({
    type: "string",
    format: "uuid",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function RC(t, r) {
  return new t({
    type: "string",
    format: "uuid",
    check: "string_format",
    abort: !1,
    version: "v4",
    ...Pe(r)
  });
}
function jC(t, r) {
  return new t({
    type: "string",
    format: "uuid",
    check: "string_format",
    abort: !1,
    version: "v6",
    ...Pe(r)
  });
}
function DC(t, r) {
  return new t({
    type: "string",
    format: "uuid",
    check: "string_format",
    abort: !1,
    version: "v7",
    ...Pe(r)
  });
}
function LC(t, r) {
  return new t({
    type: "string",
    format: "url",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function PC(t, r) {
  return new t({
    type: "string",
    format: "emoji",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function zC(t, r) {
  return new t({
    type: "string",
    format: "nanoid",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function IC(t, r) {
  return new t({
    type: "string",
    format: "cuid",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function BC(t, r) {
  return new t({
    type: "string",
    format: "cuid2",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function UC(t, r) {
  return new t({
    type: "string",
    format: "ulid",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function HC(t, r) {
  return new t({
    type: "string",
    format: "xid",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function qC(t, r) {
  return new t({
    type: "string",
    format: "ksuid",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function GC(t, r) {
  return new t({
    type: "string",
    format: "ipv4",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function ZC(t, r) {
  return new t({
    type: "string",
    format: "ipv6",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function $C(t, r) {
  return new t({
    type: "string",
    format: "cidrv4",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function VC(t, r) {
  return new t({
    type: "string",
    format: "cidrv6",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function YC(t, r) {
  return new t({
    type: "string",
    format: "base64",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function FC(t, r) {
  return new t({
    type: "string",
    format: "base64url",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function XC(t, r) {
  return new t({
    type: "string",
    format: "e164",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function KC(t, r) {
  return new t({
    type: "string",
    format: "jwt",
    check: "string_format",
    abort: !1,
    ...Pe(r)
  });
}
function QC(t, r) {
  return new t({
    type: "string",
    format: "datetime",
    check: "string_format",
    offset: !1,
    local: !1,
    precision: null,
    ...Pe(r)
  });
}
function JC(t, r) {
  return new t({
    type: "string",
    format: "date",
    check: "string_format",
    ...Pe(r)
  });
}
function WC(t, r) {
  return new t({
    type: "string",
    format: "time",
    check: "string_format",
    precision: null,
    ...Pe(r)
  });
}
function eA(t, r) {
  return new t({
    type: "string",
    format: "duration",
    check: "string_format",
    ...Pe(r)
  });
}
function tA(t) {
  return new t({
    type: "unknown"
  });
}
function nA(t, r) {
  return new t({
    type: "never",
    ...Pe(r)
  });
}
function Tb(t, r) {
  return new kE({
    check: "max_length",
    ...Pe(r),
    maximum: t
  });
}
function wl(t, r) {
  return new xE({
    check: "min_length",
    ...Pe(r),
    minimum: t
  });
}
function kb(t, r) {
  return new NE({
    check: "length_equals",
    ...Pe(r),
    length: t
  });
}
function rA(t, r) {
  return new OE({
    check: "string_format",
    format: "regex",
    ...Pe(r),
    pattern: t
  });
}
function aA(t) {
  return new ME({
    check: "string_format",
    format: "lowercase",
    ...Pe(t)
  });
}
function iA(t) {
  return new RE({
    check: "string_format",
    format: "uppercase",
    ...Pe(t)
  });
}
function sA(t, r) {
  return new jE({
    check: "string_format",
    format: "includes",
    ...Pe(r),
    includes: t
  });
}
function oA(t, r) {
  return new DE({
    check: "string_format",
    format: "starts_with",
    ...Pe(r),
    prefix: t
  });
}
function uA(t, r) {
  return new LE({
    check: "string_format",
    format: "ends_with",
    ...Pe(r),
    suffix: t
  });
}
function io(t) {
  return new PE({
    check: "overwrite",
    tx: t
  });
}
function lA(t) {
  return io((r) => r.normalize(t));
}
function cA() {
  return io((t) => t.trim());
}
function dA() {
  return io((t) => t.toLowerCase());
}
function fA() {
  return io((t) => t.toUpperCase());
}
function hA(t, r, s) {
  return new t({
    type: "array",
    element: r,
    // get element() {
    //   return element;
    // },
    ...Pe(s)
  });
}
function pA(t, r, s) {
  return new t({
    type: "custom",
    check: "custom",
    fn: r,
    ...Pe(s)
  });
}
function mA(t) {
  const r = gA((s) => (s.addIssue = (a) => {
    if (typeof a == "string")
      s.issues.push(to(a, s.value, r._zod.def));
    else {
      const u = a;
      u.fatal && (u.continue = !1), u.code ?? (u.code = "custom"), u.input ?? (u.input = s.value), u.inst ?? (u.inst = r), u.continue ?? (u.continue = !r._zod.def.abort), s.issues.push(to(u));
    }
  }, t(s.value, s)));
  return r;
}
function gA(t, r) {
  const s = new ir({
    check: "custom",
    ...Pe(r)
  });
  return s._zod.check = t, s;
}
class qy {
  constructor(r) {
    this.counter = 0, this.metadataRegistry = r?.metadata ?? Ys, this.target = r?.target ?? "draft-2020-12", this.unrepresentable = r?.unrepresentable ?? "throw", this.override = r?.override ?? (() => {
    }), this.io = r?.io ?? "output", this.seen = /* @__PURE__ */ new Map();
  }
  process(r, s = { path: [], schemaPath: [] }) {
    var a;
    const u = r._zod.def, l = {
      guid: "uuid",
      url: "uri",
      datetime: "date-time",
      json_string: "json-string",
      regex: ""
      // do not set
    }, h = this.seen.get(r);
    if (h)
      return h.count++, s.schemaPath.includes(r) && (h.cycle = s.path), h.schema;
    const m = { schema: {}, count: 1, cycle: void 0, path: s.path };
    this.seen.set(r, m);
    const f = r._zod.toJSONSchema?.();
    if (f)
      m.schema = f;
    else {
      const E = {
        ...s,
        schemaPath: [...s.schemaPath, r],
        path: s.path
      }, _ = r._zod.parent;
      if (_)
        m.ref = _, this.process(_, E), this.seen.get(_).isParent = !0;
      else {
        const b = m.schema;
        switch (u.type) {
          case "string": {
            const p = b;
            p.type = "string";
            const { minimum: C, maximum: k, format: j, patterns: O, contentEncoding: I } = r._zod.bag;
            if (typeof C == "number" && (p.minLength = C), typeof k == "number" && (p.maxLength = k), j && (p.format = l[j] ?? j, p.format === "" && delete p.format), I && (p.contentEncoding = I), O && O.size > 0) {
              const c = [...O];
              c.length === 1 ? p.pattern = c[0].source : c.length > 1 && (m.schema.allOf = [
                ...c.map((S) => ({
                  ...this.target === "draft-7" || this.target === "draft-4" || this.target === "openapi-3.0" ? { type: "string" } : {},
                  pattern: S.source
                }))
              ]);
            }
            break;
          }
          case "number": {
            const p = b, { minimum: C, maximum: k, format: j, multipleOf: O, exclusiveMaximum: I, exclusiveMinimum: c } = r._zod.bag;
            typeof j == "string" && j.includes("int") ? p.type = "integer" : p.type = "number", typeof c == "number" && (this.target === "draft-4" || this.target === "openapi-3.0" ? (p.minimum = c, p.exclusiveMinimum = !0) : p.exclusiveMinimum = c), typeof C == "number" && (p.minimum = C, typeof c == "number" && this.target !== "draft-4" && (c >= C ? delete p.minimum : delete p.exclusiveMinimum)), typeof I == "number" && (this.target === "draft-4" || this.target === "openapi-3.0" ? (p.maximum = I, p.exclusiveMaximum = !0) : p.exclusiveMaximum = I), typeof k == "number" && (p.maximum = k, typeof I == "number" && this.target !== "draft-4" && (I <= k ? delete p.maximum : delete p.exclusiveMaximum)), typeof O == "number" && (p.multipleOf = O);
            break;
          }
          case "boolean": {
            const p = b;
            p.type = "boolean";
            break;
          }
          case "bigint": {
            if (this.unrepresentable === "throw")
              throw new Error("BigInt cannot be represented in JSON Schema");
            break;
          }
          case "symbol": {
            if (this.unrepresentable === "throw")
              throw new Error("Symbols cannot be represented in JSON Schema");
            break;
          }
          case "null": {
            this.target === "openapi-3.0" ? (b.type = "string", b.nullable = !0, b.enum = [null]) : b.type = "null";
            break;
          }
          case "any":
            break;
          case "unknown":
            break;
          case "undefined": {
            if (this.unrepresentable === "throw")
              throw new Error("Undefined cannot be represented in JSON Schema");
            break;
          }
          case "void": {
            if (this.unrepresentable === "throw")
              throw new Error("Void cannot be represented in JSON Schema");
            break;
          }
          case "never": {
            b.not = {};
            break;
          }
          case "date": {
            if (this.unrepresentable === "throw")
              throw new Error("Date cannot be represented in JSON Schema");
            break;
          }
          case "array": {
            const p = b, { minimum: C, maximum: k } = r._zod.bag;
            typeof C == "number" && (p.minItems = C), typeof k == "number" && (p.maxItems = k), p.type = "array", p.items = this.process(u.element, { ...E, path: [...E.path, "items"] });
            break;
          }
          case "object": {
            const p = b;
            p.type = "object", p.properties = {};
            const C = u.shape;
            for (const O in C)
              p.properties[O] = this.process(C[O], {
                ...E,
                path: [...E.path, "properties", O]
              });
            const k = new Set(Object.keys(C)), j = new Set([...k].filter((O) => {
              const I = u.shape[O]._zod;
              return this.io === "input" ? I.optin === void 0 : I.optout === void 0;
            }));
            j.size > 0 && (p.required = Array.from(j)), u.catchall?._zod.def.type === "never" ? p.additionalProperties = !1 : u.catchall ? u.catchall && (p.additionalProperties = this.process(u.catchall, {
              ...E,
              path: [...E.path, "additionalProperties"]
            })) : this.io === "output" && (p.additionalProperties = !1);
            break;
          }
          case "union": {
            const p = b, C = u.options.map((k, j) => this.process(k, {
              ...E,
              path: [...E.path, "anyOf", j]
            }));
            p.anyOf = C;
            break;
          }
          case "intersection": {
            const p = b, C = this.process(u.left, {
              ...E,
              path: [...E.path, "allOf", 0]
            }), k = this.process(u.right, {
              ...E,
              path: [...E.path, "allOf", 1]
            }), j = (I) => "allOf" in I && Object.keys(I).length === 1, O = [
              ...j(C) ? C.allOf : [C],
              ...j(k) ? k.allOf : [k]
            ];
            p.allOf = O;
            break;
          }
          case "tuple": {
            const p = b;
            p.type = "array";
            const C = this.target === "draft-2020-12" ? "prefixItems" : "items", k = this.target === "draft-2020-12" || this.target === "openapi-3.0" ? "items" : "additionalItems", j = u.items.map((S, w) => this.process(S, {
              ...E,
              path: [...E.path, C, w]
            })), O = u.rest ? this.process(u.rest, {
              ...E,
              path: [...E.path, k, ...this.target === "openapi-3.0" ? [u.items.length] : []]
            }) : null;
            this.target === "draft-2020-12" ? (p.prefixItems = j, O && (p.items = O)) : this.target === "openapi-3.0" ? (p.items = {
              anyOf: j
            }, O && p.items.anyOf.push(O), p.minItems = j.length, O || (p.maxItems = j.length)) : (p.items = j, O && (p.additionalItems = O));
            const { minimum: I, maximum: c } = r._zod.bag;
            typeof I == "number" && (p.minItems = I), typeof c == "number" && (p.maxItems = c);
            break;
          }
          case "record": {
            const p = b;
            p.type = "object", (this.target === "draft-7" || this.target === "draft-2020-12") && (p.propertyNames = this.process(u.keyType, {
              ...E,
              path: [...E.path, "propertyNames"]
            })), p.additionalProperties = this.process(u.valueType, {
              ...E,
              path: [...E.path, "additionalProperties"]
            });
            break;
          }
          case "map": {
            if (this.unrepresentable === "throw")
              throw new Error("Map cannot be represented in JSON Schema");
            break;
          }
          case "set": {
            if (this.unrepresentable === "throw")
              throw new Error("Set cannot be represented in JSON Schema");
            break;
          }
          case "enum": {
            const p = b, C = fb(u.entries);
            C.every((k) => typeof k == "number") && (p.type = "number"), C.every((k) => typeof k == "string") && (p.type = "string"), p.enum = C;
            break;
          }
          case "literal": {
            const p = b, C = [];
            for (const k of u.values)
              if (k === void 0) {
                if (this.unrepresentable === "throw")
                  throw new Error("Literal `undefined` cannot be represented in JSON Schema");
              } else if (typeof k == "bigint") {
                if (this.unrepresentable === "throw")
                  throw new Error("BigInt literals cannot be represented in JSON Schema");
                C.push(Number(k));
              } else
                C.push(k);
            if (C.length !== 0) if (C.length === 1) {
              const k = C[0];
              p.type = k === null ? "null" : typeof k, this.target === "draft-4" || this.target === "openapi-3.0" ? p.enum = [k] : p.const = k;
            } else
              C.every((k) => typeof k == "number") && (p.type = "number"), C.every((k) => typeof k == "string") && (p.type = "string"), C.every((k) => typeof k == "boolean") && (p.type = "string"), C.every((k) => k === null) && (p.type = "null"), p.enum = C;
            break;
          }
          case "file": {
            const p = b, C = {
              type: "string",
              format: "binary",
              contentEncoding: "binary"
            }, { minimum: k, maximum: j, mime: O } = r._zod.bag;
            k !== void 0 && (C.minLength = k), j !== void 0 && (C.maxLength = j), O ? O.length === 1 ? (C.contentMediaType = O[0], Object.assign(p, C)) : p.anyOf = O.map((I) => ({ ...C, contentMediaType: I })) : Object.assign(p, C);
            break;
          }
          case "transform": {
            if (this.unrepresentable === "throw")
              throw new Error("Transforms cannot be represented in JSON Schema");
            break;
          }
          case "nullable": {
            const p = this.process(u.innerType, E);
            this.target === "openapi-3.0" ? (m.ref = u.innerType, b.nullable = !0) : b.anyOf = [p, { type: "null" }];
            break;
          }
          case "nonoptional": {
            this.process(u.innerType, E), m.ref = u.innerType;
            break;
          }
          case "success": {
            const p = b;
            p.type = "boolean";
            break;
          }
          case "default": {
            this.process(u.innerType, E), m.ref = u.innerType, b.default = JSON.parse(JSON.stringify(u.defaultValue));
            break;
          }
          case "prefault": {
            this.process(u.innerType, E), m.ref = u.innerType, this.io === "input" && (b._prefault = JSON.parse(JSON.stringify(u.defaultValue)));
            break;
          }
          case "catch": {
            this.process(u.innerType, E), m.ref = u.innerType;
            let p;
            try {
              p = u.catchValue(void 0);
            } catch {
              throw new Error("Dynamic catch values are not supported in JSON Schema");
            }
            b.default = p;
            break;
          }
          case "nan": {
            if (this.unrepresentable === "throw")
              throw new Error("NaN cannot be represented in JSON Schema");
            break;
          }
          case "template_literal": {
            const p = b, C = r._zod.pattern;
            if (!C)
              throw new Error("Pattern not found in template literal");
            p.type = "string", p.pattern = C.source;
            break;
          }
          case "pipe": {
            const p = this.io === "input" ? u.in._zod.def.type === "transform" ? u.out : u.in : u.out;
            this.process(p, E), m.ref = p;
            break;
          }
          case "readonly": {
            this.process(u.innerType, E), m.ref = u.innerType, b.readOnly = !0;
            break;
          }
          // passthrough types
          case "promise": {
            this.process(u.innerType, E), m.ref = u.innerType;
            break;
          }
          case "optional": {
            this.process(u.innerType, E), m.ref = u.innerType;
            break;
          }
          case "lazy": {
            const p = r._zod.innerType;
            this.process(p, E), m.ref = p;
            break;
          }
          case "custom": {
            if (this.unrepresentable === "throw")
              throw new Error("Custom types cannot be represented in JSON Schema");
            break;
          }
          case "function": {
            if (this.unrepresentable === "throw")
              throw new Error("Function types cannot be represented in JSON Schema");
            break;
          }
        }
      }
    }
    const g = this.metadataRegistry.get(r);
    return g && Object.assign(m.schema, g), this.io === "input" && Dt(r) && (delete m.schema.examples, delete m.schema.default), this.io === "input" && m.schema._prefault && ((a = m.schema).default ?? (a.default = m.schema._prefault)), delete m.schema._prefault, this.seen.get(r).schema;
  }
  emit(r, s) {
    const a = {
      cycles: s?.cycles ?? "ref",
      reused: s?.reused ?? "inline",
      // unrepresentable: _params?.unrepresentable ?? "throw",
      // uri: _params?.uri ?? ((id) => `${id}`),
      external: s?.external ?? void 0
    }, u = this.seen.get(r);
    if (!u)
      throw new Error("Unprocessed schema. This is a bug in Zod.");
    const l = (v) => {
      const E = this.target === "draft-2020-12" ? "$defs" : "definitions";
      if (a.external) {
        const C = a.external.registry.get(v[0])?.id, k = a.external.uri ?? ((O) => O);
        if (C)
          return { ref: k(C) };
        const j = v[1].defId ?? v[1].schema.id ?? `schema${this.counter++}`;
        return v[1].defId = j, { defId: j, ref: `${k("__shared")}#/${E}/${j}` };
      }
      if (v[1] === u)
        return { ref: "#" };
      const b = `#/${E}/`, p = v[1].schema.id ?? `__schema${this.counter++}`;
      return { defId: p, ref: b + p };
    }, h = (v) => {
      if (v[1].schema.$ref)
        return;
      const E = v[1], { ref: _, defId: b } = l(v);
      E.def = { ...E.schema }, b && (E.defId = b);
      const p = E.schema;
      for (const C in p)
        delete p[C];
      p.$ref = _;
    };
    if (a.cycles === "throw")
      for (const v of this.seen.entries()) {
        const E = v[1];
        if (E.cycle)
          throw new Error(`Cycle detected: #/${E.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);
      }
    for (const v of this.seen.entries()) {
      const E = v[1];
      if (r === v[0]) {
        h(v);
        continue;
      }
      if (a.external) {
        const b = a.external.registry.get(v[0])?.id;
        if (r !== v[0] && b) {
          h(v);
          continue;
        }
      }
      if (this.metadataRegistry.get(v[0])?.id) {
        h(v);
        continue;
      }
      if (E.cycle) {
        h(v);
        continue;
      }
      if (E.count > 1 && a.reused === "ref") {
        h(v);
        continue;
      }
    }
    const m = (v, E) => {
      const _ = this.seen.get(v), b = _.def ?? _.schema, p = { ...b };
      if (_.ref === null)
        return;
      const C = _.ref;
      if (_.ref = null, C) {
        m(C, E);
        const k = this.seen.get(C).schema;
        k.$ref && (E.target === "draft-7" || E.target === "draft-4" || E.target === "openapi-3.0") ? (b.allOf = b.allOf ?? [], b.allOf.push(k)) : (Object.assign(b, k), Object.assign(b, p));
      }
      _.isParent || this.override({
        zodSchema: v,
        jsonSchema: b,
        path: _.path ?? []
      });
    };
    for (const v of [...this.seen.entries()].reverse())
      m(v[0], { target: this.target });
    const f = {};
    if (this.target === "draft-2020-12" ? f.$schema = "https://json-schema.org/draft/2020-12/schema" : this.target === "draft-7" ? f.$schema = "http://json-schema.org/draft-07/schema#" : this.target === "draft-4" ? f.$schema = "http://json-schema.org/draft-04/schema#" : this.target === "openapi-3.0" || console.warn(`Invalid target: ${this.target}`), a.external?.uri) {
      const v = a.external.registry.get(r)?.id;
      if (!v)
        throw new Error("Schema is missing an `id` property");
      f.$id = a.external.uri(v);
    }
    Object.assign(f, u.def);
    const g = a.external?.defs ?? {};
    for (const v of this.seen.entries()) {
      const E = v[1];
      E.def && E.defId && (g[E.defId] = E.def);
    }
    a.external || Object.keys(g).length > 0 && (this.target === "draft-2020-12" ? f.$defs = g : f.definitions = g);
    try {
      return JSON.parse(JSON.stringify(f));
    } catch {
      throw new Error("Error converting schema to JSON.");
    }
  }
}
function vA(t, r) {
  if (t instanceof Ab) {
    const a = new qy(r), u = {};
    for (const m of t._idmap.entries()) {
      const [f, g] = m;
      a.process(g);
    }
    const l = {}, h = {
      registry: t,
      uri: r?.uri,
      defs: u
    };
    for (const m of t._idmap.entries()) {
      const [f, g] = m;
      l[f] = a.emit(g, {
        ...r,
        external: h
      });
    }
    if (Object.keys(u).length > 0) {
      const m = a.target === "draft-2020-12" ? "$defs" : "definitions";
      l.__shared = {
        [m]: u
      };
    }
    return { schemas: l };
  }
  const s = new qy(r);
  return s.process(t), s.emit(t, r);
}
function Dt(t, r) {
  const s = r ?? { seen: /* @__PURE__ */ new Set() };
  if (s.seen.has(t))
    return !1;
  s.seen.add(t);
  const u = t._zod.def;
  switch (u.type) {
    case "string":
    case "number":
    case "bigint":
    case "boolean":
    case "date":
    case "symbol":
    case "undefined":
    case "null":
    case "any":
    case "unknown":
    case "never":
    case "void":
    case "literal":
    case "enum":
    case "nan":
    case "file":
    case "template_literal":
      return !1;
    case "array":
      return Dt(u.element, s);
    case "object": {
      for (const l in u.shape)
        if (Dt(u.shape[l], s))
          return !0;
      return !1;
    }
    case "union": {
      for (const l of u.options)
        if (Dt(l, s))
          return !0;
      return !1;
    }
    case "intersection":
      return Dt(u.left, s) || Dt(u.right, s);
    case "tuple": {
      for (const l of u.items)
        if (Dt(l, s))
          return !0;
      return !!(u.rest && Dt(u.rest, s));
    }
    case "record":
      return Dt(u.keyType, s) || Dt(u.valueType, s);
    case "map":
      return Dt(u.keyType, s) || Dt(u.valueType, s);
    case "set":
      return Dt(u.valueType, s);
    // inner types
    case "promise":
    case "optional":
    case "nonoptional":
    case "nullable":
    case "readonly":
      return Dt(u.innerType, s);
    case "lazy":
      return Dt(u.getter(), s);
    case "default":
      return Dt(u.innerType, s);
    case "prefault":
      return Dt(u.innerType, s);
    case "custom":
      return !1;
    case "transform":
      return !0;
    case "pipe":
      return Dt(u.in, s) || Dt(u.out, s);
    case "success":
      return !1;
    case "catch":
      return !1;
    case "function":
      return !1;
  }
  throw new Error(`Unknown schema type: ${u.type}`);
}
const yA = /* @__PURE__ */ de("ZodISODateTime", (t, r) => {
  KE.init(t, r), _t.init(t, r);
});
function bA(t) {
  return QC(yA, t);
}
const _A = /* @__PURE__ */ de("ZodISODate", (t, r) => {
  QE.init(t, r), _t.init(t, r);
});
function SA(t) {
  return JC(_A, t);
}
const wA = /* @__PURE__ */ de("ZodISOTime", (t, r) => {
  JE.init(t, r), _t.init(t, r);
});
function EA(t) {
  return WC(wA, t);
}
const CA = /* @__PURE__ */ de("ZodISODuration", (t, r) => {
  WE.init(t, r), _t.init(t, r);
});
function AA(t) {
  return eA(CA, t);
}
const TA = (t, r) => {
  vb.init(t, r), t.name = "ZodError", Object.defineProperties(t, {
    format: {
      value: (s) => Vw(t, s)
      // enumerable: false,
    },
    flatten: {
      value: (s) => $w(t, s)
      // enumerable: false,
    },
    addIssue: {
      value: (s) => {
        t.issues.push(s), t.message = JSON.stringify(t.issues, Lf, 2);
      }
      // enumerable: false,
    },
    addIssues: {
      value: (s) => {
        t.issues.push(...s), t.message = JSON.stringify(t.issues, Lf, 2);
      }
      // enumerable: false,
    },
    isEmpty: {
      get() {
        return t.issues.length === 0;
      }
      // enumerable: false,
    }
  });
}, Hn = de("ZodError", TA, {
  Parent: Error
}), kA = /* @__PURE__ */ eh(Hn), xA = /* @__PURE__ */ th(Hn), NA = /* @__PURE__ */ xl(Hn), OA = /* @__PURE__ */ Nl(Hn), MA = /* @__PURE__ */ Xw(Hn), RA = /* @__PURE__ */ Kw(Hn), jA = /* @__PURE__ */ Qw(Hn), DA = /* @__PURE__ */ Jw(Hn), LA = /* @__PURE__ */ Ww(Hn), PA = /* @__PURE__ */ eE(Hn), zA = /* @__PURE__ */ tE(Hn), IA = /* @__PURE__ */ nE(Hn), Ut = /* @__PURE__ */ de("ZodType", (t, r) => (Lt.init(t, r), t.def = r, t.type = r.type, Object.defineProperty(t, "_def", { value: r }), t.check = (...s) => t.clone(La(r, {
  checks: [
    ...r.checks ?? [],
    ...s.map((a) => typeof a == "function" ? { _zod: { check: a, def: { check: "custom" }, onattach: [] } } : a)
  ]
})), t.clone = (s, a) => aa(t, s, a), t.brand = () => t, t.register = ((s, a) => (s.add(t, a), t)), t.parse = (s, a) => kA(t, s, a, { callee: t.parse }), t.safeParse = (s, a) => NA(t, s, a), t.parseAsync = async (s, a) => xA(t, s, a, { callee: t.parseAsync }), t.safeParseAsync = async (s, a) => OA(t, s, a), t.spa = t.safeParseAsync, t.encode = (s, a) => MA(t, s, a), t.decode = (s, a) => RA(t, s, a), t.encodeAsync = async (s, a) => jA(t, s, a), t.decodeAsync = async (s, a) => DA(t, s, a), t.safeEncode = (s, a) => LA(t, s, a), t.safeDecode = (s, a) => PA(t, s, a), t.safeEncodeAsync = async (s, a) => zA(t, s, a), t.safeDecodeAsync = async (s, a) => IA(t, s, a), t.refine = (s, a) => t.check(kT(s, a)), t.superRefine = (s) => t.check(xT(s)), t.overwrite = (s) => t.check(io(s)), t.optional = () => $y(t), t.nullable = () => Vy(t), t.nullish = () => $y(Vy(t)), t.nonoptional = (s) => _T(t, s), t.array = () => Ma(t), t.or = (s) => lT([t, s]), t.and = (s) => dT(t, s), t.transform = (s) => Yy(t, pT(s)), t.default = (s) => vT(t, s), t.prefault = (s) => bT(t, s), t.catch = (s) => wT(t, s), t.pipe = (s) => Yy(t, s), t.readonly = () => AT(t), t.describe = (s) => {
  const a = t.clone();
  return Ys.add(a, { description: s }), a;
}, Object.defineProperty(t, "description", {
  get() {
    return Ys.get(t)?.description;
  },
  configurable: !0
}), t.meta = (...s) => {
  if (s.length === 0)
    return Ys.get(t);
  const a = t.clone();
  return Ys.add(a, s[0]), a;
}, t.isOptional = () => t.safeParse(void 0).success, t.isNullable = () => t.safeParse(null).success, t)), xb = /* @__PURE__ */ de("_ZodString", (t, r) => {
  nh.init(t, r), Ut.init(t, r);
  const s = t._zod.bag;
  t.format = s.format ?? null, t.minLength = s.minimum ?? null, t.maxLength = s.maximum ?? null, t.regex = (...a) => t.check(rA(...a)), t.includes = (...a) => t.check(sA(...a)), t.startsWith = (...a) => t.check(oA(...a)), t.endsWith = (...a) => t.check(uA(...a)), t.min = (...a) => t.check(wl(...a)), t.max = (...a) => t.check(Tb(...a)), t.length = (...a) => t.check(kb(...a)), t.nonempty = (...a) => t.check(wl(1, ...a)), t.lowercase = (a) => t.check(aA(a)), t.uppercase = (a) => t.check(iA(a)), t.trim = () => t.check(cA()), t.normalize = (...a) => t.check(lA(...a)), t.toLowerCase = () => t.check(dA()), t.toUpperCase = () => t.check(fA());
}), BA = /* @__PURE__ */ de("ZodString", (t, r) => {
  nh.init(t, r), xb.init(t, r), t.email = (s) => t.check(OC(UA, s)), t.url = (s) => t.check(LC(HA, s)), t.jwt = (s) => t.check(KC(nT, s)), t.emoji = (s) => t.check(PC(qA, s)), t.guid = (s) => t.check(Hy(Gy, s)), t.uuid = (s) => t.check(MC(tl, s)), t.uuidv4 = (s) => t.check(RC(tl, s)), t.uuidv6 = (s) => t.check(jC(tl, s)), t.uuidv7 = (s) => t.check(DC(tl, s)), t.nanoid = (s) => t.check(zC(GA, s)), t.guid = (s) => t.check(Hy(Gy, s)), t.cuid = (s) => t.check(IC(ZA, s)), t.cuid2 = (s) => t.check(BC($A, s)), t.ulid = (s) => t.check(UC(VA, s)), t.base64 = (s) => t.check(YC(WA, s)), t.base64url = (s) => t.check(FC(eT, s)), t.xid = (s) => t.check(HC(YA, s)), t.ksuid = (s) => t.check(qC(FA, s)), t.ipv4 = (s) => t.check(GC(XA, s)), t.ipv6 = (s) => t.check(ZC(KA, s)), t.cidrv4 = (s) => t.check($C(QA, s)), t.cidrv6 = (s) => t.check(VC(JA, s)), t.e164 = (s) => t.check(XC(tT, s)), t.datetime = (s) => t.check(bA(s)), t.date = (s) => t.check(SA(s)), t.time = (s) => t.check(EA(s)), t.duration = (s) => t.check(AA(s));
});
function Jt(t) {
  return NC(BA, t);
}
const _t = /* @__PURE__ */ de("ZodStringFormat", (t, r) => {
  gt.init(t, r), xb.init(t, r);
}), UA = /* @__PURE__ */ de("ZodEmail", (t, r) => {
  HE.init(t, r), _t.init(t, r);
}), Gy = /* @__PURE__ */ de("ZodGUID", (t, r) => {
  BE.init(t, r), _t.init(t, r);
}), tl = /* @__PURE__ */ de("ZodUUID", (t, r) => {
  UE.init(t, r), _t.init(t, r);
}), HA = /* @__PURE__ */ de("ZodURL", (t, r) => {
  qE.init(t, r), _t.init(t, r);
}), qA = /* @__PURE__ */ de("ZodEmoji", (t, r) => {
  GE.init(t, r), _t.init(t, r);
}), GA = /* @__PURE__ */ de("ZodNanoID", (t, r) => {
  ZE.init(t, r), _t.init(t, r);
}), ZA = /* @__PURE__ */ de("ZodCUID", (t, r) => {
  $E.init(t, r), _t.init(t, r);
}), $A = /* @__PURE__ */ de("ZodCUID2", (t, r) => {
  VE.init(t, r), _t.init(t, r);
}), VA = /* @__PURE__ */ de("ZodULID", (t, r) => {
  YE.init(t, r), _t.init(t, r);
}), YA = /* @__PURE__ */ de("ZodXID", (t, r) => {
  FE.init(t, r), _t.init(t, r);
}), FA = /* @__PURE__ */ de("ZodKSUID", (t, r) => {
  XE.init(t, r), _t.init(t, r);
}), XA = /* @__PURE__ */ de("ZodIPv4", (t, r) => {
  eC.init(t, r), _t.init(t, r);
}), KA = /* @__PURE__ */ de("ZodIPv6", (t, r) => {
  tC.init(t, r), _t.init(t, r);
}), QA = /* @__PURE__ */ de("ZodCIDRv4", (t, r) => {
  nC.init(t, r), _t.init(t, r);
}), JA = /* @__PURE__ */ de("ZodCIDRv6", (t, r) => {
  rC.init(t, r), _t.init(t, r);
}), WA = /* @__PURE__ */ de("ZodBase64", (t, r) => {
  aC.init(t, r), _t.init(t, r);
}), eT = /* @__PURE__ */ de("ZodBase64URL", (t, r) => {
  sC.init(t, r), _t.init(t, r);
}), tT = /* @__PURE__ */ de("ZodE164", (t, r) => {
  oC.init(t, r), _t.init(t, r);
}), nT = /* @__PURE__ */ de("ZodJWT", (t, r) => {
  lC.init(t, r), _t.init(t, r);
}), rT = /* @__PURE__ */ de("ZodUnknown", (t, r) => {
  cC.init(t, r), Ut.init(t, r);
});
function Zy() {
  return tA(rT);
}
const aT = /* @__PURE__ */ de("ZodNever", (t, r) => {
  dC.init(t, r), Ut.init(t, r);
});
function iT(t) {
  return nA(aT, t);
}
const sT = /* @__PURE__ */ de("ZodArray", (t, r) => {
  fC.init(t, r), Ut.init(t, r), t.element = r.element, t.min = (s, a) => t.check(wl(s, a)), t.nonempty = (s) => t.check(wl(1, s)), t.max = (s, a) => t.check(Tb(s, a)), t.length = (s, a) => t.check(kb(s, a)), t.unwrap = () => t.element;
});
function Ma(t, r) {
  return hA(sT, t, r);
}
const oT = /* @__PURE__ */ de("ZodObject", (t, r) => {
  pC.init(t, r), Ut.init(t, r), ft(t, "shape", () => r.shape), t.keyof = () => fT(Object.keys(t._zod.def.shape)), t.catchall = (s) => t.clone({ ...t._zod.def, catchall: s }), t.passthrough = () => t.clone({ ...t._zod.def, catchall: Zy() }), t.loose = () => t.clone({ ...t._zod.def, catchall: Zy() }), t.strict = () => t.clone({ ...t._zod.def, catchall: iT() }), t.strip = () => t.clone({ ...t._zod.def, catchall: void 0 }), t.extend = (s) => Uw(t, s), t.safeExtend = (s) => Hw(t, s), t.merge = (s) => qw(t, s), t.pick = (s) => Iw(t, s), t.omit = (s) => Bw(t, s), t.partial = (...s) => Gw(Nb, t, s[0]), t.required = (...s) => Zw(Ob, t, s[0]);
});
function so(t, r) {
  const s = {
    type: "object",
    shape: t ?? {},
    ...Pe(r)
  };
  return new oT(s);
}
const uT = /* @__PURE__ */ de("ZodUnion", (t, r) => {
  mC.init(t, r), Ut.init(t, r), t.options = r.options;
});
function lT(t, r) {
  return new uT({
    type: "union",
    options: t,
    ...Pe(r)
  });
}
const cT = /* @__PURE__ */ de("ZodIntersection", (t, r) => {
  gC.init(t, r), Ut.init(t, r);
});
function dT(t, r) {
  return new cT({
    type: "intersection",
    left: t,
    right: r
  });
}
const zf = /* @__PURE__ */ de("ZodEnum", (t, r) => {
  vC.init(t, r), Ut.init(t, r), t.enum = r.entries, t.options = Object.values(r.entries);
  const s = new Set(Object.keys(r.entries));
  t.extract = (a, u) => {
    const l = {};
    for (const h of a)
      if (s.has(h))
        l[h] = r.entries[h];
      else
        throw new Error(`Key ${h} not found in enum`);
    return new zf({
      ...r,
      checks: [],
      ...Pe(u),
      entries: l
    });
  }, t.exclude = (a, u) => {
    const l = { ...r.entries };
    for (const h of a)
      if (s.has(h))
        delete l[h];
      else
        throw new Error(`Key ${h} not found in enum`);
    return new zf({
      ...r,
      checks: [],
      ...Pe(u),
      entries: l
    });
  };
});
function fT(t, r) {
  const s = Array.isArray(t) ? Object.fromEntries(t.map((a) => [a, a])) : t;
  return new zf({
    type: "enum",
    entries: s,
    ...Pe(r)
  });
}
const hT = /* @__PURE__ */ de("ZodTransform", (t, r) => {
  yC.init(t, r), Ut.init(t, r), t._zod.parse = (s, a) => {
    if (a.direction === "backward")
      throw new cb(t.constructor.name);
    s.addIssue = (l) => {
      if (typeof l == "string")
        s.issues.push(to(l, s.value, r));
      else {
        const h = l;
        h.fatal && (h.continue = !1), h.code ?? (h.code = "custom"), h.input ?? (h.input = s.value), h.inst ?? (h.inst = t), s.issues.push(to(h));
      }
    };
    const u = r.transform(s.value, s);
    return u instanceof Promise ? u.then((l) => (s.value = l, s)) : (s.value = u, s);
  };
});
function pT(t) {
  return new hT({
    type: "transform",
    transform: t
  });
}
const Nb = /* @__PURE__ */ de("ZodOptional", (t, r) => {
  bC.init(t, r), Ut.init(t, r), t.unwrap = () => t._zod.def.innerType;
});
function $y(t) {
  return new Nb({
    type: "optional",
    innerType: t
  });
}
const mT = /* @__PURE__ */ de("ZodNullable", (t, r) => {
  _C.init(t, r), Ut.init(t, r), t.unwrap = () => t._zod.def.innerType;
});
function Vy(t) {
  return new mT({
    type: "nullable",
    innerType: t
  });
}
const gT = /* @__PURE__ */ de("ZodDefault", (t, r) => {
  SC.init(t, r), Ut.init(t, r), t.unwrap = () => t._zod.def.innerType, t.removeDefault = t.unwrap;
});
function vT(t, r) {
  return new gT({
    type: "default",
    innerType: t,
    get defaultValue() {
      return typeof r == "function" ? r() : pb(r);
    }
  });
}
const yT = /* @__PURE__ */ de("ZodPrefault", (t, r) => {
  wC.init(t, r), Ut.init(t, r), t.unwrap = () => t._zod.def.innerType;
});
function bT(t, r) {
  return new yT({
    type: "prefault",
    innerType: t,
    get defaultValue() {
      return typeof r == "function" ? r() : pb(r);
    }
  });
}
const Ob = /* @__PURE__ */ de("ZodNonOptional", (t, r) => {
  EC.init(t, r), Ut.init(t, r), t.unwrap = () => t._zod.def.innerType;
});
function _T(t, r) {
  return new Ob({
    type: "nonoptional",
    innerType: t,
    ...Pe(r)
  });
}
const ST = /* @__PURE__ */ de("ZodCatch", (t, r) => {
  CC.init(t, r), Ut.init(t, r), t.unwrap = () => t._zod.def.innerType, t.removeCatch = t.unwrap;
});
function wT(t, r) {
  return new ST({
    type: "catch",
    innerType: t,
    catchValue: typeof r == "function" ? r : () => r
  });
}
const ET = /* @__PURE__ */ de("ZodPipe", (t, r) => {
  AC.init(t, r), Ut.init(t, r), t.in = r.in, t.out = r.out;
});
function Yy(t, r) {
  return new ET({
    type: "pipe",
    in: t,
    out: r
    // ...util.normalizeParams(params),
  });
}
const CT = /* @__PURE__ */ de("ZodReadonly", (t, r) => {
  TC.init(t, r), Ut.init(t, r), t.unwrap = () => t._zod.def.innerType;
});
function AT(t) {
  return new CT({
    type: "readonly",
    innerType: t
  });
}
const TT = /* @__PURE__ */ de("ZodCustom", (t, r) => {
  kC.init(t, r), Ut.init(t, r);
});
function kT(t, r = {}) {
  return pA(TT, t, r);
}
function xT(t) {
  return mA(t);
}
const Fy = {
  ENTRY: "EntryRevision",
  GLOBAL: "GlobalRevision"
}, If = "placeholder-chatHistory", NT = so({
  justification: Jt().describe("A brief, friendly explanation of the changes made."),
  name: Jt().describe("The entry's new name/comment."),
  triggers: Ma(Jt()).describe("The entry's new keywords/triggers."),
  content: Jt().describe("The entry's new content.")
}), OT = so({
  worldName: Jt().describe("The name of the world where the new entry should be added."),
  name: Jt().describe("The new entry's name/comment."),
  triggers: Ma(Jt()).describe("The new entry's triggers."),
  content: Jt().describe("The new entry's content.")
}), MT = so({
  worldName: Jt().describe("The name of the world containing the entry to change."),
  originalName: Jt().describe("The original name/comment of the entry to change, used for identification."),
  newName: Jt().optional().describe("The entry's new name/comment. If omitted, the name is not changed."),
  triggers: Ma(Jt()).optional().describe("The entry's new list of triggers."),
  content: Jt().optional().describe("The entry's new content.")
}), RT = so({
  worldName: Jt().describe("The name of the world containing the entry to remove."),
  name: Jt().describe("The name/comment of the entry to remove.")
}), jT = so({
  justification: Jt().describe("A brief, friendly explanation of all the operations performed."),
  add: Ma(OT).optional().describe("A list of new entries to add."),
  change: Ma(MT).optional().describe("A list of existing entries to change."),
  remove: Ma(RT).optional().describe("A list of existing entries to remove.")
});
function vf(t) {
  return String(t).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&apos;");
}
function Bf(t, r = 0) {
  const s = "  ".repeat(r);
  if (Array.isArray(t))
    return t.map((a) => a !== null && typeof a == "object" ? `${s}<item>
${Bf(a, r + 1)}${s}</item>
` : `${s}<item>${vf(a)}</item>
`).join("");
  if (t !== null && typeof t == "object") {
    let a = "";
    for (const u of Object.keys(t)) {
      const l = t[u];
      l !== null && typeof l == "object" ? a += `${s}<${u}>
${Bf(l, r + 1)}${s}</${u}>
` : a += `${s}<${u}>${vf(l)}</${u}>
`;
    }
    return a;
  }
  return `${s}<value>${vf(t)}</value>
`;
}
function DT(t, r) {
  const s = xa(t);
  return r === "xml" ? `<entry>
${Bf(s, 1)}</entry>` : JSON.stringify(s, null, 2);
}
function LT(...t) {
  for (const r of t) if (r !== void 0) return r;
}
function PT(t) {
  return Array.isArray(t) ? t.find((r) => r !== "null") ?? t[0] : t;
}
function xa(t) {
  if (!t || typeof t != "object") return null;
  const r = Array.isArray(t.examples) ? t.examples[0] : void 0, s = LT(t.example, r, t.default);
  if (s !== void 0) return s;
  if (t.const !== void 0) return t.const;
  if (Array.isArray(t.enum) && t.enum.length) return t.enum[0];
  const a = Array.isArray(t.anyOf) ? t.anyOf[0] : Array.isArray(t.oneOf) ? t.oneOf[0] : void 0;
  if (a) return xa(a);
  switch (PT(t.type)) {
    case "object": {
      const l = {}, h = t.properties || {};
      for (const m of Object.keys(h))
        l[m] = xa(h[m]);
      return t.additionalProperties && typeof t.additionalProperties == "object" && (l.additionalProperty = xa(t.additionalProperties)), l;
    }
    case "array": {
      const l = t.items ?? {};
      return [xa(l)];
    }
    case "string":
      return t.title || t.description || "string";
    case "integer":
    case "number":
      return 0;
    case "boolean":
      return !1;
    case "null":
      return null;
    default:
      return t.properties || t.additionalProperties ? xa({ ...t, type: "object" }) : t.items ? xa({ ...t, type: "array" }) : null;
  }
}
const zT = new y3();
async function IT(t, r, s, a, u, l) {
  const h = !a.json_schema && !1;
  return new Promise((m, f) => {
    const g = new AbortController(), v = l ?? g.signal;
    l && l.addEventListener("abort", () => g.abort(), { once: !0 }), zT.generateRequest(
      {
        profileId: t,
        prompt: r,
        maxTokens: s,
        custom: { stream: h, signal: v },
        overridePayload: a
      },
      {
        abortController: g,
        onEntry: void 0,
        onFinish: (E, _, b) => v.aborted ? f(new DOMException("Request aborted by user", "AbortError")) : b ? f(b) : _ === void 0 && b === void 0 ? f(new DOMException("Request aborted by user", "AbortError")) : (_ || f(new Error("No data received from LLM")), b ? f(b) : m(_))
      }
    );
  });
}
async function Xy(t, r, s, a, u) {
  const l = Oe.getSettings().directApi;
  return l.enabled ? (console.log("[WorldInfoRecommender] makeStructuredRequest using Direct API:", l.apiType), { content: (await Tl(l, r, s, void 0, u)).content }) : IT(t, r, s, a, void 0, u);
}
async function Ky(t, r, s, a, u, l, h) {
  const m = Oe.getSettings();
  let f, g;
  const v = vA(s);
  if (u === "native") {
    if (f = await Xy(
      t,
      r,
      l,
      {
        json_schema: { name: a, strict: !0, value: v }
      },
      h
    ), !f?.content)
      throw new Error(`Structured request for ${a} failed to return content.`);
    g = typeof f.content == "string" ? JSON.parse(f.content) : f.content;
  } else {
    const _ = u, b = DT(v, _), p = JSON.stringify(v, null, 2), C = _ === "json" ? "reviseJsonPrompt" : "reviseXmlPrompt", k = m.prompts[C]?.content;
    if (!k)
      throw new Error(`Prompt template for mode "${_}" not found.`);
    const j = {
      example_response: b,
      schema: p
    }, I = { role: "system", content: Nn.compile(k, { noEscape: !0, strict: !0 })(j) };
    if (f = await Xy(
      t,
      [...r, I],
      l,
      {},
      h
    ), !f?.content)
      throw new Error(`Structured request for ${a} failed to return content.`);
    if (_ === "xml") {
      const c = Z0(f.content), S = Object.values(c).flat();
      if (S.length > 0) {
        const w = S[0];
        g = {
          justification: "Updated via XML.",
          // Justification is hard with XML parsing this way
          name: w.comment,
          triggers: w.key,
          content: w.content
        };
      } else
        throw new Error("Could not find a valid entry in the XML response.");
    } else
      g = JSON.parse(f.content);
  }
  const E = s.safeParse(g);
  if (!E.success) {
    const _ = `Model response failed schema validation for ${a}. Check console for details.`;
    throw console.error("Zod validation failed:", E.error.issues), console.error("Raw content parsed:", g), await ye("error", _), new Error(_);
  }
  return E.data;
}
const BT = ({ originalContent: t, newContent: r }) => {
  const s = se.useMemo(() => {
    const a = ub(t, r);
    let u = "", l = "";
    return a.forEach((h) => {
      const m = h.value.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;").replace(/\n/g, "<br>"), g = `<span style="${h.added ? "color: green; background-color: #e6ffed;" : h.removed ? "color: red; background-color: #ffebe9;" : "color: grey;"}">${m}</span>`;
      h.added || (u += g), h.removed || (l += g);
    }), { originalHtml: u, newHtml: l };
  }, [t, r]);
  return /* @__PURE__ */ T.jsxs("div", { className: "compare-state-diff-grid", children: [
    /* @__PURE__ */ T.jsx("div", { className: "content", dangerouslySetInnerHTML: { __html: s.originalHtml } }),
    /* @__PURE__ */ T.jsx("div", { className: "content", dangerouslySetInnerHTML: { __html: s.newHtml } })
  ] });
}, Mb = ({ before: t, after: r }) => {
  const s = se.useMemo(() => {
    const a = [];
    return !t || !r || ((t.comment || "") !== (r.comment || "") && a.push({ label: "Name", before: t.comment || "", after: r.comment || "" }), (t.key || []).join(", ") !== (r.key || []).join(", ") && a.push({ label: "Triggers", before: (t.key || []).join(", "), after: (r.key || []).join(", ") }), (t.content || "") !== (r.content || "") && a.push({ label: "Content", before: t.content || "", after: r.content || "" })), a;
  }, [t, r]);
  return /* @__PURE__ */ T.jsx(T.Fragment, { children: s.map(({ label: a, before: u, after: l }) => /* @__PURE__ */ T.jsxs("div", { className: "compare-state-item", children: [
    /* @__PURE__ */ T.jsx("h4", { children: a }),
    /* @__PURE__ */ T.jsxs("div", { className: "compare-state-header", children: [
      /* @__PURE__ */ T.jsx("span", { children: "Before" }),
      /* @__PURE__ */ T.jsx("span", { children: "After" })
    ] }),
    /* @__PURE__ */ T.jsx(BT, { originalContent: u, newContent: l })
  ] }, a)) });
}, UT = ({ before: t, after: r }) => {
  const { added: s, removed: a, changed: u } = se.useMemo(() => {
    const h = t || {}, m = /* @__PURE__ */ new Map();
    Object.entries(h).forEach(([_, b]) => {
      b.forEach((p) => {
        const C = `${_}::${p.uid}`;
        m.set(C, { worldName: _, entry: p });
      });
    });
    const f = [], g = [], v = [], E = Object.entries(r || {}).flatMap(
      ([_, b]) => b.map((p) => ({ worldName: _, entry: p }))
    );
    for (const { worldName: _, entry: b } of E) {
      const p = `${_}::${b.uid}`;
      if (m.has(p)) {
        const k = m.get(p).entry;
        (k.comment !== b.comment || k.content !== b.content || (k.key || []).join(",") !== (b.key || []).join(",")) && v.push({ worldName: _, before: k, after: b }), m.delete(p);
      } else
        f.push({ worldName: _, entry: b });
    }
    return m.forEach(({ worldName: _, entry: b }) => {
      g.push({ worldName: _, entry: b });
    }), { added: f, removed: g, changed: v };
  }, [t, r]), l = s.length > 0 || a.length > 0 || u.length > 0;
  return /* @__PURE__ */ T.jsx("div", { className: "global-diff", children: l ? /* @__PURE__ */ T.jsxs(T.Fragment, { children: [
    s.length > 0 && /* @__PURE__ */ T.jsxs("div", { className: "diff-section", children: [
      /* @__PURE__ */ T.jsxs("h4", { children: [
        "Added Entries (",
        s.length,
        ")"
      ] }),
      s.map(({ worldName: h, entry: m }) => /* @__PURE__ */ T.jsxs("div", { className: "diff-entry added", children: [
        /* @__PURE__ */ T.jsxs("div", { className: "diff-entry-header", children: [
          m.comment,
          " ",
          /* @__PURE__ */ T.jsxs("span", { children: [
            "(in ",
            h,
            ")"
          ] })
        ] }),
        /* @__PURE__ */ T.jsx("div", { className: "diff-entry-content", children: m.content })
      ] }, `${h}::${m.uid}`))
    ] }),
    a.length > 0 && /* @__PURE__ */ T.jsxs("div", { className: "diff-section", children: [
      /* @__PURE__ */ T.jsxs("h4", { children: [
        "Removed Entries (",
        a.length,
        ")"
      ] }),
      a.map(({ worldName: h, entry: m }) => /* @__PURE__ */ T.jsxs("div", { className: "diff-entry removed", children: [
        /* @__PURE__ */ T.jsxs("div", { className: "diff-entry-header", children: [
          m.comment,
          " ",
          /* @__PURE__ */ T.jsxs("span", { children: [
            "(from ",
            h,
            ")"
          ] })
        ] }),
        /* @__PURE__ */ T.jsx("div", { className: "diff-entry-content", children: m.content })
      ] }, `${h}::${m.uid}`))
    ] }),
    u.length > 0 && /* @__PURE__ */ T.jsxs("div", { className: "diff-section", children: [
      /* @__PURE__ */ T.jsxs("h4", { children: [
        "Changed Entries (",
        u.length,
        ")"
      ] }),
      u.map(({ worldName: h, before: m, after: f }) => /* @__PURE__ */ T.jsxs("div", { className: "diff-entry changed", children: [
        /* @__PURE__ */ T.jsxs("div", { className: "diff-entry-header", children: [
          f.comment,
          " ",
          /* @__PURE__ */ T.jsxs("span", { children: [
            "(in ",
            h,
            ")"
          ] })
        ] }),
        /* @__PURE__ */ T.jsx(Mb, { before: m, after: f })
      ] }, `${h}::${f.uid}`))
    ] })
  ] }) : /* @__PURE__ */ T.jsx("p", { className: "subtle", style: { textAlign: "center" }, children: "No changes were detected in the entries for this step." }) });
}, rh = ({ sessionType: t, before: r, after: s }) => !r && !s ? /* @__PURE__ */ T.jsxs("div", { className: "compare-state-popup", children: [
  /* @__PURE__ */ T.jsx("h3", { children: "Changes in this step" }),
  /* @__PURE__ */ T.jsx("p", { className: "subtle", style: { textAlign: "center" }, children: "No state information available for this step." })
] }) : /* @__PURE__ */ T.jsxs("div", { className: "compare-state-popup", children: [
  /* @__PURE__ */ T.jsx("h3", { children: "Changes in this step" }),
  /* @__PURE__ */ T.jsx("div", { className: "compare-state-list", children: t === "global" ? /* @__PURE__ */ T.jsx(UT, { before: r, after: s }) : /* @__PURE__ */ T.jsx(Mb, { before: r, after: s }) })
] }), Qy = "en", Jy = {
  en: {
    titleCurrent: "Current Entry State",
    titleCompare: "Comparing with Original State",
    compareCheckbox: "Compare with Original",
    fieldName: "Name",
    fieldTriggers: "Triggers",
    fieldContent: "Content",
    emptyValue: "empty"
  },
  "zh-CN": {
    titleCurrent: "",
    titleCompare: "",
    compareCheckbox: "",
    fieldName: "",
    fieldTriggers: "",
    fieldContent: "",
    emptyValue: ""
  }
}, HT = ({ currentState: t, initialState: r }) => {
  const a = Oe.getSettings()?.language ?? Qy, u = Jy[a] ?? Jy[Qy], [l, h] = se.useState(!1), m = se.useMemo(
    () => [
      { label: u.fieldName, value: t.comment },
      { label: u.fieldTriggers, value: t.key.join(", ") },
      { label: u.fieldContent, value: t.content }
    ],
    [t, u]
  );
  return /* @__PURE__ */ T.jsxs("div", { className: "current-state-popup", children: [
    /* @__PURE__ */ T.jsxs("div", { className: "popup_header", children: [
      /* @__PURE__ */ T.jsx("h3", { children: l ? u.titleCompare : u.titleCurrent }),
      /* @__PURE__ */ T.jsx("div", { className: "popup_header_buttons", children: /* @__PURE__ */ T.jsxs("label", { className: "checkbox_label", children: [
        /* @__PURE__ */ T.jsx("input", { type: "checkbox", checked: l, onChange: (f) => h(f.target.checked) }),
        u.compareCheckbox
      ] }) })
    ] }),
    /* @__PURE__ */ T.jsx("div", { className: "current-state-content", children: l ? /* @__PURE__ */ T.jsx(rh, { sessionType: "entry", before: r, after: t }) : m.map(({ label: f, value: g }) => /* @__PURE__ */ T.jsxs("div", { className: "state-field", children: [
      /* @__PURE__ */ T.jsx("label", { children: f }),
      /* @__PURE__ */ T.jsx("div", { className: "state-value", children: g || /* @__PURE__ */ T.jsx("span", { className: "subtle-text", children: u.emptyValue }) })
    ] }, f)) })
  ] });
}, Wy = "en", e0 = {
  en: {
    titleCurrent: "Current Suggested Entries",
    titleCompare: "Comparing with Original State",
    compareCheckbox: "Compare with Original",
    noEntries: "No entries in this world.",
    fieldName: "Name",
    fieldTriggers: "Triggers",
    fieldContent: "Content",
    emptyValue: "empty"
  },
  "zh-CN": {
    titleCurrent: "",
    titleCompare: "",
    compareCheckbox: "",
    noEntries: "",
    fieldName: "",
    fieldTriggers: "",
    fieldContent: "",
    emptyValue: ""
  }
}, qT = ({ currentState: t, initialState: r }) => {
  const a = Oe.getSettings()?.language ?? Wy, u = e0[a] ?? e0[Wy], [l, h] = se.useState(!1);
  return /* @__PURE__ */ T.jsxs("div", { className: "current-state-popup global-state-popup", children: [
    /* @__PURE__ */ T.jsxs("div", { className: "popup_header", children: [
      /* @__PURE__ */ T.jsx("h3", { children: l ? u.titleCompare : u.titleCurrent }),
      /* @__PURE__ */ T.jsx("div", { className: "popup_header_buttons", children: /* @__PURE__ */ T.jsxs("label", { className: "checkbox_label", children: [
        /* @__PURE__ */ T.jsx("input", { type: "checkbox", checked: l, onChange: (m) => h(m.target.checked) }),
        u.compareCheckbox
      ] }) })
    ] }),
    /* @__PURE__ */ T.jsx("div", { className: "current-state-content", children: l ? /* @__PURE__ */ T.jsx(rh, { sessionType: "global", before: r, after: t }) : Object.entries(t).map(([m, f]) => /* @__PURE__ */ T.jsxs("div", { className: "world-group", children: [
      /* @__PURE__ */ T.jsx("h4", { children: m }),
      f.length === 0 ? /* @__PURE__ */ T.jsx("p", { className: "subtle-text", children: u.noEntries }) : f.map((g) => /* @__PURE__ */ T.jsxs("div", { className: "state-field-group", children: [
        /* @__PURE__ */ T.jsxs("div", { className: "state-field", children: [
          /* @__PURE__ */ T.jsx("label", { children: u.fieldName }),
          /* @__PURE__ */ T.jsx("div", { className: "state-value", children: g.comment || /* @__PURE__ */ T.jsx("span", { className: "subtle-text", children: u.emptyValue }) })
        ] }),
        /* @__PURE__ */ T.jsxs("div", { className: "state-field", children: [
          /* @__PURE__ */ T.jsx("label", { children: u.fieldTriggers }),
          /* @__PURE__ */ T.jsx("div", { className: "state-value", children: (g.key || []).join(", ") || /* @__PURE__ */ T.jsx("span", { className: "subtle-text", children: u.emptyValue }) })
        ] }),
        /* @__PURE__ */ T.jsxs("div", { className: "state-field", children: [
          /* @__PURE__ */ T.jsx("label", { children: u.fieldContent }),
          /* @__PURE__ */ T.jsx("div", { className: "state-value", children: g.content || /* @__PURE__ */ T.jsx("span", { className: "subtle-text", children: u.emptyValue }) })
        ] })
      ] }, g.uid))
    ] }, m)) })
  ] });
}, Gs = SillyTavern.getContext(), El = "en", Cl = {
  en: {
    editStateTitle: "Editing Entry State",
    saveChanges: "Save Changes",
    cancel: "Cancel",
    fieldName: "Name",
    fieldTriggers: "Triggers (comma-separated)",
    fieldContent: "Content",
    viewState: "View State",
    editState: "Edit State",
    backTooltip: "Back to sessions",
    applyTooltip: "Apply Changes and Close",
    apply: "Apply",
    viewInitialContext: "View Initial Context",
    saveAndFork: "Save & Fork",
    editContextTooltip: "Edit Context",
    deleteContextTooltip: "Delete Context",
    editAndForkTooltip: "Edit and Fork",
    compareChangesTooltip: "Compare changes",
    deleteMessageTooltip: "Delete Message",
    regenerate: "Regenerate",
    regenerateTooltip: "Regenerate response",
    cancelRequestTooltip: "Cancel Request",
    inputPlaceholder: "Type your revision instructions...",
    editMessageTitle: "Edit Message",
    editMessageConfirm: "This will fork the conversation from this point, removing all subsequent messages. Continue?",
    deleteMessageTitle: "Delete Message",
    deleteInitialConfirm: "Deleting part of the initial context will clear the entire chat history. Are you sure?",
    deleteMessageConfirm: "This will delete this message and all subsequent messages. Are you sure?",
    manualEditContent: "I made a change manually.",
    messageHistoryUpdated: "Message history has been updated.",
    requestCancelled: "Request was cancelled.",
    requestFailed: (t) => `Request failed: ${t}`,
    noApiSelected: "No API selected for this session. Please configure Connection Manager.",
    profileNoApi: "Profile has no API configured, using ST default.",
    usingFallbackApi: (t, r) => `Using fallback API: ${t} -> ${r}`
  },
  "zh-CN": {
    editStateTitle: "",
    saveChanges: "",
    cancel: "",
    fieldName: "",
    fieldTriggers: "",
    fieldContent: "",
    viewState: "",
    editState: "",
    backTooltip: "",
    applyTooltip: "",
    apply: "",
    viewInitialContext: "",
    saveAndFork: "",
    editContextTooltip: "",
    deleteContextTooltip: "",
    editAndForkTooltip: "",
    compareChangesTooltip: "",
    deleteMessageTooltip: "",
    regenerate: "",
    regenerateTooltip: "",
    cancelRequestTooltip: "",
    inputPlaceholder: "...",
    editMessageTitle: "",
    editMessageConfirm: "",
    deleteMessageTitle: "",
    deleteInitialConfirm: "",
    deleteMessageConfirm: "",
    manualEditContent: "",
    messageHistoryUpdated: "",
    requestCancelled: "",
    requestFailed: (t) => `${t}`,
    noApiSelected: " API",
    profileNoApi: " API ST ",
    usingFallbackApi: (t, r) => ` API${t} -> ${r}`
  }
}, GT = (t, r) => {
  const s = structuredClone(t);
  return s.comment = r.name, s.key = r.triggers, s.content = r.content, s;
}, ZT = (t, r) => {
  const s = structuredClone(t);
  if (r.remove)
    for (const a of r.remove) {
      const { worldName: u, name: l } = a;
      s[u] && (s[u] = s[u].filter((h) => h.comment !== l));
    }
  if (r.change)
    for (const a of r.change) {
      const { worldName: u, originalName: l } = a, h = s[u]?.find((m) => m.comment === l);
      h ? (a.newName !== void 0 && (h.comment = a.newName), a.triggers !== void 0 && (h.key = a.triggers), a.content !== void 0 && (h.content = a.content)) : (console.warn(`[WREC] Could not find entry to change: "${l}" in world "${u}"`), ye("warning", `Could not find entry to change: "${l}" in world "${u}"`));
    }
  if (r.add)
    for (const a of r.add) {
      const { worldName: u, name: l, triggers: h, content: m } = a;
      s[u] || (s[u] = []);
      const f = { entries: Object.fromEntries(s[u].map((v) => [v.uid, v])) }, g = hl(u, f);
      g && (g.comment = l, g.key = h, g.content = m, s[u].push(g));
    }
  return s;
}, $T = ({ initialState: t, onSave: r, onClose: s }) => {
  const u = Oe.getSettings()?.language ?? El, l = Cl[u] ?? Cl[El], [h, m] = se.useState(t.comment), [f, g] = se.useState(t.key.join(", ")), [v, E] = se.useState(t.content), _ = () => {
    const b = {
      ...structuredClone(t),
      comment: h,
      key: f.split(",").map((p) => p.trim()).filter(Boolean),
      content: v
    };
    r(b);
  };
  return /* @__PURE__ */ T.jsxs("div", { className: "current-state-popup", children: [
    /* @__PURE__ */ T.jsxs("div", { className: "popup_header", children: [
      /* @__PURE__ */ T.jsx("h3", { children: l.editStateTitle }),
      /* @__PURE__ */ T.jsxs("div", { className: "popup_header_buttons", children: [
        /* @__PURE__ */ T.jsxs(Ae, { onClick: _, children: [
          /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-check" }),
          " ",
          l.saveChanges
        ] }),
        /* @__PURE__ */ T.jsxs(Ae, { onClick: s, className: "danger_button", children: [
          /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-times" }),
          " ",
          l.cancel
        ] })
      ] })
    ] }),
    /* @__PURE__ */ T.jsxs("div", { className: "current-state-content", children: [
      /* @__PURE__ */ T.jsxs("div", { className: "state-field", children: [
        /* @__PURE__ */ T.jsx("label", { children: l.fieldName }),
        /* @__PURE__ */ T.jsx(tb, { type: "text", value: h, onInput: (b) => m(b.currentTarget.value) })
      ] }),
      /* @__PURE__ */ T.jsxs("div", { className: "state-field", children: [
        /* @__PURE__ */ T.jsx("label", { children: l.fieldTriggers }),
        /* @__PURE__ */ T.jsx(Er, { value: f, onChange: (b) => g(b.target.value), rows: 2 })
      ] }),
      /* @__PURE__ */ T.jsxs("div", { className: "state-field", children: [
        /* @__PURE__ */ T.jsx("label", { children: l.fieldContent }),
        /* @__PURE__ */ T.jsx(Er, { value: v, onChange: (b) => E(b.target.value), rows: 8 })
      ] })
    ] })
  ] });
}, VT = ({
  session: t,
  onBack: r,
  onApply: s,
  onSessionUpdate: a,
  initialState: u,
  chatContextOptions: l
}) => {
  const m = Oe.getSettings()?.language ?? El, f = Cl[m] ?? Cl[El], [g, v] = se.useState(t.messages), [E, _] = se.useState(""), [b, p] = se.useState(!1), [C, k] = se.useState(null), [j, O] = se.useState(!1), [I, c] = se.useState(!1), [S, w] = se.useState(null), [A, N] = se.useState(""), D = se.useRef(null), M = se.useRef(null);
  se.useEffect(() => {
    D.current?.scrollIntoView({ behavior: "smooth" });
  }, [g]);
  const P = se.useCallback(
    (te, _e, be) => {
      if (JSON.stringify(be) === JSON.stringify(_e))
        return te;
      const Ze = Oe.getSettings();
      let $e = "";
      if (t.type === "global") {
        const Je = Ze.prompts.reviseGlobalStateUpdate?.content, et = Ze.prompts.reviseGlobalStateUpdateAddedModified?.content, Ht = Ze.prompts.reviseGlobalStateUpdateRemoved?.content;
        if (!Je || !et || !Ht) return te;
        const qt = be || {}, Wt = _e || {}, en = /* @__PURE__ */ new Map();
        Object.entries(qt).forEach(([V, ae]) => {
          ae.forEach((ne) => {
            en.set(`${V}::${ne.uid}`, ne);
          });
        });
        const vt = /* @__PURE__ */ new Map();
        Object.entries(Wt).forEach(([V, ae]) => {
          ae.forEach((ne) => {
            vt.set(`${V}::${ne.uid}`, ne);
          });
        });
        const vn = {}, St = [];
        if (vt.forEach((V, ae) => {
          const [ne] = ae.split("::"), he = en.get(ae);
          let ve = !1;
          if (!he)
            ve = !0;
          else {
            const Ee = (V.content || "") !== (he.content || ""), Le = (V.comment || "") !== (he.comment || ""), ge = (V.key || []).sort().join(",") !== (he.key || []).sort().join(",");
            (Ee || Le || ge) && (ve = !0);
          }
          ve && (vn[ne] || (vn[ne] = []), vn[ne].push(V));
        }), en.forEach((V, ae) => {
          if (!vt.has(ae)) {
            const [ne] = ae.split("::");
            St.push({ worldName: ne, comment: V.comment });
          }
        }), Object.keys(vn).length === 0 && St.length === 0)
          return te;
        const me = Nn.compile(et, { noEscape: !0 })({
          changedLorebooks: vn
        }), B = Nn.compile(Ht, { noEscape: !0 })({ removedEntries: St });
        $e = Nn.compile(Je, { noEscape: !0 })({
          addedModifiedContent: me,
          removedContent: B
        });
      } else {
        const Je = _e;
        $e = `The following is the current state of the single lorebook entry you are editing. Base your response on this current state.

## WORLD NAME: ${t.worldName}
### (NAME: ${Je.comment})
Triggers: ${(Je.key || []).join(", ")}
Content: ${Je.content}`;
      }
      if ($e = Gs.substituteParams($e.trim()), $e) {
        const Je = {
          id: `msg-${Date.now()}-state`,
          role: "system",
          content: $e,
          isStateUpdate: !0
        };
        return [...te, Je];
      }
      return te;
    },
    [t.type, t.worldName]
  ), H = se.useCallback(
    async (te, _e, be, Ze) => {
      const $e = Oe.getSettings();
      if (!$e.directApi?.enabled || !t.directApiPresetKey) {
        ye("warning", f.noApiSelected);
        return;
      }
      M.current = new AbortController(), be(), p(!0);
      try {
        const et = [];
        let Ht;
        for (const [me, B] of Object.entries(Gs.CONNECT_API_MAP || {}))
          if (B && B.selected) {
            Ht = B.selected;
            break;
          }
        for (const me of te)
          if (me.id === If) {
            if (mn === void 0 && !an) continue;
            if (!Ht) {
              console.warn("[WorldInfoRecommender] No SillyTavern API configured, skipping chat history");
              continue;
            }
            const B = await C0(Ht, l);
            B.warnings?.length && B.warnings.forEach((V) => ye("warning", V)), et.push(...B.result);
          } else
            et.push(me);
        const qt = te.slice(0, te.length - (_e ? 0 : 1)).reverse().find((me) => me.stateSnapshot)?.stateSnapshot ?? u;
        let Wt = "";
        if (t.type === "global") {
          const me = $e.prompts.currentLorebooks?.content;
          if (me) {
            const B = { currentLorebooks: qt };
            Wt = Nn.compile(me, { noEscape: !0 })(B);
          }
        } else {
          const me = qt;
          Wt = `The following is the current state of the single lorebook entry you are editing. Base your response on this current state.

## WORLD NAME: ${t.worldName}
### (NAME: ${me.comment})
Triggers: ${(me.key || []).join(", ")}
Content: ${me.content}`;
        }
        if (Wt = Gs.substituteParams(Wt.trim()), Wt) {
          const me = {
            id: `temp-state-${Date.now()}`,
            role: "system",
            content: Wt
          }, B = et.pop();
          et.push(me), B && et.push(B);
        }
        let en, vt;
        if (t.type === "entry") {
          const me = await Ky(
            t.directApiPresetKey,
            et,
            NT,
            Fy.ENTRY,
            t.promptEngineeringMode,
            $e.maxResponseToken,
            M.current.signal
          );
          en = GT(qt, me), vt = me.justification;
        } else {
          const me = await Ky(
            t.directApiPresetKey,
            et,
            jT,
            Fy.GLOBAL,
            t.promptEngineeringMode,
            $e.maxResponseToken,
            M.current.signal
          );
          en = ZT(qt, me), vt = me.justification;
        }
        const vn = {
          id: `msg-${Date.now()}-ai`,
          role: "assistant",
          content: vt,
          stateSnapshot: en
        };
        let St = [...te, vn];
        St = P(St, en, qt), v(St), a({ ...t, messages: St });
      } catch (et) {
        et.name === "AbortError" ? ye("info", f.requestCancelled) : (console.error("Revise request failed:", et), ye("error", f.requestFailed(et.message))), Ze();
      } finally {
        p(!1), M.current = null;
      }
    },
    [t, a, u, l, P]
  ), X = se.useCallback(async () => {
    if (!E.trim() || b) return;
    const te = { id: `msg-${Date.now()}`, role: "user", content: E.trim() }, _e = g;
    await H(
      [...g, te],
      !1,
      () => {
        v([...g, te]), _("");
      },
      () => v(_e)
    );
  }, [E, b, g, H]), F = se.useCallback(async () => {
    if (b || g.length === 0) return;
    const te = g;
    let _e = [...g];
    const be = g.findLastIndex((Ze) => !Ze.isStateUpdate);
    be > -1 && g[be].role === "assistant" && (_e = g.slice(0, be)), await H(
      _e,
      !0,
      () => v(_e),
      () => v(te)
    );
  }, [b, g, H]), Q = () => {
    const te = g.slice().reverse().find((_e) => _e.stateSnapshot)?.stateSnapshot ?? u;
    s(te), r();
  }, R = (te) => {
    const _e = g.findIndex(($e) => $e.id === te);
    if (_e < 0 || !g[_e].stateSnapshot) return;
    const be = g[_e].stateSnapshot;
    let Ze = u;
    for (let $e = _e - 1; $e >= 0; $e--)
      if (g[$e].stateSnapshot) {
        Ze = g[$e].stateSnapshot;
        break;
      }
    k({ before: Ze, after: be });
  }, q = (te) => {
    w(te.id), N(te.content);
  }, $ = () => {
    w(null), N("");
  }, oe = async () => {
    if (!S) return;
    const te = g.findIndex((et) => et.id === S);
    if (te === -1 || !await Gs.Popup.show.confirm(f.editMessageTitle, f.editMessageConfirm)) return;
    const be = g, Ze = g.slice(0, te), $e = { ...g[te], content: A }, Je = [...Ze, $e];
    $(), await H(
      Je,
      !1,
      () => v(Je),
      () => v(be)
    );
  }, z = async (te) => {
    const _e = g.findIndex((Je) => Je.id === te);
    if (_e === -1) return;
    const be = !!g[_e].isInitial;
    if (!await Gs.Popup.show.confirm(
      f.deleteMessageTitle,
      be ? f.deleteInitialConfirm : f.deleteMessageConfirm
    )) return;
    const $e = be ? g.filter((Je) => Je.isInitial && Je.id !== te) : g.slice(0, _e);
    v($e), a({ ...t, messages: $e }), ye("info", f.messageHistoryUpdated);
  }, Z = (te) => {
    const _e = g.slice().reverse().find(($e) => $e.stateSnapshot)?.stateSnapshot ?? u, be = {
      id: `msg-${Date.now()}-user-edit`,
      role: "user",
      content: f.manualEditContent,
      stateSnapshot: te
    };
    let Ze = [...g, be];
    Ze = P(Ze, te, _e), v(Ze), a({ ...t, messages: Ze }), c(!1);
  }, re = g.slice().reverse().find((te) => te.stateSnapshot)?.stateSnapshot ?? u, ce = g.filter((te) => !te.isStateUpdate), fe = ce.filter((te) => te.isInitial), we = ce.filter((te) => !te.isInitial);
  return /* @__PURE__ */ T.jsxs("div", { className: "revise-session-chat", children: [
    /* @__PURE__ */ T.jsxs("div", { className: "popup_header", children: [
      /* @__PURE__ */ T.jsx("h2", { children: t.name }),
      /* @__PURE__ */ T.jsxs("div", { className: "popup_header_buttons", children: [
        /* @__PURE__ */ T.jsx(
          "select",
          {
            className: "text_pole",
            value: t.directApiPresetKey,
            onChange: (te) => a({ ...t, directApiPresetKey: te.target.value }),
            title: "Direct API Preset",
            children: Object.entries(Oe.getSettings().directApi?.presets || {}).map(([te, _e]) => /* @__PURE__ */ T.jsx("option", { value: te, children: _e.name || te }, te))
          }
        ),
        /* @__PURE__ */ T.jsxs(
          "select",
          {
            className: "text_pole",
            value: t.promptEngineeringMode,
            onChange: (te) => a({ ...t, promptEngineeringMode: te.target.value }),
            title: "Prompt Engineering Mode",
            children: [
              /* @__PURE__ */ T.jsx("option", { value: "native", children: "Native" }),
              /* @__PURE__ */ T.jsx("option", { value: "json", children: "JSON" }),
              /* @__PURE__ */ T.jsx("option", { value: "xml", children: "XML" })
            ]
          }
        ),
        /* @__PURE__ */ T.jsx(Ae, { onClick: () => O(!0), title: f.viewState, children: f.viewState }),
        t.type === "entry" && /* @__PURE__ */ T.jsx(Ae, { onClick: () => c(!0), title: f.editState, children: f.editState }),
        /* @__PURE__ */ T.jsx(Ae, { onClick: r, title: f.backTooltip, children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-arrow-left" }) }),
        /* @__PURE__ */ T.jsxs(Ae, { onClick: Q, title: f.applyTooltip, children: [
          /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-check" }),
          " ",
          f.apply
        ] })
      ] })
    ] }),
    /* @__PURE__ */ T.jsxs("div", { className: "chat-messages", children: [
      fe.length > 0 && /* @__PURE__ */ T.jsxs("details", { className: "initial-messages-container", children: [
        /* @__PURE__ */ T.jsx("summary", { children: f.viewInitialContext }),
        /* @__PURE__ */ T.jsx("div", { className: "initial-messages-content", children: fe.map(
          (te) => S === te.id ? /* @__PURE__ */ T.jsxs("div", { className: "message-editor", children: [
            /* @__PURE__ */ T.jsx(Er, { value: A, onChange: (_e) => N(_e.target.value), rows: 5 }),
            /* @__PURE__ */ T.jsxs("div", { className: "editor-buttons", children: [
              /* @__PURE__ */ T.jsxs(Ae, { onClick: oe, children: [
                /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-check" }),
                " ",
                f.saveAndFork
              ] }),
              /* @__PURE__ */ T.jsxs(Ae, { onClick: $, children: [
                /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-times" }),
                " ",
                f.cancel
              ] })
            ] })
          ] }, te.id) : /* @__PURE__ */ T.jsxs("div", { className: `message-bubble-wrapper initial-context ${te.role}`, children: [
            /* @__PURE__ */ T.jsx("div", { className: `message-bubble ${te.role} initial`, children: /* @__PURE__ */ T.jsx("div", { className: "message-content", children: te.content }) }),
            !b && te.id !== If && /* @__PURE__ */ T.jsxs("div", { className: "message-actions", children: [
              /* @__PURE__ */ T.jsx(
                Ae,
                {
                  className: "message-action-button",
                  onClick: () => q(te),
                  title: f.editContextTooltip,
                  children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-pencil" })
                }
              ),
              /* @__PURE__ */ T.jsx(
                Ae,
                {
                  className: "message-action-button danger_button",
                  onClick: () => z(te.id),
                  title: f.deleteContextTooltip,
                  children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-trash-can" })
                }
              )
            ] })
          ] }, te.id)
        ) })
      ] }),
      we.map(
        (te) => S === te.id ? /* @__PURE__ */ T.jsxs("div", { className: "message-editor", children: [
          /* @__PURE__ */ T.jsx(Er, { value: A, onChange: (_e) => N(_e.target.value), rows: 3 }),
          /* @__PURE__ */ T.jsxs("div", { className: "editor-buttons", children: [
            /* @__PURE__ */ T.jsxs(Ae, { onClick: oe, children: [
              /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-check" }),
              " ",
              f.saveAndFork
            ] }),
            /* @__PURE__ */ T.jsxs(Ae, { onClick: $, children: [
              /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-times" }),
              " ",
              f.cancel
            ] })
          ] })
        ] }, te.id) : /* @__PURE__ */ T.jsxs("div", { className: `message-bubble-wrapper ${te.role}`, children: [
          /* @__PURE__ */ T.jsxs("div", { className: "message-actions", children: [
            te.role === "user" && !te.stateSnapshot && !b && /* @__PURE__ */ T.jsx(
              Ae,
              {
                className: "message-action-button",
                onClick: () => q(te),
                title: f.editAndForkTooltip,
                children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-pencil" })
              }
            ),
            te.stateSnapshot && !b && /* @__PURE__ */ T.jsx(
              Ae,
              {
                className: "message-action-button",
                onClick: () => R(te.id),
                title: f.compareChangesTooltip,
                children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-code-compare" })
              }
            ),
            !b && /* @__PURE__ */ T.jsx(
              Ae,
              {
                className: "message-action-button danger_button",
                onClick: () => z(te.id),
                title: f.deleteMessageTooltip,
                children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-trash-can" })
              }
            )
          ] }),
          /* @__PURE__ */ T.jsx("div", { className: `message-bubble ${te.role}`, children: /* @__PURE__ */ T.jsx("div", { className: "message-content", children: te.content }) })
        ] }, te.id)
      ),
      we.length > 0 && !b && /* @__PURE__ */ T.jsx("div", { className: "regenerate-button-wrapper", children: /* @__PURE__ */ T.jsxs(Ae, { onClick: F, title: f.regenerateTooltip, children: [
        /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-rotate-right" }),
        " ",
        f.regenerate
      ] }) }),
      b && /* @__PURE__ */ T.jsxs("div", { className: "message-bubble-wrapper assistant", children: [
        /* @__PURE__ */ T.jsx("div", { className: "message-bubble assistant loading", children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-spinner fa-spin" }) }),
        /* @__PURE__ */ T.jsx(
          Ae,
          {
            onClick: () => M.current?.abort(),
            className: "danger_button",
            title: f.cancelRequestTooltip,
            children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-stop" })
          }
        )
      ] }),
      /* @__PURE__ */ T.jsx("div", { ref: D })
    ] }),
    /* @__PURE__ */ T.jsxs("div", { className: "chat-input-area", children: [
      /* @__PURE__ */ T.jsx(
        Er,
        {
          value: E,
          onChange: (te) => _(te.target.value),
          placeholder: f.inputPlaceholder,
          rows: 3,
          disabled: b || !!S,
          onKeyDown: (te) => {
            te.key === "Enter" && !te.shiftKey && (te.preventDefault(), X());
          }
        }
      ),
      /* @__PURE__ */ T.jsx(Ae, { onClick: X, disabled: b || !E.trim() || !!S, children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-paper-plane" }) })
    ] }),
    C && /* @__PURE__ */ T.jsx(
      rr,
      {
        type: Yt.DISPLAY,
        content: /* @__PURE__ */ T.jsx(rh, { sessionType: t.type, before: C.before, after: C.after }),
        onComplete: () => k(null),
        options: { wide: !0, large: !0 }
      }
    ),
    j && /* @__PURE__ */ T.jsx(
      rr,
      {
        type: Yt.DISPLAY,
        content: t.type === "entry" ? /* @__PURE__ */ T.jsx(HT, { currentState: re, initialState: u }) : /* @__PURE__ */ T.jsx(
          qT,
          {
            currentState: re,
            initialState: u
          }
        ),
        onComplete: () => O(!1),
        options: { wide: !0, large: !0 }
      }
    ),
    I && t.type === "entry" && /* @__PURE__ */ T.jsx(
      rr,
      {
        type: Yt.DISPLAY,
        content: /* @__PURE__ */ T.jsx(
          $T,
          {
            initialState: re,
            onSave: (te) => {
              Z(te), c(!1);
            },
            onClose: () => c(!1)
          }
        ),
        onComplete: () => c(!1),
        options: { wide: !0, large: !0 }
      }
    )
  ] });
};
async function YT(t, r, s, a, u, l, h) {
  const m = Oe.getSettings(), f = m.mainContextTemplatePresets[a];
  if (!f)
    throw new Error(`Main context template preset "${a}" not found.`);
  const g = [], v = {
    user: Ne.name1 || "You",
    char: Ne.name2 || "Character",
    persona: Ne.powerUserSettings.persona_description,
    blackListedEntries: l.blackListedEntries
  };
  if (u.worldInfo)
    if (r === "global")
      v.currentLorebooks = t;
    else {
      const _ = {};
      Object.entries(h).filter(([b]) => l.selectedWorldNames.includes(b)).forEach(([b, p]) => {
        const C = new Set(l.selectedEntryUids[b] ?? []), k = C.size > 0 ? p.filter((j) => C.has(j.uid)) : p.filter((j) => !j.disable);
        k.length > 0 && (_[b] = k);
      }), v.currentLorebooks = _;
    }
  if (r === "entry") {
    const _ = t;
    v.entryToRevise = {
      worldName: s,
      name: _.comment,
      triggers: (_.key || []).join(", "),
      content: _.content
    };
  }
  for (const _ of f.prompts) {
    if (!_.enabled || ["taskDescription", "responseRules", "currentLorebooks"].includes(_.promptName) || _.promptName === "chatHistory" && u.messages.type === "none" || mn === void 0 && !an && _.promptName === "chatHistory") continue;
    if (_.promptName === "chatHistory") {
      g.push({
        id: If,
        role: "system",
        content: "[[Chat history placeholder]]",
        isInitial: !0
      });
      continue;
    }
    const b = m.prompts[_.promptName];
    if (b) {
      let p = Nn.compile(b.content, { noEscape: !0 })(v);
      p = Ne.substituteParams(p), p.trim() && g.push({
        id: `im-${g.length}`,
        role: _.role,
        content: p.trim(),
        isInitial: !0
      });
    }
  }
  const E = m.prompts.reviseTaskDescription?.content;
  if (E) {
    const _ = Nn.compile(E, { noEscape: !0 })({
      isEntrySession: r === "entry",
      targetEntryName: r === "entry" ? t.comment : ""
    });
    g.push({
      id: `im-${g.length}`,
      role: "system",
      content: _,
      isInitial: !0
    });
  }
  return g;
}
const yf = SillyTavern.getContext(), t0 = "worldInfoRecommender_reviseSessions", n0 = "en", r0 = {
  en: {
    titleEntry: (t) => `Revise Sessions for "${t}"`,
    titleGlobal: "Global Revise Sessions",
    loading: "Loading sessions...",
    noSessions: "No sessions found. Create one to get started.",
    newSessionButton: "New Session",
    newSessionPopupTitle: "New Session Name",
    newSessionDefaultNameEntry: (t, r) => `Revise "${t}" - ${r}`,
    newSessionDefaultNameGlobal: (t) => `Global Revise - ${t}`,
    deleteConfirmTitle: "Delete Session",
    deleteConfirmMessage: "Are you sure? This cannot be undone.",
    needProfileWarning: "Please select a connection profile in the main popup first.",
    createError: (t) => `Failed to create session: ${t}`
  },
  "zh-CN": {
    titleEntry: (t) => `"${t}" `,
    titleGlobal: "",
    loading: "...",
    noSessions: "",
    newSessionButton: "",
    newSessionPopupTitle: "",
    newSessionDefaultNameEntry: (t, r) => ` "${t}" - ${r}`,
    newSessionDefaultNameGlobal: (t) => ` - ${t}`,
    deleteConfirmTitle: "",
    deleteConfirmMessage: "",
    needProfileWarning: "",
    createError: (t) => `${t}`
  }
}, Rb = ({
  target: t,
  initialState: r,
  onClose: s,
  onApply: a,
  sessionForContext: u,
  allEntries: l,
  contextToSend: h
}) => {
  const f = Oe.getSettings()?.language ?? n0, g = r0[f] ?? r0[n0], [v, E] = se.useState([]), [_, b] = se.useState(null), [p, C] = se.useState(!0), k = se.useMemo(() => t.type === "entry" ? `${t.worldName}::${t.entry.uid}::${t.entry.comment}` : "global", [t]);
  se.useEffect(() => {
    const D = JSON.parse(localStorage.getItem(t0) || "[]");
    E(D), C(!1);
  }, []);
  const j = se.useMemo(() => t.type === "entry" ? v.filter((D) => D.type === "entry" && D.targetEntryIdentifier === k).sort((D, M) => new Date(M.createdAt).getTime() - new Date(D.createdAt).getTime()) : v.filter((D) => D.type === "global").sort((D, M) => new Date(M.createdAt).getTime() - new Date(D.createdAt).getTime()), [v, t.type, k]), O = (D) => {
    localStorage.setItem(t0, JSON.stringify(D)), E(D);
  }, I = async () => {
    const D = (/* @__PURE__ */ new Date()).toLocaleDateString(), M = t.type === "entry" ? g.newSessionDefaultNameEntry(t.entry.comment, D) : g.newSessionDefaultNameGlobal(D), P = await yf.Popup.show.input(g.newSessionPopupTitle, M);
    if (P)
      try {
        const H = Oe.getSettings();
        if (!H.directApi?.enabled || !H.directApi?.currentPreset) {
          ye("warning", g.needProfileWarning);
          return;
        }
        const X = await YT(
          r,
          t.type,
          t.type === "entry" ? t.worldName : void 0,
          H.mainContextTemplatePreset,
          h,
          u,
          l
        ), F = {
          id: `rs-${Date.now()}`,
          name: P,
          type: t.type,
          targetEntryIdentifier: t.type === "entry" ? k : void 0,
          worldName: t.type === "entry" ? t.worldName : void 0,
          createdAt: (/* @__PURE__ */ new Date()).toISOString(),
          messages: X,
          context: { mainContextTemplatePreset: H.mainContextTemplatePreset },
          directApiPresetKey: H.directApi.currentPreset,
          promptEngineeringMode: H.defaultPromptEngineeringMode
        };
        b(F);
      } catch (H) {
        const X = H instanceof Error ? H.message : String(H);
        console.error("Failed to create session:", H), ye("error", g.createError(X));
      }
  }, c = (D) => {
    b(D);
  }, S = async (D) => {
    if (await yf.Popup.show.confirm(g.deleteConfirmTitle, g.deleteConfirmMessage)) {
      const P = v.filter((H) => H.id !== D);
      O(P);
    }
  }, w = (D) => {
    const M = v.findIndex((H) => H.id === D.id), P = [...v];
    M !== -1 ? P[M] = D : P.push(D), O(P), b(D);
  }, A = (D) => {
    t.type === "entry" ? a({
      worldName: t.worldName,
      originalEntry: r,
      updatedEntry: D
    }) : a(D), s();
  };
  if (_) {
    const D = h.messages, M = {
      targetCharacterId: mn,
      ignoreCharacterFields: !h.charCard,
      ignoreWorldInfo: !0,
      ignoreAuthorNote: !h.authorNote,
      includeNames: !!an
    };
    if (!mn && !an)
      M.messageIndexesBetween = { start: -1, end: -1 };
    else
      switch (D.type) {
        case "none":
          M.messageIndexesBetween = { start: -1, end: -1 };
          break;
        case "first":
          M.messageIndexesBetween = { start: 0, end: D.first ?? 10 };
          break;
        case "last": {
          const P = yf.chat?.length ?? 0, H = D.last ?? 10;
          M.messageIndexesBetween = {
            end: Math.max(0, P - 1),
            start: Math.max(0, P - H)
          };
          break;
        }
        case "range":
          D.range && (M.messageIndexesBetween = {
            start: D.range.start,
            end: D.range.end
          });
          break;
      }
    return /* @__PURE__ */ T.jsx(
      VT,
      {
        session: _,
        onBack: () => b(null),
        onApply: A,
        onSessionUpdate: w,
        initialState: r,
        chatContextOptions: M
      }
    );
  }
  const N = t.type === "entry" ? g.titleEntry(t.entry.comment) : g.titleGlobal;
  return /* @__PURE__ */ T.jsxs("div", { className: "revise-session-manager", children: [
    /* @__PURE__ */ T.jsx("div", { className: "popup_header", children: /* @__PURE__ */ T.jsx("h2", { children: N }) }),
    /* @__PURE__ */ T.jsx("div", { className: "session-list", children: p ? /* @__PURE__ */ T.jsx("p", { className: "subtle", style: { textAlign: "center" }, children: g.loading }) : j.length === 0 ? /* @__PURE__ */ T.jsx("p", { className: "subtle", style: { textAlign: "center" }, children: g.noSessions }) : j.map((D) => /* @__PURE__ */ T.jsxs("div", { className: "session-item", children: [
      /* @__PURE__ */ T.jsxs("div", { className: "session-info", onClick: () => c(D), children: [
        /* @__PURE__ */ T.jsx("span", { className: "session-name", children: D.name }),
        /* @__PURE__ */ T.jsx("span", { className: "session-date", children: new Date(D.createdAt).toLocaleString() })
      ] }),
      /* @__PURE__ */ T.jsx(Ae, { className: "danger_button", onClick: () => S(D.id), children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-trash-can" }) })
    ] }, D.id)) }),
    /* @__PURE__ */ T.jsx("div", { className: "session-actions", children: /* @__PURE__ */ T.jsxs(Ae, { onClick: I, className: "menu_button", children: [
      /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-plus" }),
      " ",
      g.newSessionButton
    ] }) })
  ] });
}, FT = new pw.Converter(), a0 = "en", i0 = {
  en: {
    addUpdate: "Update",
    addNew: "Add",
    reviseSessionButton: "Revise",
    reviseSessionTooltip: "Revise this entry with a chat-based AI session.",
    continueLabelIdle: "Continue",
    continueLabelBusy: "...",
    continueTooltip: "Continue writing this entry. You can provide instructions in the textbox below.",
    reviseLabelIdle: "Revise",
    reviseLabelBusy: "...",
    reviseTooltip: "Request changes to this entry. Provide instructions in the textbox below.",
    editButton: "Edit",
    compareButton: "Compare",
    blacklistButton: "Blacklist",
    removeButton: "Remove",
    instructionsPlaceholder: "Optional instructions to continue or revise this entry. Then press 'Continue' or 'Revise'."
  },
  "zh-CN": {
    addUpdate: "",
    addNew: "",
    reviseSessionButton: "",
    reviseSessionTooltip: " AI ",
    continueLabelIdle: "",
    continueLabelBusy: "...",
    continueTooltip: "",
    reviseLabelIdle: "",
    reviseLabelBusy: "...",
    reviseTooltip: "",
    editButton: "",
    compareButton: "",
    blacklistButton: "",
    removeButton: "",
    instructionsPlaceholder: ""
  }
}, XT = ({
  initialWorldName: t,
  entry: r,
  allWorldNames: s,
  existingEntry: a,
  sessionRegexIds: u,
  onAdd: l,
  onRemove: h,
  onContinue: m,
  onUpdate: f,
  entriesGroupByWorldName: g,
  sessionForContext: v,
  contextToSend: E
}) => {
  const b = Oe.getSettings()?.language ?? a0, p = i0[b] ?? i0[a0], [C, k] = se.useState(() => s.find((ce) => ce === t) ?? s[0] ?? ""), [j, O] = se.useState(!1), [I, c] = se.useState(!1), [S, w] = se.useState(!1), [A, N] = se.useState(!1), [D, M] = se.useState(!1), [P, H] = se.useState(!1), [X, F] = se.useState(""), Q = se.useRef(null), R = se.useMemo(
    () => !!g[C]?.find((re) => re.uid === r.uid),
    [C, r.uid, g]
  ), q = I || S, $ = async () => {
    O(!0), await l(r, t, C), O(!1);
  }, oe = async () => {
    c(!0), await m({ worldName: t, entry: r, prompt: X, mode: "continue" }), c(!1);
  }, z = async () => {
    w(!0), await m({ worldName: t, entry: r, prompt: X, mode: "revise" }), w(!1);
  }, Z = (re) => {
    const ce = re.updatedEntry ? re.updatedEntry : re;
    f(t, r, ce, u);
  };
  return /* @__PURE__ */ T.jsxs(T.Fragment, { children: [
    /* @__PURE__ */ T.jsxs("div", { className: "entry", children: [
      /* @__PURE__ */ T.jsxs("div", { className: "menu", children: [
        /* @__PURE__ */ T.jsx(
          "select",
          {
            className: "world-select text_pole",
            value: C,
            onChange: (re) => k(re.target.value),
            children: s.map((re) => /* @__PURE__ */ T.jsx("option", { value: re, children: re }, re))
          }
        ),
        /* @__PURE__ */ T.jsx(Ae, { onClick: $, disabled: j || q, className: "menu_button interactable add", children: R ? p.addUpdate : p.addNew }),
        /* @__PURE__ */ T.jsxs(
          Ae,
          {
            onClick: () => H(!0),
            disabled: q,
            className: "menu_button interactable",
            title: p.reviseSessionTooltip,
            children: [
              /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-comments" }),
              " ",
              p.reviseSessionButton
            ]
          }
        ),
        /* @__PURE__ */ T.jsx(
          Ae,
          {
            onClick: oe,
            disabled: q,
            className: "menu_button interactable continue",
            title: p.continueTooltip,
            children: I ? p.continueLabelBusy : p.continueLabelIdle
          }
        ),
        /* @__PURE__ */ T.jsx(
          Ae,
          {
            onClick: z,
            disabled: q,
            className: "menu_button interactable revise",
            title: p.reviseTooltip,
            children: S ? p.reviseLabelBusy : p.reviseLabelIdle
          }
        ),
        /* @__PURE__ */ T.jsx(Ae, { onClick: () => N(!0), disabled: q, className: "menu_button interactable edit", children: p.editButton }),
        R && /* @__PURE__ */ T.jsx(
          Ae,
          {
            onClick: () => M(!0),
            disabled: q,
            className: "menu_button interactable compare",
            children: p.compareButton
          }
        ),
        /* @__PURE__ */ T.jsx(
          Ae,
          {
            onClick: () => h(r, t, !0),
            disabled: q,
            className: "menu_button interactable blacklist",
            children: p.blacklistButton
          }
        ),
        /* @__PURE__ */ T.jsx(
          Ae,
          {
            onClick: () => h(r, t, !1),
            disabled: q,
            className: "menu_button interactable remove",
            children: p.removeButton
          }
        )
      ] }),
      /* @__PURE__ */ T.jsx("h4", { className: "comment", children: r.comment }),
      /* @__PURE__ */ T.jsx("div", { className: "key", children: (r.key || []).join(", ") }),
      /* @__PURE__ */ T.jsx("p", { className: "content", dangerouslySetInnerHTML: { __html: FT.makeHtml(r.content ?? "") } }),
      /* @__PURE__ */ T.jsx("div", { className: "continue-prompt-section", style: { marginTop: "10px" }, children: /* @__PURE__ */ T.jsx(
        Er,
        {
          value: X,
          onChange: (re) => F(re.target.value),
          placeholder: p.instructionsPlaceholder,
          rows: 2,
          style: { width: "100%" }
        }
      ) })
    ] }),
    A && /* @__PURE__ */ T.jsx(
      rr,
      {
        type: Yt.CONFIRM,
        content: /* @__PURE__ */ T.jsx(Dw, { ref: Q, entry: r, initialRegexIds: u }),
        onComplete: (re) => {
          if (re && Q.current) {
            const { updatedEntry: ce, updatedRegexIds: fe } = Q.current.getFormData();
            f(t, r, ce, fe);
          }
          N(!1);
        }
      }
    ),
    D && a && /* @__PURE__ */ T.jsx(
      rr,
      {
        type: Yt.DISPLAY,
        content: /* @__PURE__ */ T.jsx(Rw, { originalEntry: a, newEntry: r }),
        onComplete: () => M(!1)
      }
    ),
    P && /* @__PURE__ */ T.jsx(
      rr,
      {
        type: Yt.DISPLAY,
        content: /* @__PURE__ */ T.jsx(
          Rb,
          {
            target: { type: "entry", worldName: t, entry: r },
            initialState: r,
            onClose: () => H(!1),
            onApply: Z,
            sessionForContext: v,
            allEntries: g,
            contextToSend: E
          }
        ),
        onComplete: () => H(!1),
        options: { wide: !0, large: !0 }
      }
    )
  ] });
}, s0 = {
  en: {
    title: " Parse Failed - Raw Content Saved",
    errorLabel: "Error:",
    timestampLabel: "Time:",
    viewRawContent: "View Raw Content",
    hideRawContent: "Hide Raw Content",
    copyButton: "Copy",
    copySuccess: "Copied to clipboard!",
    removeButton: "Clear Record",
    partialSuccessInfo: (t) => `${t} entries partially recovered`
  },
  "zh-CN": {
    title: "  - ",
    errorLabel: ":",
    timestampLabel: ":",
    viewRawContent: "",
    hideRawContent: "",
    copyButton: "",
    copySuccess: "",
    removeButton: "",
    partialSuccessInfo: (t) => ` ${t} `
  }
}, KT = ({
  record: t,
  language: r,
  onRemove: s
}) => {
  const [a, u] = se.useState(!1), l = s0[r] || s0.en, h = async () => {
    try {
      await navigator.clipboard.writeText(t.rawContent), ye("success", l.copySuccess);
    } catch (g) {
      console.error("Failed to copy:", g);
    }
  }, m = (g) => {
    try {
      return new Date(g).toLocaleString(r === "zh-CN" ? "zh-CN" : "en-US");
    } catch {
      return g;
    }
  }, f = t.partialEntries ? Object.values(t.partialEntries).flat().length : 0;
  return /* @__PURE__ */ T.jsxs("div", { className: "failed-parse-card", children: [
    /* @__PURE__ */ T.jsx("div", { className: "failed-parse-card__header", children: /* @__PURE__ */ T.jsx("span", { className: "failed-parse-card__title", children: l.title }) }),
    /* @__PURE__ */ T.jsxs("div", { className: "failed-parse-card__body", children: [
      /* @__PURE__ */ T.jsxs("div", { className: "failed-parse-card__info-row", children: [
        /* @__PURE__ */ T.jsx("span", { className: "failed-parse-card__label", children: l.errorLabel }),
        /* @__PURE__ */ T.jsx("span", { className: "failed-parse-card__value failed-parse-card__error", children: t.errorMessage })
      ] }),
      /* @__PURE__ */ T.jsxs("div", { className: "failed-parse-card__info-row", children: [
        /* @__PURE__ */ T.jsx("span", { className: "failed-parse-card__label", children: l.timestampLabel }),
        /* @__PURE__ */ T.jsx("span", { className: "failed-parse-card__value", children: m(t.timestamp) })
      ] }),
      f > 0 && /* @__PURE__ */ T.jsx("div", { className: "failed-parse-card__info-row", children: /* @__PURE__ */ T.jsxs("span", { className: "failed-parse-card__partial-info", children: [
        " ",
        l.partialSuccessInfo(f)
      ] }) }),
      /* @__PURE__ */ T.jsxs("div", { className: "failed-parse-card__actions", children: [
        /* @__PURE__ */ T.jsxs(
          Ae,
          {
            onClick: () => u(!a),
            className: "menu_button interactable",
            children: [
              /* @__PURE__ */ T.jsx("i", { className: a ? "fa-solid fa-chevron-up" : "fa-solid fa-chevron-down" }),
              a ? l.hideRawContent : l.viewRawContent
            ]
          }
        ),
        /* @__PURE__ */ T.jsxs(Ae, { onClick: h, className: "menu_button interactable", children: [
          /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-copy" }),
          l.copyButton
        ] }),
        /* @__PURE__ */ T.jsxs(
          Ae,
          {
            onClick: () => s(t.id),
            className: "menu_button interactable danger_button",
            children: [
              /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-trash" }),
              l.removeButton
            ]
          }
        )
      ] }),
      a && /* @__PURE__ */ T.jsx("div", { className: "failed-parse-card__raw-content", children: /* @__PURE__ */ T.jsx(
        "textarea",
        {
          value: t.rawContent,
          readOnly: !0,
          rows: 15
        }
      ) })
    ] })
  ] });
}, o0 = "en", u0 = {
  en: {
    filterPlaceholder: "Filter by name or lorebook...",
    selectAllFiltered: "Select All (Filtered)",
    deselectAll: "Deselect All",
    noMatches: "No entries match your filter.",
    entryFallback: (t) => `Entry ${t}`
  },
  "zh-CN": {
    filterPlaceholder: "...",
    selectAllFiltered: " ()",
    deselectAll: "",
    noMatches: "",
    entryFallback: (t) => ` ${t}`
  }
}, l0 = se.forwardRef(
  ({ entriesByWorldName: t, initialSelectedUids: r, title: s }, a) => {
    const l = Oe.getSettings()?.language ?? o0, h = u0[l] ?? u0[o0], [m, f] = se.useState(""), [g, v] = se.useState(() => {
      const C = /* @__PURE__ */ new Set();
      return Object.entries(r).forEach(([k, j]) => {
        j.forEach((O) => C.add(`${k}::${O}`));
      }), C;
    }), E = se.useMemo(() => {
      if (!m)
        return t;
      const C = m.toLowerCase(), k = {};
      return Object.entries(t).forEach(([j, O]) => {
        const I = O.filter(
          (c) => c.comment.toLowerCase().includes(C) || j.toLowerCase().includes(C)
        );
        I.length > 0 && (k[j] = I);
      }), k;
    }, [m, t]);
    se.useImperativeHandle(a, () => ({
      getSelection: () => {
        const C = {};
        return g.forEach((k) => {
          const [j, O] = k.split("::"), I = parseInt(O, 10);
          C[j] || (C[j] = []), C[j].push(I);
        }), C;
      }
    }));
    const _ = (C, k) => {
      const j = `${C}::${k}`, O = new Set(g);
      O.has(j) ? O.delete(j) : O.add(j), v(O);
    }, b = () => {
      const C = /* @__PURE__ */ new Set();
      Object.entries(E).forEach(([k, j]) => {
        j.forEach((O) => C.add(`${k}::${O.uid}`));
      }), v(C);
    }, p = () => {
      v(/* @__PURE__ */ new Set());
    };
    return /* @__PURE__ */ T.jsxs("div", { className: "select-entries-popup", children: [
      /* @__PURE__ */ T.jsx("h3", { children: s }),
      /* @__PURE__ */ T.jsxs("div", { className: "controls", children: [
        /* @__PURE__ */ T.jsx(
          "input",
          {
            type: "text",
            className: "text_pole",
            placeholder: h.filterPlaceholder,
            value: m,
            onChange: (C) => f(C.target.value)
          }
        ),
        /* @__PURE__ */ T.jsx(Ae, { onClick: b, children: h.selectAllFiltered }),
        /* @__PURE__ */ T.jsx(Ae, { onClick: p, children: h.deselectAll })
      ] }),
      /* @__PURE__ */ T.jsx("div", { className: "entry-list", children: Object.keys(E).length === 0 ? /* @__PURE__ */ T.jsx("p", { children: h.noMatches }) : Object.entries(E).map(([C, k]) => /* @__PURE__ */ T.jsxs("div", { className: "world-group", children: [
        /* @__PURE__ */ T.jsx("h4", { children: C }),
        /* @__PURE__ */ T.jsx("ul", { children: k.map((j) => /* @__PURE__ */ T.jsx("li", { children: /* @__PURE__ */ T.jsxs("label", { children: [
          /* @__PURE__ */ T.jsx(
            "input",
            {
              type: "checkbox",
              checked: g.has(`${C}::${j.uid}`),
              onChange: () => _(C, j.uid)
            }
          ),
          j.comment || h.entryFallback(j.uid)
        ] }) }, j.uid)) })
      ] }, C)) })
    ] });
  }
);
Nn.helpers.join || Nn.registerHelper("join", function(t, r) {
  return Array.isArray(t) ? t.join(typeof r == "string" ? r : ", ") : "";
});
Nn.helpers.is_not_empty || Nn.registerHelper("is_not_empty", function(t, r) {
  return t ? Array.isArray(t) ? t.length > 0 ? r.fn(this) : r.inverse(this) : typeof t == "object" && Object.keys(t).length > 0 ? r.fn(this) : typeof t != "object" && !Array.isArray(t) ? r.fn(this) : r.inverse(this) : r.inverse(this);
});
const hn = SillyTavern.getContext(), QT = "en", c0 = {
  en: "English",
  "zh-CN": ""
}, JT = {
  en: {
    loadingText: "Loading...",
    title: "World Info Recommender",
    connectionProfileTitle: "Connection Profile",
    contextToSendTitle: "Context to Send",
    descriptionCheckbox: "Description of SillyTavern and Lorebook",
    messagesTitle: "Messages to Include",
    messagesDropdown: {
      none: "None",
      all: "All Messages",
      first: "First X Messages",
      last: "Last X Messages",
      range: "Range"
    },
    messagesFirstLabelBeforeInput: "First ",
    messagesFirstLabelAfterInput: " Messages",
    messagesLastLabelBeforeInput: "Last ",
    messagesLastLabelAfterInput: " Messages",
    rangeLabel: "Range: ",
    rangeConnector: " to ",
    messageCountPlaceholders: {
      start: "Start",
      end: "End"
    },
    selectCharacterTitle: "Select Character",
    selectCharacterTooltip: "Select character for your group.",
    charCardLabel: "Char Card",
    authorNoteLabel: "Author Note",
    worldInfoLabel: "World Info",
    lorebooksTitle: "Lorebooks to Include",
    selectEntriesButton: "Select Entries",
    selectEntriesTooltip: "Select specific entries from the chosen lorebooks",
    selectedEntriesSummary: (t) => t > 0 ? `${t} selected` : "All entries included",
    existingSuggestionsLabel: "Existing Suggestions",
    maxContextLabel: "Max Context",
    maxContextOptions: {
      profile: "Use profile preset",
      sampler: "Use active preset in sampler settings",
      custom: "Custom"
    },
    maxContextPlaceholder: "Enter max tokens",
    maxResponseTokensLabel: "Max Response Tokens",
    maxResponseTokensPlaceholder: "Enter max response tokens",
    promptSectionTitle: "Your Prompt",
    promptPresetLabel: "Prompt Preset",
    promptPlaceholder: "e.g., 'Suggest entries for places {{user}} visited.'",
    sendPromptButton: "Send Prompt",
    generatingButton: "Generating...",
    retryButton: "Retry",
    suggestedEntriesTitle: "Suggested Entries",
    addAllButton: "Add All",
    globalReviseButton: "Global Revise",
    globalReviseTooltip: "Revise all selected existing entries and current suggestions in a single chat session",
    importEntryButton: "Import Entry",
    importEntryTooltip: "Import existing entries to continue/revise them",
    resetButton: "Reset",
    emptyStateMessage: "No suggestions yet. Send a prompt to get started!",
    selectEntriesDialogTitle: "Select Entries to Include in Context",
    importEntriesDialogTitle: "Select Entries to Import for Revision",
    languageButtonLabel: (t) => `Language: ${t}`,
    languageButtonTooltip: "Switch interface language",
    // Direct API
    directApiEnabled: "Use Direct API (bypass Connection Manager)",
    directApiType: "API Format",
    directApiUrl: "API URL",
    directApiKey: "API Key / Token",
    directApiModel: "Model Name",
    directApiTest: "Test",
    directApiTestSuccess: "Connection successful!",
    directApiTestFail: "Connection failed",
    // Direct API Presets
    directApiPreset: "API Preset",
    directApiSaveAsNew: "Save as New",
    directApiSaveAsNewTooltip: "Save current config as a new preset",
    directApiRenamePreset: "Rename",
    directApiRenamePresetTooltip: "Rename current preset",
    directApiDeletePreset: "Delete",
    directApiDeletePresetTooltip: "Delete current preset",
    directApiPresetNamePrompt: "Enter a name for the new preset:",
    directApiPresetRenamePrompt: "Enter a new name for the preset:",
    directApiPresetDeleteConfirm: (t) => `Delete preset "${t}"?`,
    directApiPresetSaved: (t) => `Preset "${t}" saved.`,
    directApiPresetRenamed: (t, r) => `Preset renamed from "${t}" to "${r}".`,
    directApiPresetDeleted: (t) => `Preset "${t}" deleted.`,
    directApiPresetCannotDeleteLast: "Cannot delete the last preset."
  },
  "zh-CN": {
    loadingText: "...",
    title: "",
    connectionProfileTitle: "",
    contextToSendTitle: "",
    descriptionCheckbox: "SillyTavern ",
    messagesTitle: "",
    messagesDropdown: {
      none: "",
      all: "",
      first: " X ",
      last: " X ",
      range: ""
    },
    messagesFirstLabelBeforeInput: "",
    messagesFirstLabelAfterInput: " ",
    messagesLastLabelBeforeInput: "",
    messagesLastLabelAfterInput: " ",
    rangeLabel: "",
    rangeConnector: "  ",
    messageCountPlaceholders: {
      start: "",
      end: ""
    },
    selectCharacterTitle: "",
    selectCharacterTooltip: "",
    charCardLabel: "",
    authorNoteLabel: "",
    worldInfoLabel: "",
    lorebooksTitle: "",
    selectEntriesButton: "",
    selectEntriesTooltip: "",
    selectedEntriesSummary: (t) => t > 0 ? ` ${t} ` : "",
    existingSuggestionsLabel: "",
    maxContextLabel: "",
    maxContextOptions: {
      profile: "",
      sampler: "",
      custom: ""
    },
    maxContextPlaceholder: "",
    maxResponseTokensLabel: " Token",
    maxResponseTokensPlaceholder: " Token",
    promptSectionTitle: "",
    promptPresetLabel: "",
    promptPlaceholder: '" {{user}} "',
    sendPromptButton: "",
    generatingButton: "...",
    retryButton: "",
    suggestedEntriesTitle: "",
    addAllButton: "",
    globalReviseButton: "",
    globalReviseTooltip: "",
    importEntryButton: "",
    importEntryTooltip: "/",
    resetButton: "",
    emptyStateMessage: "",
    selectEntriesDialogTitle: "",
    importEntriesDialogTitle: "",
    languageButtonLabel: (t) => `${t}`,
    languageButtonTooltip: "",
    // Direct API
    directApiEnabled: " API Connection Manager",
    directApiType: "API ",
    directApiUrl: "API ",
    directApiKey: "API Key / Token",
    directApiModel: "",
    directApiTest: "",
    directApiTestSuccess: "",
    directApiTestFail: "",
    // Direct API Presets
    directApiPreset: "API ",
    directApiSaveAsNew: "",
    directApiSaveAsNewTooltip: "",
    directApiRenamePreset: "",
    directApiRenamePresetTooltip: "",
    directApiDeletePreset: "",
    directApiDeletePresetTooltip: "",
    directApiPresetNamePrompt: "",
    directApiPresetRenamePrompt: "",
    directApiPresetDeleteConfirm: (t) => ` "${t}"`,
    directApiPresetSaved: (t) => ` "${t}" `,
    directApiPresetRenamed: (t, r) => ` "${t}"  "${r}"`,
    directApiPresetDeleted: (t) => ` "${t}" `,
    directApiPresetCannotDeleteLast: ""
  }
}, d0 = {
  en: {
    needProfile: "Please select a connection profile.",
    needPrompt: "Please enter a prompt.",
    noResults: "No results from AI",
    noEntriesToAdd: "No entries to add.",
    requestTimeout: "Request timed out. Please check your network or proxy settings.",
    addAllConfirmTitle: "Add All",
    addAllConfirmMessage: (t) => `Are you sure you want to add/update all ${t} suggested entries?`,
    resetConfirmTitle: "Reset",
    resetConfirmMessage: "Clear all suggestions and reset lorebook selection?",
    resetSuccess: "Reset successful",
    entryUnchanged: (t) => `No changes detected for "${t}". Entry was not updated.`,
    entryAdded: "Entry added",
    entryUpdated: "Entry updated",
    entryAddFailed: (t) => `Failed to add entry: ${t}`,
    entryProcessFailed: (t) => `Failed to process entry: ${t}`,
    worldSaveFailed: (t) => `Failed to save world: ${t}`,
    addAllResult: (t, r, s) => `Processed: ${t} new, ${r} updated, ${s} unchanged.`,
    languageSwitched: (t) => `Language switched to ${t}.`,
    importSuccess: (t) => `Imported ${t} entries for revision.`,
    globalReviseApplied: "Changes from global revise session applied.",
    partialParseWarning: "Partial parse successful, but some content failed to parse. Raw content has been saved.",
    parseFailedSaved: "Parse failed. Raw content has been saved for manual review."
  },
  "zh-CN": {
    needProfile: "",
    needPrompt: "",
    noResults: "AI ",
    noEntriesToAdd: "",
    requestTimeout: "",
    addAllConfirmTitle: "",
    addAllConfirmMessage: (t) => ` ${t} `,
    resetConfirmTitle: "",
    resetConfirmMessage: "",
    resetSuccess: "",
    entryUnchanged: (t) => `${t}`,
    entryAdded: "",
    entryUpdated: "",
    entryAddFailed: (t) => `${t}`,
    entryProcessFailed: (t) => `${t}`,
    worldSaveFailed: (t) => `${t}`,
    addAllResult: (t, r, s) => ` ${t}  ${r}  ${s} `,
    languageSwitched: (t) => ` ${t}`,
    importSuccess: (t) => ` ${t} `,
    globalReviseApplied: "",
    partialParseWarning: "",
    parseFailedSaved: ""
  }
}, nl = () => mn ? E0(mn) : an, WT = () => {
  const t = ib(), r = Oe.getSettings(), s = Oi.includes(r.language) ? r.language : QT, a = JT[s], u = d0[s], l = c0[s], h = r.directApi ?? {
    enabled: !1,
    currentPreset: "default",
    presets: {
      default: {
        name: "Default",
        apiType: "openai",
        apiUrl: "",
        apiKey: "",
        modelName: ""
      }
    },
    apiType: "openai",
    apiUrl: "",
    apiKey: "",
    modelName: ""
  }, [m, f] = se.useState({
    suggestedEntries: {},
    blackListedEntries: [],
    selectedWorldNames: [],
    selectedEntryUids: {},
    regexIds: {},
    failedParseRecords: []
  }), [g, v] = se.useState([]), [E, _] = se.useState({}), [b, p] = se.useState([]), [C, k] = se.useState(!0), [j, O] = se.useState(!1), [I, c] = se.useState(!1), [S, w] = se.useState(!1), [A, N] = se.useState(!1), [D, M] = se.useState(null), [P, H] = se.useState([]), [X, F] = se.useState(!1), [Q, R] = se.useState(null), q = se.useRef(null), $ = se.useRef(null), oe = se.useRef(null), z = se.useMemo(() => nl() ?? "_global", [mn, an]);
  se.useEffect(() => {
    (async () => {
      try {
        k(!0), _({}), v([]), p([]);
        const V = nl(), ae = `worldInfoRecommend_${z}`;
        let ne = {};
        try {
          ne = JSON.parse(localStorage.getItem(ae) ?? "{}");
        } catch (ge) {
          console.error("Failed to parse saved session:", ge);
        }
        const he = {
          suggestedEntries: ne.suggestedEntries ?? {},
          blackListedEntries: ne.blackListedEntries ?? [],
          selectedWorldNames: ne.selectedWorldNames ?? [],
          selectedEntryUids: ne.selectedEntryUids ?? {},
          regexIds: ne.regexIds ?? {},
          failedParseRecords: ne.failedParseRecords ?? []
        };
        let ve = {};
        if (V)
          if (an) {
            const ge = await ul(["chat", "persona", "global"], !0);
            ge && (ve = ge);
            const Te = Yg.find((Ye) => Ye.id === an);
            if (Te)
              for (const Ye of Te.members) {
                const ut = hn.characters.findIndex((at) => at.avatar === Ye);
                if (ut !== -1) {
                  const at = await ul(["character"], !0, ut);
                  at && (ve = { ...ve, ...at });
                }
              }
          } else
            ve = await ul(["all"], !0, mn);
        else
          for (const ge of r2) {
            const Te = await hn.loadWorldInfo(ge);
            Te && (ve[ge] = Object.values(Te.entries));
          }
        _(ve);
        const Ee = Object.keys(ve);
        v(Ee), he.selectedWorldNames.length === 0 && z !== "_global" ? he.selectedWorldNames = [...Ee] : he.selectedWorldNames = he.selectedWorldNames.filter(
          (ge) => Ee.includes(ge)
        );
        const Le = {};
        if (he.selectedEntryUids) {
          for (const [ge, Te] of Object.entries(he.selectedEntryUids))
            if (ve[ge]) {
              const Ye = new Set(ve[ge].map((at) => at.uid)), ut = Te.filter((at) => Ye.has(at));
              ut.length > 0 && (Le[ge] = ut);
            }
        }
        if (he.selectedEntryUids = Le, f(he), an) {
          const ge = Yg.find((Te) => Te.id === an);
          if (ge?.generation_mode === 0) {
            const Te = ge.members.map((Ye) => hn.characters.find((ut) => ut.avatar === Ye)).filter((Ye) => !!Ye);
            p(Te);
          }
        }
      } catch (V) {
        console.error("Failed to load data:", V), ye("error", "Failed to load World Info Recommender data. Check console for details.");
      } finally {
        k(!1);
      }
    })();
  }, [z]), se.useEffect(() => {
    if (C) return;
    const B = `worldInfoRecommend_${z}`;
    localStorage.setItem(B, JSON.stringify(m));
  }, [m, z, C]);
  const Z = (B, V) => {
    Oe.getSettings()[B] = V, Oe.saveSettings(), t();
  }, re = (B, V) => {
    Oe.getSettings().contextToSend[B] = V, Oe.saveSettings(), t();
  }, ce = () => {
    const B = Oi.indexOf(s), V = Oi[(B + 1) % Oi.length], ae = c0[V], ne = d0[V]?.languageSwitched ?? u.languageSwitched;
    Z("language", V), ye("info", ne(ae));
  }, fe = se.useCallback(
    async (B, V, ae = !1) => {
      const ne = structuredClone(E);
      ne[V] || (ne[V] = []);
      const he = ne[V].find((Le) => Le.uid === B.uid), ve = !!he;
      let Ee;
      if (ve) {
        if (!B.content && he.content || !B.comment && he.comment)
          return ye(
            "warning",
            " AI  JSON "
          ), "unchanged";
        const Le = (B.content || "") !== (he.content || ""), ge = (B.comment || "") !== (he.comment || ""), Te = (B.key || []).slice().sort().join(",") !== (he.key || []).slice().sort().join(",");
        if (!Le && !ge && !Te)
          return "unchanged";
        Ee = he;
      } else {
        const Le = { entries: Object.fromEntries(ne[V].map((Te) => [Te.uid, Te])) }, ge = hl(V, Le);
        if (!ge) throw new Error("Failed to create new World Info entry.");
        Ee = ge, ne[V].push(Ee);
      }
      if (Object.assign(Ee, {
        key: B.key || [],
        content: B.content || "",
        comment: B.comment || ""
      }), _(ne), !ae) {
        const Le = { entries: Object.fromEntries(ne[V].map((ge) => [ge.uid, ge])) };
        await hn.saveWorldInfo(V, Le), hn.reloadWorldInfoEditor(V, !0);
      }
      return ve ? "updated" : "added";
    },
    [E]
  ), we = se.useCallback(
    async (B) => {
      if (!h.enabled && !r.profileId) return ye("warning", u.needProfile);
      const V = B?.prompt ?? r.promptPresets[r.promptPreset].content;
      if (!B && !V)
        return ye("warning", u.needPrompt);
      M(null), O(!0), R(null);
      const ae = new AbortController();
      q.current = ae;
      try {
        let ne = null;
        if (!h.enabled && (ne = hn.extensionSettings.connectionManager?.profiles?.find(
          (Ie) => Ie.id === r.profileId
        ), !ne))
          throw new Error("Connection profile not found.");
        const he = nl(), ve = {
          // When using direct API, use default preset names or undefined
          presetName: ne?.preset ?? void 0,
          contextName: ne?.context ?? void 0,
          instructName: ne?.instruct ?? void 0,
          syspromptName: ne?.sysprompt ?? void 0,
          ignoreCharacterFields: !r.contextToSend.charCard,
          ignoreWorldInfo: !0,
          ignoreAuthorNote: !r.contextToSend.authorNote,
          maxContext: r.maxContextType === "custom" ? r.maxContextValue : r.maxContextType === "profile" ? "preset" : "active",
          includeNames: !!an
        };
        if (!he)
          ve.messageIndexesBetween = { start: -1, end: -1 };
        else
          switch (r.contextToSend.messages.type) {
            case "none":
              ve.messageIndexesBetween = { start: -1, end: -1 };
              break;
            case "first":
              ve.messageIndexesBetween = { start: 0, end: r.contextToSend.messages.first ?? 10 };
              break;
            case "last": {
              const Ie = r.contextToSend.messages.last ?? 10, Xe = hn.chat?.length ?? 0;
              ve.messageIndexesBetween = {
                end: Math.max(0, Xe - 1),
                start: Math.max(0, Xe - Ie)
              };
              break;
            }
            case "range":
              r.contextToSend.messages.range && (ve.messageIndexesBetween = r.contextToSend.messages.range);
              break;
          }
        const Ee = structuredClone(r.prompts);
        r.contextToSend.stDescription || delete Ee.stDescription, (!r.contextToSend.worldInfo || m.selectedWorldNames.length === 0) && delete Ee.currentLorebooks;
        const Le = Object.values(m.suggestedEntries).some((Ie) => Ie.length > 0);
        (!r.contextToSend.suggestedEntries || !Le) && delete Ee.suggestedLorebooks, m.blackListedEntries.length === 0 && delete Ee.blackListedEntries;
        const ge = B ? { worldName: B.worldName, entry: B.entry, mode: B.mode } : void 0, Te = h.enabled ? {
          onChunk: (Ie) => {
            const Ke = Ie.fullText.length > 200 ? "..." + Ie.fullText.slice(-200) : Ie.fullText;
            R({
              receivedChars: Ie.receivedChars,
              preview: Ke
            });
          }
        } : void 0, Ye = await eb({
          profileId: r.profileId,
          userPrompt: V,
          buildPromptOptions: ve,
          session: m,
          entriesGroupByWorldName: E,
          promptSettings: Ee,
          mainContextList: r.mainContextTemplatePresets[r.mainContextTemplatePreset].prompts.filter((Ie) => Ie.enabled).map((Ie) => ({ promptName: Ie.promptName, role: Ie.role })),
          maxResponseToken: r.maxResponseToken,
          continueFrom: ge,
          streamCallbacks: Te,
          signal: ae.signal
        }), ut = Ye.entries, at = Ye.failedRecord;
        at && (f((Ie) => {
          const Ke = Ie.failedParseRecords || [], ct = [at, ...Ke].slice(0, 10);
          return { ...Ie, failedParseRecords: ct };
        }), Object.keys(ut).length > 0 ? ye("warning", u.partialParseWarning || "") : ye("error", u.parseFailedSaved || "")), Object.keys(ut).length > 0 ? f(B ? (Ie) => {
          const Xe = structuredClone(Ie.suggestedEntries), Ke = B.worldName, ct = ut[Ke]?.[0];
          if (Xe[Ke] && ct) {
            const qn = Xe[Ke].findIndex(
              (On) => On.uid === B.entry.uid && On.comment === B.entry.comment
            );
            qn !== -1 && (Xe[Ke][qn] = ct);
          }
          return { ...Ie, suggestedEntries: Xe };
        } : (Ie) => {
          const Xe = structuredClone(Ie.suggestedEntries);
          for (const [Ke, ct] of Object.entries(ut)) {
            Xe[Ke] || (Xe[Ke] = []);
            for (const qn of ct)
              Xe[Ke].some((On) => On.uid === qn.uid && On.comment === qn.comment) || Xe[Ke].push(qn);
          }
          return { ...Ie, suggestedEntries: Xe };
        }) : at || ye("warning", u.noResults);
      } catch (ne) {
        if (ne.name === "AbortError") {
          console.log("[WorldInfoRecommender] Request cancelled by user");
          return;
        }
        console.error("[WorldInfoRecommender] Generation error:", ne);
        let he;
        const ve = ne instanceof Error ? ne.message : String(ne);
        ve === u.requestTimeout ? he = u.requestTimeout : ve.includes("CORS") || ve.includes("fetch") ? he = ` CORS 1) API  2)  3) : ${ve}` : ve.includes("timeout") || ve.includes("timed out") ? he = u.requestTimeout : he = `: ${ve}`, M(he), ye("error", he);
      } finally {
        O(!1), R(null), q.current = null;
      }
    },
    [r, m, E, u, h]
  ), te = se.useCallback(() => {
    q.current && (q.current.abort(), q.current = null);
  }, []), _e = se.useCallback(
    async (B, V, ae) => {
      try {
        const ne = await fe(B, ae);
        ne === "unchanged" ? ye("info", u.entryUnchanged(B.comment)) : ye("success", ne === "added" ? u.entryAdded : u.entryUpdated), f((he) => {
          const ve = { ...he.suggestedEntries };
          return ve[V] && (ve[V] = ve[V].filter(
            (Ee) => !(Ee.uid === B.uid && Ee.comment === B.comment)
          )), { ...he, suggestedEntries: ve };
        });
      } catch (ne) {
        console.error(ne);
        const he = ne?.message ? ` (${ne.message})` : "";
        ye("error", `${u.entryAddFailed(B.comment)}${he}`);
      }
    },
    [fe, u]
  ), be = async () => {
    const B = Object.values(m.suggestedEntries).flat().length;
    if (B === 0) return ye("warning", u.noEntriesToAdd);
    if (!await hn.Popup.show.confirm(
      u.addAllConfirmTitle,
      u.addAllConfirmMessage(B)
    )) return;
    O(!0);
    let ae = 0, ne = 0, he = 0;
    const ve = /* @__PURE__ */ new Set(), Ee = [];
    Object.entries(m.suggestedEntries).forEach(([ge, Te]) => {
      Te.forEach((Ye) => {
        const ut = g.includes(ge) ? ge : g[0] ?? "";
        ut && Ee.push({ worldName: ut, entry: Ye });
      });
    });
    const Le = structuredClone(E);
    for (const { worldName: ge, entry: Te } of Ee)
      try {
        Le[ge] || (Le[ge] = []);
        const Ye = Le[ge].find((Xe) => Xe.uid === Te.uid), ut = !!Ye;
        let at, Ie = "unchanged";
        if (ut) {
          const Xe = (Te.content || "") !== (Ye.content || ""), Ke = (Te.comment || "") !== (Ye.comment || ""), ct = (Te.key || []).slice().sort().join(",") !== (Ye.key || []).slice().sort().join(",");
          (Xe || Ke || ct) && (at = Ye, Ie = "updated");
        } else {
          const Xe = { entries: Object.fromEntries(Le[ge].map((ct) => [ct.uid, ct])) }, Ke = hl(ge, Xe);
          if (!Ke) throw new Error("Failed to create new World Info entry.");
          at = Ke, Le[ge].push(at), Ie = "added";
        }
        Ie !== "unchanged" && at && (Object.assign(at, {
          key: Te.key || [],
          content: Te.content || "",
          comment: Te.comment || ""
        }), ve.add(ge)), Ie === "added" ? ae++ : Ie === "updated" ? ne++ : he++;
      } catch (Ye) {
        console.error(Ye), ye("error", u.entryProcessFailed(Te.comment));
      }
    _(Le);
    for (const ge of ve)
      try {
        const Te = { entries: Object.fromEntries(Le[ge].map((Ye) => [Ye.uid, Ye])) };
        await hn.saveWorldInfo(ge, Te), hn.reloadWorldInfoEditor(ge, !0);
      } catch {
        ye("error", u.worldSaveFailed(ge));
      }
    f((ge) => ({ ...ge, suggestedEntries: {} })), ye("success", u.addAllResult(ae, ne, he)), O(!1);
  }, Ze = async () => {
    await hn.Popup.show.confirm(u.resetConfirmTitle, u.resetConfirmMessage) && (f((V) => ({
      ...V,
      suggestedEntries: {},
      blackListedEntries: [],
      selectedWorldNames: nl() ? [...g] : [],
      selectedEntryUids: {},
      failedParseRecords: []
    })), ye("success", u.resetSuccess));
  }, $e = (B, V, ae) => {
    f((ne) => {
      const he = { ...ne };
      ae && (he.blackListedEntries = [...he.blackListedEntries, `${V} (${B.comment})`]);
      const ve = { ...he.suggestedEntries };
      return ve[V] && (ve[V] = ve[V].filter(
        (Ee) => !(Ee.uid === B.uid && Ee.comment === B.comment)
      )), he.suggestedEntries = ve, he;
    });
  }, Je = (B) => {
    f((V) => ({
      ...V,
      failedParseRecords: (V.failedParseRecords || []).filter((ae) => ae.id !== B)
    }));
  }, et = (B, V, ae, ne) => {
    f((he) => {
      const ve = { ...he.suggestedEntries };
      if (ve[B]) {
        const Le = ve[B].findIndex(
          (ge) => ge.uid === V.uid && ge.comment === V.comment
        );
        if (Le !== -1) {
          const ge = { ...ae };
          V.uid !== void 0 && (ge.uid = V.uid), ve[B][Le] = ge;
        }
      }
      const Ee = { ...he, suggestedEntries: ve };
      return ne && (Ee.regexIds = ne), Ee;
    });
  }, Ht = se.useCallback(
    (B) => {
      f((V) => {
        const ae = structuredClone(V.suggestedEntries);
        let ne = 0;
        for (const [he, ve] of Object.entries(B))
          if (E[he]) {
            ae[he] || (ae[he] = []);
            for (const Ee of ve) {
              if (ae[he].some((Te) => Te.uid === Ee)) continue;
              const ge = E[he].find((Te) => Te.uid === Ee);
              ge && (ae[he].push(structuredClone(ge)), ne++);
            }
          }
        return ne > 0 && ye("success", u.importSuccess(ne)), { ...V, suggestedEntries: ae };
      });
    },
    [E, u]
  ), qt = se.useMemo(() => {
    const B = {};
    return m.selectedWorldNames.forEach((V) => {
      E[V] && (B[V] = E[V]);
    }), B;
  }, [m.selectedWorldNames, E]), Wt = se.useMemo(() => {
    const B = JSON.parse(JSON.stringify(qt)), V = /* @__PURE__ */ new Map();
    return Object.entries(m.suggestedEntries).forEach(([ae, ne]) => {
      ne.forEach((he) => {
        he.uid && V.set(he.uid, { worldName: ae, entry: he });
      });
    }), Object.entries(B).forEach(([, ae]) => {
      ae.forEach((ne, he) => {
        ne.uid && V.has(ne.uid) && (ae[he] = V.get(ne.uid).entry, V.delete(ne.uid));
      });
    }), V.forEach(({ worldName: ae, entry: ne }) => {
      B[ae] || (B[ae] = []), B[ae].some((he) => he.uid === ne.uid) || B[ae].push(ne);
    }), B;
  }, [qt, m.suggestedEntries]), en = (B) => {
    const V = /* @__PURE__ */ new Map();
    Object.entries(E).forEach(([ne, he]) => {
      he.forEach((ve) => {
        V.set(`${ne}::${ve.uid}`, ve);
      });
    });
    const ae = {};
    Object.entries(B).forEach(([ne, he]) => {
      he.forEach((ve) => {
        const Ee = `${ne}::${ve.uid}`, Le = V.get(Ee);
        let ge = !1;
        if (!Le)
          ge = !0;
        else {
          const Te = (ve.content || "") !== (Le.content || ""), Ye = (ve.comment || "") !== (Le.comment || ""), ut = (ve.key || []).slice().sort().join(",") !== (Le.key || []).slice().sort().join(",");
          (Te || Ye || ut) && (ge = !0);
        }
        ge && (ae[ne] || (ae[ne] = []), ae[ne].push(ve));
      });
    }), f((ne) => ({ ...ne, suggestedEntries: ae })), ye("success", u.globalReviseApplied);
  }, vt = se.useMemo(
    () => Object.keys(r.promptPresets).map((B) => ({ value: B, label: B })),
    [r.promptPresets]
  ), vn = se.useMemo(
    () => g.map((B) => ({ value: B, label: B })),
    [g]
  ), St = se.useMemo(
    () => Object.values(m.selectedEntryUids).reduce((B, V) => B + V.length, 0),
    [m.selectedEntryUids]
  );
  if (C)
    return /* @__PURE__ */ T.jsx("div", { children: a.loadingText });
  const me = Object.entries(m.suggestedEntries).flatMap(
    ([B, V]) => V.map((ae) => ({ worldName: B, entry: ae }))
  );
  return /* @__PURE__ */ T.jsxs(T.Fragment, { children: [
    /* @__PURE__ */ T.jsxs("div", { id: "worldInfoRecommenderPopup", children: [
      /* @__PURE__ */ T.jsxs("div", { className: "popup_header", children: [
        /* @__PURE__ */ T.jsx("h2", { children: a.title }),
        /* @__PURE__ */ T.jsx("div", { className: "popup_header_buttons", children: /* @__PURE__ */ T.jsxs(
          Ae,
          {
            className: "menu_button language-toggle",
            onClick: ce,
            title: a.languageButtonTooltip,
            children: [
              /* @__PURE__ */ T.jsx("span", { style: { fontSize: "1.1em", marginRight: "6px" }, children: "" }),
              /* @__PURE__ */ T.jsx("span", { children: a.languageButtonLabel(l) })
            ]
          }
        ) })
      ] }),
      /* @__PURE__ */ T.jsxs("div", { className: "container", children: [
        /* @__PURE__ */ T.jsxs("div", { className: "column", children: [
          /* @__PURE__ */ T.jsxs("div", { className: "card", children: [
            /* @__PURE__ */ T.jsx("h3", { children: a.connectionProfileTitle }),
            /* @__PURE__ */ T.jsxs("label", { className: "checkbox_label", style: { marginBottom: "10px" }, children: [
              /* @__PURE__ */ T.jsx(
                "input",
                {
                  type: "checkbox",
                  checked: h.enabled,
                  onChange: (B) => {
                    const V = Oe.getSettings();
                    V.directApi || (V.directApi = {
                      enabled: !1,
                      currentPreset: "default",
                      presets: {
                        default: {
                          name: "Default",
                          apiType: "openai",
                          apiUrl: "",
                          apiKey: "",
                          modelName: ""
                        }
                      },
                      apiType: "openai",
                      apiUrl: "",
                      apiKey: "",
                      modelName: ""
                    }), V.directApi.enabled = B.target.checked, Oe.saveSettings(), t();
                  }
                }
              ),
              a.directApiEnabled
            ] }),
            h.enabled ? /* @__PURE__ */ T.jsxs("div", { className: "direct-api-config", children: [
              /* @__PURE__ */ T.jsxs("div", { className: "direct-api-field", children: [
                /* @__PURE__ */ T.jsxs("label", { children: [
                  a.directApiPreset,
                  ":"
                ] }),
                /* @__PURE__ */ T.jsxs("div", { className: "direct-api-preset-wrapper", children: [
                  /* @__PURE__ */ T.jsx(
                    "select",
                    {
                      className: "text_pole",
                      style: { flex: 1 },
                      value: h.currentPreset || "default",
                      onChange: (B) => {
                        const V = B.target.value, ae = Oe.getSettings();
                        ae.directApi || (ae.directApi = { ...h });
                        const ne = ae.directApi.presets?.[V];
                        ne && (console.debug("[WorldInfoRecommender] Switching preset to:", V, ne), ae.directApi.currentPreset = V, ae.directApi.apiType = ne.apiType, ae.directApi.apiUrl = ne.apiUrl || "", ae.directApi.apiKey = ne.apiKey || "", ae.directApi.modelName = ne.modelName || "", Oe.saveSettings(), H([]), t());
                      },
                      children: Object.entries(h.presets || { default: { name: "Default" } }).map(([B, V]) => /* @__PURE__ */ T.jsx("option", { value: B, children: V.name || B }, B))
                    }
                  ),
                  /* @__PURE__ */ T.jsx(
                    Ae,
                    {
                      title: a.directApiSaveAsNewTooltip,
                      onClick: async () => {
                        const B = await hn.Popup.show.input(a.directApiPresetNamePrompt, "");
                        if (!B || typeof B != "string" || !B.trim()) return;
                        const V = Oe.getSettings();
                        if (!V.directApi) return;
                        V.directApi.presets || (V.directApi.presets = {});
                        const ae = `preset_${Date.now()}`;
                        V.directApi.presets[ae] = {
                          name: B.trim(),
                          apiType: V.directApi.apiType,
                          apiUrl: V.directApi.apiUrl,
                          apiKey: V.directApi.apiKey,
                          modelName: V.directApi.modelName
                        }, V.directApi.currentPreset = ae, Oe.saveSettings(), ye("success", a.directApiPresetSaved(B.trim())), t();
                      },
                      children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-plus" })
                    }
                  ),
                  /* @__PURE__ */ T.jsx(
                    Ae,
                    {
                      title: a.directApiRenamePresetTooltip,
                      onClick: async () => {
                        const B = h.currentPreset || "default", V = h.presets?.[B]?.name || B, ae = await hn.Popup.show.input(a.directApiPresetRenamePrompt, V);
                        if (!ae || typeof ae != "string" || !ae.trim() || ae.trim() === V) return;
                        const ne = Oe.getSettings();
                        ne.directApi?.presets?.[B] && (ne.directApi.presets[B].name = ae.trim(), Oe.saveSettings(), ye("success", a.directApiPresetRenamed(V, ae.trim())), t());
                      },
                      children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-pen" })
                    }
                  ),
                  /* @__PURE__ */ T.jsx(
                    Ae,
                    {
                      title: a.directApiDeletePresetTooltip,
                      disabled: Object.keys(h.presets || {}).length <= 1,
                      onClick: async () => {
                        const B = h.currentPreset || "default", V = h.presets?.[B]?.name || B;
                        if (Object.keys(h.presets || {}).length <= 1) {
                          ye("warning", a.directApiPresetCannotDeleteLast);
                          return;
                        }
                        if (!await hn.Popup.show.confirm(a.directApiPresetDeleteConfirm(V), "")) return;
                        const he = Oe.getSettings();
                        if (!he.directApi?.presets) return;
                        delete he.directApi.presets[B];
                        const Ee = Object.keys(he.directApi.presets)[0], Le = he.directApi.presets[Ee];
                        he.directApi.currentPreset = Ee, he.directApi.apiType = Le.apiType, he.directApi.apiUrl = Le.apiUrl, he.directApi.apiKey = Le.apiKey, he.directApi.modelName = Le.modelName, Oe.saveSettings(), ye("success", a.directApiPresetDeleted(V)), H([]), t();
                      },
                      children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-trash" })
                    }
                  )
                ] })
              ] }),
              /* @__PURE__ */ T.jsxs("div", { className: "direct-api-field", children: [
                /* @__PURE__ */ T.jsxs("label", { children: [
                  a.directApiType,
                  ":"
                ] }),
                /* @__PURE__ */ T.jsxs(
                  "select",
                  {
                    className: "text_pole",
                    value: h.apiType,
                    onChange: (B) => {
                      const V = Oe.getSettings();
                      if (!V.directApi) return;
                      const ae = B.target.value;
                      V.directApi.apiType = ae;
                      const ne = V.directApi.currentPreset || "default";
                      V.directApi.presets?.[ne] && (V.directApi.presets[ne].apiType = ae), Oe.saveSettings(), t();
                    },
                    children: [
                      /* @__PURE__ */ T.jsx("option", { value: "openai", children: "OpenAI" }),
                      /* @__PURE__ */ T.jsx("option", { value: "gemini", children: "Gemini" })
                    ]
                  }
                )
              ] }),
              /* @__PURE__ */ T.jsxs("div", { className: "direct-api-field", children: [
                /* @__PURE__ */ T.jsxs("label", { children: [
                  a.directApiUrl,
                  ":"
                ] }),
                /* @__PURE__ */ T.jsx(
                  "input",
                  {
                    type: "text",
                    className: "text_pole",
                    value: h.apiUrl,
                    onChange: (B) => {
                      const V = Oe.getSettings();
                      if (!V.directApi) return;
                      const ae = B.target.value;
                      V.directApi.apiUrl = ae;
                      const ne = V.directApi.currentPreset || "default";
                      V.directApi.presets?.[ne] && (V.directApi.presets[ne].apiUrl = ae), Oe.saveSettings(), t();
                    },
                    placeholder: "https://api.example.com/v1"
                  }
                )
              ] }),
              /* @__PURE__ */ T.jsxs("div", { className: "direct-api-field", children: [
                /* @__PURE__ */ T.jsxs("label", { children: [
                  a.directApiKey,
                  ":"
                ] }),
                /* @__PURE__ */ T.jsx(
                  "input",
                  {
                    type: "password",
                    className: "text_pole",
                    value: h.apiKey,
                    onChange: (B) => {
                      const V = Oe.getSettings();
                      if (!V.directApi) return;
                      const ae = B.target.value;
                      V.directApi.apiKey = ae;
                      const ne = V.directApi.currentPreset || "default";
                      V.directApi.presets?.[ne] && (V.directApi.presets[ne].apiKey = ae), Oe.saveSettings(), t();
                    },
                    placeholder: "sk-..."
                  }
                )
              ] }),
              /* @__PURE__ */ T.jsxs("div", { className: "direct-api-field", children: [
                /* @__PURE__ */ T.jsxs("label", { children: [
                  a.directApiModel,
                  ":"
                ] }),
                P.length > 0 ? /* @__PURE__ */ T.jsxs(
                  "select",
                  {
                    className: "text_pole",
                    value: h.modelName,
                    onChange: (B) => {
                      const V = Oe.getSettings();
                      if (!V.directApi) return;
                      const ae = B.target.value;
                      V.directApi.modelName = ae;
                      const ne = V.directApi.currentPreset || "default";
                      V.directApi.presets?.[ne] && (V.directApi.presets[ne].modelName = ae), Oe.saveSettings(), t();
                    },
                    children: [
                      /* @__PURE__ */ T.jsx("option", { value: "", children: "--  --" }),
                      P.map((B) => /* @__PURE__ */ T.jsx("option", { value: B, children: B }, B))
                    ]
                  }
                ) : /* @__PURE__ */ T.jsx(
                  "input",
                  {
                    type: "text",
                    className: "text_pole",
                    value: h.modelName,
                    onChange: (B) => {
                      const V = Oe.getSettings();
                      if (!V.directApi) return;
                      const ae = B.target.value;
                      V.directApi.modelName = ae;
                      const ne = V.directApi.currentPreset || "default";
                      V.directApi.presets?.[ne] && (V.directApi.presets[ne].modelName = ae), Oe.saveSettings(), t();
                    },
                    placeholder: "gpt-4 / gemini-pro / ..."
                  }
                )
              ] }),
              /* @__PURE__ */ T.jsxs("div", { className: "direct-api-buttons", children: [
                /* @__PURE__ */ T.jsxs(
                  Ae,
                  {
                    disabled: X,
                    onClick: async () => {
                      F(!0);
                      try {
                        const B = await E8(h);
                        B.success && B.models.length > 0 ? (H(B.models), ye("success", B.message)) : ye("error", B.message);
                      } finally {
                        F(!1);
                      }
                    },
                    children: [
                      /* @__PURE__ */ T.jsx("i", { className: `fa-solid ${X ? "fa-spinner fa-spin" : "fa-list"}`, style: { marginRight: "5px" } }),
                      X ? "..." : ""
                    ]
                  }
                ),
                /* @__PURE__ */ T.jsxs(
                  Ae,
                  {
                    onClick: async () => {
                      const B = await w8(h);
                      B.success ? ye("success", a.directApiTestSuccess) : ye("error", `${a.directApiTestFail}: ${B.message}`);
                    },
                    children: [
                      /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-plug", style: { marginRight: "5px" } }),
                      a.directApiTest
                    ]
                  }
                )
              ] })
            ] }) : /* @__PURE__ */ T.jsx("p", { className: "subtle", children: " API " })
          ] }),
          /* @__PURE__ */ T.jsxs("div", { className: "card", children: [
            /* @__PURE__ */ T.jsx("h3", { children: a.contextToSendTitle }),
            /* @__PURE__ */ T.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "5px" }, children: [
              /* @__PURE__ */ T.jsxs("label", { className: "checkbox_label", children: [
                /* @__PURE__ */ T.jsx(
                  "input",
                  {
                    type: "checkbox",
                    checked: r.contextToSend.stDescription,
                    onChange: (B) => re("stDescription", B.target.checked)
                  }
                ),
                a.descriptionCheckbox
              ] }),
              z !== "_global" && /* @__PURE__ */ T.jsxs("div", { className: "message-options", children: [
                /* @__PURE__ */ T.jsx("h4", { children: a.messagesTitle }),
                /* @__PURE__ */ T.jsxs(
                  "select",
                  {
                    className: "text_pole",
                    value: r.contextToSend.messages.type,
                    onChange: (B) => re("messages", {
                      ...r.contextToSend.messages,
                      type: B.target.value
                    }),
                    children: [
                      /* @__PURE__ */ T.jsx("option", { value: "none", children: a.messagesDropdown.none }),
                      /* @__PURE__ */ T.jsx("option", { value: "all", children: a.messagesDropdown.all }),
                      /* @__PURE__ */ T.jsx("option", { value: "first", children: a.messagesDropdown.first }),
                      /* @__PURE__ */ T.jsx("option", { value: "last", children: a.messagesDropdown.last }),
                      /* @__PURE__ */ T.jsx("option", { value: "range", children: a.messagesDropdown.range })
                    ]
                  }
                ),
                r.contextToSend.messages.type === "first" && /* @__PURE__ */ T.jsx("div", { style: { marginTop: "10px" }, children: /* @__PURE__ */ T.jsxs("label", { children: [
                  a.messagesFirstLabelBeforeInput,
                  /* @__PURE__ */ T.jsx(
                    "input",
                    {
                      type: "number",
                      className: "text_pole small message-input",
                      min: "1",
                      value: r.contextToSend.messages.first ?? 10,
                      onChange: (B) => re("messages", {
                        ...r.contextToSend.messages,
                        first: parseInt(B.target.value) || 10
                      })
                    }
                  ),
                  a.messagesFirstLabelAfterInput
                ] }) }),
                r.contextToSend.messages.type === "last" && /* @__PURE__ */ T.jsx("div", { style: { marginTop: "10px" }, children: /* @__PURE__ */ T.jsxs("label", { children: [
                  a.messagesLastLabelBeforeInput,
                  /* @__PURE__ */ T.jsx(
                    "input",
                    {
                      type: "number",
                      className: "text_pole small message-input",
                      min: "1",
                      value: r.contextToSend.messages.last ?? 10,
                      onChange: (B) => re("messages", {
                        ...r.contextToSend.messages,
                        last: parseInt(B.target.value) || 10
                      })
                    }
                  ),
                  a.messagesLastLabelAfterInput
                ] }) }),
                r.contextToSend.messages.type === "range" && /* @__PURE__ */ T.jsx("div", { style: { marginTop: "10px" }, children: /* @__PURE__ */ T.jsxs("label", { children: [
                  a.rangeLabel,
                  /* @__PURE__ */ T.jsx(
                    "input",
                    {
                      type: "number",
                      className: "text_pole small message-input",
                      min: "0",
                      placeholder: a.messageCountPlaceholders.start,
                      value: r.contextToSend.messages.range?.start ?? 0,
                      onChange: (B) => re("messages", {
                        ...r.contextToSend.messages,
                        range: {
                          ...r.contextToSend.messages.range,
                          start: parseInt(B.target.value) || 0
                        }
                      })
                    }
                  ),
                  a.rangeConnector,
                  /* @__PURE__ */ T.jsx(
                    "input",
                    {
                      type: "number",
                      className: "text_pole small message-input",
                      min: "1",
                      placeholder: a.messageCountPlaceholders.end,
                      value: r.contextToSend.messages.range?.end ?? 10,
                      onChange: (B) => re("messages", {
                        ...r.contextToSend.messages,
                        range: {
                          ...r.contextToSend.messages.range,
                          end: parseInt(B.target.value) || 10
                        }
                      })
                    }
                  )
                ] }) })
              ] }),
              /* @__PURE__ */ T.jsxs("label", { className: "checkbox_label", children: [
                /* @__PURE__ */ T.jsx(
                  "input",
                  {
                    type: "checkbox",
                    checked: r.contextToSend.charCard,
                    onChange: (B) => re("charCard", B.target.checked)
                  }
                ),
                a.charCardLabel
              ] }),
              b.length > 0 && /* @__PURE__ */ T.jsxs("div", { children: [
                /* @__PURE__ */ T.jsx("h4", { children: a.selectCharacterTitle }),
                /* @__PURE__ */ T.jsx("select", { className: "text_pole", title: a.selectCharacterTooltip, children: b.map((B) => /* @__PURE__ */ T.jsx("option", { value: B.avatar, children: B.name }, B.avatar)) })
              ] }),
              /* @__PURE__ */ T.jsxs("label", { className: "checkbox_label", children: [
                /* @__PURE__ */ T.jsx(
                  "input",
                  {
                    type: "checkbox",
                    checked: r.contextToSend.authorNote,
                    onChange: (B) => re("authorNote", B.target.checked)
                  }
                ),
                a.authorNoteLabel
              ] }),
              /* @__PURE__ */ T.jsxs("label", { className: "checkbox_label", children: [
                /* @__PURE__ */ T.jsx(
                  "input",
                  {
                    type: "checkbox",
                    checked: r.contextToSend.worldInfo,
                    onChange: (B) => re("worldInfo", B.target.checked)
                  }
                ),
                a.worldInfoLabel
              ] }),
              /* @__PURE__ */ T.jsxs("div", { children: [
                /* @__PURE__ */ T.jsx("h4", { children: a.lorebooksTitle }),
                /* @__PURE__ */ T.jsx(
                  ab,
                  {
                    items: vn,
                    value: m.selectedWorldNames,
                    onChange: (B) => {
                      f((V) => {
                        const ae = { ...V.selectedEntryUids };
                        return V.selectedWorldNames.filter((he) => !B.includes(he)).forEach((he) => delete ae[he]), { ...V, selectedWorldNames: B, selectedEntryUids: ae };
                      });
                    },
                    multiple: !0,
                    enableSearch: !0
                  }
                )
              ] }),
              m.selectedWorldNames.length > 0 && /* @__PURE__ */ T.jsxs("div", { className: "entry-selection-control", children: [
                /* @__PURE__ */ T.jsxs(
                  Ae,
                  {
                    className: "menu_button",
                    onClick: () => c(!0),
                    title: a.selectEntriesTooltip,
                    children: [
                      /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-list-check" }),
                      a.selectEntriesButton
                    ]
                  }
                ),
                /* @__PURE__ */ T.jsx("span", { children: a.selectedEntriesSummary(St) })
              ] }),
              /* @__PURE__ */ T.jsxs("label", { className: "checkbox_label", children: [
                /* @__PURE__ */ T.jsx(
                  "input",
                  {
                    type: "checkbox",
                    checked: r.contextToSend.suggestedEntries,
                    onChange: (B) => re("suggestedEntries", B.target.checked)
                  }
                ),
                a.existingSuggestionsLabel
              ] })
            ] })
          ] }),
          /* @__PURE__ */ T.jsxs("div", { className: "card", children: [
            /* @__PURE__ */ T.jsxs("label", { children: [
              a.maxContextLabel,
              /* @__PURE__ */ T.jsxs(
                "select",
                {
                  className: "text_pole",
                  title: a.maxContextLabel,
                  value: r.maxContextType,
                  onChange: (B) => Z("maxContextType", B.target.value),
                  children: [
                    /* @__PURE__ */ T.jsx("option", { value: "profile", children: a.maxContextOptions.profile }),
                    /* @__PURE__ */ T.jsx("option", { value: "sampler", children: a.maxContextOptions.sampler }),
                    /* @__PURE__ */ T.jsx("option", { value: "custom", children: a.maxContextOptions.custom })
                  ]
                }
              )
            ] }),
            r.maxContextType === "custom" && /* @__PURE__ */ T.jsx("label", { style: { marginTop: "10px" }, children: /* @__PURE__ */ T.jsx(
              "input",
              {
                type: "number",
                className: "text_pole",
                min: "1",
                step: "1",
                placeholder: a.maxContextPlaceholder,
                value: r.maxContextValue,
                onChange: (B) => Z("maxContextValue", parseInt(B.target.value) || 2048)
              }
            ) }),
            /* @__PURE__ */ T.jsxs("label", { style: { display: "block", marginTop: "10px" }, children: [
              a.maxResponseTokensLabel,
              /* @__PURE__ */ T.jsx(
                "input",
                {
                  type: "number",
                  className: "text_pole",
                  min: "1",
                  step: "1",
                  placeholder: a.maxResponseTokensPlaceholder,
                  value: r.maxResponseToken,
                  onChange: (B) => Z("maxResponseToken", parseInt(B.target.value) || 256)
                }
              )
            ] })
          ] })
        ] }),
        /* @__PURE__ */ T.jsxs("div", { className: "wide-column", children: [
          /* @__PURE__ */ T.jsxs("div", { className: "card", children: [
            /* @__PURE__ */ T.jsx("h3", { children: a.promptSectionTitle }),
            /* @__PURE__ */ T.jsx(
              Mf,
              {
                label: a.promptPresetLabel,
                items: vt,
                value: r.promptPreset,
                readOnlyValues: ["default"],
                onChange: (B) => Z("promptPreset", B ?? "default"),
                onItemsChange: (B) => {
                  const V = B.reduce(
                    (ae, ne) => (ae[ne.value] = r.promptPresets[ne.value] ?? { content: "" }, ae),
                    {}
                  );
                  Z("promptPresets", V);
                },
                enableCreate: !0,
                enableRename: !0,
                enableDelete: !0
              }
            ),
            /* @__PURE__ */ T.jsx(
              Er,
              {
                value: r.promptPresets[r.promptPreset]?.content ?? "",
                onChange: (B) => {
                  const V = { ...r.promptPresets };
                  V[r.promptPreset] && (V[r.promptPreset].content = B.target.value, Z("promptPresets", V));
                },
                placeholder: a.promptPlaceholder,
                rows: 4,
                style: { marginTop: "5px", width: "100%" }
              }
            ),
            /* @__PURE__ */ T.jsx("div", { style: { display: "flex", gap: "8px", alignItems: "center", marginTop: "5px" }, children: D ? /* @__PURE__ */ T.jsxs(
              Ae,
              {
                onClick: () => we(),
                disabled: j,
                className: "menu_button interactable",
                title: D,
                children: [
                  /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-rotate-right" }),
                  " ",
                  a.retryButton
                ]
              }
            ) : /* @__PURE__ */ T.jsxs(T.Fragment, { children: [
              /* @__PURE__ */ T.jsx(
                Ae,
                {
                  onClick: () => we(),
                  disabled: j,
                  className: "menu_button interactable",
                  children: j ? a.generatingButton : a.sendPromptButton
                }
              ),
              j && /* @__PURE__ */ T.jsx(
                Ae,
                {
                  onClick: te,
                  className: "menu_button interactable",
                  title: "",
                  children: /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-stop" })
                }
              )
            ] }) }),
            j && Q && /* @__PURE__ */ T.jsxs("div", { style: {
              marginTop: "10px",
              padding: "10px",
              backgroundColor: "var(--black30a)",
              borderRadius: "5px",
              border: "1px solid var(--SmartThemeBorderColor)"
            }, children: [
              /* @__PURE__ */ T.jsxs("div", { style: {
                display: "flex",
                alignItems: "center",
                gap: "8px",
                marginBottom: "8px",
                color: "var(--SmartThemeBodyColor)",
                fontSize: "0.9em"
              }, children: [
                /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-spinner fa-spin" }),
                /* @__PURE__ */ T.jsxs("span", { children: [
                  " ",
                  /* @__PURE__ */ T.jsx("strong", { children: Q.receivedChars.toLocaleString() }),
                  " "
                ] })
              ] }),
              /* @__PURE__ */ T.jsx("pre", { style: {
                margin: 0,
                padding: "8px",
                backgroundColor: "var(--black50a)",
                borderRadius: "4px",
                fontSize: "0.8em",
                whiteSpace: "pre-wrap",
                wordBreak: "break-word",
                maxHeight: "150px",
                overflowY: "auto",
                color: "var(--SmartThemeBodyColor)",
                fontFamily: "monospace"
              }, children: Q.preview })
            ] }),
            j && !Q && !h.enabled && /* @__PURE__ */ T.jsxs("div", { style: {
              marginTop: "10px",
              padding: "10px",
              backgroundColor: "var(--black30a)",
              borderRadius: "5px",
              display: "flex",
              alignItems: "center",
              gap: "8px",
              color: "var(--SmartThemeBodyColor)",
              fontSize: "0.9em"
            }, children: [
              /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-spinner fa-spin" }),
              /* @__PURE__ */ T.jsx("span", { children: " Connection Manager ..." })
            ] }),
            D && /* @__PURE__ */ T.jsx("div", { style: { marginTop: "10px", padding: "10px", backgroundColor: "var(--black30a)", borderRadius: "5px", border: "1px solid var(--red)" }, children: /* @__PURE__ */ T.jsxs("p", { style: { margin: "0", color: "var(--SmartThemeBodyColor)", fontSize: "0.9em", wordBreak: "break-word" }, children: [
              /* @__PURE__ */ T.jsx("strong", { style: { color: "var(--red)" }, children: ":" }),
              " ",
              D
            ] }) })
          ] }),
          /* @__PURE__ */ T.jsxs("div", { className: "card", children: [
            /* @__PURE__ */ T.jsx("h3", { children: a.suggestedEntriesTitle }),
            /* @__PURE__ */ T.jsxs("div", { className: "actions", children: [
              /* @__PURE__ */ T.jsx(
                Ae,
                {
                  onClick: be,
                  disabled: j || me.length === 0,
                  className: "menu_button interactable",
                  children: a.addAllButton
                }
              ),
              /* @__PURE__ */ T.jsxs(
                Ae,
                {
                  onClick: () => N(!0),
                  disabled: j,
                  className: "menu_button interactable",
                  title: a.globalReviseTooltip,
                  children: [
                    /* @__PURE__ */ T.jsx("i", { className: "fa-solid fa-comments" }),
                    " ",
                    a.globalReviseButton
                  ]
                }
              ),
              /* @__PURE__ */ T.jsx(
                Ae,
                {
                  onClick: () => w(!0),
                  disabled: j,
                  className: "menu_button interactable",
                  title: a.importEntryTooltip,
                  children: a.importEntryButton
                }
              ),
              /* @__PURE__ */ T.jsx(Ae, { onClick: Ze, disabled: j, className: "menu_button interactable", children: a.resetButton })
            ] }),
            /* @__PURE__ */ T.jsxs("div", { children: [
              me.length === 0 && (m.failedParseRecords || []).length === 0 && /* @__PURE__ */ T.jsx("p", { children: a.emptyStateMessage }),
              me.map(({ worldName: B, entry: V }) => /* @__PURE__ */ T.jsx(
                XT,
                {
                  initialWorldName: B,
                  entry: V,
                  allWorldNames: g,
                  existingEntry: E[B]?.find((ae) => ae.uid === V.uid),
                  sessionRegexIds: m.regexIds,
                  onAdd: _e,
                  onRemove: $e,
                  onContinue: we,
                  onUpdate: et,
                  entriesGroupByWorldName: E,
                  sessionForContext: m,
                  contextToSend: r.contextToSend
                },
                `${B}-${V.uid}-${V.comment}`
              )),
              (m.failedParseRecords || []).map((B) => /* @__PURE__ */ T.jsx(
                KT,
                {
                  record: B,
                  language: s,
                  onRemove: Je
                },
                B.id
              ))
            ] })
          ] })
        ] })
      ] })
    ] }),
    I && /* @__PURE__ */ T.jsx(
      rr,
      {
        type: Yt.CONFIRM,
        content: /* @__PURE__ */ T.jsx(
          l0,
          {
            ref: $,
            entriesByWorldName: qt,
            initialSelectedUids: m.selectedEntryUids,
            title: a.selectEntriesDialogTitle
          }
        ),
        onComplete: (B) => {
          if (B && $.current) {
            const V = $.current.getSelection();
            f((ae) => ({ ...ae, selectedEntryUids: V }));
          }
          c(!1);
        },
        options: { wide: !0 }
      }
    ),
    S && /* @__PURE__ */ T.jsx(
      rr,
      {
        type: Yt.CONFIRM,
        content: /* @__PURE__ */ T.jsx(
          l0,
          {
            ref: oe,
            entriesByWorldName: E,
            initialSelectedUids: {},
            title: a.importEntriesDialogTitle
          }
        ),
        onComplete: (B) => {
          if (B && oe.current) {
            const V = oe.current.getSelection();
            Ht(V);
          }
          w(!1);
        },
        options: { wide: !0 }
      }
    ),
    A && /* @__PURE__ */ T.jsx(
      rr,
      {
        type: Yt.DISPLAY,
        content: /* @__PURE__ */ T.jsx(
          Rb,
          {
            target: { type: "global" },
            initialState: Wt,
            onClose: () => N(!1),
            onApply: en,
            sessionForContext: m,
            allEntries: E,
            contextToSend: r.contextToSend
          }
        ),
        onComplete: () => N(!1),
        options: { wide: !0, large: !0 }
      }
    )
  ] });
}, e4 = () => {
  const [t, r] = se.useState(!1), s = () => r(!0), a = () => r(!1);
  return window.openWorldInfoRecommenderPopup = s, t ? /* @__PURE__ */ T.jsx(
    rr,
    {
      content: /* @__PURE__ */ T.jsx(WT, {}),
      type: Yt.DISPLAY,
      onComplete: a,
      options: {
        large: !0,
        wide: !0
      }
    }
  ) : null;
};
function t4() {
  function t(r) {
    if (!r)
      return null;
    const s = [], a = Array.isArray(r) ? r : [r];
    for (const u of a) {
      let l = u.trim();
      l.startsWith("[") && l.endsWith("]") && (l = l.slice(1, -1));
      let h = "", m = !1, f = "";
      for (let g = 0; g < l.length; g++) {
        const v = l[g];
        v === '"' || v === "'" ? g > 0 && l[g - 1] === "\\" ? h = h.slice(0, -1) + v : m ? v === f ? (m = !1, h.trim() && s.push(h.trim()), h = "", f = "") : h += v : (m = !0, f = v) : v === "," && !m ? (h.trim() && s.push(h.trim()), h = "") : h += v;
      }
      h.trim() && s.push(h.trim());
    }
    return s;
  }
  Ne.SlashCommandParser.addCommandObject(
    Ne.SlashCommand.fromProps({
      name: "world-info-recommender-popup-open",
      helpString: "Open World Info Recommender popup",
      unnamedArgumentList: [],
      callback: async (r, s) => (window.openWorldInfoRecommenderPopup && window.openWorldInfoRecommenderPopup(), !1),
      returns: Ne.ARGUMENT_TYPE.BOOLEAN
    })
  ), Ne.SlashCommandParser.addCommandObject(
    Ne.SlashCommand.fromProps({
      name: "world-info-recommender-run",
      helpString: `
              <div class="inline-drawer">
                  <details>
                      <summary>Run the World Info Recommender AI automatically.</summary>
                      <div class="list-group">
                          Executes the recommendation process using the specified parameters.
                          <br>
                          - <b>profile</b>: (Required) Connection profile ID/name to use for the AI request.
                          <br>
                          - <b>prompt</b>: (Required) The core task/instruction for the AI. Passed as unnamed argument(s).
                          <br>
                          - <b>lorebooks</b>: List of lorebook names to include as context. Defaults to currently active worlds.
                          <br>
                          - <b>allowed-ops</b>: List of operations allowed ('add', 'update'). Defaults to 'add,update'.
                          <br>
                          - <b>editable-entries</b>: Comma-separated list of specific entries allowed for update, format: <code>WorldName.EntryComment</code> or <code>WorldName.UID</code>. If provided, only these entries can be updated. Adds are still allowed if 'add' is in allowed-ops. Defaults to allowing updates for all entries.
                          <br>
                          - <b>context</b>: Context parts ('stDescription', 'messages', 'charCard', 'authorNote', 'worldInfo'). Defaults to extension settings.
                          <br>
                          - <b>messages</b>: Message range ('all', 'none', 'first:N', 'last:N', 'range:S-E'). Defaults to extension settings.
                          <br>
                          - <b>max-context</b>: Override context token limit (number). Defaults to extension settings.
                          <br>
                          - <b>max-response</b>: Override response token limit (number). Defaults to extension settings.
                          <br>
                          - <b>main-context-template</b>: Override main context template preset (string). Defaults to extension settings.
                          <br>
                          - <b>silent</b>: Suppress success/error messages (boolean). Defaults to false.
                      </div>
                      <div>
                          <b>Example:</b>
                          <pre><code>/wir-run profile=your_profile_id lorebooks=[CommonEvents,Characters] allowed-ops=[add] "Create 3 new entries about recent events in the tavern based on the last 5 messages."</code></pre>
                          <pre><code>/wir-run profile=your_profile_name editable-entries=[Characters.12345,Locations.The Docks] messages=last:10 prompt="Update the description for character UID 12345 and The Docks based on the recent fight."</code></pre>
                      </div>
                  </details>
              </div>
          `,
      returns: Ne.ARGUMENT_TYPE.BOOLEAN,
      namedArgumentList: [
        Ne.SlashCommandNamedArgument.fromProps({
          name: "profile",
          description: "Connection Profile ID/name to use for the AI request.",
          typeList: [Ne.ARGUMENT_TYPE.STRING],
          isRequired: !0,
          enumProvider: ew
        }),
        Ne.SlashCommandNamedArgument.fromProps({
          name: "lorebooks",
          description: "List of lorebook names to include as context (defaults to active).",
          typeList: [Ne.ARGUMENT_TYPE.LIST],
          isRequired: !1,
          acceptsMultiple: !0,
          enumProvider: y2.worlds
        }),
        Ne.SlashCommandNamedArgument.fromProps({
          name: "allowed-ops",
          description: "Operations allowed: 'add', 'update'.",
          typeList: [Ne.ARGUMENT_TYPE.LIST],
          isRequired: !1,
          defaultValue: "[add,update]",
          enumList: ["add", "update"]
        }),
        Ne.SlashCommandNamedArgument.fromProps({
          name: "editable-entries",
          description: "Specific entries allowed for update: 'WorldName.Comment' or 'WorldName.UID' (comma-separated).",
          typeList: [Ne.ARGUMENT_TYPE.STRING],
          isRequired: !1
        }),
        Ne.SlashCommandNamedArgument.fromProps({
          name: "context",
          description: "Context parts: 'stDescription', 'messages', 'charCard', 'authorNote', 'worldInfo'.",
          typeList: [Ne.ARGUMENT_TYPE.LIST],
          isRequired: !1,
          acceptsMultiple: !0,
          // Default is handled by falling back to settings
          enumList: ["stDescription", "messages", "charCard", "authorNote", "worldInfo"]
        }),
        Ne.SlashCommandNamedArgument.fromProps({
          name: "messages",
          description: "Message range: 'all', 'none', 'first:N', 'last:N', 'range:S-E'.",
          typeList: [Ne.ARGUMENT_TYPE.STRING],
          isRequired: !1
          // Default is handled by falling back to settings
        }),
        Ne.SlashCommandNamedArgument.fromProps({
          name: "max-context",
          description: "Override context token limit.",
          typeList: [Ne.ARGUMENT_TYPE.NUMBER],
          isRequired: !1
        }),
        Ne.SlashCommandNamedArgument.fromProps({
          name: "max-response",
          description: "Override response token limit.",
          typeList: [Ne.ARGUMENT_TYPE.NUMBER],
          isRequired: !1
        }),
        Ne.SlashCommandNamedArgument.fromProps({
          name: "main-context-template",
          description: "Override main context template preset.",
          typeList: [Ne.ARGUMENT_TYPE.STRING],
          isRequired: !1
        }),
        Ne.SlashCommandNamedArgument.fromProps({
          name: "silent",
          description: "Suppress success/error messages.",
          typeList: [Ne.ARGUMENT_TYPE.BOOLEAN],
          isRequired: !1,
          defaultValue: !1
        })
      ],
      unnamedArgumentList: [
        Ne.SlashCommandArgument.fromProps({
          description: "The prompt/task for the AI.",
          typeList: [Ne.ARGUMENT_TYPE.STRING],
          isRequired: !0,
          acceptsMultiple: !0
          // Allows prompts with spaces
        })
      ],
      // The callback function to execute
      callback: async (r, s) => {
        const a = r.silent ?? !1;
        try {
          const u = Oe.getSettings(), l = Array.isArray(s) ? s.join(" ") : s, h = r.profile;
          let m;
          if (!l)
            throw new Error("Prompt argument is required.");
          if (!h)
            throw new Error("Profile argument is required.");
          const f = Ne.extensionSettings?.connectionManager?.profiles?.find(
            ($) => $.id === h || $.name === h
          );
          if (!f)
            throw new Error(`Profile with ID "${h}" not found.`);
          m = f.id;
          const g = t(r.lorebooks);
          let v;
          if (g !== null) {
            v = {};
            for (const $ of g) {
              const oe = await Ne.loadWorldInfo($);
              oe && (v[$] = Object.values(oe.entries));
            }
          } else
            v = await ul(["all"], !0, mn);
          const E = Object.keys(v);
          let _;
          if (g !== null) {
            if (_ = g.map(($) => $.trim()).filter(($) => E.includes($) ? !0 : (a || ye("warning", `Specified lorebook "${$}" is not active or does not exist. Ignoring.`), !1)), _.length === 0)
              throw new Error("No valid lorebooks specified or active.");
          } else
            _ = E;
          _.length === 0 && (a || ye("warning", "No active lorebooks found to use for context."));
          const b = t(r["allowed-ops"]), p = b !== null ? b : ["add", "update"], C = p.includes("add"), k = p.includes("update"), j = /* @__PURE__ */ new Set(), O = t(r["editable-entries"]);
          O !== null && O.forEach(($) => {
            j.add($.trim());
          });
          const I = j.size > 0, c = t(r.context), S = { ...u.contextToSend };
          if (c !== null) {
            const $ = c.map((oe) => oe.trim());
            S.stDescription = $.includes("stdescription"), S.messages.type = $.includes("messages") ? S.messages.type : "none", S.charCard = $.includes("charcard"), S.authorNote = $.includes("authornote"), S.worldInfo = $.includes("worldinfo"), S.suggestedEntries = !1;
          }
          if (r.messages && S.messages.type !== "none") {
            const $ = r.messages.toLowerCase().trim();
            if ($ === "all") S.messages.type = "all";
            else if ($ === "none") S.messages.type = "none";
            else if ($.startsWith("first:"))
              S.messages.type = "first", S.messages.first = parseInt($.split(":")[1]) || 10;
            else if ($.startsWith("last:"))
              S.messages.type = "last", S.messages.last = parseInt($.split(":")[1]) || 10;
            else if ($.startsWith("range:")) {
              const oe = $.split(":")[1].split("-");
              S.messages.type = "range", S.messages.range = {
                start: parseInt(oe[0]) || 0,
                end: parseInt(oe[1]) || 10
              };
            } else
              a || ye("warning", `Invalid 'messages' argument format: "${r.messages}". Using default.`);
          }
          const w = {
            // Let runWorldInfoRecommendation determine these from profile
            presetName: void 0,
            contextName: void 0,
            instructName: void 0,
            syspromptName: void 0,
            // Use derived contextToSend settings
            ignoreCharacterFields: !S.charCard,
            ignoreWorldInfo: !0,
            // Handled manually inside runWorldInfoRecommendation
            ignoreAuthorNote: !S.authorNote,
            maxContext: r["max-context"] ?? (u.maxContextType === "custom" ? u.maxContextValue : u.maxContextType === "profile" ? "preset" : "active"),
            includeNames: !!an,
            targetCharacterId: an ? mn : void 0
            // Simplification: Use current char in group context
          };
          switch (S.messages.type) {
            case "none":
              w.messageIndexesBetween = { start: -1, end: -1 };
              break;
            case "first":
              w.messageIndexesBetween = { start: 0, end: S.messages.first ?? 10 };
              break;
            case "last":
              const $ = S.messages.last ?? 10, oe = Ne.chat?.length ?? 0;
              w.messageIndexesBetween = {
                end: Math.max(0, oe - 1),
                start: Math.max(0, oe - $)
              };
              break;
            case "range":
              S.messages.range && (w.messageIndexesBetween = {
                start: S.messages.range.start,
                end: S.messages.range.end
              });
              break;
            case "all":
            default:
              break;
          }
          const A = {
            selectedWorldNames: _,
            suggestedEntries: {},
            // Start with no pre-existing suggestions
            blackListedEntries: [],
            // Start with no blacklist
            regexIds: {},
            // Start with no regexes
            selectedEntryUids: {},
            failedParseRecords: []
            // Start with no failed records
          }, N = r["max-response"] ? parseInt(r["max-response"]) : void 0, D = structuredClone(u.prompts);
          S.stDescription || delete D.stDescription, (!S.worldInfo || _.length === 0) && delete D.currentLorebooks, delete D.suggestedLorebooks;
          const M = {
            profileId: m,
            userPrompt: l,
            buildPromptOptions: w,
            session: A,
            entriesGroupByWorldName: v,
            // Pass the current state
            promptSettings: D,
            mainContextList: u.mainContextTemplatePresets[r["main-context-template"] ?? u.mainContextTemplatePreset].prompts.filter(($) => $.enabled).map(($) => ({
              promptName: $.promptName,
              role: $.role
            })),
            maxResponseToken: N ?? u.maxResponseToken
          };
          a || ye("info", "Running World Info Recommender...");
          const H = (await eb(M)).entries;
          if (Object.keys(H).length === 0)
            return a || ye("info", "AI returned no suggestions."), !0;
          let X = 0, F = 0, Q = 0;
          const R = /* @__PURE__ */ new Set(), q = structuredClone(v);
          for (const [$, oe] of Object.entries(H)) {
            let z = $;
            if (!_.includes(z))
              if (E.includes(z)) {
                a || ye(
                  "warning",
                  `AI suggested entry for "${z}", but it wasn't in the specified 'lorebooks'. Skipping ${oe.length} entries.`
                ), Q += oe.length;
                continue;
              } else if (_.length > 0)
                z = _[0], a || ye(
                  "warning",
                  `AI suggested entry for non-existent/inactive world "${$}". Attempting to place in "${z}".`
                );
              else {
                a || ye(
                  "error",
                  `AI suggested entry for "${$}", but no valid target lorebook available. Skipping ${oe.length} entries.`
                ), Q += oe.length;
                continue;
              }
            for (const Z of oe) {
              if (q[z]?.some(
                (ce) => ce.uid === Z.uid && ce.comment === Z.comment
              )) {
                if (!k) {
                  a || ye(
                    "info",
                    `Skipping update for "${z}.${Z.comment || Z.uid}" (updates disallowed).`
                  ), Q++;
                  continue;
                }
                if (I) {
                  const ce = `${z}.${Z.comment}`, fe = `${z}.${Z.uid}`;
                  if (!j.has(ce) && !j.has(fe)) {
                    a || ye(
                      "info",
                      `Skipping update for "${z}.${Z.comment || Z.uid}" (not in editable-entries).`
                    ), Q++;
                    continue;
                  }
                }
              } else if (!C) {
                a || ye(
                  "info",
                  `Skipping add for "${z}.${Z.comment || "New Entry"}" (adds disallowed).`
                ), Q++;
                continue;
              }
              try {
                const { status: ce } = W8(Z, z, q);
                ce === "added" ? X++ : F++, R.add(z);
              } catch (ce) {
                a || ye(
                  "error",
                  `Failed to prepare modification for "${z}.${Z.comment || Z.uid}": ${ce.message}`
                ), Q++;
              }
            }
          }
          if (R.size > 0) {
            a || ye("info", `Saving changes to ${R.size} lorebook(s)...`);
            for (const $ of R) {
              const oe = q[$], z = { entries: {} };
              oe.forEach((Z) => z.entries[Z.uid] = Z), await Ne.saveWorldInfo($, z), Ne.reloadWorldInfoEditor($, !0);
            }
          }
          if (!a) {
            const $ = [];
            (X > 0 || F > 0 || Q > 0) && $.push(`
                <div class="results-summary">
                  <ul>
                  <li><strong>Added:</strong> ${X}</li>
                  <li><strong>Updated:</strong> ${F}</li>
                  <li><strong>Skipped:</strong> ${Q}</li>
                  </ul>
                </div>
                `), R.size > 0 && $.push(`
                <div class="modified-worlds">
                  <strong>Modified Lorebooks:</strong>
                  <ul>
                  ${Array.from(R).map((z) => `<li>${z}</li>`).join("")}
                  </ul>
                </div>
                `);
            const oe = $.length > 0 ? `
                <div class="wir-results">
                  <h4>World Info Recommender Results:</h4>
                  ${$.join("")}
                </div>
                ` : `
                <div class="wir-results">
                  <h4>World Info Recommender:</h4>
                  <p>No changes were made</p>
                </div>
                `;
            ye("success", oe, { escapeHtml: !1 });
          }
          return !0;
        } catch (u) {
          return console.error("Error running world-info-recommender-run command:", u), a || ye("error", `World Info Recommender command failed: ${u.message}`), !1;
        }
      }
    })
  );
}
const Fs = SillyTavern.getContext();
async function n4() {
  const t = await Fs.renderExtensionTemplateAsync(
    `third-party/${Ni}`,
    "templates/settings"
  );
  document.querySelector("#extensions_settings").insertAdjacentHTML("beforeend", t);
  const r = document.createElement("div"), s = document.querySelector(
    ".worldInfoRecommender_settings .inline-drawer-content"
  );
  s && (s.prepend(r), ov.createRoot(r).render(
    /* @__PURE__ */ T.jsx(cl.StrictMode, { children: /* @__PURE__ */ T.jsx(cw, {}) })
  ));
  const a = '<div class="menu_button fa-brands fa-wpexplorer interactable worldInfoRecommender-icon" title="World Info Recommender"></div>', u = [
    document.querySelector(".form_create_bottom_buttons_block"),
    document.querySelector("#GroupFavDelOkBack"),
    document.querySelector("#rm_buttons_container") ?? document.querySelector("#form_character_search_form")
  ], l = document.createElement("div");
  document.body.appendChild(l), ov.createRoot(l).render(
    /* @__PURE__ */ T.jsx(cl.StrictMode, { children: /* @__PURE__ */ T.jsx(e4, {}) })
  ), u.forEach((m) => {
    if (!m) return;
    const f = document.createElement("div");
    f.innerHTML = a.trim();
    const g = f.firstChild;
    g && (m.prepend(g), g.addEventListener("click", () => {
      window.openWorldInfoRecommenderPopup && window.openWorldInfoRecommenderPopup();
    }));
  });
}
function r4() {
  return console.log("[WorldInfoRecommender] Checking imports..."), Fs.ConnectionManagerRequestService ? Fs.getCharacterCardFields ? Fs.getWorldInfoPrompt ? Fs.reloadWorldInfoEditor ? (console.log("[WorldInfoRecommender] All imports OK"), !0) : (console.error("[WorldInfoRecommender] Missing: reloadWorldInfoEditor"), !1) : (console.error("[WorldInfoRecommender] Missing: getWorldInfoPrompt"), !1) : (console.error("[WorldInfoRecommender] Missing: getCharacterCardFields"), !1) : (console.error("[WorldInfoRecommender] Missing: ConnectionManagerRequestService"), !1);
}
console.log("[WorldInfoRecommender] Extension script loaded, starting initialization...");
r4() ? (console.log("[WorldInfoRecommender] Starting settings initialization..."), aw().then(() => {
  console.log("[WorldInfoRecommender] Settings initialized, calling init()..."), n4(), console.log("[WorldInfoRecommender] Init complete, initializing commands..."), t4(), console.log("[WorldInfoRecommender] Fully initialized!");
}).catch((t) => {
  console.error("[WorldInfoRecommender] Initialization failed:", t);
})) : (ye("error", `[${Ni}] Make sure ST is updated.`), console.error("[WorldInfoRecommender] Import check failed!"));
export {
  n4 as init
};
